var VN=Object.defineProperty;var $N=(t,e,n)=>e in t?VN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var j=(t,e,n)=>$N(t,typeof e!="symbol"?e+"":e,n);function zN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function ST(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bT={exports:{}},Ef={},TT={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ic=Symbol.for("react.element"),qN=Symbol.for("react.portal"),HN=Symbol.for("react.fragment"),WN=Symbol.for("react.strict_mode"),GN=Symbol.for("react.profiler"),KN=Symbol.for("react.provider"),JN=Symbol.for("react.context"),QN=Symbol.for("react.forward_ref"),XN=Symbol.for("react.suspense"),YN=Symbol.for("react.memo"),ZN=Symbol.for("react.lazy"),q_=Symbol.iterator;function eD(t){return t===null||typeof t!="object"?null:(t=q_&&t[q_]||t["@@iterator"],typeof t=="function"?t:null)}var AT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},CT=Object.assign,IT={};function yl(t,e,n){this.props=t,this.context=e,this.refs=IT,this.updater=n||AT}yl.prototype.isReactComponent={};yl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function kT(){}kT.prototype=yl.prototype;function v0(t,e,n){this.props=t,this.context=e,this.refs=IT,this.updater=n||AT}var _0=v0.prototype=new kT;_0.constructor=v0;CT(_0,yl.prototype);_0.isPureReactComponent=!0;var H_=Array.isArray,RT=Object.prototype.hasOwnProperty,x0={current:null},PT={key:!0,ref:!0,__self:!0,__source:!0};function NT(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)RT.call(e,r)&&!PT.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ic,type:t,key:i,ref:o,props:s,_owner:x0.current}}function tD(t,e){return{$$typeof:Ic,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function E0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ic}function nD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var W_=/\/+/g;function Jp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nD(""+t.key):e.toString(36)}function Ud(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ic:case qN:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Jp(o,0):r,H_(s)?(n="",t!=null&&(n=t.replace(W_,"$&/")+"/"),Ud(s,e,n,"",function(u){return u})):s!=null&&(E0(s)&&(s=tD(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(W_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",H_(t))for(var l=0;l<t.length;l++){i=t[l];var a=r+Jp(i,l);o+=Ud(i,e,n,a,s)}else if(a=eD(t),typeof a=="function")for(t=a.call(t),l=0;!(i=t.next()).done;)i=i.value,a=r+Jp(i,l++),o+=Ud(i,e,n,a,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function od(t,e,n){if(t==null)return t;var r=[],s=0;return Ud(t,r,"","",function(i){return e.call(n,i,s++)}),r}function rD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fn={current:null},Ld={transition:null},sD={ReactCurrentDispatcher:Fn,ReactCurrentBatchConfig:Ld,ReactCurrentOwner:x0};function DT(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:od,forEach:function(t,e,n){od(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return od(t,function(){e++}),e},toArray:function(t){return od(t,function(e){return e})||[]},only:function(t){if(!E0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Oe.Component=yl;Oe.Fragment=HN;Oe.Profiler=GN;Oe.PureComponent=v0;Oe.StrictMode=WN;Oe.Suspense=XN;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sD;Oe.act=DT;Oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=CT({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=x0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)RT.call(e,a)&&!PT.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ic,type:t.type,key:s,ref:i,props:r,_owner:o}};Oe.createContext=function(t){return t={$$typeof:JN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KN,_context:t},t.Consumer=t};Oe.createElement=NT;Oe.createFactory=function(t){var e=NT.bind(null,t);return e.type=t,e};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(t){return{$$typeof:QN,render:t}};Oe.isValidElement=E0;Oe.lazy=function(t){return{$$typeof:ZN,_payload:{_status:-1,_result:t},_init:rD}};Oe.memo=function(t,e){return{$$typeof:YN,type:t,compare:e===void 0?null:e}};Oe.startTransition=function(t){var e=Ld.transition;Ld.transition={};try{t()}finally{Ld.transition=e}};Oe.unstable_act=DT;Oe.useCallback=function(t,e){return Fn.current.useCallback(t,e)};Oe.useContext=function(t){return Fn.current.useContext(t)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(t){return Fn.current.useDeferredValue(t)};Oe.useEffect=function(t,e){return Fn.current.useEffect(t,e)};Oe.useId=function(){return Fn.current.useId()};Oe.useImperativeHandle=function(t,e,n){return Fn.current.useImperativeHandle(t,e,n)};Oe.useInsertionEffect=function(t,e){return Fn.current.useInsertionEffect(t,e)};Oe.useLayoutEffect=function(t,e){return Fn.current.useLayoutEffect(t,e)};Oe.useMemo=function(t,e){return Fn.current.useMemo(t,e)};Oe.useReducer=function(t,e,n){return Fn.current.useReducer(t,e,n)};Oe.useRef=function(t){return Fn.current.useRef(t)};Oe.useState=function(t){return Fn.current.useState(t)};Oe.useSyncExternalStore=function(t,e,n){return Fn.current.useSyncExternalStore(t,e,n)};Oe.useTransition=function(){return Fn.current.useTransition()};Oe.version="18.3.1";TT.exports=Oe;var N=TT.exports;const S0=ST(N),iD=zN({__proto__:null,default:S0},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oD=N,aD=Symbol.for("react.element"),lD=Symbol.for("react.fragment"),uD=Object.prototype.hasOwnProperty,cD=oD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dD={key:!0,ref:!0,__self:!0,__source:!0};function MT(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)uD.call(e,r)&&!dD.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:aD,type:t,key:i,ref:o,props:s,_owner:cD.current}}Ef.Fragment=lD;Ef.jsx=MT;Ef.jsxs=MT;bT.exports=Ef;var p=bT.exports,Tg={},OT={exports:{}},vr={},jT={exports:{}},UT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,me){var Ee=te.length;te.push(me);e:for(;0<Ee;){var Ie=Ee-1>>>1,We=te[Ie];if(0<s(We,me))te[Ie]=me,te[Ee]=We,Ee=Ie;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var me=te[0],Ee=te.pop();if(Ee!==me){te[0]=Ee;e:for(var Ie=0,We=te.length,pt=We>>>1;Ie<pt;){var St=2*(Ie+1)-1,ut=te[St],Ge=St+1,nt=te[Ge];if(0>s(ut,Ee))Ge<We&&0>s(nt,ut)?(te[Ie]=nt,te[Ge]=Ee,Ie=Ge):(te[Ie]=ut,te[St]=Ee,Ie=St);else if(Ge<We&&0>s(nt,Ee))te[Ie]=nt,te[Ge]=Ee,Ie=Ge;else break e}}return me}function s(te,me){var Ee=te.sortIndex-me.sortIndex;return Ee!==0?Ee:te.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],d=1,h=null,f=3,g=!1,w=!1,E=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(te){for(var me=n(u);me!==null;){if(me.callback===null)r(u);else if(me.startTime<=te)r(u),me.sortIndex=me.expirationTime,e(a,me);else break;me=n(u)}}function D(te){if(E=!1,T(te),!w)if(n(a)!==null)w=!0,je(L);else{var me=n(u);me!==null&&et(D,me.startTime-te)}}function L(te,me){w=!1,E&&(E=!1,v(C),C=-1),g=!0;var Ee=f;try{for(T(me),h=n(a);h!==null&&(!(h.expirationTime>me)||te&&!P());){var Ie=h.callback;if(typeof Ie=="function"){h.callback=null,f=h.priorityLevel;var We=Ie(h.expirationTime<=me);me=t.unstable_now(),typeof We=="function"?h.callback=We:h===n(a)&&r(a),T(me)}else r(a);h=n(a)}if(h!==null)var pt=!0;else{var St=n(u);St!==null&&et(D,St.startTime-me),pt=!1}return pt}finally{h=null,f=Ee,g=!1}}var V=!1,I=null,C=-1,_=5,k=-1;function P(){return!(t.unstable_now()-k<_)}function O(){if(I!==null){var te=t.unstable_now();k=te;var me=!0;try{me=I(!0,te)}finally{me?S():(V=!1,I=null)}}else V=!1}var S;if(typeof x=="function")S=function(){x(O)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ie=Z.port2;Z.port1.onmessage=O,S=function(){ie.postMessage(null)}}else S=function(){b(O,0)};function je(te){I=te,V||(V=!0,S())}function et(te,me){C=b(function(){te(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,je(L))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(te){switch(f){case 1:case 2:case 3:var me=3;break;default:me=f}var Ee=f;f=me;try{return te()}finally{f=Ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,me){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Ee=f;f=te;try{return me()}finally{f=Ee}},t.unstable_scheduleCallback=function(te,me,Ee){var Ie=t.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?Ie+Ee:Ie):Ee=Ie,te){case 1:var We=-1;break;case 2:We=250;break;case 5:We=1073741823;break;case 4:We=1e4;break;default:We=5e3}return We=Ee+We,te={id:d++,callback:me,priorityLevel:te,startTime:Ee,expirationTime:We,sortIndex:-1},Ee>Ie?(te.sortIndex=Ee,e(u,te),n(a)===null&&te===n(u)&&(E?(v(C),C=-1):E=!0,et(D,Ee-Ie))):(te.sortIndex=We,e(a,te),w||g||(w=!0,je(L))),te},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(te){var me=f;return function(){var Ee=f;f=me;try{return te.apply(this,arguments)}finally{f=Ee}}}})(UT);jT.exports=UT;var hD=jT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fD=N,yr=hD;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var LT=new Set,qu={};function Yo(t,e){Ja(t,e),Ja(t+"Capture",e)}function Ja(t,e){for(qu[t]=e,t=0;t<e.length;t++)LT.add(e[t])}var Bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ag=Object.prototype.hasOwnProperty,pD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,G_={},K_={};function mD(t){return Ag.call(K_,t)?!0:Ag.call(G_,t)?!1:pD.test(t)?K_[t]=!0:(G_[t]=!0,!1)}function gD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yD(t,e,n,r){if(e===null||typeof e>"u"||gD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yn[t]=new Bn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yn[e]=new Bn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yn[t]=new Bn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yn[t]=new Bn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yn[t]=new Bn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yn[t]=new Bn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yn[t]=new Bn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yn[t]=new Bn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yn[t]=new Bn(t,5,!1,t.toLowerCase(),null,!1,!1)});var b0=/[\-:]([a-z])/g;function T0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(b0,T0);yn[e]=new Bn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(b0,T0);yn[e]=new Bn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(b0,T0);yn[e]=new Bn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yn[t]=new Bn(t,1,!1,t.toLowerCase(),null,!1,!1)});yn.xlinkHref=new Bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yn[t]=new Bn(t,1,!1,t.toLowerCase(),null,!0,!0)});function A0(t,e,n,r){var s=yn.hasOwnProperty(e)?yn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yD(e,n,s,r)&&(n=null),r||s===null?mD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ys=fD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ad=Symbol.for("react.element"),va=Symbol.for("react.portal"),_a=Symbol.for("react.fragment"),C0=Symbol.for("react.strict_mode"),Cg=Symbol.for("react.profiler"),FT=Symbol.for("react.provider"),BT=Symbol.for("react.context"),I0=Symbol.for("react.forward_ref"),Ig=Symbol.for("react.suspense"),kg=Symbol.for("react.suspense_list"),k0=Symbol.for("react.memo"),wi=Symbol.for("react.lazy"),VT=Symbol.for("react.offscreen"),J_=Symbol.iterator;function Jl(t){return t===null||typeof t!="object"?null:(t=J_&&t[J_]||t["@@iterator"],typeof t=="function"?t:null)}var _t=Object.assign,Qp;function au(t){if(Qp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qp=e&&e[1]||""}return`
`+Qp+t}var Xp=!1;function Yp(t,e){if(!t||Xp)return"";Xp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Xp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?au(t):""}function wD(t){switch(t.tag){case 5:return au(t.type);case 16:return au("Lazy");case 13:return au("Suspense");case 19:return au("SuspenseList");case 0:case 2:case 15:return t=Yp(t.type,!1),t;case 11:return t=Yp(t.type.render,!1),t;case 1:return t=Yp(t.type,!0),t;default:return""}}function Rg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _a:return"Fragment";case va:return"Portal";case Cg:return"Profiler";case C0:return"StrictMode";case Ig:return"Suspense";case kg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BT:return(t.displayName||"Context")+".Consumer";case FT:return(t._context.displayName||"Context")+".Provider";case I0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k0:return e=t.displayName||null,e!==null?e:Rg(t.type)||"Memo";case wi:e=t._payload,t=t._init;try{return Rg(t(e))}catch{}}return null}function vD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rg(e);case 8:return e===C0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $T(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _D(t){var e=$T(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ld(t){t._valueTracker||(t._valueTracker=_D(t))}function zT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$T(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ch(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pg(t,e){var n=e.checked;return _t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Q_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qT(t,e){e=e.checked,e!=null&&A0(t,"checked",e,!1)}function Ng(t,e){qT(t,e);var n=Wi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dg(t,e.type,Wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function X_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dg(t,e,n){(e!=="number"||ch(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var lu=Array.isArray;function ja(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return _t({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Y_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(lu(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wi(n)}}function HT(t,e){var n=Wi(e.value),r=Wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Z_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function WT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Og(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?WT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ud,GT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ud=ud||document.createElement("div"),ud.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ud.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _u={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xD=["Webkit","ms","Moz","O"];Object.keys(_u).forEach(function(t){xD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_u[e]=_u[t]})});function KT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_u.hasOwnProperty(t)&&_u[t]?(""+e).trim():e+"px"}function JT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=KT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ED=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jg(t,e){if(e){if(ED[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Ug(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lg=null;function R0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fg=null,Ua=null,La=null;function ex(t){if(t=Pc(t)){if(typeof Fg!="function")throw Error(J(280));var e=t.stateNode;e&&(e=Cf(e),Fg(t.stateNode,t.type,e))}}function QT(t){Ua?La?La.push(t):La=[t]:Ua=t}function XT(){if(Ua){var t=Ua,e=La;if(La=Ua=null,ex(t),e)for(t=0;t<e.length;t++)ex(e[t])}}function YT(t,e){return t(e)}function ZT(){}var Zp=!1;function eA(t,e,n){if(Zp)return t(e,n);Zp=!0;try{return YT(t,e,n)}finally{Zp=!1,(Ua!==null||La!==null)&&(ZT(),XT())}}function Wu(t,e){var n=t.stateNode;if(n===null)return null;var r=Cf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Bg=!1;if(Bs)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){Bg=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch{Bg=!1}function SD(t,e,n,r,s,i,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var xu=!1,dh=null,hh=!1,Vg=null,bD={onError:function(t){xu=!0,dh=t}};function TD(t,e,n,r,s,i,o,l,a){xu=!1,dh=null,SD.apply(bD,arguments)}function AD(t,e,n,r,s,i,o,l,a){if(TD.apply(this,arguments),xu){if(xu){var u=dh;xu=!1,dh=null}else throw Error(J(198));hh||(hh=!0,Vg=u)}}function Zo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tx(t){if(Zo(t)!==t)throw Error(J(188))}function CD(t){var e=t.alternate;if(!e){if(e=Zo(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return tx(s),t;if(i===r)return tx(s),e;i=i.sibling}throw Error(J(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function nA(t){return t=CD(t),t!==null?rA(t):null}function rA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rA(t);if(e!==null)return e;t=t.sibling}return null}var sA=yr.unstable_scheduleCallback,nx=yr.unstable_cancelCallback,ID=yr.unstable_shouldYield,kD=yr.unstable_requestPaint,Nt=yr.unstable_now,RD=yr.unstable_getCurrentPriorityLevel,P0=yr.unstable_ImmediatePriority,iA=yr.unstable_UserBlockingPriority,fh=yr.unstable_NormalPriority,PD=yr.unstable_LowPriority,oA=yr.unstable_IdlePriority,Sf=null,fs=null;function ND(t){if(fs&&typeof fs.onCommitFiberRoot=="function")try{fs.onCommitFiberRoot(Sf,t,void 0,(t.current.flags&128)===128)}catch{}}var Hr=Math.clz32?Math.clz32:OD,DD=Math.log,MD=Math.LN2;function OD(t){return t>>>=0,t===0?32:31-(DD(t)/MD|0)|0}var cd=64,dd=4194304;function uu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ph(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=uu(l):(i&=o,i!==0&&(r=uu(i)))}else o=n&~s,o!==0?r=uu(o):i!==0&&(r=uu(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Hr(e),s=1<<n,r|=t[n],e&=~s;return r}function jD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Hr(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=jD(l,e)):a<=e&&(t.expiredLanes|=l),i&=~l}}function $g(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function aA(){var t=cd;return cd<<=1,!(cd&4194240)&&(cd=64),t}function em(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function kc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hr(e),t[e]=n}function LD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Hr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function N0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Hr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ze=0;function lA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uA,D0,cA,dA,hA,zg=!1,hd=[],Ni=null,Di=null,Mi=null,Gu=new Map,Ku=new Map,xi=[],FD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rx(t,e){switch(t){case"focusin":case"focusout":Ni=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":Gu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ku.delete(e.pointerId)}}function Xl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Pc(e),e!==null&&D0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function BD(t,e,n,r,s){switch(e){case"focusin":return Ni=Xl(Ni,t,e,n,r,s),!0;case"dragenter":return Di=Xl(Di,t,e,n,r,s),!0;case"mouseover":return Mi=Xl(Mi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Gu.set(i,Xl(Gu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ku.set(i,Xl(Ku.get(i)||null,t,e,n,r,s)),!0}return!1}function fA(t){var e=bo(t.target);if(e!==null){var n=Zo(e);if(n!==null){if(e=n.tag,e===13){if(e=tA(n),e!==null){t.blockedOn=e,hA(t.priority,function(){cA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Lg=r,n.target.dispatchEvent(r),Lg=null}else return e=Pc(n),e!==null&&D0(e),t.blockedOn=n,!1;e.shift()}return!0}function sx(t,e,n){Fd(t)&&n.delete(e)}function VD(){zg=!1,Ni!==null&&Fd(Ni)&&(Ni=null),Di!==null&&Fd(Di)&&(Di=null),Mi!==null&&Fd(Mi)&&(Mi=null),Gu.forEach(sx),Ku.forEach(sx)}function Yl(t,e){t.blockedOn===e&&(t.blockedOn=null,zg||(zg=!0,yr.unstable_scheduleCallback(yr.unstable_NormalPriority,VD)))}function Ju(t){function e(s){return Yl(s,t)}if(0<hd.length){Yl(hd[0],t);for(var n=1;n<hd.length;n++){var r=hd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ni!==null&&Yl(Ni,t),Di!==null&&Yl(Di,t),Mi!==null&&Yl(Mi,t),Gu.forEach(e),Ku.forEach(e),n=0;n<xi.length;n++)r=xi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xi.length&&(n=xi[0],n.blockedOn===null);)fA(n),n.blockedOn===null&&xi.shift()}var Fa=Ys.ReactCurrentBatchConfig,mh=!0;function $D(t,e,n,r){var s=Ze,i=Fa.transition;Fa.transition=null;try{Ze=1,M0(t,e,n,r)}finally{Ze=s,Fa.transition=i}}function zD(t,e,n,r){var s=Ze,i=Fa.transition;Fa.transition=null;try{Ze=4,M0(t,e,n,r)}finally{Ze=s,Fa.transition=i}}function M0(t,e,n,r){if(mh){var s=qg(t,e,n,r);if(s===null)cm(t,e,r,gh,n),rx(t,r);else if(BD(s,t,e,n,r))r.stopPropagation();else if(rx(t,r),e&4&&-1<FD.indexOf(t)){for(;s!==null;){var i=Pc(s);if(i!==null&&uA(i),i=qg(t,e,n,r),i===null&&cm(t,e,r,gh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else cm(t,e,r,null,n)}}var gh=null;function qg(t,e,n,r){if(gh=null,t=R0(r),t=bo(t),t!==null)if(e=Zo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gh=t,null}function pA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RD()){case P0:return 1;case iA:return 4;case fh:case PD:return 16;case oA:return 536870912;default:return 16}default:return 16}}var Ci=null,O0=null,Bd=null;function mA(){if(Bd)return Bd;var t,e=O0,n=e.length,r,s="value"in Ci?Ci.value:Ci.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Bd=s.slice(t,1<r?1-r:void 0)}function Vd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fd(){return!0}function ix(){return!1}function _r(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fd:ix,this.isPropagationStopped=ix,this}return _t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fd)},persist:function(){},isPersistent:fd}),e}var wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j0=_r(wl),Rc=_t({},wl,{view:0,detail:0}),qD=_r(Rc),tm,nm,Zl,bf=_t({},Rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zl&&(Zl&&t.type==="mousemove"?(tm=t.screenX-Zl.screenX,nm=t.screenY-Zl.screenY):nm=tm=0,Zl=t),tm)},movementY:function(t){return"movementY"in t?t.movementY:nm}}),ox=_r(bf),HD=_t({},bf,{dataTransfer:0}),WD=_r(HD),GD=_t({},Rc,{relatedTarget:0}),rm=_r(GD),KD=_t({},wl,{animationName:0,elapsedTime:0,pseudoElement:0}),JD=_r(KD),QD=_t({},wl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XD=_r(QD),YD=_t({},wl,{data:0}),ax=_r(YD),ZD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=t3[t])?!!e[t]:!1}function U0(){return n3}var r3=_t({},Rc,{key:function(t){if(t.key){var e=ZD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?e3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U0,charCode:function(t){return t.type==="keypress"?Vd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s3=_r(r3),i3=_t({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lx=_r(i3),o3=_t({},Rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U0}),a3=_r(o3),l3=_t({},wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),u3=_r(l3),c3=_t({},bf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),d3=_r(c3),h3=[9,13,27,32],L0=Bs&&"CompositionEvent"in window,Eu=null;Bs&&"documentMode"in document&&(Eu=document.documentMode);var f3=Bs&&"TextEvent"in window&&!Eu,gA=Bs&&(!L0||Eu&&8<Eu&&11>=Eu),ux=" ",cx=!1;function yA(t,e){switch(t){case"keyup":return h3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xa=!1;function p3(t,e){switch(t){case"compositionend":return wA(e);case"keypress":return e.which!==32?null:(cx=!0,ux);case"textInput":return t=e.data,t===ux&&cx?null:t;default:return null}}function m3(t,e){if(xa)return t==="compositionend"||!L0&&yA(t,e)?(t=mA(),Bd=O0=Ci=null,xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gA&&e.locale!=="ko"?null:e.data;default:return null}}var g3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!g3[t.type]:e==="textarea"}function vA(t,e,n,r){QT(r),e=yh(e,"onChange"),0<e.length&&(n=new j0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Su=null,Qu=null;function y3(t){RA(t,0)}function Tf(t){var e=ba(t);if(zT(e))return t}function w3(t,e){if(t==="change")return e}var _A=!1;if(Bs){var sm;if(Bs){var im="oninput"in document;if(!im){var hx=document.createElement("div");hx.setAttribute("oninput","return;"),im=typeof hx.oninput=="function"}sm=im}else sm=!1;_A=sm&&(!document.documentMode||9<document.documentMode)}function fx(){Su&&(Su.detachEvent("onpropertychange",xA),Qu=Su=null)}function xA(t){if(t.propertyName==="value"&&Tf(Qu)){var e=[];vA(e,Qu,t,R0(t)),eA(y3,e)}}function v3(t,e,n){t==="focusin"?(fx(),Su=e,Qu=n,Su.attachEvent("onpropertychange",xA)):t==="focusout"&&fx()}function _3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tf(Qu)}function x3(t,e){if(t==="click")return Tf(e)}function E3(t,e){if(t==="input"||t==="change")return Tf(e)}function S3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jr=typeof Object.is=="function"?Object.is:S3;function Xu(t,e){if(Jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ag.call(e,s)||!Jr(t[s],e[s]))return!1}return!0}function px(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mx(t,e){var n=px(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=px(n)}}function EA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?EA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function SA(){for(var t=window,e=ch();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ch(t.document)}return e}function F0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function b3(t){var e=SA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&EA(n.ownerDocument.documentElement,n)){if(r!==null&&F0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=mx(n,i);var o=mx(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var T3=Bs&&"documentMode"in document&&11>=document.documentMode,Ea=null,Hg=null,bu=null,Wg=!1;function gx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wg||Ea==null||Ea!==ch(r)||(r=Ea,"selectionStart"in r&&F0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bu&&Xu(bu,r)||(bu=r,r=yh(Hg,"onSelect"),0<r.length&&(e=new j0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ea)))}function pd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sa={animationend:pd("Animation","AnimationEnd"),animationiteration:pd("Animation","AnimationIteration"),animationstart:pd("Animation","AnimationStart"),transitionend:pd("Transition","TransitionEnd")},om={},bA={};Bs&&(bA=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function Af(t){if(om[t])return om[t];if(!Sa[t])return t;var e=Sa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in bA)return om[t]=e[n];return t}var TA=Af("animationend"),AA=Af("animationiteration"),CA=Af("animationstart"),IA=Af("transitionend"),kA=new Map,yx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function so(t,e){kA.set(t,e),Yo(e,[t])}for(var am=0;am<yx.length;am++){var lm=yx[am],A3=lm.toLowerCase(),C3=lm[0].toUpperCase()+lm.slice(1);so(A3,"on"+C3)}so(TA,"onAnimationEnd");so(AA,"onAnimationIteration");so(CA,"onAnimationStart");so("dblclick","onDoubleClick");so("focusin","onFocus");so("focusout","onBlur");so(IA,"onTransitionEnd");Ja("onMouseEnter",["mouseout","mouseover"]);Ja("onMouseLeave",["mouseout","mouseover"]);Ja("onPointerEnter",["pointerout","pointerover"]);Ja("onPointerLeave",["pointerout","pointerover"]);Yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I3=new Set("cancel close invalid load scroll toggle".split(" ").concat(cu));function wx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AD(r,e,void 0,t),t.currentTarget=null}function RA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;wx(s,l,u),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;wx(s,l,u),i=a}}}if(hh)throw t=Vg,hh=!1,Vg=null,t}function dt(t,e){var n=e[Xg];n===void 0&&(n=e[Xg]=new Set);var r=t+"__bubble";n.has(r)||(PA(e,t,2,!1),n.add(r))}function um(t,e,n){var r=0;e&&(r|=4),PA(n,t,r,e)}var md="_reactListening"+Math.random().toString(36).slice(2);function Yu(t){if(!t[md]){t[md]=!0,LT.forEach(function(n){n!=="selectionchange"&&(I3.has(n)||um(n,!1,t),um(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[md]||(e[md]=!0,um("selectionchange",!1,e))}}function PA(t,e,n,r){switch(pA(e)){case 1:var s=$D;break;case 4:s=zD;break;default:s=M0}n=s.bind(null,e,n,t),s=void 0,!Bg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function cm(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=bo(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}eA(function(){var u=i,d=R0(n),h=[];e:{var f=kA.get(t);if(f!==void 0){var g=j0,w=t;switch(t){case"keypress":if(Vd(n)===0)break e;case"keydown":case"keyup":g=s3;break;case"focusin":w="focus",g=rm;break;case"focusout":w="blur",g=rm;break;case"beforeblur":case"afterblur":g=rm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ox;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=WD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=a3;break;case TA:case AA:case CA:g=JD;break;case IA:g=u3;break;case"scroll":g=qD;break;case"wheel":g=d3;break;case"copy":case"cut":case"paste":g=XD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=lx}var E=(e&4)!==0,b=!E&&t==="scroll",v=E?f!==null?f+"Capture":null:f;E=[];for(var x=u,T;x!==null;){T=x;var D=T.stateNode;if(T.tag===5&&D!==null&&(T=D,v!==null&&(D=Wu(x,v),D!=null&&E.push(Zu(x,D,T)))),b)break;x=x.return}0<E.length&&(f=new g(f,w,null,n,d),h.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Lg&&(w=n.relatedTarget||n.fromElement)&&(bo(w)||w[Vs]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=u,w=w?bo(w):null,w!==null&&(b=Zo(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(E=ox,D="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(E=lx,D="onPointerLeave",v="onPointerEnter",x="pointer"),b=g==null?f:ba(g),T=w==null?f:ba(w),f=new E(D,x+"leave",g,n,d),f.target=b,f.relatedTarget=T,D=null,bo(d)===u&&(E=new E(v,x+"enter",w,n,d),E.target=T,E.relatedTarget=b,D=E),b=D,g&&w)t:{for(E=g,v=w,x=0,T=E;T;T=da(T))x++;for(T=0,D=v;D;D=da(D))T++;for(;0<x-T;)E=da(E),x--;for(;0<T-x;)v=da(v),T--;for(;x--;){if(E===v||v!==null&&E===v.alternate)break t;E=da(E),v=da(v)}E=null}else E=null;g!==null&&vx(h,f,g,E,!1),w!==null&&b!==null&&vx(h,b,w,E,!0)}}e:{if(f=u?ba(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var L=w3;else if(dx(f))if(_A)L=E3;else{L=_3;var V=v3}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(L=x3);if(L&&(L=L(t,u))){vA(h,L,n,d);break e}V&&V(t,f,u),t==="focusout"&&(V=f._wrapperState)&&V.controlled&&f.type==="number"&&Dg(f,"number",f.value)}switch(V=u?ba(u):window,t){case"focusin":(dx(V)||V.contentEditable==="true")&&(Ea=V,Hg=u,bu=null);break;case"focusout":bu=Hg=Ea=null;break;case"mousedown":Wg=!0;break;case"contextmenu":case"mouseup":case"dragend":Wg=!1,gx(h,n,d);break;case"selectionchange":if(T3)break;case"keydown":case"keyup":gx(h,n,d)}var I;if(L0)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else xa?yA(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(gA&&n.locale!=="ko"&&(xa||C!=="onCompositionStart"?C==="onCompositionEnd"&&xa&&(I=mA()):(Ci=d,O0="value"in Ci?Ci.value:Ci.textContent,xa=!0)),V=yh(u,C),0<V.length&&(C=new ax(C,t,null,n,d),h.push({event:C,listeners:V}),I?C.data=I:(I=wA(n),I!==null&&(C.data=I)))),(I=f3?p3(t,n):m3(t,n))&&(u=yh(u,"onBeforeInput"),0<u.length&&(d=new ax("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=I))}RA(h,e)})}function Zu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wu(t,n),i!=null&&r.unshift(Zu(t,i,s)),i=Wu(t,e),i!=null&&r.push(Zu(t,i,s))),t=t.return}return r}function da(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vx(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,s?(a=Wu(n,i),a!=null&&o.unshift(Zu(n,a,l))):s||(a=Wu(n,i),a!=null&&o.push(Zu(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var k3=/\r\n?/g,R3=/\u0000|\uFFFD/g;function _x(t){return(typeof t=="string"?t:""+t).replace(k3,`
`).replace(R3,"")}function gd(t,e,n){if(e=_x(e),_x(t)!==e&&n)throw Error(J(425))}function wh(){}var Gg=null,Kg=null;function Jg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qg=typeof setTimeout=="function"?setTimeout:void 0,P3=typeof clearTimeout=="function"?clearTimeout:void 0,xx=typeof Promise=="function"?Promise:void 0,N3=typeof queueMicrotask=="function"?queueMicrotask:typeof xx<"u"?function(t){return xx.resolve(null).then(t).catch(D3)}:Qg;function D3(t){setTimeout(function(){throw t})}function dm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ju(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ju(e)}function Oi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ex(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vl=Math.random().toString(36).slice(2),hs="__reactFiber$"+vl,ec="__reactProps$"+vl,Vs="__reactContainer$"+vl,Xg="__reactEvents$"+vl,M3="__reactListeners$"+vl,O3="__reactHandles$"+vl;function bo(t){var e=t[hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vs]||n[hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ex(t);t!==null;){if(n=t[hs])return n;t=Ex(t)}return e}t=n,n=t.parentNode}return null}function Pc(t){return t=t[hs]||t[Vs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ba(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function Cf(t){return t[ec]||null}var Yg=[],Ta=-1;function io(t){return{current:t}}function ft(t){0>Ta||(t.current=Yg[Ta],Yg[Ta]=null,Ta--)}function lt(t,e){Ta++,Yg[Ta]=t.current,t.current=e}var Gi={},Nn=io(Gi),Yn=io(!1),Uo=Gi;function Qa(t,e){var n=t.type.contextTypes;if(!n)return Gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Zn(t){return t=t.childContextTypes,t!=null}function vh(){ft(Yn),ft(Nn)}function Sx(t,e,n){if(Nn.current!==Gi)throw Error(J(168));lt(Nn,e),lt(Yn,n)}function NA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(J(108,vD(t)||"Unknown",s));return _t({},n,r)}function _h(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gi,Uo=Nn.current,lt(Nn,t),lt(Yn,Yn.current),!0}function bx(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=NA(t,e,Uo),r.__reactInternalMemoizedMergedChildContext=t,ft(Yn),ft(Nn),lt(Nn,t)):ft(Yn),lt(Yn,n)}var ks=null,If=!1,hm=!1;function DA(t){ks===null?ks=[t]:ks.push(t)}function j3(t){If=!0,DA(t)}function oo(){if(!hm&&ks!==null){hm=!0;var t=0,e=Ze;try{var n=ks;for(Ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ks=null,If=!1}catch(s){throw ks!==null&&(ks=ks.slice(t+1)),sA(P0,oo),s}finally{Ze=e,hm=!1}}return null}var Aa=[],Ca=0,xh=null,Eh=0,Cr=[],Ir=0,Lo=null,Ds=1,Ms="";function vo(t,e){Aa[Ca++]=Eh,Aa[Ca++]=xh,xh=t,Eh=e}function MA(t,e,n){Cr[Ir++]=Ds,Cr[Ir++]=Ms,Cr[Ir++]=Lo,Lo=t;var r=Ds;t=Ms;var s=32-Hr(r)-1;r&=~(1<<s),n+=1;var i=32-Hr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ds=1<<32-Hr(e)+s|n<<s|r,Ms=i+t}else Ds=1<<i|n<<s|r,Ms=t}function B0(t){t.return!==null&&(vo(t,1),MA(t,1,0))}function V0(t){for(;t===xh;)xh=Aa[--Ca],Aa[Ca]=null,Eh=Aa[--Ca],Aa[Ca]=null;for(;t===Lo;)Lo=Cr[--Ir],Cr[Ir]=null,Ms=Cr[--Ir],Cr[Ir]=null,Ds=Cr[--Ir],Cr[Ir]=null}var mr=null,fr=null,mt=!1,zr=null;function OA(t,e){var n=Rr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Tx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mr=t,fr=Oi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mr=t,fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Lo!==null?{id:Ds,overflow:Ms}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mr=t,fr=null,!0):!1;default:return!1}}function Zg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ey(t){if(mt){var e=fr;if(e){var n=e;if(!Tx(t,e)){if(Zg(t))throw Error(J(418));e=Oi(n.nextSibling);var r=mr;e&&Tx(t,e)?OA(r,n):(t.flags=t.flags&-4097|2,mt=!1,mr=t)}}else{if(Zg(t))throw Error(J(418));t.flags=t.flags&-4097|2,mt=!1,mr=t}}}function Ax(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mr=t}function yd(t){if(t!==mr)return!1;if(!mt)return Ax(t),mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jg(t.type,t.memoizedProps)),e&&(e=fr)){if(Zg(t))throw jA(),Error(J(418));for(;e;)OA(t,e),e=Oi(e.nextSibling)}if(Ax(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fr=Oi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fr=null}}else fr=mr?Oi(t.stateNode.nextSibling):null;return!0}function jA(){for(var t=fr;t;)t=Oi(t.nextSibling)}function Xa(){fr=mr=null,mt=!1}function $0(t){zr===null?zr=[t]:zr.push(t)}var U3=Ys.ReactCurrentBatchConfig;function eu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function wd(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cx(t){var e=t._init;return e(t._payload)}function UA(t){function e(v,x){if(t){var T=v.deletions;T===null?(v.deletions=[x],v.flags|=16):T.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=Fi(v,x),v.index=0,v.sibling=null,v}function i(v,x,T){return v.index=T,t?(T=v.alternate,T!==null?(T=T.index,T<x?(v.flags|=2,x):T):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,x,T,D){return x===null||x.tag!==6?(x=vm(T,v.mode,D),x.return=v,x):(x=s(x,T),x.return=v,x)}function a(v,x,T,D){var L=T.type;return L===_a?d(v,x,T.props.children,D,T.key):x!==null&&(x.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===wi&&Cx(L)===x.type)?(D=s(x,T.props),D.ref=eu(v,x,T),D.return=v,D):(D=Kd(T.type,T.key,T.props,null,v.mode,D),D.ref=eu(v,x,T),D.return=v,D)}function u(v,x,T,D){return x===null||x.tag!==4||x.stateNode.containerInfo!==T.containerInfo||x.stateNode.implementation!==T.implementation?(x=_m(T,v.mode,D),x.return=v,x):(x=s(x,T.children||[]),x.return=v,x)}function d(v,x,T,D,L){return x===null||x.tag!==7?(x=Po(T,v.mode,D,L),x.return=v,x):(x=s(x,T),x.return=v,x)}function h(v,x,T){if(typeof x=="string"&&x!==""||typeof x=="number")return x=vm(""+x,v.mode,T),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ad:return T=Kd(x.type,x.key,x.props,null,v.mode,T),T.ref=eu(v,null,x),T.return=v,T;case va:return x=_m(x,v.mode,T),x.return=v,x;case wi:var D=x._init;return h(v,D(x._payload),T)}if(lu(x)||Jl(x))return x=Po(x,v.mode,T,null),x.return=v,x;wd(v,x)}return null}function f(v,x,T,D){var L=x!==null?x.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:l(v,x,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ad:return T.key===L?a(v,x,T,D):null;case va:return T.key===L?u(v,x,T,D):null;case wi:return L=T._init,f(v,x,L(T._payload),D)}if(lu(T)||Jl(T))return L!==null?null:d(v,x,T,D,null);wd(v,T)}return null}function g(v,x,T,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return v=v.get(T)||null,l(x,v,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case ad:return v=v.get(D.key===null?T:D.key)||null,a(x,v,D,L);case va:return v=v.get(D.key===null?T:D.key)||null,u(x,v,D,L);case wi:var V=D._init;return g(v,x,T,V(D._payload),L)}if(lu(D)||Jl(D))return v=v.get(T)||null,d(x,v,D,L,null);wd(x,D)}return null}function w(v,x,T,D){for(var L=null,V=null,I=x,C=x=0,_=null;I!==null&&C<T.length;C++){I.index>C?(_=I,I=null):_=I.sibling;var k=f(v,I,T[C],D);if(k===null){I===null&&(I=_);break}t&&I&&k.alternate===null&&e(v,I),x=i(k,x,C),V===null?L=k:V.sibling=k,V=k,I=_}if(C===T.length)return n(v,I),mt&&vo(v,C),L;if(I===null){for(;C<T.length;C++)I=h(v,T[C],D),I!==null&&(x=i(I,x,C),V===null?L=I:V.sibling=I,V=I);return mt&&vo(v,C),L}for(I=r(v,I);C<T.length;C++)_=g(I,v,C,T[C],D),_!==null&&(t&&_.alternate!==null&&I.delete(_.key===null?C:_.key),x=i(_,x,C),V===null?L=_:V.sibling=_,V=_);return t&&I.forEach(function(P){return e(v,P)}),mt&&vo(v,C),L}function E(v,x,T,D){var L=Jl(T);if(typeof L!="function")throw Error(J(150));if(T=L.call(T),T==null)throw Error(J(151));for(var V=L=null,I=x,C=x=0,_=null,k=T.next();I!==null&&!k.done;C++,k=T.next()){I.index>C?(_=I,I=null):_=I.sibling;var P=f(v,I,k.value,D);if(P===null){I===null&&(I=_);break}t&&I&&P.alternate===null&&e(v,I),x=i(P,x,C),V===null?L=P:V.sibling=P,V=P,I=_}if(k.done)return n(v,I),mt&&vo(v,C),L;if(I===null){for(;!k.done;C++,k=T.next())k=h(v,k.value,D),k!==null&&(x=i(k,x,C),V===null?L=k:V.sibling=k,V=k);return mt&&vo(v,C),L}for(I=r(v,I);!k.done;C++,k=T.next())k=g(I,v,C,k.value,D),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?C:k.key),x=i(k,x,C),V===null?L=k:V.sibling=k,V=k);return t&&I.forEach(function(O){return e(v,O)}),mt&&vo(v,C),L}function b(v,x,T,D){if(typeof T=="object"&&T!==null&&T.type===_a&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case ad:e:{for(var L=T.key,V=x;V!==null;){if(V.key===L){if(L=T.type,L===_a){if(V.tag===7){n(v,V.sibling),x=s(V,T.props.children),x.return=v,v=x;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===wi&&Cx(L)===V.type){n(v,V.sibling),x=s(V,T.props),x.ref=eu(v,V,T),x.return=v,v=x;break e}n(v,V);break}else e(v,V);V=V.sibling}T.type===_a?(x=Po(T.props.children,v.mode,D,T.key),x.return=v,v=x):(D=Kd(T.type,T.key,T.props,null,v.mode,D),D.ref=eu(v,x,T),D.return=v,v=D)}return o(v);case va:e:{for(V=T.key;x!==null;){if(x.key===V)if(x.tag===4&&x.stateNode.containerInfo===T.containerInfo&&x.stateNode.implementation===T.implementation){n(v,x.sibling),x=s(x,T.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=_m(T,v.mode,D),x.return=v,v=x}return o(v);case wi:return V=T._init,b(v,x,V(T._payload),D)}if(lu(T))return w(v,x,T,D);if(Jl(T))return E(v,x,T,D);wd(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,x!==null&&x.tag===6?(n(v,x.sibling),x=s(x,T),x.return=v,v=x):(n(v,x),x=vm(T,v.mode,D),x.return=v,v=x),o(v)):n(v,x)}return b}var Ya=UA(!0),LA=UA(!1),Sh=io(null),bh=null,Ia=null,z0=null;function q0(){z0=Ia=bh=null}function H0(t){var e=Sh.current;ft(Sh),t._currentValue=e}function ty(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ba(t,e){bh=t,z0=Ia=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qn=!0),t.firstContext=null)}function Or(t){var e=t._currentValue;if(z0!==t)if(t={context:t,memoizedValue:e,next:null},Ia===null){if(bh===null)throw Error(J(308));Ia=t,bh.dependencies={lanes:0,firstContext:t}}else Ia=Ia.next=t;return e}var To=null;function W0(t){To===null?To=[t]:To.push(t)}function FA(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,W0(e)):(n.next=s.next,s.next=n),e.interleaved=n,$s(t,r)}function $s(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vi=!1;function G0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ls(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ji(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,qe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,$s(t,n)}return s=r.interleaved,s===null?(e.next=e,W0(r)):(e.next=s.next,s.next=e),r.interleaved=e,$s(t,n)}function $d(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,N0(t,n)}}function Ix(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Th(t,e,n,r){var s=t.updateQueue;vi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?i=u:o.next=u,o=a;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=a))}if(i!==null){var h=s.baseState;o=0,d=u=a=null,l=i;do{var f=l.lane,g=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,E=l;switch(f=e,g=n,E.tag){case 1:if(w=E.payload,typeof w=="function"){h=w.call(g,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,f=typeof w=="function"?w.call(g,h,f):w,f==null)break e;h=_t({},h,f);break e;case 2:vi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,a=h):d=d.next=g,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(a=h),s.baseState=a,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Bo|=o,t.lanes=o,t.memoizedState=h}}function kx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var Nc={},ps=io(Nc),tc=io(Nc),nc=io(Nc);function Ao(t){if(t===Nc)throw Error(J(174));return t}function K0(t,e){switch(lt(nc,e),lt(tc,t),lt(ps,Nc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Og(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Og(e,t)}ft(ps),lt(ps,e)}function Za(){ft(ps),ft(tc),ft(nc)}function VA(t){Ao(nc.current);var e=Ao(ps.current),n=Og(e,t.type);e!==n&&(lt(tc,t),lt(ps,n))}function J0(t){tc.current===t&&(ft(ps),ft(tc))}var gt=io(0);function Ah(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fm=[];function Q0(){for(var t=0;t<fm.length;t++)fm[t]._workInProgressVersionPrimary=null;fm.length=0}var zd=Ys.ReactCurrentDispatcher,pm=Ys.ReactCurrentBatchConfig,Fo=0,vt=null,Kt=null,ln=null,Ch=!1,Tu=!1,rc=0,L3=0;function _n(){throw Error(J(321))}function X0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jr(t[n],e[n]))return!1;return!0}function Y0(t,e,n,r,s,i){if(Fo=i,vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zd.current=t===null||t.memoizedState===null?$3:z3,t=n(r,s),Tu){i=0;do{if(Tu=!1,rc=0,25<=i)throw Error(J(301));i+=1,ln=Kt=null,e.updateQueue=null,zd.current=q3,t=n(r,s)}while(Tu)}if(zd.current=Ih,e=Kt!==null&&Kt.next!==null,Fo=0,ln=Kt=vt=null,Ch=!1,e)throw Error(J(300));return t}function Z0(){var t=rc!==0;return rc=0,t}function us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?vt.memoizedState=ln=t:ln=ln.next=t,ln}function jr(){if(Kt===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=Kt.next;var e=ln===null?vt.memoizedState:ln.next;if(e!==null)ln=e,Kt=t;else{if(t===null)throw Error(J(310));Kt=t,t={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},ln===null?vt.memoizedState=ln=t:ln=ln.next=t}return ln}function sc(t,e){return typeof e=="function"?e(t):e}function mm(t){var e=jr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=Kt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,u=i;do{var d=u.lane;if((Fo&d)===d)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=h,o=r):a=a.next=h,vt.lanes|=d,Bo|=d}u=u.next}while(u!==null&&u!==i);a===null?o=r:a.next=l,Jr(r,e.memoizedState)||(Qn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,vt.lanes|=i,Bo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gm(t){var e=jr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Jr(i,e.memoizedState)||(Qn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function $A(){}function zA(t,e){var n=vt,r=jr(),s=e(),i=!Jr(r.memoizedState,s);if(i&&(r.memoizedState=s,Qn=!0),r=r.queue,ew(WA.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ln!==null&&ln.memoizedState.tag&1){if(n.flags|=2048,ic(9,HA.bind(null,n,r,s,e),void 0,null),cn===null)throw Error(J(349));Fo&30||qA(n,e,s)}return s}function qA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function HA(t,e,n,r){e.value=n,e.getSnapshot=r,GA(e)&&KA(t)}function WA(t,e,n){return n(function(){GA(e)&&KA(t)})}function GA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jr(t,n)}catch{return!0}}function KA(t){var e=$s(t,1);e!==null&&Wr(e,t,1,-1)}function Rx(t){var e=us();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sc,lastRenderedState:t},e.queue=t,t=t.dispatch=V3.bind(null,vt,t),[e.memoizedState,t]}function ic(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function JA(){return jr().memoizedState}function qd(t,e,n,r){var s=us();vt.flags|=t,s.memoizedState=ic(1|e,n,void 0,r===void 0?null:r)}function kf(t,e,n,r){var s=jr();r=r===void 0?null:r;var i=void 0;if(Kt!==null){var o=Kt.memoizedState;if(i=o.destroy,r!==null&&X0(r,o.deps)){s.memoizedState=ic(e,n,i,r);return}}vt.flags|=t,s.memoizedState=ic(1|e,n,i,r)}function Px(t,e){return qd(8390656,8,t,e)}function ew(t,e){return kf(2048,8,t,e)}function QA(t,e){return kf(4,2,t,e)}function XA(t,e){return kf(4,4,t,e)}function YA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ZA(t,e,n){return n=n!=null?n.concat([t]):null,kf(4,4,YA.bind(null,e,t),n)}function tw(){}function eC(t,e){var n=jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&X0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tC(t,e){var n=jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&X0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function nC(t,e,n){return Fo&21?(Jr(n,e)||(n=aA(),vt.lanes|=n,Bo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qn=!0),t.memoizedState=n)}function F3(t,e){var n=Ze;Ze=n!==0&&4>n?n:4,t(!0);var r=pm.transition;pm.transition={};try{t(!1),e()}finally{Ze=n,pm.transition=r}}function rC(){return jr().memoizedState}function B3(t,e,n){var r=Li(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sC(t))iC(e,n);else if(n=FA(t,e,n,r),n!==null){var s=jn();Wr(n,t,r,s),oC(n,e,r)}}function V3(t,e,n){var r=Li(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sC(t))iC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Jr(l,o)){var a=e.interleaved;a===null?(s.next=s,W0(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=FA(t,e,s,r),n!==null&&(s=jn(),Wr(n,t,r,s),oC(n,e,r))}}function sC(t){var e=t.alternate;return t===vt||e!==null&&e===vt}function iC(t,e){Tu=Ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,N0(t,n)}}var Ih={readContext:Or,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},$3={readContext:Or,useCallback:function(t,e){return us().memoizedState=[t,e===void 0?null:e],t},useContext:Or,useEffect:Px,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qd(4194308,4,YA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qd(4194308,4,t,e)},useInsertionEffect:function(t,e){return qd(4,2,t,e)},useMemo:function(t,e){var n=us();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=us();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=B3.bind(null,vt,t),[r.memoizedState,t]},useRef:function(t){var e=us();return t={current:t},e.memoizedState=t},useState:Rx,useDebugValue:tw,useDeferredValue:function(t){return us().memoizedState=t},useTransition:function(){var t=Rx(!1),e=t[0];return t=F3.bind(null,t[1]),us().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=vt,s=us();if(mt){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),cn===null)throw Error(J(349));Fo&30||qA(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Px(WA.bind(null,r,i,t),[t]),r.flags|=2048,ic(9,HA.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=us(),e=cn.identifierPrefix;if(mt){var n=Ms,r=Ds;n=(r&~(1<<32-Hr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=rc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=L3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},z3={readContext:Or,useCallback:eC,useContext:Or,useEffect:ew,useImperativeHandle:ZA,useInsertionEffect:QA,useLayoutEffect:XA,useMemo:tC,useReducer:mm,useRef:JA,useState:function(){return mm(sc)},useDebugValue:tw,useDeferredValue:function(t){var e=jr();return nC(e,Kt.memoizedState,t)},useTransition:function(){var t=mm(sc)[0],e=jr().memoizedState;return[t,e]},useMutableSource:$A,useSyncExternalStore:zA,useId:rC,unstable_isNewReconciler:!1},q3={readContext:Or,useCallback:eC,useContext:Or,useEffect:ew,useImperativeHandle:ZA,useInsertionEffect:QA,useLayoutEffect:XA,useMemo:tC,useReducer:gm,useRef:JA,useState:function(){return gm(sc)},useDebugValue:tw,useDeferredValue:function(t){var e=jr();return Kt===null?e.memoizedState=t:nC(e,Kt.memoizedState,t)},useTransition:function(){var t=gm(sc)[0],e=jr().memoizedState;return[t,e]},useMutableSource:$A,useSyncExternalStore:zA,useId:rC,unstable_isNewReconciler:!1};function Vr(t,e){if(t&&t.defaultProps){e=_t({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ny(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:_t({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rf={isMounted:function(t){return(t=t._reactInternals)?Zo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jn(),s=Li(t),i=Ls(r,s);i.payload=e,n!=null&&(i.callback=n),e=ji(t,i,s),e!==null&&(Wr(e,t,s,r),$d(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jn(),s=Li(t),i=Ls(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ji(t,i,s),e!==null&&(Wr(e,t,s,r),$d(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jn(),r=Li(t),s=Ls(n,r);s.tag=2,e!=null&&(s.callback=e),e=ji(t,s,r),e!==null&&(Wr(e,t,r,n),$d(e,t,r))}};function Nx(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Xu(n,r)||!Xu(s,i):!0}function aC(t,e,n){var r=!1,s=Gi,i=e.contextType;return typeof i=="object"&&i!==null?i=Or(i):(s=Zn(e)?Uo:Nn.current,r=e.contextTypes,i=(r=r!=null)?Qa(t,s):Gi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Dx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rf.enqueueReplaceState(e,e.state,null)}function ry(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},G0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Or(i):(i=Zn(e)?Uo:Nn.current,s.context=Qa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ny(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Rf.enqueueReplaceState(s,s.state,null),Th(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function el(t,e){try{var n="",r=e;do n+=wD(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ym(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var H3=typeof WeakMap=="function"?WeakMap:Map;function lC(t,e,n){n=Ls(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Rh||(Rh=!0,py=r),sy(t,e)},n}function uC(t,e,n){n=Ls(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sy(t,e),typeof r!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Mx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new H3;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=iM.bind(null,t,e,n),e.then(t,t))}function Ox(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ls(-1,1),e.tag=2,ji(n,e,1))),n.lanes|=1),t)}var W3=Ys.ReactCurrentOwner,Qn=!1;function On(t,e,n,r){e.child=t===null?LA(e,null,n,r):Ya(e,t.child,n,r)}function Ux(t,e,n,r,s){n=n.render;var i=e.ref;return Ba(e,s),r=Y0(t,e,n,r,i,s),n=Z0(),t!==null&&!Qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zs(t,e,s)):(mt&&n&&B0(e),e.flags|=1,On(t,e,r,s),e.child)}function Lx(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!uw(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,cC(t,e,i,r,s)):(t=Kd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xu,n(o,r)&&t.ref===e.ref)return zs(t,e,s)}return e.flags|=1,t=Fi(i,r),t.ref=e.ref,t.return=e,e.child=t}function cC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Xu(i,r)&&t.ref===e.ref)if(Qn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Qn=!0);else return e.lanes=t.lanes,zs(t,e,s)}return iy(t,e,n,r,s)}function dC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(Ra,dr),dr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(Ra,dr),dr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,lt(Ra,dr),dr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,lt(Ra,dr),dr|=r;return On(t,e,s,n),e.child}function hC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function iy(t,e,n,r,s){var i=Zn(n)?Uo:Nn.current;return i=Qa(e,i),Ba(e,s),n=Y0(t,e,n,r,i,s),r=Z0(),t!==null&&!Qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,zs(t,e,s)):(mt&&r&&B0(e),e.flags|=1,On(t,e,n,s),e.child)}function Fx(t,e,n,r,s){if(Zn(n)){var i=!0;_h(e)}else i=!1;if(Ba(e,s),e.stateNode===null)Hd(t,e),aC(e,n,r),ry(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Or(u):(u=Zn(n)?Uo:Nn.current,u=Qa(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Dx(e,o,r,u),vi=!1;var f=e.memoizedState;o.state=f,Th(e,r,o,s),a=e.memoizedState,l!==r||f!==a||Yn.current||vi?(typeof d=="function"&&(ny(e,n,d,r),a=e.memoizedState),(l=vi||Nx(e,n,l,r,f,a,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,BA(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Vr(e.type,l),o.props=u,h=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Or(a):(a=Zn(n)?Uo:Nn.current,a=Qa(e,a));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==a)&&Dx(e,o,r,a),vi=!1,f=e.memoizedState,o.state=f,Th(e,r,o,s);var w=e.memoizedState;l!==h||f!==w||Yn.current||vi?(typeof g=="function"&&(ny(e,n,g,r),w=e.memoizedState),(u=vi||Nx(e,n,u,r,f,w,a)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return oy(t,e,n,r,i,s)}function oy(t,e,n,r,s,i){hC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&bx(e,n,!1),zs(t,e,i);r=e.stateNode,W3.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ya(e,t.child,null,i),e.child=Ya(e,null,l,i)):On(t,e,l,i),e.memoizedState=r.state,s&&bx(e,n,!0),e.child}function fC(t){var e=t.stateNode;e.pendingContext?Sx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sx(t,e.context,!1),K0(t,e.containerInfo)}function Bx(t,e,n,r,s){return Xa(),$0(s),e.flags|=256,On(t,e,n,r),e.child}var ay={dehydrated:null,treeContext:null,retryLane:0};function ly(t){return{baseLanes:t,cachePool:null,transitions:null}}function pC(t,e,n){var r=e.pendingProps,s=gt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),lt(gt,s&1),t===null)return ey(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Df(o,r,0,null),t=Po(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ly(n),e.memoizedState=ay,t):nw(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return G3(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Fi(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Fi(l,i):(i=Po(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ly(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ay,r}return i=t.child,t=i.sibling,r=Fi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nw(t,e){return e=Df({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vd(t,e,n,r){return r!==null&&$0(r),Ya(e,t.child,null,n),t=nw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function G3(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ym(Error(J(422))),vd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Df({mode:"visible",children:r.children},s,0,null),i=Po(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ya(e,t.child,null,o),e.child.memoizedState=ly(o),e.memoizedState=ay,i);if(!(e.mode&1))return vd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(J(419)),r=ym(i,r,void 0),vd(t,e,o,r)}if(l=(o&t.childLanes)!==0,Qn||l){if(r=cn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$s(t,s),Wr(r,t,s,-1))}return lw(),r=ym(Error(J(421))),vd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=oM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,fr=Oi(s.nextSibling),mr=e,mt=!0,zr=null,t!==null&&(Cr[Ir++]=Ds,Cr[Ir++]=Ms,Cr[Ir++]=Lo,Ds=t.id,Ms=t.overflow,Lo=e),e=nw(e,r.children),e.flags|=4096,e)}function Vx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ty(t.return,e,n)}function wm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function mC(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(On(t,e,r.children,n),r=gt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vx(t,n,e);else if(t.tag===19)Vx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(lt(gt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ah(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),wm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ah(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}wm(e,!0,n,null,i);break;case"together":wm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Fi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function K3(t,e,n){switch(e.tag){case 3:fC(e),Xa();break;case 5:VA(e);break;case 1:Zn(e.type)&&_h(e);break;case 4:K0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;lt(Sh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(lt(gt,gt.current&1),e.flags|=128,null):n&e.child.childLanes?pC(t,e,n):(lt(gt,gt.current&1),t=zs(t,e,n),t!==null?t.sibling:null);lt(gt,gt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),lt(gt,gt.current),r)break;return null;case 22:case 23:return e.lanes=0,dC(t,e,n)}return zs(t,e,n)}var gC,uy,yC,wC;gC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uy=function(){};yC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ao(ps.current);var i=null;switch(n){case"input":s=Pg(t,s),r=Pg(t,r),i=[];break;case"select":s=_t({},s,{value:void 0}),r=_t({},r,{value:void 0}),i=[];break;case"textarea":s=Mg(t,s),r=Mg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wh)}jg(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var a=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qu.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&dt("scroll",t),i||l===a||(i=[])):(i=i||[]).push(u,a))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};wC=function(t,e,n,r){n!==r&&(e.flags|=4)};function tu(t,e){if(!mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function J3(t,e,n){var r=e.pendingProps;switch(V0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(e),null;case 1:return Zn(e.type)&&vh(),xn(e),null;case 3:return r=e.stateNode,Za(),ft(Yn),ft(Nn),Q0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zr!==null&&(yy(zr),zr=null))),uy(t,e),xn(e),null;case 5:J0(e);var s=Ao(nc.current);if(n=e.type,t!==null&&e.stateNode!=null)yC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return xn(e),null}if(t=Ao(ps.current),yd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hs]=e,r[ec]=i,t=(e.mode&1)!==0,n){case"dialog":dt("cancel",r),dt("close",r);break;case"iframe":case"object":case"embed":dt("load",r);break;case"video":case"audio":for(s=0;s<cu.length;s++)dt(cu[s],r);break;case"source":dt("error",r);break;case"img":case"image":case"link":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"input":Q_(r,i),dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},dt("invalid",r);break;case"textarea":Y_(r,i),dt("invalid",r)}jg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&gd(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&gd(r.textContent,l,t),s=["children",""+l]):qu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&dt("scroll",r)}switch(n){case"input":ld(r),X_(r,i,!0);break;case"textarea":ld(r),Z_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=wh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=WT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hs]=e,t[ec]=r,gC(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ug(n,r),n){case"dialog":dt("cancel",t),dt("close",t),s=r;break;case"iframe":case"object":case"embed":dt("load",t),s=r;break;case"video":case"audio":for(s=0;s<cu.length;s++)dt(cu[s],t);s=r;break;case"source":dt("error",t),s=r;break;case"img":case"image":case"link":dt("error",t),dt("load",t),s=r;break;case"details":dt("toggle",t),s=r;break;case"input":Q_(t,r),s=Pg(t,r),dt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=_t({},r,{value:void 0}),dt("invalid",t);break;case"textarea":Y_(t,r),s=Mg(t,r),dt("invalid",t);break;default:s=r}jg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?JT(t,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&GT(t,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Hu(t,a):typeof a=="number"&&Hu(t,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qu.hasOwnProperty(i)?a!=null&&i==="onScroll"&&dt("scroll",t):a!=null&&A0(t,i,a,o))}switch(n){case"input":ld(t),X_(t,r,!1);break;case"textarea":ld(t),Z_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ja(t,!!r.multiple,i,!1):r.defaultValue!=null&&ja(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=wh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xn(e),null;case 6:if(t&&e.stateNode!=null)wC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=Ao(nc.current),Ao(ps.current),yd(e)){if(r=e.stateNode,n=e.memoizedProps,r[hs]=e,(i=r.nodeValue!==n)&&(t=mr,t!==null))switch(t.tag){case 3:gd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hs]=e,e.stateNode=r}return xn(e),null;case 13:if(ft(gt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mt&&fr!==null&&e.mode&1&&!(e.flags&128))jA(),Xa(),e.flags|=98560,i=!1;else if(i=yd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(J(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[hs]=e}else Xa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xn(e),i=!1}else zr!==null&&(yy(zr),zr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||gt.current&1?Jt===0&&(Jt=3):lw())),e.updateQueue!==null&&(e.flags|=4),xn(e),null);case 4:return Za(),uy(t,e),t===null&&Yu(e.stateNode.containerInfo),xn(e),null;case 10:return H0(e.type._context),xn(e),null;case 17:return Zn(e.type)&&vh(),xn(e),null;case 19:if(ft(gt),i=e.memoizedState,i===null)return xn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)tu(i,!1);else{if(Jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ah(t),o!==null){for(e.flags|=128,tu(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lt(gt,gt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Nt()>tl&&(e.flags|=128,r=!0,tu(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ah(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),tu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!mt)return xn(e),null}else 2*Nt()-i.renderingStartTime>tl&&n!==1073741824&&(e.flags|=128,r=!0,tu(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Nt(),e.sibling=null,n=gt.current,lt(gt,r?n&1|2:n&1),e):(xn(e),null);case 22:case 23:return aw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dr&1073741824&&(xn(e),e.subtreeFlags&6&&(e.flags|=8192)):xn(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function Q3(t,e){switch(V0(e),e.tag){case 1:return Zn(e.type)&&vh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Za(),ft(Yn),ft(Nn),Q0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return J0(e),null;case 13:if(ft(gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Xa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ft(gt),null;case 4:return Za(),null;case 10:return H0(e.type._context),null;case 22:case 23:return aw(),null;case 24:return null;default:return null}}var _d=!1,kn=!1,X3=typeof WeakSet=="function"?WeakSet:Set,ce=null;function ka(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){At(t,e,r)}else n.current=null}function cy(t,e,n){try{n()}catch(r){At(t,e,r)}}var $x=!1;function Y3(t,e){if(Gg=mh,t=SA(),F0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(a=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(a=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kg={focusedElem:t,selectionRange:n},mh=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var E=w.memoizedProps,b=w.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?E:Vr(e.type,E),b);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(D){At(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return w=$x,$x=!1,w}function Au(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&cy(e,n,i)}s=s.next}while(s!==r)}}function Pf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vC(t){var e=t.alternate;e!==null&&(t.alternate=null,vC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hs],delete e[ec],delete e[Xg],delete e[M3],delete e[O3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _C(t){return t.tag===5||t.tag===3||t.tag===4}function zx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_C(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wh));else if(r!==4&&(t=t.child,t!==null))for(hy(t,e,n),t=t.sibling;t!==null;)hy(t,e,n),t=t.sibling}function fy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fy(t,e,n),t=t.sibling;t!==null;)fy(t,e,n),t=t.sibling}var dn=null,$r=!1;function di(t,e,n){for(n=n.child;n!==null;)xC(t,e,n),n=n.sibling}function xC(t,e,n){if(fs&&typeof fs.onCommitFiberUnmount=="function")try{fs.onCommitFiberUnmount(Sf,n)}catch{}switch(n.tag){case 5:kn||ka(n,e);case 6:var r=dn,s=$r;dn=null,di(t,e,n),dn=r,$r=s,dn!==null&&($r?(t=dn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):dn.removeChild(n.stateNode));break;case 18:dn!==null&&($r?(t=dn,n=n.stateNode,t.nodeType===8?dm(t.parentNode,n):t.nodeType===1&&dm(t,n),Ju(t)):dm(dn,n.stateNode));break;case 4:r=dn,s=$r,dn=n.stateNode.containerInfo,$r=!0,di(t,e,n),dn=r,$r=s;break;case 0:case 11:case 14:case 15:if(!kn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&cy(n,e,o),s=s.next}while(s!==r)}di(t,e,n);break;case 1:if(!kn&&(ka(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){At(n,e,l)}di(t,e,n);break;case 21:di(t,e,n);break;case 22:n.mode&1?(kn=(r=kn)||n.memoizedState!==null,di(t,e,n),kn=r):di(t,e,n);break;default:di(t,e,n)}}function qx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new X3),e.forEach(function(r){var s=aM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Br(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:dn=l.stateNode,$r=!1;break e;case 3:dn=l.stateNode.containerInfo,$r=!0;break e;case 4:dn=l.stateNode.containerInfo,$r=!0;break e}l=l.return}if(dn===null)throw Error(J(160));xC(i,o,s),dn=null,$r=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(u){At(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EC(e,t),e=e.sibling}function EC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Br(e,t),rs(t),r&4){try{Au(3,t,t.return),Pf(3,t)}catch(E){At(t,t.return,E)}try{Au(5,t,t.return)}catch(E){At(t,t.return,E)}}break;case 1:Br(e,t),rs(t),r&512&&n!==null&&ka(n,n.return);break;case 5:if(Br(e,t),rs(t),r&512&&n!==null&&ka(n,n.return),t.flags&32){var s=t.stateNode;try{Hu(s,"")}catch(E){At(t,t.return,E)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&qT(s,i),Ug(l,o);var u=Ug(l,i);for(o=0;o<a.length;o+=2){var d=a[o],h=a[o+1];d==="style"?JT(s,h):d==="dangerouslySetInnerHTML"?GT(s,h):d==="children"?Hu(s,h):A0(s,d,h,u)}switch(l){case"input":Ng(s,i);break;case"textarea":HT(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ja(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?ja(s,!!i.multiple,i.defaultValue,!0):ja(s,!!i.multiple,i.multiple?[]:"",!1))}s[ec]=i}catch(E){At(t,t.return,E)}}break;case 6:if(Br(e,t),rs(t),r&4){if(t.stateNode===null)throw Error(J(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(E){At(t,t.return,E)}}break;case 3:if(Br(e,t),rs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ju(e.containerInfo)}catch(E){At(t,t.return,E)}break;case 4:Br(e,t),rs(t);break;case 13:Br(e,t),rs(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(iw=Nt())),r&4&&qx(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(kn=(u=kn)||d,Br(e,t),kn=u):Br(e,t),rs(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ce=t,d=t.child;d!==null;){for(h=ce=d;ce!==null;){switch(f=ce,g=f.child,f.tag){case 0:case 11:case 14:case 15:Au(4,f,f.return);break;case 1:ka(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(E){At(r,n,E)}}break;case 5:ka(f,f.return);break;case 22:if(f.memoizedState!==null){Wx(h);continue}}g!==null?(g.return=f,ce=g):Wx(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=KT("display",o))}catch(E){At(t,t.return,E)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(E){At(t,t.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Br(e,t),rs(t),r&4&&qx(t);break;case 21:break;default:Br(e,t),rs(t)}}function rs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_C(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Hu(s,""),r.flags&=-33);var i=zx(t);fy(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=zx(t);hy(t,l,o);break;default:throw Error(J(161))}}catch(a){At(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Z3(t,e,n){ce=t,SC(t)}function SC(t,e,n){for(var r=(t.mode&1)!==0;ce!==null;){var s=ce,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||_d;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||kn;l=_d;var u=kn;if(_d=o,(kn=a)&&!u)for(ce=s;ce!==null;)o=ce,a=o.child,o.tag===22&&o.memoizedState!==null?Gx(s):a!==null?(a.return=o,ce=a):Gx(s);for(;i!==null;)ce=i,SC(i),i=i.sibling;ce=s,_d=l,kn=u}Hx(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ce=i):Hx(t)}}function Hx(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kn||Pf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Vr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&kx(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kx(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ju(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}kn||e.flags&512&&dy(e)}catch(f){At(e,e.return,f)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function Wx(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function Gx(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pf(4,e)}catch(a){At(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){At(e,s,a)}}var i=e.return;try{dy(e)}catch(a){At(e,i,a)}break;case 5:var o=e.return;try{dy(e)}catch(a){At(e,o,a)}}}catch(a){At(e,e.return,a)}if(e===t){ce=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ce=l;break}ce=e.return}}var eM=Math.ceil,kh=Ys.ReactCurrentDispatcher,rw=Ys.ReactCurrentOwner,Nr=Ys.ReactCurrentBatchConfig,qe=0,cn=null,Ut=null,gn=0,dr=0,Ra=io(0),Jt=0,oc=null,Bo=0,Nf=0,sw=0,Cu=null,Wn=null,iw=0,tl=1/0,Is=null,Rh=!1,py=null,Ui=null,xd=!1,Ii=null,Ph=0,Iu=0,my=null,Wd=-1,Gd=0;function jn(){return qe&6?Nt():Wd!==-1?Wd:Wd=Nt()}function Li(t){return t.mode&1?qe&2&&gn!==0?gn&-gn:U3.transition!==null?(Gd===0&&(Gd=aA()),Gd):(t=Ze,t!==0||(t=window.event,t=t===void 0?16:pA(t.type)),t):1}function Wr(t,e,n,r){if(50<Iu)throw Iu=0,my=null,Error(J(185));kc(t,n,r),(!(qe&2)||t!==cn)&&(t===cn&&(!(qe&2)&&(Nf|=n),Jt===4&&Ei(t,gn)),er(t,r),n===1&&qe===0&&!(e.mode&1)&&(tl=Nt()+500,If&&oo()))}function er(t,e){var n=t.callbackNode;UD(t,e);var r=ph(t,t===cn?gn:0);if(r===0)n!==null&&nx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nx(n),e===1)t.tag===0?j3(Kx.bind(null,t)):DA(Kx.bind(null,t)),N3(function(){!(qe&6)&&oo()}),n=null;else{switch(lA(r)){case 1:n=P0;break;case 4:n=iA;break;case 16:n=fh;break;case 536870912:n=oA;break;default:n=fh}n=PC(n,bC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bC(t,e){if(Wd=-1,Gd=0,qe&6)throw Error(J(327));var n=t.callbackNode;if(Va()&&t.callbackNode!==n)return null;var r=ph(t,t===cn?gn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nh(t,r);else{e=r;var s=qe;qe|=2;var i=AC();(cn!==t||gn!==e)&&(Is=null,tl=Nt()+500,Ro(t,e));do try{rM();break}catch(l){TC(t,l)}while(!0);q0(),kh.current=i,qe=s,Ut!==null?e=0:(cn=null,gn=0,e=Jt)}if(e!==0){if(e===2&&(s=$g(t),s!==0&&(r=s,e=gy(t,s))),e===1)throw n=oc,Ro(t,0),Ei(t,r),er(t,Nt()),n;if(e===6)Ei(t,r);else{if(s=t.current.alternate,!(r&30)&&!tM(s)&&(e=Nh(t,r),e===2&&(i=$g(t),i!==0&&(r=i,e=gy(t,i))),e===1))throw n=oc,Ro(t,0),Ei(t,r),er(t,Nt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:_o(t,Wn,Is);break;case 3:if(Ei(t,r),(r&130023424)===r&&(e=iw+500-Nt(),10<e)){if(ph(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){jn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Qg(_o.bind(null,t,Wn,Is),e);break}_o(t,Wn,Is);break;case 4:if(Ei(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Hr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eM(r/1960))-r,10<r){t.timeoutHandle=Qg(_o.bind(null,t,Wn,Is),r);break}_o(t,Wn,Is);break;case 5:_o(t,Wn,Is);break;default:throw Error(J(329))}}}return er(t,Nt()),t.callbackNode===n?bC.bind(null,t):null}function gy(t,e){var n=Cu;return t.current.memoizedState.isDehydrated&&(Ro(t,e).flags|=256),t=Nh(t,e),t!==2&&(e=Wn,Wn=n,e!==null&&yy(e)),t}function yy(t){Wn===null?Wn=t:Wn.push.apply(Wn,t)}function tM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Jr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ei(t,e){for(e&=~sw,e&=~Nf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hr(e),r=1<<n;t[n]=-1,e&=~r}}function Kx(t){if(qe&6)throw Error(J(327));Va();var e=ph(t,0);if(!(e&1))return er(t,Nt()),null;var n=Nh(t,e);if(t.tag!==0&&n===2){var r=$g(t);r!==0&&(e=r,n=gy(t,r))}if(n===1)throw n=oc,Ro(t,0),Ei(t,e),er(t,Nt()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_o(t,Wn,Is),er(t,Nt()),null}function ow(t,e){var n=qe;qe|=1;try{return t(e)}finally{qe=n,qe===0&&(tl=Nt()+500,If&&oo())}}function Vo(t){Ii!==null&&Ii.tag===0&&!(qe&6)&&Va();var e=qe;qe|=1;var n=Nr.transition,r=Ze;try{if(Nr.transition=null,Ze=1,t)return t()}finally{Ze=r,Nr.transition=n,qe=e,!(qe&6)&&oo()}}function aw(){dr=Ra.current,ft(Ra)}function Ro(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,P3(n)),Ut!==null)for(n=Ut.return;n!==null;){var r=n;switch(V0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vh();break;case 3:Za(),ft(Yn),ft(Nn),Q0();break;case 5:J0(r);break;case 4:Za();break;case 13:ft(gt);break;case 19:ft(gt);break;case 10:H0(r.type._context);break;case 22:case 23:aw()}n=n.return}if(cn=t,Ut=t=Fi(t.current,null),gn=dr=e,Jt=0,oc=null,sw=Nf=Bo=0,Wn=Cu=null,To!==null){for(e=0;e<To.length;e++)if(n=To[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}To=null}return t}function TC(t,e){do{var n=Ut;try{if(q0(),zd.current=Ih,Ch){for(var r=vt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ch=!1}if(Fo=0,ln=Kt=vt=null,Tu=!1,rc=0,rw.current=null,n===null||n.return===null){Jt=1,oc=e,Ut=null;break}e:{var i=t,o=n.return,l=n,a=e;if(e=gn,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Ox(o);if(g!==null){g.flags&=-257,jx(g,o,l,i,e),g.mode&1&&Mx(i,u,e),e=g,a=u;var w=e.updateQueue;if(w===null){var E=new Set;E.add(a),e.updateQueue=E}else w.add(a);break e}else{if(!(e&1)){Mx(i,u,e),lw();break e}a=Error(J(426))}}else if(mt&&l.mode&1){var b=Ox(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),jx(b,o,l,i,e),$0(el(a,l));break e}}i=a=el(a,l),Jt!==4&&(Jt=2),Cu===null?Cu=[i]:Cu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=lC(i,a,e);Ix(i,v);break e;case 1:l=a;var x=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ui===null||!Ui.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=uC(i,l,e);Ix(i,D);break e}}i=i.return}while(i!==null)}IC(n)}catch(L){e=L,Ut===n&&n!==null&&(Ut=n=n.return);continue}break}while(!0)}function AC(){var t=kh.current;return kh.current=Ih,t===null?Ih:t}function lw(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),cn===null||!(Bo&268435455)&&!(Nf&268435455)||Ei(cn,gn)}function Nh(t,e){var n=qe;qe|=2;var r=AC();(cn!==t||gn!==e)&&(Is=null,Ro(t,e));do try{nM();break}catch(s){TC(t,s)}while(!0);if(q0(),qe=n,kh.current=r,Ut!==null)throw Error(J(261));return cn=null,gn=0,Jt}function nM(){for(;Ut!==null;)CC(Ut)}function rM(){for(;Ut!==null&&!ID();)CC(Ut)}function CC(t){var e=RC(t.alternate,t,dr);t.memoizedProps=t.pendingProps,e===null?IC(t):Ut=e,rw.current=null}function IC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Q3(n,e),n!==null){n.flags&=32767,Ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Jt=6,Ut=null;return}}else if(n=J3(n,e,dr),n!==null){Ut=n;return}if(e=e.sibling,e!==null){Ut=e;return}Ut=e=t}while(e!==null);Jt===0&&(Jt=5)}function _o(t,e,n){var r=Ze,s=Nr.transition;try{Nr.transition=null,Ze=1,sM(t,e,n,r)}finally{Nr.transition=s,Ze=r}return null}function sM(t,e,n,r){do Va();while(Ii!==null);if(qe&6)throw Error(J(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(LD(t,i),t===cn&&(Ut=cn=null,gn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xd||(xd=!0,PC(fh,function(){return Va(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nr.transition,Nr.transition=null;var o=Ze;Ze=1;var l=qe;qe|=4,rw.current=null,Y3(t,n),EC(n,t),b3(Kg),mh=!!Gg,Kg=Gg=null,t.current=n,Z3(n),kD(),qe=l,Ze=o,Nr.transition=i}else t.current=n;if(xd&&(xd=!1,Ii=t,Ph=s),i=t.pendingLanes,i===0&&(Ui=null),ND(n.stateNode),er(t,Nt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Rh)throw Rh=!1,t=py,py=null,t;return Ph&1&&t.tag!==0&&Va(),i=t.pendingLanes,i&1?t===my?Iu++:(Iu=0,my=t):Iu=0,oo(),null}function Va(){if(Ii!==null){var t=lA(Ph),e=Nr.transition,n=Ze;try{if(Nr.transition=null,Ze=16>t?16:t,Ii===null)var r=!1;else{if(t=Ii,Ii=null,Ph=0,qe&6)throw Error(J(331));var s=qe;for(qe|=4,ce=t.current;ce!==null;){var i=ce,o=i.child;if(ce.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(ce=u;ce!==null;){var d=ce;switch(d.tag){case 0:case 11:case 15:Au(8,d,i)}var h=d.child;if(h!==null)h.return=d,ce=h;else for(;ce!==null;){d=ce;var f=d.sibling,g=d.return;if(vC(d),d===u){ce=null;break}if(f!==null){f.return=g,ce=f;break}ce=g}}}var w=i.alternate;if(w!==null){var E=w.child;if(E!==null){w.child=null;do{var b=E.sibling;E.sibling=null,E=b}while(E!==null)}}ce=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ce=o;else e:for(;ce!==null;){if(i=ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Au(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ce=v;break e}ce=i.return}}var x=t.current;for(ce=x;ce!==null;){o=ce;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ce=T;else e:for(o=x;ce!==null;){if(l=ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pf(9,l)}}catch(L){At(l,l.return,L)}if(l===o){ce=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,ce=D;break e}ce=l.return}}if(qe=s,oo(),fs&&typeof fs.onPostCommitFiberRoot=="function")try{fs.onPostCommitFiberRoot(Sf,t)}catch{}r=!0}return r}finally{Ze=n,Nr.transition=e}}return!1}function Jx(t,e,n){e=el(n,e),e=lC(t,e,1),t=ji(t,e,1),e=jn(),t!==null&&(kc(t,1,e),er(t,e))}function At(t,e,n){if(t.tag===3)Jx(t,t,n);else for(;e!==null;){if(e.tag===3){Jx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ui===null||!Ui.has(r))){t=el(n,t),t=uC(e,t,1),e=ji(e,t,1),t=jn(),e!==null&&(kc(e,1,t),er(e,t));break}}e=e.return}}function iM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jn(),t.pingedLanes|=t.suspendedLanes&n,cn===t&&(gn&n)===n&&(Jt===4||Jt===3&&(gn&130023424)===gn&&500>Nt()-iw?Ro(t,0):sw|=n),er(t,e)}function kC(t,e){e===0&&(t.mode&1?(e=dd,dd<<=1,!(dd&130023424)&&(dd=4194304)):e=1);var n=jn();t=$s(t,e),t!==null&&(kc(t,e,n),er(t,n))}function oM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kC(t,n)}function aM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),kC(t,n)}var RC;RC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yn.current)Qn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qn=!1,K3(t,e,n);Qn=!!(t.flags&131072)}else Qn=!1,mt&&e.flags&1048576&&MA(e,Eh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hd(t,e),t=e.pendingProps;var s=Qa(e,Nn.current);Ba(e,n),s=Y0(null,e,r,t,s,n);var i=Z0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zn(r)?(i=!0,_h(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,G0(e),s.updater=Rf,e.stateNode=s,s._reactInternals=e,ry(e,r,t,n),e=oy(null,e,r,!0,i,n)):(e.tag=0,mt&&i&&B0(e),On(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=uM(r),t=Vr(r,t),s){case 0:e=iy(null,e,r,t,n);break e;case 1:e=Fx(null,e,r,t,n);break e;case 11:e=Ux(null,e,r,t,n);break e;case 14:e=Lx(null,e,r,Vr(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vr(r,s),iy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vr(r,s),Fx(t,e,r,s,n);case 3:e:{if(fC(e),t===null)throw Error(J(387));r=e.pendingProps,i=e.memoizedState,s=i.element,BA(t,e),Th(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=el(Error(J(423)),e),e=Bx(t,e,r,n,s);break e}else if(r!==s){s=el(Error(J(424)),e),e=Bx(t,e,r,n,s);break e}else for(fr=Oi(e.stateNode.containerInfo.firstChild),mr=e,mt=!0,zr=null,n=LA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xa(),r===s){e=zs(t,e,n);break e}On(t,e,r,n)}e=e.child}return e;case 5:return VA(e),t===null&&ey(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Jg(r,s)?o=null:i!==null&&Jg(r,i)&&(e.flags|=32),hC(t,e),On(t,e,o,n),e.child;case 6:return t===null&&ey(e),null;case 13:return pC(t,e,n);case 4:return K0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ya(e,null,r,n):On(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vr(r,s),Ux(t,e,r,s,n);case 7:return On(t,e,e.pendingProps,n),e.child;case 8:return On(t,e,e.pendingProps.children,n),e.child;case 12:return On(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,lt(Sh,r._currentValue),r._currentValue=o,i!==null)if(Jr(i.value,o)){if(i.children===s.children&&!Yn.current){e=zs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=Ls(-1,n&-n),a.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?a.next=a:(a.next=d.next,d.next=a),u.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),ty(i.return,n,e),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(J(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ty(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}On(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ba(e,n),s=Or(s),r=r(s),e.flags|=1,On(t,e,r,n),e.child;case 14:return r=e.type,s=Vr(r,e.pendingProps),s=Vr(r.type,s),Lx(t,e,r,s,n);case 15:return cC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Vr(r,s),Hd(t,e),e.tag=1,Zn(r)?(t=!0,_h(e)):t=!1,Ba(e,n),aC(e,r,s),ry(e,r,s,n),oy(null,e,r,!0,t,n);case 19:return mC(t,e,n);case 22:return dC(t,e,n)}throw Error(J(156,e.tag))};function PC(t,e){return sA(t,e)}function lM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(t,e,n,r){return new lM(t,e,n,r)}function uw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uM(t){if(typeof t=="function")return uw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===I0)return 11;if(t===k0)return 14}return 2}function Fi(t,e){var n=t.alternate;return n===null?(n=Rr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")uw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case _a:return Po(n.children,s,i,e);case C0:o=8,s|=8;break;case Cg:return t=Rr(12,n,e,s|2),t.elementType=Cg,t.lanes=i,t;case Ig:return t=Rr(13,n,e,s),t.elementType=Ig,t.lanes=i,t;case kg:return t=Rr(19,n,e,s),t.elementType=kg,t.lanes=i,t;case VT:return Df(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case FT:o=10;break e;case BT:o=9;break e;case I0:o=11;break e;case k0:o=14;break e;case wi:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Rr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Po(t,e,n,r){return t=Rr(7,t,r,e),t.lanes=n,t}function Df(t,e,n,r){return t=Rr(22,t,r,e),t.elementType=VT,t.lanes=n,t.stateNode={isHidden:!1},t}function vm(t,e,n){return t=Rr(6,t,null,e),t.lanes=n,t}function _m(t,e,n){return e=Rr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=em(0),this.expirationTimes=em(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=em(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function cw(t,e,n,r,s,i,o,l,a){return t=new cM(t,e,n,l,a),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Rr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},G0(i),t}function dM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:va,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function NC(t){if(!t)return Gi;t=t._reactInternals;e:{if(Zo(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(Zn(n))return NA(t,n,e)}return e}function DC(t,e,n,r,s,i,o,l,a){return t=cw(n,r,!0,t,s,i,o,l,a),t.context=NC(null),n=t.current,r=jn(),s=Li(n),i=Ls(r,s),i.callback=e??null,ji(n,i,s),t.current.lanes=s,kc(t,s,r),er(t,r),t}function Mf(t,e,n,r){var s=e.current,i=jn(),o=Li(s);return n=NC(n),e.context===null?e.context=n:e.pendingContext=n,e=Ls(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ji(s,e,o),t!==null&&(Wr(t,s,o,i),$d(t,s,o)),o}function Dh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Qx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dw(t,e){Qx(t,e),(t=t.alternate)&&Qx(t,e)}function hM(){return null}var MC=typeof reportError=="function"?reportError:function(t){console.error(t)};function hw(t){this._internalRoot=t}Of.prototype.render=hw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Mf(t,e,null,null)};Of.prototype.unmount=hw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vo(function(){Mf(null,t,null,null)}),e[Vs]=null}};function Of(t){this._internalRoot=t}Of.prototype.unstable_scheduleHydration=function(t){if(t){var e=dA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xi.length&&e!==0&&e<xi[n].priority;n++);xi.splice(n,0,t),n===0&&fA(t)}};function fw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xx(){}function fM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Dh(o);i.call(u)}}var o=DC(e,r,t,0,null,!1,!1,"",Xx);return t._reactRootContainer=o,t[Vs]=o.current,Yu(t.nodeType===8?t.parentNode:t),Vo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Dh(a);l.call(u)}}var a=cw(t,0,!1,null,null,!1,!1,"",Xx);return t._reactRootContainer=a,t[Vs]=a.current,Yu(t.nodeType===8?t.parentNode:t),Vo(function(){Mf(e,a,n,r)}),a}function Uf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=Dh(o);l.call(a)}}Mf(e,o,t,s)}else o=fM(n,e,t,s,r);return Dh(o)}uA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=uu(e.pendingLanes);n!==0&&(N0(e,n|1),er(e,Nt()),!(qe&6)&&(tl=Nt()+500,oo()))}break;case 13:Vo(function(){var r=$s(t,1);if(r!==null){var s=jn();Wr(r,t,1,s)}}),dw(t,1)}};D0=function(t){if(t.tag===13){var e=$s(t,134217728);if(e!==null){var n=jn();Wr(e,t,134217728,n)}dw(t,134217728)}};cA=function(t){if(t.tag===13){var e=Li(t),n=$s(t,e);if(n!==null){var r=jn();Wr(n,t,e,r)}dw(t,e)}};dA=function(){return Ze};hA=function(t,e){var n=Ze;try{return Ze=t,e()}finally{Ze=n}};Fg=function(t,e,n){switch(e){case"input":if(Ng(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Cf(r);if(!s)throw Error(J(90));zT(r),Ng(r,s)}}}break;case"textarea":HT(t,n);break;case"select":e=n.value,e!=null&&ja(t,!!n.multiple,e,!1)}};YT=ow;ZT=Vo;var pM={usingClientEntryPoint:!1,Events:[Pc,ba,Cf,QT,XT,ow]},nu={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mM={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nA(t),t===null?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||hM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ed.isDisabled&&Ed.supportsFiber)try{Sf=Ed.inject(mM),fs=Ed}catch{}}vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pM;vr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fw(e))throw Error(J(200));return dM(t,e,null,n)};vr.createRoot=function(t,e){if(!fw(t))throw Error(J(299));var n=!1,r="",s=MC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=cw(t,1,!1,null,null,n,!1,r,s),t[Vs]=e.current,Yu(t.nodeType===8?t.parentNode:t),new hw(e)};vr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=nA(e),t=t===null?null:t.stateNode,t};vr.flushSync=function(t){return Vo(t)};vr.hydrate=function(t,e,n){if(!jf(e))throw Error(J(200));return Uf(null,t,e,!0,n)};vr.hydrateRoot=function(t,e,n){if(!fw(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=MC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=DC(e,null,t,1,n??null,s,!1,i,o),t[Vs]=e.current,Yu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Of(e)};vr.render=function(t,e,n){if(!jf(e))throw Error(J(200));return Uf(null,t,e,!1,n)};vr.unmountComponentAtNode=function(t){if(!jf(t))throw Error(J(40));return t._reactRootContainer?(Vo(function(){Uf(null,null,t,!1,function(){t._reactRootContainer=null,t[Vs]=null})}),!0):!1};vr.unstable_batchedUpdates=ow;vr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!jf(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Uf(t,e,n,!1,r)};vr.version="18.3.1-next-f1338f8080-20240426";function OC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OC)}catch(t){console.error(t)}}OC(),OT.exports=vr;var gM=OT.exports,Yx=gM;Tg.createRoot=Yx.createRoot,Tg.hydrateRoot=Yx.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ac(){return ac=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ac.apply(this,arguments)}var ki;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ki||(ki={}));const Zx="popstate";function yM(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return wy("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Mh(s)}return vM(e,n,null,t)}function It(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wM(){return Math.random().toString(36).substr(2,8)}function eE(t,e){return{usr:t.state,key:t.key,idx:e}}function wy(t,e,n,r){return n===void 0&&(n=null),ac({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_l(e):e,{state:n,key:e&&e.key||r||wM()})}function Mh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _l(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function vM(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=ki.Pop,a=null,u=d();u==null&&(u=0,o.replaceState(ac({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=ki.Pop;let b=d(),v=b==null?null:b-u;u=b,a&&a({action:l,location:E.location,delta:v})}function f(b,v){l=ki.Push;let x=wy(E.location,b,v);u=d()+1;let T=eE(x,u),D=E.createHref(x);try{o.pushState(T,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(D)}i&&a&&a({action:l,location:E.location,delta:1})}function g(b,v){l=ki.Replace;let x=wy(E.location,b,v);u=d();let T=eE(x,u),D=E.createHref(x);o.replaceState(T,"",D),i&&a&&a({action:l,location:E.location,delta:0})}function w(b){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof b=="string"?b:Mh(b);return x=x.replace(/ $/,"%20"),It(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let E={get action(){return l},get location(){return t(s,o)},listen(b){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(Zx,h),a=b,()=>{s.removeEventListener(Zx,h),a=null}},createHref(b){return e(s,b)},createURL:w,encodeLocation(b){let v=w(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:g,go(b){return o.go(b)}};return E}var tE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(tE||(tE={}));function _M(t,e,n){return n===void 0&&(n="/"),xM(t,e,n)}function xM(t,e,n,r){let s=typeof e=="string"?_l(e):e,i=nl(s.pathname||"/",n);if(i==null)return null;let o=jC(t);EM(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=DM(i);l=PM(o[a],u)}return l}function jC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let a={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};a.relativePath.startsWith("/")&&(It(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=Bi([r,a.relativePath]),d=n.concat(a);i.children&&i.children.length>0&&(It(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),jC(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:kM(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let a of UC(i.path))s(i,o,a)}),e}function UC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=UC(r.join("/")),l=[];return l.push(...o.map(a=>a===""?i:[i,a].join("/"))),s&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function EM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:RM(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const SM=/^:[\w-]+$/,bM=3,TM=2,AM=1,CM=10,IM=-2,nE=t=>t==="*";function kM(t,e){let n=t.split("/"),r=n.length;return n.some(nE)&&(r+=IM),e&&(r+=TM),n.filter(s=>!nE(s)).reduce((s,i)=>s+(SM.test(i)?bM:i===""?AM:CM),r)}function RM(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function PM(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=vy({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},d),f=a.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Bi([i,h.pathname]),pathnameBase:LM(Bi([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Bi([i,h.pathnameBase]))}return o}function vy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=NM(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:g}=d;if(f==="*"){let E=l[h]||"";o=i.slice(0,i.length-E.length).replace(/(.)\/+$/,"$1")}const w=l[h];return g&&!w?u[f]=void 0:u[f]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function NM(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),pw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function DM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function nl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const MM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OM=t=>MM.test(t);function jM(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?_l(t):t,i;if(n)if(OM(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),pw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=rE(n.substring(1),"/"):i=rE(n,e)}else i=e;return{pathname:i,search:FM(r),hash:BM(s)}}function rE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function xm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UM(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function LC(t,e){let n=UM(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function FC(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=_l(t):(s=ac({},t),It(!s.pathname||!s.pathname.includes("?"),xm("?","pathname","search",s)),It(!s.pathname||!s.pathname.includes("#"),xm("#","pathname","hash",s)),It(!s.search||!s.search.includes("#"),xm("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let a=jM(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||d)&&(a.pathname+="/"),a}const Bi=t=>t.join("/").replace(/\/\/+/g,"/"),LM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,BM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function VM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const BC=["post","put","patch","delete"];new Set(BC);const $M=["get",...BC];new Set($M);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lc(){return lc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lc.apply(this,arguments)}const Lf=N.createContext(null),VC=N.createContext(null),ao=N.createContext(null),Ff=N.createContext(null),Zs=N.createContext({outlet:null,matches:[],isDataRoute:!1}),$C=N.createContext(null);function zM(t,e){let{relative:n}=e===void 0?{}:e;Dc()||It(!1);let{basename:r,navigator:s}=N.useContext(ao),{hash:i,pathname:o,search:l}=Bf(t,{relative:n}),a=o;return r!=="/"&&(a=o==="/"?r:Bi([r,o])),s.createHref({pathname:a,search:l,hash:i})}function Dc(){return N.useContext(Ff)!=null}function ea(){return Dc()||It(!1),N.useContext(Ff).location}function zC(t){N.useContext(ao).static||N.useLayoutEffect(t)}function Mc(){let{isDataRoute:t}=N.useContext(Zs);return t?sO():qM()}function qM(){Dc()||It(!1);let t=N.useContext(Lf),{basename:e,future:n,navigator:r}=N.useContext(ao),{matches:s}=N.useContext(Zs),{pathname:i}=ea(),o=JSON.stringify(LC(s,n.v7_relativeSplatPath)),l=N.useRef(!1);return zC(()=>{l.current=!0}),N.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=FC(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Bi([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}const HM=N.createContext(null);function WM(t){let e=N.useContext(Zs).outlet;return e&&N.createElement(HM.Provider,{value:t},e)}function mw(){let{matches:t}=N.useContext(Zs),e=t[t.length-1];return e?e.params:{}}function Bf(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(ao),{matches:s}=N.useContext(Zs),{pathname:i}=ea(),o=JSON.stringify(LC(s,r.v7_relativeSplatPath));return N.useMemo(()=>FC(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function GM(t,e){return KM(t,e)}function KM(t,e,n,r){Dc()||It(!1);let{navigator:s}=N.useContext(ao),{matches:i}=N.useContext(Zs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let u=ea(),d;if(e){var h;let b=typeof e=="string"?_l(e):e;a==="/"||(h=b.pathname)!=null&&h.startsWith(a)||It(!1),d=b}else d=u;let f=d.pathname||"/",g=f;if(a!=="/"){let b=a.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=_M(t,{pathname:g}),E=ZM(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Bi([a,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?a:Bi([a,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&E?N.createElement(Ff.Provider,{value:{location:lc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ki.Pop}},E):E}function JM(){let t=rO(),e=VM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:s},n):null,null)}const QM=N.createElement(JM,null);class XM extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(Zs.Provider,{value:this.props.routeContext},N.createElement($C.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YM(t){let{routeContext:e,match:n,children:r}=t,s=N.useContext(Lf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Zs.Provider,{value:e},r)}function ZM(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||It(!1),o=o.slice(0,Math.min(o.length,d+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:g}=n,w=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||w){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let g,w=!1,E=null,b=null;n&&(g=l&&h.route.id?l[h.route.id]:void 0,E=h.route.errorElement||QM,a&&(u<0&&f===0?(iO("route-fallback"),w=!0,b=null):u===f&&(w=!0,b=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),x=()=>{let T;return g?T=E:w?T=b:h.route.Component?T=N.createElement(h.route.Component,null):h.route.element?T=h.route.element:T=d,N.createElement(YM,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:T})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?N.createElement(XM,{location:n.location,revalidation:n.revalidation,component:E,error:g,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var qC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qC||{}),HC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(HC||{});function eO(t){let e=N.useContext(Lf);return e||It(!1),e}function tO(t){let e=N.useContext(VC);return e||It(!1),e}function nO(t){let e=N.useContext(Zs);return e||It(!1),e}function WC(t){let e=nO(),n=e.matches[e.matches.length-1];return n.route.id||It(!1),n.route.id}function rO(){var t;let e=N.useContext($C),n=tO(),r=WC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function sO(){let{router:t}=eO(qC.UseNavigateStable),e=WC(HC.UseNavigateStable),n=N.useRef(!1);return zC(()=>{n.current=!0}),N.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,lc({fromRouteId:e},i)))},[t,e])}const sE={};function iO(t,e,n){sE[t]||(sE[t]=!0)}function oO(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function aO(t){return WM(t.context)}function zn(t){It(!1)}function lO(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ki.Pop,navigator:i,static:o=!1,future:l}=t;Dc()&&It(!1);let a=e.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:a,navigator:i,static:o,future:lc({v7_relativeSplatPath:!1},l)}),[a,l,i,o]);typeof r=="string"&&(r=_l(r));let{pathname:d="/",search:h="",hash:f="",state:g=null,key:w="default"}=r,E=N.useMemo(()=>{let b=nl(d,a);return b==null?null:{location:{pathname:b,search:h,hash:f,state:g,key:w},navigationType:s}},[a,d,h,f,g,w,s]);return E==null?null:N.createElement(ao.Provider,{value:u},N.createElement(Ff.Provider,{children:n,value:E}))}function uO(t){let{children:e,location:n}=t;return GM(_y(e),n)}new Promise(()=>{});function _y(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,s)=>{if(!N.isValidElement(r))return;let i=[...e,s];if(r.type===N.Fragment){n.push.apply(n,_y(r.props.children,i));return}r.type!==zn&&It(!1),!r.props.index||!r.props.children||It(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_y(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oh(){return Oh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oh.apply(this,arguments)}function GC(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function cO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dO(t,e){return t.button===0&&(!e||e==="_self")&&!cO(t)}const hO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fO=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],pO="6";try{window.__reactRouterVersion=pO}catch{}const mO=N.createContext({isTransitioning:!1}),gO="startTransition",iE=iD[gO];function yO(t){let{basename:e,children:n,future:r,window:s}=t,i=N.useRef();i.current==null&&(i.current=yM({window:s,v5Compat:!0}));let o=i.current,[l,a]=N.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=N.useCallback(h=>{u&&iE?iE(()=>a(h)):a(h)},[a,u]);return N.useLayoutEffect(()=>o.listen(d),[o,d]),N.useEffect(()=>oO(r),[r]),N.createElement(lO,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const wO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gw=N.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:a,to:u,preventScrollReset:d,viewTransition:h}=e,f=GC(e,hO),{basename:g}=N.useContext(ao),w,E=!1;if(typeof u=="string"&&vO.test(u)&&(w=u,wO))try{let T=new URL(window.location.href),D=u.startsWith("//")?new URL(T.protocol+u):new URL(u),L=nl(D.pathname,g);D.origin===T.origin&&L!=null?u=L+D.search+D.hash:E=!0}catch{}let b=zM(u,{relative:s}),v=xO(u,{replace:o,state:l,target:a,preventScrollReset:d,relative:s,viewTransition:h});function x(T){r&&r(T),T.defaultPrevented||v(T)}return N.createElement("a",Oh({},f,{href:w||b,onClick:E||i?r:x,ref:n,target:a}))}),oE=N.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:a,viewTransition:u,children:d}=e,h=GC(e,fO),f=Bf(a,{relative:h.relative}),g=ea(),w=N.useContext(VC),{navigator:E,basename:b}=N.useContext(ao),v=w!=null&&EO(f)&&u===!0,x=E.encodeLocation?E.encodeLocation(f).pathname:f.pathname,T=g.pathname,D=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(T=T.toLowerCase(),D=D?D.toLowerCase():null,x=x.toLowerCase()),D&&b&&(D=nl(D,b)||D);const L=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let V=T===x||!o&&T.startsWith(x)&&T.charAt(L)==="/",I=D!=null&&(D===x||!o&&D.startsWith(x)&&D.charAt(x.length)==="/"),C={isActive:V,isPending:I,isTransitioning:v},_=V?r:void 0,k;typeof i=="function"?k=i(C):k=[i,V?"active":null,I?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(C):l;return N.createElement(gw,Oh({},h,{"aria-current":_,className:k,ref:n,style:P,to:a,viewTransition:u}),typeof d=="function"?d(C):d)});var xy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xy||(xy={}));var aE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(aE||(aE={}));function _O(t){let e=N.useContext(Lf);return e||It(!1),e}function xO(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,a=Mc(),u=ea(),d=Bf(t,{relative:o});return N.useCallback(h=>{if(dO(h,n)){h.preventDefault();let f=r!==void 0?r:Mh(u)===Mh(d);a(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,a,d,r,s,n,t,i,o,l])}function EO(t,e){e===void 0&&(e={});let n=N.useContext(mO);n==null&&It(!1);let{basename:r}=_O(xy.useViewTransitionState),s=Bf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=nl(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=nl(n.nextLocation.pathname,r)||n.nextLocation.pathname;return vy(s.pathname,o)!=null||vy(s.pathname,i)!=null}/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),De=(t,e)=>{const n=N.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:a,...u},d)=>N.createElement("svg",{ref:d,...SO,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${bO(t)}`,l].join(" "),...u},[...e.map(([h,f])=>N.createElement(h,f)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=De("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=De("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=De("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=De("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=De("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=De("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=De("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=De("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=De("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=De("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=De("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=De("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=De("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=De("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=De("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=De("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=De("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=De("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=De("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=De("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=De("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=De("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=De("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=De("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=De("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=De("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=De("TerminalSquare",[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=De("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=De("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=De("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=De("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=De("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),GO={},dE=t=>{let e;const n=new Set,r=(d,h)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const g=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(w=>w(e,g))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(GO?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,s,a);return a},KO=t=>t?dE(t):dE;var nI={exports:{}},rI={},sI={exports:{}},iI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sl=N;function JO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var QO=typeof Object.is=="function"?Object.is:JO,XO=sl.useState,YO=sl.useEffect,ZO=sl.useLayoutEffect,e4=sl.useDebugValue;function t4(t,e){var n=e(),r=XO({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return ZO(function(){s.value=n,s.getSnapshot=e,Em(s)&&i({inst:s})},[t,n,e]),YO(function(){return Em(s)&&i({inst:s}),t(function(){Em(s)&&i({inst:s})})},[t]),e4(n),n}function Em(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!QO(t,n)}catch{return!0}}function n4(t,e){return e()}var r4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?n4:t4;iI.useSyncExternalStore=sl.useSyncExternalStore!==void 0?sl.useSyncExternalStore:r4;sI.exports=iI;var s4=sI.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f=N,i4=s4;function o4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var a4=typeof Object.is=="function"?Object.is:o4,l4=i4.useSyncExternalStore,u4=$f.useRef,c4=$f.useEffect,d4=$f.useMemo,h4=$f.useDebugValue;rI.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=u4(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=d4(function(){function a(g){if(!u){if(u=!0,d=g,g=r(g),s!==void 0&&o.hasValue){var w=o.value;if(s(w,g))return h=w}return h=g}if(w=h,a4(d,g))return w;var E=r(g);return s!==void 0&&s(w,E)?(d=g,w):(d=g,h=E)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return a(e())},f===null?void 0:function(){return a(f())}]},[e,n,r,s]);var l=l4(t,i[0],i[1]);return c4(function(){o.hasValue=!0,o.value=l},[l]),h4(l),l};nI.exports=rI;var f4=nI.exports;const p4=ST(f4),oI={},{useDebugValue:m4}=S0,{useSyncExternalStoreWithSelector:g4}=p4;let hE=!1;const y4=t=>t;function w4(t,e=y4,n){(oI?"production":void 0)!=="production"&&n&&!hE&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),hE=!0);const r=g4(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return m4(r),r}const fE=t=>{(oI?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?KO(t):t,n=(r,s)=>w4(e,r,s);return Object.assign(n,e),n},xl=t=>t?fE(t):fE,Pr=xl((t,e)=>({experimentMode:"NORMAL",userStats:{logic:88,altruism:12,aggression:82,credit:99},setExperimentMode:n=>t({experimentMode:n}),setUserStats:n=>t(r=>({userStats:{...r.userStats,...n}})),isBlind:()=>e().experimentMode==="BLIND",isSilenced:()=>e().experimentMode==="SILENCE"})),v4=()=>{};var pE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],a=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},lI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,a=s+2<t.length,u=a?t[s+2]:0,d=i>>2,h=(i&3)<<4|l>>4;let f=(l&15)<<2|u>>6,g=u&63;a||(g=64,o||(f=64)),r.push(n[d],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(aI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||h==null)throw new x4;const f=i<<2|l>>4;if(r.push(f),u!==64){const g=l<<4&240|u>>2;if(r.push(g),h!==64){const w=u<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class x4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E4=function(t){const e=aI(t);return lI.encodeByteArray(e,!0)},Uh=function(t){return E4(t).replace(/\./g,"")},uI=function(t){try{return lI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=()=>S4().__FIREBASE_DEFAULTS__,T4=()=>{if(typeof process>"u"||typeof pE>"u")return;const t=pE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},A4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&uI(t[1]);return e&&JSON.parse(e)},zf=()=>{try{return v4()||b4()||T4()||A4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cI=t=>{var e,n;return(n=(e=zf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},C4=t=>{const e=cI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dI=()=>{var t;return(t=zf())==null?void 0:t.config},hI=t=>{var e;return(e=zf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Uh(JSON.stringify(n)),Uh(JSON.stringify(o)),""].join(".")}const ku={};function R4(){const t={prod:[],emulator:[]};for(const e of Object.keys(ku))ku[e]?t.emulator.push(e):t.prod.push(e);return t}function P4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let mE=!1;function pI(t,e){if(typeof window>"u"||typeof document>"u"||!El(window.location.host)||ku[t]===e||ku[t]||mE)return;ku[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",i=R4().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function a(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{mE=!0,o()},f}function d(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=P4(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),E=n("learnmore"),b=document.getElementById(E)||document.createElement("a"),v=n("preprendIcon"),x=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const T=f.element;l(T),d(b,E);const D=u();a(x,v),T.append(x,w,b,D),document.body.appendChild(T)}i?(w.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function N4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dn())}function D4(){var e;const t=(e=zf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vw(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function O4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function j4(){const t=Dn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function U4(){return!D4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _w(){try{return typeof indexedDB=="object"}catch{return!1}}function xw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function mI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="FirebaseError";class Yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=L4,Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ta.prototype.create)}}class ta{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?F4(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Yr(s,l,r)}}function F4(t,e){return t.replace(B4,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const B4=/\{\$([^}]+)}/g;function V4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ki(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(gE(i)&&gE(o)){if(!Ki(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function gE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function du(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function hu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $4(t,e){const n=new z4(t,e);return n.subscribe.bind(n)}class z4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");q4(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Sm),s.error===void 0&&(s.error=Sm),s.complete===void 0&&(s.complete=Sm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=1e3,W4=2,G4=4*60*60*1e3,K4=.5;function yE(t,e=H4,n=W4){const r=e*Math.pow(n,t),s=Math.round(K4*r*(Math.random()-.5)*2);return Math.min(G4,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){return t&&t._delegate?t._delegate:t}class Qr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new I4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X4(e))try{this.getOrInitializeService({instanceIdentifier:xo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xo){return this.instances.has(e)}getOptions(e=xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xo){return this.component?this.component.multipleInstances?e:xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q4(t){return t===xo?void 0:t}function X4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new J4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const Z4={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},ej=Le.INFO,tj={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},nj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=tj[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qf{constructor(e){this.name=e,this._logLevel=ej,this._logHandler=nj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Z4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const rj=(t,e)=>e.some(n=>t instanceof n);let wE,vE;function sj(){return wE||(wE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ij(){return vE||(vE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gI=new WeakMap,Ey=new WeakMap,yI=new WeakMap,bm=new WeakMap,Ew=new WeakMap;function oj(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Vi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&gI.set(n,t)}).catch(()=>{}),Ew.set(e,t),e}function aj(t){if(Ey.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ey.set(t,e)}let Sy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ey.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lj(t){Sy=t(Sy)}function uj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Tm(this),e,...n);return yI.set(r,e.sort?e.sort():[e]),Vi(r)}:ij().includes(t)?function(...e){return t.apply(Tm(this),e),Vi(gI.get(this))}:function(...e){return Vi(t.apply(Tm(this),e))}}function cj(t){return typeof t=="function"?uj(t):(t instanceof IDBTransaction&&aj(t),rj(t,sj())?new Proxy(t,Sy):t)}function Vi(t){if(t instanceof IDBRequest)return oj(t);if(bm.has(t))return bm.get(t);const e=cj(t);return e!==t&&(bm.set(t,e),Ew.set(e,t)),e}const Tm=t=>Ew.get(t);function wI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Vi(o);return r&&o.addEventListener("upgradeneeded",a=>{r(Vi(o.result),a.oldVersion,a.newVersion,Vi(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{i&&a.addEventListener("close",()=>i()),s&&a.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const dj=["get","getKey","getAll","getAllKeys","count"],hj=["put","add","delete","clear"],Am=new Map;function _E(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=hj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||dj.includes(n)))return;const i=async function(o,...l){const a=this.transaction(o,s?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&a.done]))[0]};return Am.set(e,i),i}lj(t=>({...t,get:(e,n,r)=>_E(e,n)||t.get(e,n,r),has:(e,n)=>!!_E(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const by="@firebase/app",xE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new qf("@firebase/app"),mj="@firebase/app-compat",gj="@firebase/analytics-compat",yj="@firebase/analytics",wj="@firebase/app-check-compat",vj="@firebase/app-check",_j="@firebase/auth",xj="@firebase/auth-compat",Ej="@firebase/database",Sj="@firebase/data-connect",bj="@firebase/database-compat",Tj="@firebase/functions",Aj="@firebase/functions-compat",Cj="@firebase/installations",Ij="@firebase/installations-compat",kj="@firebase/messaging",Rj="@firebase/messaging-compat",Pj="@firebase/performance",Nj="@firebase/performance-compat",Dj="@firebase/remote-config",Mj="@firebase/remote-config-compat",Oj="@firebase/storage",jj="@firebase/storage-compat",Uj="@firebase/firestore",Lj="@firebase/ai",Fj="@firebase/firestore-compat",Bj="firebase",Vj="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="[DEFAULT]",$j={[by]:"fire-core",[mj]:"fire-core-compat",[yj]:"fire-analytics",[gj]:"fire-analytics-compat",[vj]:"fire-app-check",[wj]:"fire-app-check-compat",[_j]:"fire-auth",[xj]:"fire-auth-compat",[Ej]:"fire-rtdb",[Sj]:"fire-data-connect",[bj]:"fire-rtdb-compat",[Tj]:"fire-fn",[Aj]:"fire-fn-compat",[Cj]:"fire-iid",[Ij]:"fire-iid-compat",[kj]:"fire-fcm",[Rj]:"fire-fcm-compat",[Pj]:"fire-perf",[Nj]:"fire-perf-compat",[Dj]:"fire-rc",[Mj]:"fire-rc-compat",[Oj]:"fire-gcs",[jj]:"fire-gcs-compat",[Uj]:"fire-fst",[Fj]:"fire-fst-compat",[Lj]:"fire-vertex","fire-js":"fire-js",[Bj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new Map,zj=new Map,Ay=new Map;function EE(t,e){try{t.container.addComponent(e)}catch(n){qs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Es(t){const e=t.name;if(Ay.has(e))return qs.debug(`There were multiple attempts to register component ${e}.`),!1;Ay.set(e,t);for(const n of uc.values())EE(n,t);for(const n of zj.values())EE(n,t);return!0}function na(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Gn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new ta("app","Firebase",qj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=Vj;function vI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ty,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw $i.create("bad-app-name",{appName:String(s)});if(n||(n=dI()),!n)throw $i.create("no-options");const i=uc.get(s);if(i){if(Ki(n,i.options)&&Ki(r,i.config))return i;throw $i.create("duplicate-app",{appName:s})}const o=new Y4(s);for(const a of Ay.values())o.addComponent(a);const l=new Hj(n,r,o);return uc.set(s,l),l}function Hf(t=Ty){const e=uc.get(t);if(!e&&t===Ty&&dI())return vI();if(!e)throw $i.create("no-app",{appName:t});return e}function Wj(){return Array.from(uc.values())}function Dr(t,e,n){let r=$j[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qs.warn(o.join(" "));return}Es(new Qr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj="firebase-heartbeat-database",Kj=1,cc="firebase-heartbeat-store";let Cm=null;function _I(){return Cm||(Cm=wI(Gj,Kj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cc)}catch(n){console.warn(n)}}}}).catch(t=>{throw $i.create("idb-open",{originalErrorMessage:t.message})})),Cm}async function Jj(t){try{const n=(await _I()).transaction(cc),r=await n.objectStore(cc).get(xI(t));return await n.done,r}catch(e){if(e instanceof Yr)qs.warn(e.message);else{const n=$i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qs.warn(n.message)}}}async function SE(t,e){try{const r=(await _I()).transaction(cc,"readwrite");await r.objectStore(cc).put(e,xI(t)),await r.done}catch(n){if(n instanceof Yr)qs.warn(n.message);else{const r=$i.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qs.warn(r.message)}}}function xI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=1024,Xj=30;class Yj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=bE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Xj){const o=tU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bE(),{heartbeatsToSend:r,unsentEntries:s}=Zj(this._heartbeatsCache.heartbeats),i=Uh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return qs.warn(n),""}}}function bE(){return new Date().toISOString().substring(0,10)}function Zj(t,e=Qj){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),TE(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),TE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class eU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _w()?xw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Jj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return SE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return SE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function TE(t){return Uh(JSON.stringify({version:2,heartbeats:t})).length}function tU(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(t){Es(new Qr("platform-logger",e=>new fj(e),"PRIVATE")),Es(new Qr("heartbeat",e=>new Yj(e),"PRIVATE")),Dr(by,xE,t),Dr(by,xE,"esm2020"),Dr("fire-js","")}nU("");function EI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rU=EI,SI=new ta("auth","Firebase",EI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new qf("@firebase/auth");function sU(t,...e){Lh.logLevel<=Le.WARN&&Lh.warn(`Auth (${Sl}): ${t}`,...e)}function Jd(t,...e){Lh.logLevel<=Le.ERROR&&Lh.error(`Auth (${Sl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t,...e){throw bw(t,...e)}function Gr(t,...e){return bw(t,...e)}function Sw(t,e,n){const r={...rU(),[e]:n};return new ta("auth","Firebase",r).create(e,{appName:t.name})}function ms(t){return Sw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iU(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ur(t,"argument-error"),Sw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return SI.create(t,...e)}function we(t,e,...n){if(!t)throw bw(e,...n)}function Os(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jd(e),new Error(e)}function Hs(t,e){t||Os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function oU(){return AE()==="http:"||AE()==="https:"}function AE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oU()||vw()||"connection"in navigator)?navigator.onLine:!0}function lU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hs(n>e,"Short delay should be less than long delay!"),this.isMobile=N4()||O4()}get(){return aU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t,e){Hs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dU=new jc(3e4,6e4);function lo(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ei(t,e,n,r,s={}){return TI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Oc({key:t.config.apiKey,...o}).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:a,...i};return M4()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&El(t.emulatorConfig.host)&&(u.credentials="include"),bI.fetch()(await AI(t,t.config.apiHost,n,l),u)})}async function TI(t,e,n){t._canInitEmulator=!1;const r={...uU,...e};try{const s=new fU(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Sd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[a,u]=l.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sd(t,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw Sd(t,"email-already-in-use",o);if(a==="USER_DISABLED")throw Sd(t,"user-disabled",o);const d=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Sw(t,d,u);Ur(t,d)}}catch(s){if(s instanceof Yr)throw s;Ur(t,"network-request-failed",{message:String(s)})}}async function Uc(t,e,n,r,s={}){const i=await ei(t,e,n,r,s);return"mfaPendingCredential"in i&&Ur(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function AI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Tw(t.config,s):`${t.config.apiScheme}://${s}`;return cU.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function hU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gr(this.auth,"network-request-failed")),dU.get())})}}function Sd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Gr(t,e,r);return s.customData._tokenResponse=n,s}function CE(t){return t!==void 0&&t.enterprise!==void 0}class pU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mU(t,e){return ei(t,"GET","/v2/recaptchaConfig",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gU(t,e){return ei(t,"POST","/v1/accounts:delete",e)}async function Fh(t,e){return ei(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yU(t,e=!1){const n=xt(t),r=await n.getIdToken(e),s=Aw(r);we(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ru(Im(s.auth_time)),issuedAtTime:Ru(Im(s.iat)),expirationTime:Ru(Im(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Im(t){return Number(t)*1e3}function Aw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Jd("JWT malformed, contained fewer than 3 sections"),null;try{const s=uI(n);return s?JSON.parse(s):(Jd("Failed to decode base64 JWT payload"),null)}catch(s){return Jd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function IE(t){const e=Aw(t);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yr&&wU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bh(t){var h;const e=t.auth,n=await t.getIdToken(),r=await il(t,Fh(e,{idToken:n}));we(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?CI(s.providerUserInfo):[],o=xU(t.providerData,i),l=t.isAnonymous,a=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?a:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Iy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function _U(t){const e=xt(t);await Bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xU(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function CI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(t,e){const n=await TI(t,{},async()=>{const r=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await AI(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:l,body:r};return t.emulatorConfig&&El(t.emulatorConfig.host)&&(a.credentials="include"),bI.fetch()(o,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SU(t,e){return ei(t,"POST","/v2/accounts:revokeToken",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=IE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await EU(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new $a;return r&&(we(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(we(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(we(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $a,this.toJSON())}_performRefresh(){return Os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t,e){we(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new vU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Iy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await il(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yU(this,e)}reload(){return _U(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await il(this,gU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,a=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:g,providerData:w,stsTokenManager:E}=n;we(h&&E,e,"internal-error");const b=$a.fromJSON(this.name,E);we(typeof h=="string",e,"internal-error"),hi(r,e.name),hi(s,e.name),we(typeof f=="boolean",e,"internal-error"),we(typeof g=="boolean",e,"internal-error"),hi(i,e.name),hi(o,e.name),hi(l,e.name),hi(a,e.name),hi(u,e.name),hi(d,e.name);const v=new qr({uid:h,auth:e,email:s,emailVerified:f,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:b,createdAt:u,lastLoginAt:d});return w&&Array.isArray(w)&&(v.providerData=w.map(x=>({...x}))),a&&(v._redirectEventId=a),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new $a;s.updateFromServerResponse(n);const i=new qr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Bh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];we(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?CI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new $a;l.updateFromIdToken(r);const a=new qr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Iy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(a,u),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=new Map;function js(t){Hs(t instanceof Function,"Expected a class definition");let e=kE.get(t);return e?(Hs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}II.type="NONE";const RE=II;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t,e,n){return`firebase:${t}:${e}:${n}`}class za{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Qd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Qd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Fh(this.auth,{idToken:e}).catch(()=>{});return n?qr._fromGetAccountInfoResponse(this.auth,n,e):null}return qr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new za(js(RE),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||js(RE);const o=Qd(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await Fh(e,{idToken:d}).catch(()=>{});if(!f)break;h=await qr._fromGetAccountInfoResponse(e,f,d)}else h=qr._fromJSON(e,d);u!==i&&(l=h),i=u;break}}catch{}const a=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!a.length?new za(i,e,r):(i=a[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new za(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MI(e))return"Blackberry";if(OI(e))return"Webos";if(RI(e))return"Safari";if((e.includes("chrome/")||PI(e))&&!e.includes("edge/"))return"Chrome";if(DI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kI(t=Dn()){return/firefox\//i.test(t)}function RI(t=Dn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PI(t=Dn()){return/crios\//i.test(t)}function NI(t=Dn()){return/iemobile/i.test(t)}function DI(t=Dn()){return/android/i.test(t)}function MI(t=Dn()){return/blackberry/i.test(t)}function OI(t=Dn()){return/webos/i.test(t)}function Cw(t=Dn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bU(t=Dn()){var e;return Cw(t)&&!!((e=window.navigator)!=null&&e.standalone)}function TU(){return j4()&&document.documentMode===10}function jI(t=Dn()){return Cw(t)||DI(t)||OI(t)||MI(t)||/windows phone/i.test(t)||NI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t,e=[]){let n;switch(t){case"Browser":n=PE(Dn());break;case"Worker":n=`${PE(Dn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Sl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const a=e(i);o(a)}catch(a){l(a)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CU(t,e={}){return ei(t,"GET","/v2/passwordPolicy",lo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU=6;class kU{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??IU,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NE(this),this.idTokenSubscription=new NE(this),this.beforeStateQueue=new AU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=js(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await za.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Fh(this,{idToken:e}),r=await qr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Gn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===l)&&(a!=null&&a.user)&&(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(ms(this));const n=e?xt(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(js(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CU(this),n=new kU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ta("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await SU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&js(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await za.create(this,[js(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,s);return()=>{o=!0,a()}}else{const a=e.addObserver(n);return()=>{o=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&sU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ti(t){return xt(t)}class NE{constructor(e){this.auth=e,this.observer=null,this.addObserver=$4(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PU(t){Wf=t}function LI(t){return Wf.loadJS(t)}function NU(){return Wf.recaptchaEnterpriseScript}function DU(){return Wf.gapiScript}function MU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class OU{constructor(){this.enterprise=new jU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class jU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const UU="recaptcha-enterprise",FI="NO_RECAPTCHA";class LU{constructor(e){this.type=UU,this.auth=ti(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{mU(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new pU(a);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(a=>{l(a)})})}function s(i,o,l){const a=window.grecaptcha;CE(a)?a.enterprise.ready(()=>{a.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(FI)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new OU().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&CE(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let a=NU();a.length!==0&&(a+=l),LI(a).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function DE(t,e,n,r=!1,s=!1){const i=new LU(t);let o;if(s)o=FI;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const a=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const a=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:a,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ky(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await DE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await DE(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FU(t,e){const n=na(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ki(i,e??{}))return s;Ur(s,"already-initialized")}return n.initialize({options:e})}function BU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(js);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function VU(t,e,n){const r=ti(t);we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=BI(e),{host:o,port:l}=$U(e),a=l===null?"":`:${l}`,u={url:`${i}//${o}${a}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){we(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),we(Ki(u,r.config.emulator)&&Ki(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,El(o)?(fI(`${i}//${o}${a}`),pI("Auth",!0)):zU()}function BI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $U(t){const e=BI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ME(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ME(o)}}}function ME(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Os("not implemented")}_getIdTokenResponse(e){return Os("not implemented")}_linkToIdToken(e,n){return Os("not implemented")}_getReauthenticationResolver(e){return Os("not implemented")}}async function qU(t,e){return ei(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HU(t,e){return Uc(t,"POST","/v1/accounts:signInWithPassword",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WU(t,e){return Uc(t,"POST","/v1/accounts:signInWithEmailLink",lo(t,e))}async function GU(t,e){return Uc(t,"POST","/v1/accounts:signInWithEmailLink",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends Iw{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new dc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new dc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ky(e,n,"signInWithPassword",HU);case"emailLink":return WU(e,{email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ky(e,r,"signUpPassword",qU);case"emailLink":return GU(e,{idToken:n,email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(t,e){return Uc(t,"POST","/v1/accounts:signInWithIdp",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU="http://localhost";class $o extends Iw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new $o(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qa(e,n)}buildRequest(){const e={requestUri:KU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Oc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QU(t){const e=du(hu(t)).link,n=e?du(hu(e)).deep_link_id:null,r=du(hu(t)).deep_link_id;return(r?du(hu(r)).link:null)||r||n||e||t}class kw{constructor(e){const n=du(hu(e)),r=n.apiKey??null,s=n.oobCode??null,i=JU(n.mode??null);we(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=QU(e);try{return new kw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.providerId=bl.PROVIDER_ID}static credential(e,n){return dc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=kw.parseLink(n);return we(r,"argument-error"),dc._fromEmailAndCode(e,r.code,r.tenantId)}}bl.PROVIDER_ID="password";bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends Rw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Lc{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.FACEBOOK_SIGN_IN_METHOD="facebook.com";Si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $o._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rs.credential(n,r)}catch{return null}}}Rs.GOOGLE_SIGN_IN_METHOD="google.com";Rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Lc{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.GITHUB_SIGN_IN_METHOD="github.com";bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Lc{constructor(){super("twitter.com")}static credential(e,n){return $o._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ti.credential(n,r)}catch{return null}}}Ti.TWITTER_SIGN_IN_METHOD="twitter.com";Ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(t,e){return Uc(t,"POST","/v1/accounts:signUp",lo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await qr._fromIdTokenResponse(e,r,s),o=OE(r);return new Ws({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=OE(r);return new Ws({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function OE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(t){var s;if(Gn(t.app))return Promise.reject(ms(t));const e=ti(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new Ws({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await VI(e,{returnSecureToken:!0}),r=await Ws._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends Yr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Vh(e,n,r,s)}}function $I(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Vh._fromErrorAndOperation(t,i,e,r):i})}async function YU(t,e,n=!1){const r=await il(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ws._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZU(t,e,n=!1){const{auth:r}=t;if(Gn(r.app))return Promise.reject(ms(r));const s="reauthenticate";try{const i=await il(t,$I(r,s,e,t),n);we(i.idToken,r,"internal-error");const o=Aw(i.idToken);we(o,r,"internal-error");const{sub:l}=o;return we(t.uid===l,r,"user-mismatch"),Ws._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ur(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(t,e,n=!1){if(Gn(t.app))return Promise.reject(ms(t));const r="signIn",s=await $I(t,r,e),i=await Ws._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function eL(t,e){return zI(ti(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(t){const e=ti(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tL(t,e,n){if(Gn(t.app))return Promise.reject(ms(t));const r=ti(t),o=await ky(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",VI).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&qI(t),a}),l=await Ws._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function nL(t,e,n){return Gn(t.app)?Promise.reject(ms(t)):eL(xt(t),bl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e){return ei(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=xt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await il(r,rL(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:a})=>a==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function iL(t,e,n,r){return xt(t).onIdTokenChanged(e,n,r)}function oL(t,e,n){return xt(t).beforeAuthStateChanged(e,n)}function aL(t,e,n,r){return xt(t).onAuthStateChanged(e,n,r)}function lL(t){return xt(t).signOut()}const $h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=1e3,cL=10;class WI extends HI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,a)=>{this.notifyListeners(o,a)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);TU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,cL):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},uL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WI.type="LOCAL";const dL=WI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI extends HI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GI.type="SESSION";const KI=GI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Gf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),a=await hL(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,a)=>{const u=Pw("",20);s.port1.start();const d=setTimeout(()=>{a(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(f.data.response);break;default:clearTimeout(d),clearTimeout(i),a(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(){return window}function pL(t){gs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(){return typeof gs().WorkerGlobalScope<"u"&&typeof gs().importScripts=="function"}async function mL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function yL(){return JI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="firebaseLocalStorageDb",wL=1,zh="firebaseLocalStorage",XI="fbase_key";class Fc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kf(t,e){return t.transaction([zh],e?"readwrite":"readonly").objectStore(zh)}function vL(){const t=indexedDB.deleteDatabase(QI);return new Fc(t).toPromise()}function Ry(){const t=indexedDB.open(QI,wL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zh,{keyPath:XI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zh)?e(r):(r.close(),await vL(),e(await Ry()))})})}async function jE(t,e,n){const r=Kf(t,!0).put({[XI]:e,value:n});return new Fc(r).toPromise()}async function _L(t,e){const n=Kf(t,!1).get(e),r=await new Fc(n).toPromise();return r===void 0?null:r.value}function UE(t,e){const n=Kf(t,!0).delete(e);return new Fc(n).toPromise()}const xL=800,EL=3;class YI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ry(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>EL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gf._getInstance(yL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await mL(),!this.activeServiceWorker)return;this.sender=new fL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ry();return await jE(e,$h,"1"),await UE(e,$h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_L(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>UE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Kf(s,!1).getAll();return new Fc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YI.type="LOCAL";const SL=YI;new jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t,e){return e?js(e):(we(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw extends Iw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bL(t){return zI(t.auth,new Nw(t),t.bypassAuthState)}function TL(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),ZU(n,new Nw(t),t.bypassAuthState)}async function AL(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),YU(n,new Nw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(a))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bL;case"linkViaPopup":case"linkViaRedirect":return AL;case"reauthViaPopup":case"reauthViaRedirect":return TL;default:Ur(this.auth,"internal-error")}}resolve(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=new jc(2e3,1e4);async function IL(t,e,n){if(Gn(t.app))return Promise.reject(Gr(t,"operation-not-supported-in-this-environment"));const r=ti(t);iU(t,e,Rw);const s=ZI(r,n);return new Co(r,"signInViaPopup",e,s).executeNotNull()}class Co extends ek{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Co.currentPopupAction&&Co.currentPopupAction.cancel(),Co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Hs(this.filter.length===1,"Popup operations only handle one event");const e=Pw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CL.get())};e()}}Co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="pendingRedirect",Xd=new Map;class RL extends ek{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xd.get(this.auth._key());if(!e){try{const r=await PL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xd.set(this.auth._key(),e)}return this.bypassAuthState||Xd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PL(t,e){const n=ML(e),r=DL(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function NL(t,e){Xd.set(t._key(),e)}function DL(t){return js(t._redirectPersistence)}function ML(t){return Qd(kL,t.config.apiKey,t.name)}async function OL(t,e,n=!1){if(Gn(t.app))return Promise.reject(ms(t));const r=ti(t),s=ZI(r,e),o=await new RL(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=10*60*1e3;class UL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tk(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jL&&this.cachedEventUids.clear(),this.cachedEventUids.has(LE(e))}saveEventToCache(e){this.cachedEventUids.add(LE(e)),this.lastProcessedEventTime=Date.now()}}function LE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FL(t,e={}){return ei(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VL=/^https?/;async function $L(t){if(t.config.emulator)return;const{authorizedDomains:e}=await FL(t);for(const n of e)try{if(zL(n))return}catch{}Ur(t,"unauthorized-domain")}function zL(t){const e=Cy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!VL.test(n))return!1;if(BL.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=new jc(3e4,6e4);function FE(){const t=gs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function HL(t){return new Promise((e,n)=>{var s,i,o;function r(){FE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FE(),n(Gr(t,"network-request-failed"))},timeout:qL.get()})}if((i=(s=gs().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=gs().gapi)!=null&&o.load)r();else{const l=MU("iframefcb");return gs()[l]=()=>{gapi.load?r():n(Gr(t,"network-request-failed"))},LI(`${DU()}?onload=${l}`).catch(a=>n(a))}}).catch(e=>{throw Yd=null,e})}let Yd=null;function WL(t){return Yd=Yd||HL(t),Yd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=new jc(5e3,15e3),KL="__/auth/iframe",JL="emulator/auth/iframe",QL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YL(t){const e=t.config;we(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Tw(e,JL):`https://${t.config.authDomain}/${KL}`,r={apiKey:e.apiKey,appName:t.name,v:Sl},s=XL.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Oc(r).slice(1)}`}async function ZL(t){const e=await WL(t),n=gs().gapi;return we(n,t,"internal-error"),e.open({where:document.body,url:YL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QL,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Gr(t,"network-request-failed"),l=gs().setTimeout(()=>{i(o)},GL.get());function a(){gs().clearTimeout(l),s(r)}r.ping(a).then(a,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t6=500,n6=600,r6="_blank",s6="http://localhost";class BE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i6(t,e,n,r=t6,s=n6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const a={...e6,width:r.toString(),height:s.toString(),top:i,left:o},u=Dn().toLowerCase();n&&(l=PI(u)?r6:n),kI(u)&&(e=e||s6,a.scrollbars="yes");const d=Object.entries(a).reduce((f,[g,w])=>`${f}${g}=${w},`,"");if(bU(u)&&l!=="_self")return o6(e||"",l),new BE(null);const h=window.open(e||"",l,d);we(h,t,"popup-blocked");try{h.focus()}catch{}return new BE(h)}function o6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6="__/auth/handler",l6="emulator/auth/handler",u6=encodeURIComponent("fac");async function VE(t,e,n,r,s,i){we(t.config.authDomain,t,"auth-domain-config-required"),we(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Sl,eventId:s};if(e instanceof Rw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",V4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Lc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const a=await t._getAppCheckToken(),u=a?`#${u6}=${encodeURIComponent(a)}`:"";return`${c6(t)}?${Oc(l).slice(1)}${u}`}function c6({config:t}){return t.emulator?Tw(t,l6):`https://${t.authDomain}/${a6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="webStorageSupport";class d6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KI,this._completeRedirectFn=OL,this._overrideRedirectResult=NL}async _openPopup(e,n,r,s){var o;Hs((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await VE(e,n,r,Cy(),s);return i6(e,i,Pw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await VE(e,n,r,Cy(),s);return pL(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Hs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ZL(e),r=new UL(e);return n.register("authEvent",s=>(we(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(km,{type:km},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[km];i!==void 0&&n(!!i),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$L(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jI()||RI()||Cw()}}const h6=d6;var $E="@firebase/auth",zE="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m6(t){Es(new Qr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;we(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UI(t)},u=new RU(r,s,i,a);return BU(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Es(new Qr("auth-internal",e=>{const n=ti(e.getProvider("auth").getImmediate());return(r=>new f6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dr($E,zE,p6(t)),Dr($E,zE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=5*60,y6=hI("authIdTokenMaxAge")||g6;let qE=null;const w6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>y6)return;const s=n==null?void 0:n.token;qE!==s&&(qE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function v6(t=Hf()){const e=na(t,"auth");if(e.isInitialized())return e.getImmediate();const n=FU(t,{popupRedirectResolver:h6,persistence:[SL,dL,KI]}),r=hI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=w6(i.toString());oL(n,o,()=>o(n.currentUser)),iL(n,l=>o(l))}}const s=cI("auth");return s&&VU(n,`http://${s}`),n}function _6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}PU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Gr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",_6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m6("Browser");var x6="firebase",E6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dr(x6,E6,"app");const nk="@firebase/installations",Dw="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=1e4,sk=`w:${Dw}`,ik="FIS_v2",S6="https://firebaseinstallations.googleapis.com/v1",b6=60*60*1e3,T6="installations",A6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},zo=new ta(T6,A6,C6);function ok(t){return t instanceof Yr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak({projectId:t}){return`${S6}/projects/${t}/installations`}function lk(t){return{token:t.token,requestStatus:2,expiresIn:k6(t.expiresIn),creationTime:Date.now()}}async function uk(t,e){const r=(await e.json()).error;return zo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ck({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function I6(t,{refreshToken:e}){const n=ck(t);return n.append("Authorization",R6(e)),n}async function dk(t){const e=await t();return e.status>=500&&e.status<600?t():e}function k6(t){return Number(t.replace("s","000"))}function R6(t){return`${ik} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P6({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=ak(t),s=ck(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:ik,appId:t.appId,sdkVersion:sk},l={method:"POST",headers:s,body:JSON.stringify(o)},a=await dk(()=>fetch(r,l));if(a.ok){const u=await a.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:lk(u.authToken)}}else throw await uk("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=/^[cdef][\w-]{21}$/,Py="";function M6(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=O6(t);return D6.test(n)?n:Py}catch{return Py}}function O6(t){return N6(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new Map;function pk(t,e){const n=Jf(t);mk(n,e),j6(n,e)}function mk(t,e){const n=fk.get(t);if(n)for(const r of n)r(e)}function j6(t,e){const n=U6();n&&n.postMessage({key:t,fid:e}),L6()}let Io=null;function U6(){return!Io&&"BroadcastChannel"in self&&(Io=new BroadcastChannel("[Firebase] FID Change"),Io.onmessage=t=>{mk(t.data.key,t.data.fid)}),Io}function L6(){fk.size===0&&Io&&(Io.close(),Io=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6="firebase-installations-database",B6=1,qo="firebase-installations-store";let Rm=null;function Mw(){return Rm||(Rm=wI(F6,B6,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(qo)}}})),Rm}async function qh(t,e){const n=Jf(t),s=(await Mw()).transaction(qo,"readwrite"),i=s.objectStore(qo),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&pk(t,e.fid),e}async function gk(t){const e=Jf(t),r=(await Mw()).transaction(qo,"readwrite");await r.objectStore(qo).delete(e),await r.done}async function Qf(t,e){const n=Jf(t),s=(await Mw()).transaction(qo,"readwrite"),i=s.objectStore(qo),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&pk(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ow(t){let e;const n=await Qf(t.appConfig,r=>{const s=V6(r),i=$6(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Py?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function V6(t){const e=t||{fid:M6(),registrationStatus:0};return yk(e)}function $6(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(zo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=z6(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:q6(t)}:{installationEntry:e}}async function z6(t,e){try{const n=await P6(t,e);return qh(t.appConfig,n)}catch(n){throw ok(n)&&n.customData.serverCode===409?await gk(t.appConfig):await qh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function q6(t){let e=await HE(t.appConfig);for(;e.registrationStatus===1;)await hk(100),e=await HE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Ow(t);return r||n}return e}function HE(t){return Qf(t,e=>{if(!e)throw zo.create("installation-not-found");return yk(e)})}function yk(t){return H6(t)?{fid:t.fid,registrationStatus:0}:t}function H6(t){return t.registrationStatus===1&&t.registrationTime+rk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W6({appConfig:t,heartbeatServiceProvider:e},n){const r=G6(t,n),s=I6(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:sk,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},a=await dk(()=>fetch(r,l));if(a.ok){const u=await a.json();return lk(u)}else throw await uk("Generate Auth Token",a)}function G6(t,{fid:e}){return`${ak(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(t,e=!1){let n;const r=await Qf(t.appConfig,i=>{if(!wk(i))throw zo.create("not-registered");const o=i.authToken;if(!e&&Q6(o))return i;if(o.requestStatus===1)return n=K6(t,e),i;{if(!navigator.onLine)throw zo.create("app-offline");const l=Y6(i);return n=J6(t,l),l}});return n?await n:r.authToken}async function K6(t,e){let n=await WE(t.appConfig);for(;n.authToken.requestStatus===1;)await hk(100),n=await WE(t.appConfig);const r=n.authToken;return r.requestStatus===0?jw(t,e):r}function WE(t){return Qf(t,e=>{if(!wk(e))throw zo.create("not-registered");const n=e.authToken;return Z6(n)?{...e,authToken:{requestStatus:0}}:e})}async function J6(t,e){try{const n=await W6(t,e),r={...e,authToken:n};return await qh(t.appConfig,r),n}catch(n){if(ok(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await gk(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await qh(t.appConfig,r)}throw n}}function wk(t){return t!==void 0&&t.registrationStatus===2}function Q6(t){return t.requestStatus===2&&!X6(t)}function X6(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+b6}function Y6(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function Z6(t){return t.requestStatus===1&&t.requestTime+rk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eF(t){const e=t,{installationEntry:n,registrationPromise:r}=await Ow(e);return r?r.catch(console.error):jw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tF(t,e=!1){const n=t;return await nF(n),(await jw(n,e)).token}async function nF(t){const{registrationPromise:e}=await Ow(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t){if(!t||!t.options)throw Pm("App Configuration");if(!t.name)throw Pm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Pm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Pm(t){return zo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="installations",sF="installations-internal",iF=t=>{const e=t.getProvider("app").getImmediate(),n=rF(e),r=na(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},oF=t=>{const e=t.getProvider("app").getImmediate(),n=na(e,vk).getImmediate();return{getId:()=>eF(n),getToken:s=>tF(n,s)}};function aF(){Es(new Qr(vk,iF,"PUBLIC")),Es(new Qr(sF,oF,"PRIVATE"))}aF();Dr(nk,Dw);Dr(nk,Dw,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="analytics",lF="firebase_id",uF="origin",cF=60*1e3,dF="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Uw="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un=new qf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},gr=new ta("analytics","Analytics",hF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(t){if(!t.startsWith(Uw)){const e=gr.create("invalid-gtag-resource",{gtagURL:t});return Un.warn(e.message),""}return t}function _k(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function pF(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function mF(t,e){const n=pF("firebase-js-sdk-policy",{createScriptURL:fF}),r=document.createElement("script"),s=`${Uw}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function gF(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function yF(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const a=(await _k(n)).find(u=>u.measurementId===s);a&&await e[a.appId]}}catch(l){Un.error(l)}t("config",s,i)}async function wF(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await _k(n);for(const a of o){const u=l.find(h=>h.measurementId===a),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Un.error(i)}}function vF(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[l,a]=o;await wF(t,e,n,l,a)}else if(i==="config"){const[l,a]=o;await yF(t,e,n,r,l,a)}else if(i==="consent"){const[l,a]=o;t("consent",l,a)}else if(i==="get"){const[l,a,u]=o;t("get",l,a,u)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){Un.error(l)}}return s}function _F(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=vF(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function xF(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Uw)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF=30,SF=1e3;class bF{constructor(e={},n=SF){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const xk=new bF;function TF(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function AF(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:TF(n)},s=dF.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const a=await i.json();(o=a.error)!=null&&o.message&&(l=a.error.message)}catch{}throw gr.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function CF(t,e=xk,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw gr.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw gr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new RF;return setTimeout(async()=>{l.abort()},cF),Ek({appId:r,apiKey:s,measurementId:i},o,l,e)}async function Ek(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=xk){var l;const{appId:i,measurementId:o}=t;try{await IF(r,e)}catch(a){if(o)return Un.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:i,measurementId:o};throw a}try{const a=await AF(t);return s.deleteThrottleMetadata(i),a}catch(a){const u=a;if(!kF(u)){if(s.deleteThrottleMetadata(i),o)return Un.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw a}const d=Number((l=u==null?void 0:u.customData)==null?void 0:l.httpStatus)===503?yE(n,s.intervalMillis,EF):yE(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(i,h),Un.debug(`Calling attemptFetch again in ${d} millis`),Ek(t,h,r,s)}}function IF(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(gr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function kF(t){if(!(t instanceof Yr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class RF{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function PF(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}async function NF(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(){if(_w())try{await xw()}catch(t){return Un.warn(gr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Un.warn(gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function MF(t,e,n,r,s,i,o){const l=CF(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Un.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Un.error(f)),e.push(l);const a=DF().then(f=>{if(f)return r.getId()}),[u,d]=await Promise.all([l,a]);xF(i)||mF(i,u.measurementId),s("js",new Date);const h=(o==null?void 0:o.config)??{};return h[uF]="firebase",h.update=!0,d!=null&&(h[lF]=d),s("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e){this.app=e}_delete(){return delete Ha[this.app.options.appId],Promise.resolve()}}let Ha={},GE=[];const KE={};let Nm="dataLayer",jF="gtag",JE,Lw,QE=!1;function UF(){const t=[];if(vw()&&t.push("This is a browser extension environment."),mI()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=gr.create("invalid-analytics-context",{errorInfo:e});Un.warn(n.message)}}function LF(t,e,n){UF();const r=t.options.appId;if(!r)throw gr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Un.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw gr.create("no-api-key");if(Ha[r]!=null)throw gr.create("already-exists",{id:r});if(!QE){gF(Nm);const{wrappedGtag:i,gtagCore:o}=_F(Ha,GE,KE,Nm,jF);Lw=i,JE=o,QE=!0}return Ha[r]=MF(t,GE,KE,e,JE,Nm,n),new OF(t)}function FF(t=Hf()){t=xt(t);const e=na(t,Hh);return e.isInitialized()?e.getImmediate():BF(t)}function BF(t,e={}){const n=na(t,Hh);if(n.isInitialized()){const s=n.getImmediate();if(Ki(e,n.getOptions()))return s;throw gr.create("already-initialized")}return n.initialize({options:e})}async function VF(){if(vw()||!mI()||!_w())return!1;try{return await xw()}catch{return!1}}function $F(t,e,n){t=xt(t),NF(Lw,Ha[t.app.options.appId],e,n).catch(r=>Un.error(r))}function zF(t,e,n,r){t=xt(t),PF(Lw,Ha[t.app.options.appId],e,n,r).catch(s=>Un.error(s))}const XE="@firebase/analytics",YE="0.10.19";function qF(){Es(new Qr(Hh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return LF(r,s,n)},"PUBLIC")),Es(new Qr("analytics-internal",t,"PRIVATE")),Dr(XE,YE),Dr(XE,YE,"esm2020");function t(e){try{const n=e.getProvider(Hh).getImmediate();return{logEvent:(r,s,i)=>zF(n,r,s,i),setUserProperties:(r,s)=>$F(n,r,s)}}catch(n){throw gr.create("interop-component-reg-failed",{reason:n})}}}qF();var ZE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zi,Sk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,C){function _(){}_.prototype=C.prototype,I.F=C.prototype,I.prototype=new _,I.prototype.constructor=I,I.D=function(k,P,O){for(var S=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)S[Z-2]=arguments[Z];return C.prototype[P].apply(k,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,C,_){_||(_=0);const k=Array(16);if(typeof C=="string")for(var P=0;P<16;++P)k[P]=C.charCodeAt(_++)|C.charCodeAt(_++)<<8|C.charCodeAt(_++)<<16|C.charCodeAt(_++)<<24;else for(P=0;P<16;++P)k[P]=C[_++]|C[_++]<<8|C[_++]<<16|C[_++]<<24;C=I.g[0],_=I.g[1],P=I.g[2];let O=I.g[3],S;S=C+(O^_&(P^O))+k[0]+3614090360&4294967295,C=_+(S<<7&4294967295|S>>>25),S=O+(P^C&(_^P))+k[1]+3905402710&4294967295,O=C+(S<<12&4294967295|S>>>20),S=P+(_^O&(C^_))+k[2]+606105819&4294967295,P=O+(S<<17&4294967295|S>>>15),S=_+(C^P&(O^C))+k[3]+3250441966&4294967295,_=P+(S<<22&4294967295|S>>>10),S=C+(O^_&(P^O))+k[4]+4118548399&4294967295,C=_+(S<<7&4294967295|S>>>25),S=O+(P^C&(_^P))+k[5]+1200080426&4294967295,O=C+(S<<12&4294967295|S>>>20),S=P+(_^O&(C^_))+k[6]+2821735955&4294967295,P=O+(S<<17&4294967295|S>>>15),S=_+(C^P&(O^C))+k[7]+4249261313&4294967295,_=P+(S<<22&4294967295|S>>>10),S=C+(O^_&(P^O))+k[8]+1770035416&4294967295,C=_+(S<<7&4294967295|S>>>25),S=O+(P^C&(_^P))+k[9]+2336552879&4294967295,O=C+(S<<12&4294967295|S>>>20),S=P+(_^O&(C^_))+k[10]+4294925233&4294967295,P=O+(S<<17&4294967295|S>>>15),S=_+(C^P&(O^C))+k[11]+2304563134&4294967295,_=P+(S<<22&4294967295|S>>>10),S=C+(O^_&(P^O))+k[12]+1804603682&4294967295,C=_+(S<<7&4294967295|S>>>25),S=O+(P^C&(_^P))+k[13]+4254626195&4294967295,O=C+(S<<12&4294967295|S>>>20),S=P+(_^O&(C^_))+k[14]+2792965006&4294967295,P=O+(S<<17&4294967295|S>>>15),S=_+(C^P&(O^C))+k[15]+1236535329&4294967295,_=P+(S<<22&4294967295|S>>>10),S=C+(P^O&(_^P))+k[1]+4129170786&4294967295,C=_+(S<<5&4294967295|S>>>27),S=O+(_^P&(C^_))+k[6]+3225465664&4294967295,O=C+(S<<9&4294967295|S>>>23),S=P+(C^_&(O^C))+k[11]+643717713&4294967295,P=O+(S<<14&4294967295|S>>>18),S=_+(O^C&(P^O))+k[0]+3921069994&4294967295,_=P+(S<<20&4294967295|S>>>12),S=C+(P^O&(_^P))+k[5]+3593408605&4294967295,C=_+(S<<5&4294967295|S>>>27),S=O+(_^P&(C^_))+k[10]+38016083&4294967295,O=C+(S<<9&4294967295|S>>>23),S=P+(C^_&(O^C))+k[15]+3634488961&4294967295,P=O+(S<<14&4294967295|S>>>18),S=_+(O^C&(P^O))+k[4]+3889429448&4294967295,_=P+(S<<20&4294967295|S>>>12),S=C+(P^O&(_^P))+k[9]+568446438&4294967295,C=_+(S<<5&4294967295|S>>>27),S=O+(_^P&(C^_))+k[14]+3275163606&4294967295,O=C+(S<<9&4294967295|S>>>23),S=P+(C^_&(O^C))+k[3]+4107603335&4294967295,P=O+(S<<14&4294967295|S>>>18),S=_+(O^C&(P^O))+k[8]+1163531501&4294967295,_=P+(S<<20&4294967295|S>>>12),S=C+(P^O&(_^P))+k[13]+2850285829&4294967295,C=_+(S<<5&4294967295|S>>>27),S=O+(_^P&(C^_))+k[2]+4243563512&4294967295,O=C+(S<<9&4294967295|S>>>23),S=P+(C^_&(O^C))+k[7]+1735328473&4294967295,P=O+(S<<14&4294967295|S>>>18),S=_+(O^C&(P^O))+k[12]+2368359562&4294967295,_=P+(S<<20&4294967295|S>>>12),S=C+(_^P^O)+k[5]+4294588738&4294967295,C=_+(S<<4&4294967295|S>>>28),S=O+(C^_^P)+k[8]+2272392833&4294967295,O=C+(S<<11&4294967295|S>>>21),S=P+(O^C^_)+k[11]+1839030562&4294967295,P=O+(S<<16&4294967295|S>>>16),S=_+(P^O^C)+k[14]+4259657740&4294967295,_=P+(S<<23&4294967295|S>>>9),S=C+(_^P^O)+k[1]+2763975236&4294967295,C=_+(S<<4&4294967295|S>>>28),S=O+(C^_^P)+k[4]+1272893353&4294967295,O=C+(S<<11&4294967295|S>>>21),S=P+(O^C^_)+k[7]+4139469664&4294967295,P=O+(S<<16&4294967295|S>>>16),S=_+(P^O^C)+k[10]+3200236656&4294967295,_=P+(S<<23&4294967295|S>>>9),S=C+(_^P^O)+k[13]+681279174&4294967295,C=_+(S<<4&4294967295|S>>>28),S=O+(C^_^P)+k[0]+3936430074&4294967295,O=C+(S<<11&4294967295|S>>>21),S=P+(O^C^_)+k[3]+3572445317&4294967295,P=O+(S<<16&4294967295|S>>>16),S=_+(P^O^C)+k[6]+76029189&4294967295,_=P+(S<<23&4294967295|S>>>9),S=C+(_^P^O)+k[9]+3654602809&4294967295,C=_+(S<<4&4294967295|S>>>28),S=O+(C^_^P)+k[12]+3873151461&4294967295,O=C+(S<<11&4294967295|S>>>21),S=P+(O^C^_)+k[15]+530742520&4294967295,P=O+(S<<16&4294967295|S>>>16),S=_+(P^O^C)+k[2]+3299628645&4294967295,_=P+(S<<23&4294967295|S>>>9),S=C+(P^(_|~O))+k[0]+4096336452&4294967295,C=_+(S<<6&4294967295|S>>>26),S=O+(_^(C|~P))+k[7]+1126891415&4294967295,O=C+(S<<10&4294967295|S>>>22),S=P+(C^(O|~_))+k[14]+2878612391&4294967295,P=O+(S<<15&4294967295|S>>>17),S=_+(O^(P|~C))+k[5]+4237533241&4294967295,_=P+(S<<21&4294967295|S>>>11),S=C+(P^(_|~O))+k[12]+1700485571&4294967295,C=_+(S<<6&4294967295|S>>>26),S=O+(_^(C|~P))+k[3]+2399980690&4294967295,O=C+(S<<10&4294967295|S>>>22),S=P+(C^(O|~_))+k[10]+4293915773&4294967295,P=O+(S<<15&4294967295|S>>>17),S=_+(O^(P|~C))+k[1]+2240044497&4294967295,_=P+(S<<21&4294967295|S>>>11),S=C+(P^(_|~O))+k[8]+1873313359&4294967295,C=_+(S<<6&4294967295|S>>>26),S=O+(_^(C|~P))+k[15]+4264355552&4294967295,O=C+(S<<10&4294967295|S>>>22),S=P+(C^(O|~_))+k[6]+2734768916&4294967295,P=O+(S<<15&4294967295|S>>>17),S=_+(O^(P|~C))+k[13]+1309151649&4294967295,_=P+(S<<21&4294967295|S>>>11),S=C+(P^(_|~O))+k[4]+4149444226&4294967295,C=_+(S<<6&4294967295|S>>>26),S=O+(_^(C|~P))+k[11]+3174756917&4294967295,O=C+(S<<10&4294967295|S>>>22),S=P+(C^(O|~_))+k[2]+718787259&4294967295,P=O+(S<<15&4294967295|S>>>17),S=_+(O^(P|~C))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+C&4294967295,I.g[1]=I.g[1]+(P+(S<<21&4294967295|S>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+O&4294967295}r.prototype.v=function(I,C){C===void 0&&(C=I.length);const _=C-this.blockSize,k=this.C;let P=this.h,O=0;for(;O<C;){if(P==0)for(;O<=_;)s(this,I,O),O+=this.blockSize;if(typeof I=="string"){for(;O<C;)if(k[P++]=I.charCodeAt(O++),P==this.blockSize){s(this,k),P=0;break}}else for(;O<C;)if(k[P++]=I[O++],P==this.blockSize){s(this,k),P=0;break}}this.h=P,this.o+=C},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var C=1;C<I.length-8;++C)I[C]=0;C=this.o*8;for(var _=I.length-8;_<I.length;++_)I[_]=C&255,C/=256;for(this.v(I),I=Array(16),C=0,_=0;_<4;++_)for(let k=0;k<32;k+=8)I[C++]=this.g[_]>>>k&255;return I};function i(I,C){var _=l;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=C(I)}function o(I,C){this.h=C;const _=[];let k=!0;for(let P=I.length-1;P>=0;P--){const O=I[P]|0;k&&O==C||(_[P]=O,k=!1)}this.g=_}var l={};function a(I){return-128<=I&&I<128?i(I,function(C){return new o([C|0],C<0?-1:0)}):new o([I|0],I<0?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return h;if(I<0)return b(u(-I));const C=[];let _=1;for(let k=0;I>=_;k++)C[k]=I/_|0,_*=4294967296;return new o(C,0)}function d(I,C){if(I.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(I.charAt(0)=="-")return b(d(I.substring(1),C));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=u(Math.pow(C,8));let k=h;for(let O=0;O<I.length;O+=8){var P=Math.min(8,I.length-O);const S=parseInt(I.substring(O,O+P),C);P<8?(P=u(Math.pow(C,P)),k=k.j(P).add(u(S))):(k=k.j(_),k=k.add(u(S)))}return k}var h=a(0),f=a(1),g=a(16777216);t=o.prototype,t.m=function(){if(E(this))return-b(this).m();let I=0,C=1;for(let _=0;_<this.g.length;_++){const k=this.i(_);I+=(k>=0?k:4294967296+k)*C,C*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(E(this))return"-"+b(this).toString(I);const C=u(Math.pow(I,6));var _=this;let k="";for(;;){const P=D(_,C).g;_=v(_,P.j(C));let O=((_.g.length>0?_.g[0]:_.h)>>>0).toString(I);if(_=P,w(_))return O+k;for(;O.length<6;)O="0"+O;k=O+k}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(let C=0;C<I.g.length;C++)if(I.g[C]!=0)return!1;return!0}function E(I){return I.h==-1}t.l=function(I){return I=v(this,I),E(I)?-1:w(I)?0:1};function b(I){const C=I.g.length,_=[];for(let k=0;k<C;k++)_[k]=~I.g[k];return new o(_,~I.h).add(f)}t.abs=function(){return E(this)?b(this):this},t.add=function(I){const C=Math.max(this.g.length,I.g.length),_=[];let k=0;for(let P=0;P<=C;P++){let O=k+(this.i(P)&65535)+(I.i(P)&65535),S=(O>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);k=S>>>16,O&=65535,S&=65535,_[P]=S<<16|O}return new o(_,_[_.length-1]&-2147483648?-1:0)};function v(I,C){return I.add(b(C))}t.j=function(I){if(w(this)||w(I))return h;if(E(this))return E(I)?b(this).j(b(I)):b(b(this).j(I));if(E(I))return b(this.j(b(I)));if(this.l(g)<0&&I.l(g)<0)return u(this.m()*I.m());const C=this.g.length+I.g.length,_=[];for(var k=0;k<2*C;k++)_[k]=0;for(k=0;k<this.g.length;k++)for(let P=0;P<I.g.length;P++){const O=this.i(k)>>>16,S=this.i(k)&65535,Z=I.i(P)>>>16,ie=I.i(P)&65535;_[2*k+2*P]+=S*ie,x(_,2*k+2*P),_[2*k+2*P+1]+=O*ie,x(_,2*k+2*P+1),_[2*k+2*P+1]+=S*Z,x(_,2*k+2*P+1),_[2*k+2*P+2]+=O*Z,x(_,2*k+2*P+2)}for(I=0;I<C;I++)_[I]=_[2*I+1]<<16|_[2*I];for(I=C;I<2*C;I++)_[I]=0;return new o(_,0)};function x(I,C){for(;(I[C]&65535)!=I[C];)I[C+1]+=I[C]>>>16,I[C]&=65535,C++}function T(I,C){this.g=I,this.h=C}function D(I,C){if(w(C))throw Error("division by zero");if(w(I))return new T(h,h);if(E(I))return C=D(b(I),C),new T(b(C.g),b(C.h));if(E(C))return C=D(I,b(C)),new T(b(C.g),C.h);if(I.g.length>30){if(E(I)||E(C))throw Error("slowDivide_ only works with positive integers.");for(var _=f,k=C;k.l(I)<=0;)_=L(_),k=L(k);var P=V(_,1),O=V(k,1);for(k=V(k,2),_=V(_,2);!w(k);){var S=O.add(k);S.l(I)<=0&&(P=P.add(_),O=S),k=V(k,1),_=V(_,1)}return C=v(I,P.j(C)),new T(P,C)}for(P=h;I.l(C)>=0;){for(_=Math.max(1,Math.floor(I.m()/C.m())),k=Math.ceil(Math.log(_)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),O=u(_),S=O.j(C);E(S)||S.l(I)>0;)_-=k,O=u(_),S=O.j(C);w(O)&&(O=f),P=P.add(O),I=v(I,S)}return new T(P,I)}t.B=function(I){return D(this,I).h},t.and=function(I){const C=Math.max(this.g.length,I.g.length),_=[];for(let k=0;k<C;k++)_[k]=this.i(k)&I.i(k);return new o(_,this.h&I.h)},t.or=function(I){const C=Math.max(this.g.length,I.g.length),_=[];for(let k=0;k<C;k++)_[k]=this.i(k)|I.i(k);return new o(_,this.h|I.h)},t.xor=function(I){const C=Math.max(this.g.length,I.g.length),_=[];for(let k=0;k<C;k++)_[k]=this.i(k)^I.i(k);return new o(_,this.h^I.h)};function L(I){const C=I.g.length+1,_=[];for(let k=0;k<C;k++)_[k]=I.i(k)<<1|I.i(k-1)>>>31;return new o(_,I.h)}function V(I,C){const _=C>>5;C%=32;const k=I.g.length-_,P=[];for(let O=0;O<k;O++)P[O]=C>0?I.i(O+_)>>>C|I.i(O+_+1)<<32-C:I.i(O+_);return new o(P,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Sk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,zi=o}).apply(typeof ZE<"u"?ZE:typeof self<"u"?self:typeof window<"u"?window:{});var bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bk,fu,Tk,Zd,Ny,Ak,Ck,Ik;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof bd=="object"&&bd];for(var m=0;m<c.length;++m){var y=c[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function s(c,m){if(m)e:{var y=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in y))break e;y=y[U]}c=c[c.length-1],A=y[c],m=m(A),m!=A&&m!=null&&e(y,c,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(m){var y=[],A;for(A in m)Object.prototype.hasOwnProperty.call(m,A)&&y.push([A,m[A]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function a(c,m,y){return c.call.apply(c.bind,arguments)}function u(c,m,y){return u=a,u.apply(null,arguments)}function d(c,m){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function h(c,m){function y(){}y.prototype=m.prototype,c.Z=m.prototype,c.prototype=new y,c.prototype.constructor=c,c.Ob=function(A,U,$){for(var ee=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)ee[ke-2]=arguments[ke];return m.prototype[U].apply(A,ee)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const m=c.length;if(m>0){const y=Array(m);for(let A=0;A<m;A++)y[A]=c[A];return y}return[]}function w(c,m){for(let A=1;A<arguments.length;A++){const U=arguments[A];var y=typeof U;if(y=y!="object"?y:U?Array.isArray(U)?"array":y:"null",y=="array"||y=="object"&&typeof U.length=="number"){y=c.length||0;const $=U.length||0;c.length=y+$;for(let ee=0;ee<$;ee++)c[y+ee]=U[ee]}else c.push(U)}}class E{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function b(c){o.setTimeout(()=>{throw c},0)}function v(){var c=I;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class x{constructor(){this.h=this.g=null}add(m,y){const A=T.get();A.set(m,y),this.h?this.h.next=A:this.g=A,this.h=A}}var T=new E(()=>new D,c=>c.reset());class D{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let L,V=!1,I=new x,C=()=>{const c=Promise.resolve(void 0);L=()=>{c.then(_)}};function _(){for(var c;c=v();){try{c.h.call(c.g)}catch(y){b(y)}var m=T;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}V=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};o.addEventListener("test",y,m),o.removeEventListener("test",y,m)}catch{}return c}();function S(c){return/^[\s\xa0]*$/.test(c)}function Z(c,m){P.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}h(Z,P),Z.prototype.init=function(c,m){const y=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(y=="mouseover"?m=c.fromElement:y=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Z.Z.h.call(this)},Z.prototype.h=function(){Z.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),je=0;function et(c,m,y,A,U){this.listener=c,this.proxy=null,this.src=m,this.type=y,this.capture=!!A,this.ha=U,this.key=++je,this.da=this.fa=!1}function te(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function me(c,m,y){for(const A in c)m.call(y,c[A],A,c)}function Ee(c,m){for(const y in c)m.call(void 0,c[y],y,c)}function Ie(c){const m={};for(const y in c)m[y]=c[y];return m}const We="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pt(c,m){let y,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(y in A)c[y]=A[y];for(let $=0;$<We.length;$++)y=We[$],Object.prototype.hasOwnProperty.call(A,y)&&(c[y]=A[y])}}function St(c){this.src=c,this.g={},this.h=0}St.prototype.add=function(c,m,y,A,U){const $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);const ee=Ge(c,m,A,U);return ee>-1?(m=c[ee],y||(m.fa=!1)):(m=new et(m,this.src,$,!!A,U),m.fa=y,c.push(m)),m};function ut(c,m){const y=m.type;if(y in c.g){var A=c.g[y],U=Array.prototype.indexOf.call(A,m,void 0),$;($=U>=0)&&Array.prototype.splice.call(A,U,1),$&&(te(m),c.g[y].length==0&&(delete c.g[y],c.h--))}}function Ge(c,m,y,A){for(let U=0;U<c.length;++U){const $=c[U];if(!$.da&&$.listener==m&&$.capture==!!y&&$.ha==A)return U}return-1}var nt="closure_lm_"+(Math.random()*1e6|0),ir={};function or(c,m,y,A,U){if(Array.isArray(m)){for(let $=0;$<m.length;$++)or(c,m[$],y,A,U);return null}return y=Ne(y),c&&c[ie]?c.J(m,y,l(A)?!!A.capture:!1,U):Zr(c,m,y,!1,A,U)}function Zr(c,m,y,A,U,$){if(!m)throw Error("Invalid event type");const ee=l(U)?!!U.capture:!!U;let ke=de(c);if(ke||(c[nt]=ke=new St(c)),y=ke.add(m,y,A,ee,$),y.proxy)return y;if(A=Ht(),y.proxy=A,A.src=c,A.listener=y,c.addEventListener)O||(U=ee),U===void 0&&(U=!1),c.addEventListener(m.toString(),A,U);else if(c.attachEvent)c.attachEvent(Q(m.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Ht(){function c(y){return m.call(c.src,c.listener,y)}const m=ae;return c}function Fr(c,m,y,A,U){if(Array.isArray(m))for(var $=0;$<m.length;$++)Fr(c,m[$],y,A,U);else A=l(A)?!!A.capture:!!A,y=Ne(y),c&&c[ie]?(c=c.i,$=String(m).toString(),$ in c.g&&(m=c.g[$],y=Ge(m,y,A,U),y>-1&&(te(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete c.g[$],c.h--)))):c&&(c=de(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Ge(m,y,A,U)),(y=c>-1?m[c]:null)&&Er(y))}function Er(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[ie])ut(m.i,c);else{var y=c.type,A=c.proxy;m.removeEventListener?m.removeEventListener(y,A,c.capture):m.detachEvent?m.detachEvent(Q(y),A):m.addListener&&m.removeListener&&m.removeListener(A),(y=de(m))?(ut(y,c),y.h==0&&(y.src=null,m[nt]=null)):te(c)}}}function Q(c){return c in ir?ir[c]:ir[c]="on"+c}function ae(c,m){if(c.da)c=!0;else{m=new Z(m,this);const y=c.listener,A=c.ha||c.src;c.fa&&Er(c),c=y.call(A,m)}return c}function de(c){return c=c[nt],c instanceof St?c:null}var ge="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ne(c){return typeof c=="function"?c:(c[ge]||(c[ge]=function(m){return c.handleEvent(m)}),c[ge])}function Qe(){k.call(this),this.i=new St(this),this.M=this,this.G=null}h(Qe,k),Qe.prototype[ie]=!0,Qe.prototype.removeEventListener=function(c,m,y,A){Fr(this,c,m,y,A)};function Ae(c,m){var y,A=c.G;if(A)for(y=[];A;A=A.G)y.push(A);if(c=c.M,A=m.type||m,typeof m=="string")m=new P(m,c);else if(m instanceof P)m.target=m.target||c;else{var U=m;m=new P(A,c),pt(m,U)}U=!0;let $,ee;if(y)for(ee=y.length-1;ee>=0;ee--)$=m.g=y[ee],U=bt($,A,!0,m)&&U;if($=m.g=c,U=bt($,A,!0,m)&&U,U=bt($,A,!1,m)&&U,y)for(ee=0;ee<y.length;ee++)$=m.g=y[ee],U=bt($,A,!1,m)&&U}Qe.prototype.N=function(){if(Qe.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const y=c.g[m];for(let A=0;A<y.length;A++)te(y[A]);delete c.g[m],c.h--}}this.G=null},Qe.prototype.J=function(c,m,y,A){return this.i.add(String(c),m,!1,y,A)},Qe.prototype.K=function(c,m,y,A){return this.i.add(String(c),m,!0,y,A)};function bt(c,m,y,A){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let $=0;$<m.length;++$){const ee=m[$];if(ee&&!ee.da&&ee.capture==y){const ke=ee.listener,Wt=ee.ha||ee.src;ee.fa&&ut(c.i,ee),U=ke.call(Wt,A)!==!1&&U}}return U&&!A.defaultPrevented}function Sr(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(c,m||0)}function ri(c){c.g=Sr(()=>{c.g=null,c.i&&(c.i=!1,ri(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Xe extends k{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ri(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vn(c){k.call(this),this.h=c,this.g={}}h(vn,k);var en=[];function As(c){me(c.g,function(m,y){this.g.hasOwnProperty(y)&&Er(m)},c),c.g={}}vn.prototype.N=function(){vn.Z.N.call(this),As(this)},vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var es=o.JSON.stringify,oa=o.JSON.parse,Nl=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function si(){}function aa(){}var fo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dl(){P.call(this,"d")}h(Dl,P);function Ml(){P.call(this,"c")}h(Ml,P);var Cs={},Ol=null;function X(){return Ol=Ol||new Qe}Cs.Ia="serverreachability";function pe(c){P.call(this,Cs.Ia,c)}h(pe,P);function xe(c){const m=X();Ae(m,new pe(m))}Cs.STAT_EVENT="statevent";function Ke(c,m){P.call(this,Cs.STAT_EVENT,c),this.stat=m}h(Ke,P);function Ye(c){const m=X();Ae(m,new Ke(m,c))}Cs.Ja="timingevent";function $n(c,m){P.call(this,Cs.Ja,c),this.size=m}h($n,P);function jl(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},m)}function Ul(){this.g=!0}Ul.prototype.ua=function(){this.g=!1};function vN(c,m,y,A,U,$){c.info(function(){if(c.g)if($){var ee="",ke=$.split("&");for(let rt=0;rt<ke.length;rt++){var Wt=ke[rt].split("=");if(Wt.length>1){const tn=Wt[0];Wt=Wt[1];const ns=tn.split("_");ee=ns.length>=2&&ns[1]=="type"?ee+(tn+"="+Wt+"&"):ee+(tn+"=redacted&")}}}else ee=null;else ee=$;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+m+`
`+y+`
`+ee})}function _N(c,m,y,A,U,$,ee){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+m+`
`+y+`
`+$+" "+ee})}function la(c,m,y,A){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+EN(c,y)+(A?" "+A:"")})}function xN(c,m){c.info(function(){return"TIMEOUT: "+m})}Ul.prototype.info=function(){};function EN(c,m){if(!c.g)return m;if(!m)return null;try{const $=JSON.parse(m);if($){for(c=0;c<$.length;c++)if(Array.isArray($[c])){var y=$[c];if(!(y.length<2)){var A=y[1];if(Array.isArray(A)&&!(A.length<1)){var U=A[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ee=1;ee<A.length;ee++)A[ee]=""}}}}return es($)}catch{return m}}var Qc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},i_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},o_;function Op(){}h(Op,si),Op.prototype.g=function(){return new XMLHttpRequest},o_=new Op;function Ll(c){return encodeURIComponent(String(c))}function SN(c){var m=1;c=c.split(":");const y=[];for(;m>0&&c.length;)y.push(c.shift()),m--;return c.length&&y.push(c.join(":")),y}function ii(c,m,y,A){this.j=c,this.i=m,this.l=y,this.S=A||1,this.V=new vn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new a_}function a_(){this.i=null,this.g="",this.h=!1}var l_={},jp={};function Up(c,m,y){c.M=1,c.A=Yc(ts(m)),c.u=y,c.R=!0,u_(c,null)}function u_(c,m){c.F=Date.now(),Xc(c),c.B=ts(c.A);var y=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),E_(y.i,"t",A),c.C=0,y=c.j.L,c.h=new a_,c.g=B_(c.j,y?m:null,!c.u),c.P>0&&(c.O=new Xe(u(c.Y,c,c.g),c.P)),m=c.V,y=c.g,A=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(en[0]=U.toString()),U=en);for(let $=0;$<U.length;$++){const ee=or(y,U[$],A||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=c.J?Ie(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),xe(),vN(c.i,c.v,c.B,c.l,c.S,c.u)}ii.prototype.ba=function(c){c=c.target;const m=this.O;m&&li(c)==3?m.j():this.Y(c)},ii.prototype.Y=function(c){try{if(c==this.g)e:{const ke=li(this.g),Wt=this.g.ya(),rt=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||k_(this.g)))){this.K||ke!=4||Wt==7||(Wt==8||rt<=0?xe(3):xe(2)),Lp(this);var m=this.g.ca();this.X=m;var y=bN(this);if(this.o=m==200,_N(this.i,this.v,this.B,this.l,this.S,ke,m),this.o){if(this.U&&!this.L){t:{if(this.g){var A,U=this.g;if((A=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(A)){var $=A;break t}}$=null}if(c=$)la(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fp(this,c);else{this.o=!1,this.m=3,Ye(12),po(this),Fl(this);break e}}if(this.R){c=!0;let tn;for(;!this.K&&this.C<y.length;)if(tn=TN(this,y),tn==jp){ke==4&&(this.m=4,Ye(14),c=!1),la(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==l_){this.m=4,Ye(15),la(this.i,this.l,y,"[Invalid Chunk]"),c=!1;break}else la(this.i,this.l,tn,null),Fp(this,tn);if(c_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||y.length!=0||this.h.h||(this.m=1,Ye(16),c=!1),this.o=this.o&&c,!c)la(this.i,this.l,y,"[Invalid Chunked Response]"),po(this),Fl(this);else if(y.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Gp(ee),ee.P=!0,Ye(11))}}else la(this.i,this.l,y,null),Fp(this,y);ke==4&&po(this),this.o&&!this.K&&(ke==4?j_(this.j,this):(this.o=!1,Xc(this)))}else FN(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,Ye(12)):(this.m=0,Ye(13)),po(this),Fl(this)}}}catch{}finally{}};function bN(c){if(!c_(c))return c.g.la();const m=k_(c.g);if(m==="")return"";let y="";const A=m.length,U=li(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return po(c),Fl(c),"";c.h.i=new o.TextDecoder}for(let $=0;$<A;$++)c.h.h=!0,y+=c.h.i.decode(m[$],{stream:!(U&&$==A-1)});return m.length=0,c.h.g+=y,c.C=0,c.h.g}function c_(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function TN(c,m){var y=c.C,A=m.indexOf(`
`,y);return A==-1?jp:(y=Number(m.substring(y,A)),isNaN(y)?l_:(A+=1,A+y>m.length?jp:(m=m.slice(A,A+y),c.C=A+y,m)))}ii.prototype.cancel=function(){this.K=!0,po(this)};function Xc(c){c.T=Date.now()+c.H,d_(c,c.H)}function d_(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=jl(u(c.aa,c),m)}function Lp(c){c.D&&(o.clearTimeout(c.D),c.D=null)}ii.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(xN(this.i,this.B),this.M!=2&&(xe(),Ye(17)),po(this),this.m=2,Fl(this)):d_(this,this.T-c)};function Fl(c){c.j.I==0||c.K||j_(c.j,c)}function po(c){Lp(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,As(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function Fp(c,m){try{var y=c.j;if(y.I!=0&&(y.g==c||Bp(y.h,c))){if(!c.L&&Bp(y.h,c)&&y.I==3){try{var A=y.Ba.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<c.F)rd(y),td(y);else break e;Wp(y),Ye(18)}}else y.xa=U[1],0<y.xa-y.K&&U[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=jl(u(y.Va,y),6e3));p_(y.h)<=1&&y.ta&&(y.ta=void 0)}else go(y,11)}else if((c.L||y.g==c)&&rd(y),!S(m))for(U=y.Ba.g.parse(m),m=0;m<U.length;m++){let rt=U[m];const tn=rt[0];if(!(tn<=y.K))if(y.K=tn,rt=rt[1],y.I==2)if(rt[0]=="c"){y.M=rt[1],y.ba=rt[2];const ns=rt[3];ns!=null&&(y.ka=ns,y.j.info("VER="+y.ka));const yo=rt[4];yo!=null&&(y.za=yo,y.j.info("SVER="+y.za));const ui=rt[5];ui!=null&&typeof ui=="number"&&ui>0&&(A=1.5*ui,y.O=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;const ci=c.g;if(ci){const id=ci.g?ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(id){var $=A.h;$.g||id.indexOf("spdy")==-1&&id.indexOf("quic")==-1&&id.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Vp($,$.h),$.h=null))}if(A.G){const Kp=ci.g?ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Kp&&(A.wa=Kp,ct(A.J,A.G,Kp))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-c.F,y.j.info("Handshake RTT: "+y.T+"ms")),A=y;var ee=c;if(A.na=F_(A,A.L?A.ba:null,A.W),ee.L){m_(A.h,ee);var ke=ee,Wt=A.O;Wt&&(ke.H=Wt),ke.D&&(Lp(ke),Xc(ke)),A.g=ee}else M_(A);y.i.length>0&&nd(y)}else rt[0]!="stop"&&rt[0]!="close"||go(y,7);else y.I==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?go(y,7):Hp(y):rt[0]!="noop"&&y.l&&y.l.qa(rt),y.A=0)}}xe(4)}catch{}}var AN=class{constructor(c,m){this.g=c,this.map=m}};function h_(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function f_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function p_(c){return c.h?1:c.g?c.g.size:0}function Bp(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Vp(c,m){c.g?c.g.add(m):c.h=m}function m_(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}h_.prototype.cancel=function(){if(this.i=g_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function g_(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const y of c.g.values())m=m.concat(y.G);return m}return g(c.i)}var y_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CN(c,m){if(c){c=c.split("&");for(let y=0;y<c.length;y++){const A=c[y].indexOf("=");let U,$=null;A>=0?(U=c[y].substring(0,A),$=c[y].substring(A+1)):U=c[y],m(U,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function oi(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof oi?(this.l=c.l,Bl(this,c.j),this.o=c.o,this.g=c.g,Vl(this,c.u),this.h=c.h,$p(this,S_(c.i)),this.m=c.m):c&&(m=String(c).match(y_))?(this.l=!1,Bl(this,m[1]||"",!0),this.o=$l(m[2]||""),this.g=$l(m[3]||"",!0),Vl(this,m[4]),this.h=$l(m[5]||"",!0),$p(this,m[6]||"",!0),this.m=$l(m[7]||"")):(this.l=!1,this.i=new ql(null,this.l))}oi.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(zl(m,w_,!0),":");var y=this.g;return(y||m=="file")&&(c.push("//"),(m=this.o)&&c.push(zl(m,w_,!0),"@"),c.push(Ll(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&c.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(zl(y,y.charAt(0)=="/"?RN:kN,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",zl(y,NN)),c.join("")},oi.prototype.resolve=function(c){const m=ts(this);let y=!!c.j;y?Bl(m,c.j):y=!!c.o,y?m.o=c.o:y=!!c.g,y?m.g=c.g:y=c.u!=null;var A=c.h;if(y)Vl(m,c.u);else if(y=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var U=m.h.lastIndexOf("/");U!=-1&&(A=m.h.slice(0,U+1)+A)}if(U=A,U==".."||U==".")A="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){A=U.lastIndexOf("/",0)==0,U=U.split("/");const $=[];for(let ee=0;ee<U.length;){const ke=U[ee++];ke=="."?A&&ee==U.length&&$.push(""):ke==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),A&&ee==U.length&&$.push("")):($.push(ke),A=!0)}A=$.join("/")}else A=U}return y?m.h=A:y=c.i.toString()!=="",y?$p(m,S_(c.i)):y=!!c.m,y&&(m.m=c.m),m};function ts(c){return new oi(c)}function Bl(c,m,y){c.j=y?$l(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Vl(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function $p(c,m,y){m instanceof ql?(c.i=m,DN(c.i,c.l)):(y||(m=zl(m,PN)),c.i=new ql(m,c.l))}function ct(c,m,y){c.i.set(m,y)}function Yc(c){return ct(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function $l(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function zl(c,m,y){return typeof c=="string"?(c=encodeURI(c).replace(m,IN),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function IN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var w_=/[#\/\?@]/g,kN=/[#\?:]/g,RN=/[#\?]/g,PN=/[#\?@]/g,NN=/#/g;function ql(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function mo(c){c.g||(c.g=new Map,c.h=0,c.i&&CN(c.i,function(m,y){c.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=ql.prototype,t.add=function(c,m){mo(this),this.i=null,c=ua(this,c);let y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(m),this.h+=1,this};function v_(c,m){mo(c),m=ua(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function __(c,m){return mo(c),m=ua(c,m),c.g.has(m)}t.forEach=function(c,m){mo(this),this.g.forEach(function(y,A){y.forEach(function(U){c.call(m,U,A,this)},this)},this)};function x_(c,m){mo(c);let y=[];if(typeof m=="string")__(c,m)&&(y=y.concat(c.g.get(ua(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)y=y.concat(c[m]);return y}t.set=function(c,m){return mo(this),this.i=null,c=ua(this,c),__(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=x_(this,c),c.length>0?String(c[0]):m):m};function E_(c,m,y){v_(c,m),y.length>0&&(c.i=null,c.g.set(ua(c,m),g(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let A=0;A<m.length;A++){var y=m[A];const U=Ll(y);y=x_(this,y);for(let $=0;$<y.length;$++){let ee=U;y[$]!==""&&(ee+="="+Ll(y[$])),c.push(ee)}}return this.i=c.join("&")};function S_(c){const m=new ql;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function ua(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function DN(c,m){m&&!c.j&&(mo(c),c.i=null,c.g.forEach(function(y,A){const U=A.toLowerCase();A!=U&&(v_(this,A),E_(this,U,y))},c)),c.j=m}function MN(c,m){const y=new Ul;if(o.Image){const A=new Image;A.onload=d(ai,y,"TestLoadImage: loaded",!0,m,A),A.onerror=d(ai,y,"TestLoadImage: error",!1,m,A),A.onabort=d(ai,y,"TestLoadImage: abort",!1,m,A),A.ontimeout=d(ai,y,"TestLoadImage: timeout",!1,m,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else m(!1)}function ON(c,m){const y=new Ul,A=new AbortController,U=setTimeout(()=>{A.abort(),ai(y,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:A.signal}).then($=>{clearTimeout(U),$.ok?ai(y,"TestPingServer: ok",!0,m):ai(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),ai(y,"TestPingServer: error",!1,m)})}function ai(c,m,y,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(y)}catch{}}function jN(){this.g=new Nl}function zp(c){this.i=c.Sb||null,this.h=c.ab||!1}h(zp,si),zp.prototype.g=function(){return new Zc(this.i,this.h)};function Zc(c,m){Qe.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Zc,Qe),t=Zc.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,Wl(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hl(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Wl(this)),this.g&&(this.readyState=3,Wl(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;b_(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function b_(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Hl(this):Wl(this),this.readyState==3&&b_(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Hl(this))},t.Na=function(c){this.g&&(this.response=c,Hl(this))},t.ga=function(){this.g&&Hl(this)};function Hl(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Wl(c)}t.setRequestHeader=function(c,m){this.A.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=m.next();return c.join(`\r
`)};function Wl(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function T_(c){let m="";return me(c,function(y,A){m+=A,m+=":",m+=y,m+=`\r
`}),m}function qp(c,m,y){e:{for(A in y){var A=!1;break e}A=!0}A||(y=T_(y),typeof c=="string"?y!=null&&Ll(y):ct(c,m,y))}function Tt(c){Qe.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Tt,Qe);var UN=/^https?$/i,LN=["POST","PUT"];t=Tt.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,m,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():o_.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch($){A_(this,$);return}if(c=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)y.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const $ of A.keys())y.set($,A.get($));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find($=>$.toLowerCase()=="content-type"),U=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(LN,m,void 0)>=0)||A||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ee]of y)this.g.setRequestHeader($,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch($){A_(this,$)}};function A_(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,C_(c),ed(c)}function C_(c){c.A||(c.A=!0,Ae(c,"complete"),Ae(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Ae(this,"complete"),Ae(this,"abort"),ed(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ed(this,!0)),Tt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?I_(this):this.Xa())},t.Xa=function(){I_(this)};function I_(c){if(c.h&&typeof i<"u"){if(c.v&&li(c)==4)setTimeout(c.Ca.bind(c),0);else if(Ae(c,"readystatechange"),li(c)==4){c.h=!1;try{const $=c.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var A;if(A=$===0){let ee=String(c.D).match(y_)[1]||null;!ee&&o.self&&o.self.location&&(ee=o.self.location.protocol.slice(0,-1)),A=!UN.test(ee?ee.toLowerCase():"")}y=A}if(y)Ae(c,"complete"),Ae(c,"success");else{c.o=6;try{var U=li(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",C_(c)}}finally{ed(c)}}}}function ed(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const y=c.g;c.g=null,m||Ae(c,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function li(c){return c.g?c.g.readyState:0}t.ca=function(){try{return li(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),oa(m)}};function k_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function FN(c){const m={};c=(c.g&&li(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(S(c[A]))continue;var y=SN(c[A]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const $=m[U]||[];m[U]=$,$.push(y)}Ee(m,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gl(c,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||m}function R_(c){this.za=0,this.i=[],this.j=new Ul,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gl("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gl("baseRetryDelayMs",5e3,c),this.Za=Gl("retryDelaySeedMs",1e4,c),this.Ta=Gl("forwardChannelMaxRetries",2,c),this.va=Gl("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new h_(c&&c.concurrentRequestLimit),this.Ba=new jN,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=R_.prototype,t.ka=8,t.I=1,t.connect=function(c,m,y,A){Ye(0),this.W=c,this.H=m||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.J=F_(this,null,this.W),nd(this)};function Hp(c){if(P_(c),c.I==3){var m=c.V++,y=ts(c.J);if(ct(y,"SID",c.M),ct(y,"RID",m),ct(y,"TYPE","terminate"),Kl(c,y),m=new ii(c,c.j,m),m.M=2,m.A=Yc(ts(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=m.A,y=!0),y||(m.g=B_(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Xc(m)}L_(c)}function td(c){c.g&&(Gp(c),c.g.cancel(),c.g=null)}function P_(c){td(c),c.v&&(o.clearTimeout(c.v),c.v=null),rd(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function nd(c){if(!f_(c.h)&&!c.m){c.m=!0;var m=c.Ea;L||C(),V||(L(),V=!0),I.add(m,c),c.D=0}}function BN(c,m){return p_(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=jl(u(c.Ea,c,m),U_(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new ii(this,this.j,c);let $=this.o;if(this.U&&($?($=Ie($),pt($,this.U)):$=this.U),this.u!==null||this.R||(U.J=$,$=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(m+=A,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=D_(this,U,m),y=ts(this.J),ct(y,"RID",c),ct(y,"CVER",22),this.G&&ct(y,"X-HTTP-Session-Id",this.G),Kl(this,y),$&&(this.R?m="headers="+Ll(T_($))+"&"+m:this.u&&qp(y,this.u,$)),Vp(this.h,U),this.Ra&&ct(y,"TYPE","init"),this.S?(ct(y,"$req",m),ct(y,"SID","null"),U.U=!0,Up(U,y,null)):Up(U,y,m),this.I=2}}else this.I==3&&(c?N_(this,c):this.i.length==0||f_(this.h)||N_(this))};function N_(c,m){var y;m?y=m.l:y=c.V++;const A=ts(c.J);ct(A,"SID",c.M),ct(A,"RID",y),ct(A,"AID",c.K),Kl(c,A),c.u&&c.o&&qp(A,c.u,c.o),y=new ii(c,c.j,y,c.D+1),c.u===null&&(y.J=c.o),m&&(c.i=m.G.concat(c.i)),m=D_(c,y,1e3),y.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Vp(c.h,y),Up(y,A,m)}function Kl(c,m){c.H&&me(c.H,function(y,A){ct(m,A,y)}),c.l&&me({},function(y,A){ct(m,A,y)})}function D_(c,m,y){y=Math.min(c.i.length,y);const A=c.l?u(c.l.Ka,c.l,c):null;e:{var U=c.i;let ke=-1;for(;;){const Wt=["count="+y];ke==-1?y>0?(ke=U[0].g,Wt.push("ofs="+ke)):ke=0:Wt.push("ofs="+ke);let rt=!0;for(let tn=0;tn<y;tn++){var $=U[tn].g;const ns=U[tn].map;if($-=ke,$<0)ke=Math.max(0,U[tn].g-100),rt=!1;else try{$="req"+$+"_"||"";try{var ee=ns instanceof Map?ns:Object.entries(ns);for(const[yo,ui]of ee){let ci=ui;l(ui)&&(ci=es(ui)),Wt.push($+yo+"="+encodeURIComponent(ci))}}catch(yo){throw Wt.push($+"type="+encodeURIComponent("_badmap")),yo}}catch{A&&A(ns)}}if(rt){ee=Wt.join("&");break e}}ee=void 0}return c=c.i.splice(0,y),m.G=c,ee}function M_(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;L||C(),V||(L(),V=!0),I.add(m,c),c.A=0}}function Wp(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=jl(u(c.Da,c),U_(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,O_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=jl(u(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ye(10),td(this),O_(this))};function Gp(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function O_(c){c.g=new ii(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=ts(c.na);ct(m,"RID","rpc"),ct(m,"SID",c.M),ct(m,"AID",c.K),ct(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&ct(m,"TO",c.ia),ct(m,"TYPE","xmlhttp"),Kl(c,m),c.u&&c.o&&qp(m,c.u,c.o),c.O&&(c.g.H=c.O);var y=c.g;c=c.ba,y.M=1,y.A=Yc(ts(m)),y.u=null,y.R=!0,u_(y,c)}t.Va=function(){this.C!=null&&(this.C=null,td(this),Wp(this),Ye(19))};function rd(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function j_(c,m){var y=null;if(c.g==m){rd(c),Gp(c),c.g=null;var A=2}else if(Bp(c.h,m))y=m.G,m_(c.h,m),A=1;else return;if(c.I!=0){if(m.o)if(A==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var U=c.D;A=X(),Ae(A,new $n(A,y)),nd(c)}else M_(c);else if(U=m.m,U==3||U==0&&m.X>0||!(A==1&&BN(c,m)||A==2&&Wp(c)))switch(y&&y.length>0&&(m=c.h,m.i=m.i.concat(y)),U){case 1:go(c,5);break;case 4:go(c,10);break;case 3:go(c,6);break;default:go(c,2)}}}function U_(c,m){let y=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(y*=2),y*m}function go(c,m){if(c.j.info("Error code "+m),m==2){var y=u(c.bb,c),A=c.Ua;const U=!A;A=new oi(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Bl(A,"https"),Yc(A),U?MN(A.toString(),y):ON(A.toString(),y)}else Ye(2);c.I=0,c.l&&c.l.pa(m),L_(c),P_(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function L_(c){if(c.I=0,c.ja=[],c.l){const m=g_(c.h);(m.length!=0||c.i.length!=0)&&(w(c.ja,m),w(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function F_(c,m,y){var A=y instanceof oi?ts(y):new oi(y);if(A.g!="")m&&(A.g=m+"."+A.g),Vl(A,A.u);else{var U=o.location;A=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const $=new oi(null);A&&Bl($,A),m&&($.g=m),U&&Vl($,U),y&&($.h=y),A=$}return y=c.G,m=c.wa,y&&m&&ct(A,y,m),ct(A,"VER",c.ka),Kl(c,A),A}function B_(c,m,y){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new Tt(new zp({ab:y})):new Tt(c.ma),m.Fa(c.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function V_(){}t=V_.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function sd(){}sd.prototype.g=function(c,m){return new ar(c,m)};function ar(c,m){Qe.call(this),this.g=new R_(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!S(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!S(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new ca(this)}h(ar,Qe),ar.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ar.prototype.close=function(){Hp(this.g)},ar.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.v&&(y={},y.__data__=es(c),c=y);m.i.push(new AN(m.Ya++,c)),m.I==3&&nd(m)},ar.prototype.N=function(){this.g.l=null,delete this.j,Hp(this.g),delete this.g,ar.Z.N.call(this)};function $_(c){Dl.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const y in m){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}h($_,Dl);function z_(){Ml.call(this),this.status=1}h(z_,Ml);function ca(c){this.g=c}h(ca,V_),ca.prototype.ra=function(){Ae(this.g,"a")},ca.prototype.qa=function(c){Ae(this.g,new $_(c))},ca.prototype.pa=function(c){Ae(this.g,new z_)},ca.prototype.oa=function(){Ae(this.g,"b")},sd.prototype.createWebChannel=sd.prototype.g,ar.prototype.send=ar.prototype.o,ar.prototype.open=ar.prototype.m,ar.prototype.close=ar.prototype.close,Ik=function(){return new sd},Ck=function(){return X()},Ak=Cs,Ny={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qc.NO_ERROR=0,Qc.TIMEOUT=8,Qc.HTTP_ERROR=6,Zd=Qc,i_.COMPLETE="complete",Tk=i_,aa.EventType=fo,fo.OPEN="a",fo.CLOSE="b",fo.ERROR="c",fo.MESSAGE="d",Qe.prototype.listen=Qe.prototype.J,fu=aa,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,bk=Tt}).apply(typeof bd<"u"?bd:typeof self<"u"?self:typeof window<"u"?window:{});const eS="@firebase/firestore",tS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new qf("@firebase/firestore");function ma(){return Ho.logLevel}function ue(t,...e){if(Ho.logLevel<=Le.DEBUG){const n=e.map(Fw);Ho.debug(`Firestore (${Tl}): ${t}`,...n)}}function Gs(t,...e){if(Ho.logLevel<=Le.ERROR){const n=e.map(Fw);Ho.error(`Firestore (${Tl}): ${t}`,...n)}}function ol(t,...e){if(Ho.logLevel<=Le.WARN){const n=e.map(Fw);Ho.warn(`Firestore (${Tl}): ${t}`,...n)}}function Fw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,kk(t,r,n)}function kk(t,e,n){let r=`FIRESTORE (${Tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gs(r),new Error(r)}function Je(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||kk(e,s,r)}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(In.UNAUTHENTICATED))}shutdown(){}}class WF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class GF{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Je(this.o===void 0,42304);let r=this.i;const s=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let i=new Fs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const a=i;e.enqueueRetryable(async()=>{await a.promise,await s(this.currentUser)})},l=a=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(a=>l(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?l(a):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string",31837,{l:r}),new Rk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new In(e)}}class KF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new KF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Je(this.o===void 0,3512);const r=i=>{i.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new nS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=XF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function Dy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Dm(s)===Dm(i)?Fe(s,i):Dm(s)?1:-1}return Fe(t.length,e.length)}const YF=55296,ZF=57343;function Dm(t){const e=t.charCodeAt(0);return e>=YF&&e<=ZF}function al(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="__name__";class ds{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ds.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ds?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=ds.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Fe(e.length,n.length)}static compareSegments(e,n){const r=ds.isNumericId(e),s=ds.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ds.extractNumericId(e).compare(ds.extractNumericId(n)):Dy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zi.fromString(e.substring(4,e.length-2))}}class at extends ds{construct(e,n,r){return new at(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new at(n)}static emptyPath(){return new at([])}}const e5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends ds{construct(e,n,r){return new pn(e,n,r)}static isValidIdentifier(e){return e5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rS}static keyField(){return new pn([rS])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new oe(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new oe(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[s+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new oe(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new oe(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(n)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(at.fromString(e))}static fromName(e){return new ye(at.fromString(e).popFirst(5))}static empty(){return new ye(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t,e,n){if(!n)throw new oe(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function t5(t,e,n,r){if(e===!0&&r===!0)throw new oe(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sS(t){if(!ye.isDocumentKey(t))throw new oe(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function iS(t){if(ye.isDocumentKey(t))throw new oe(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Xf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve(12329,{type:typeof t})}function tr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xf(t);throw new oe(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function n5(t,e){if(e<=0)throw new oe(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(t,e){const n={typeString:t};return e&&(n.value=e),n}function Bc(t,e){if(!Nk(t))throw new oe(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new oe(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=-62135596800,aS=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*aS);return new ht(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<oS)throw new oe(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aS}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bc(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Ft("string",ht._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new ht(0,0))}static max(){return new Se(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=-1;function r5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Se.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new Ji(s,ye.empty(),e)}function s5(t){return new Ji(t.readTime,t.key,hc)}class Ji{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ji(Se.min(),ye.empty(),hc)}static max(){return new Ji(Se.max(),ye.empty(),hc)}}function i5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==o5)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},a=>r(a))}),o=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let a=0;a<i;a++){const u=a;n(e[u]).next(d=>{o[u]=d,++l,l===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function l5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=-1;function Zf(t){return t==null}function Wh(t){return t===0&&1/t==-1/0}function u5(t){return typeof t=="number"&&Number.isInteger(t)&&!Wh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="";function c5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=lS(e)),e=d5(t.get(n),e);return lS(e)}function d5(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Dk:n+="";break;default:n+=i}}return n}function lS(t){return t+Dk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function uo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Mk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){this.comparator=e,this.root=n||fn.EMPTY}insert(e,n){return new Et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Td(this.root,e,this.comparator,!1)}getReverseIterator(){return new Td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Td(this.root,e,this.comparator,!0)}}class Td{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??fn.RED,this.left=s??fn.EMPTY,this.right=i??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new fn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return fn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cS(this.data.getIterator())}getIteratorFrom(e){return new cS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Yt(this.comparator);return n.data=e,n}}class cS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new pr([])}unionWith(e){let n=new Yt(pn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return al(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ok("Invalid base64 string: "+i):i}}(e);return new wn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new wn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const h5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qi(t){if(Je(!!t,39018),typeof t=="string"){let e=0;const n=h5.exec(t);if(Je(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(t.seconds),nanos:Pt(t.nanos)}}function Pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xi(t){return typeof t=="string"?wn.fromBase64String(t):wn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="server_timestamp",Uk="__type__",Lk="__previous_value__",Fk="__local_write_time__";function $w(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Uk])==null?void 0:r.stringValue)===jk}function ep(t){const e=t.mapValue.fields[Lk];return $w(e)?ep(e):e}function fc(t){const e=Qi(t.mapValue.fields[Fk].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n,r,s,i,o,l,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=a,this.useFetchStreams=u,this.isUsingEmulator=d}}const Gh="(default)";class pc{constructor(e,n){this.projectId=e,this.database=n||Gh}static empty(){return new pc("","")}get isDefaultDatabase(){return this.database===Gh}isEqual(e){return e instanceof pc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk="__type__",p5="__max__",Ad={mapValue:{}},Vk="__vector__",Kh="value";function Yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$w(t)?4:g5(t)?9007199254740991:m5(t)?10:11:ve(28295,{value:t})}function Ss(t,e){if(t===e)return!0;const n=Yi(t);if(n!==Yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fc(t).isEqual(fc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Qi(s.timestampValue),l=Qi(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Xi(s.bytesValue).isEqual(Xi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Pt(s.geoPointValue.latitude)===Pt(i.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Pt(s.integerValue)===Pt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Pt(s.doubleValue),l=Pt(i.doubleValue);return o===l?Wh(o)===Wh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return al(t.arrayValue.values||[],e.arrayValue.values||[],Ss);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(uS(o)!==uS(l))return!1;for(const a in o)if(o.hasOwnProperty(a)&&(l[a]===void 0||!Ss(o[a],l[a])))return!1;return!0}(t,e);default:return ve(52216,{left:t})}}function mc(t,e){return(t.values||[]).find(n=>Ss(n,e))!==void 0}function ll(t,e){if(t===e)return 0;const n=Yi(t),r=Yi(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Pt(i.integerValue||i.doubleValue),a=Pt(o.integerValue||o.doubleValue);return l<a?-1:l>a?1:l===a?0:isNaN(l)?isNaN(a)?0:-1:1}(t,e);case 3:return dS(t.timestampValue,e.timestampValue);case 4:return dS(fc(t),fc(e));case 5:return Dy(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Xi(i),a=Xi(o);return l.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),a=o.split("/");for(let u=0;u<l.length&&u<a.length;u++){const d=Fe(l[u],a[u]);if(d!==0)return d}return Fe(l.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Fe(Pt(i.latitude),Pt(o.latitude));return l!==0?l:Fe(Pt(i.longitude),Pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return hS(t.arrayValue,e.arrayValue);case 10:return function(i,o){var f,g,w,E;const l=i.fields||{},a=o.fields||{},u=(f=l[Kh])==null?void 0:f.arrayValue,d=(g=a[Kh])==null?void 0:g.arrayValue,h=Fe(((w=u==null?void 0:u.values)==null?void 0:w.length)||0,((E=d==null?void 0:d.values)==null?void 0:E.length)||0);return h!==0?h:hS(u,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ad.mapValue&&o===Ad.mapValue)return 0;if(i===Ad.mapValue)return 1;if(o===Ad.mapValue)return-1;const l=i.fields||{},a=Object.keys(l),u=o.fields||{},d=Object.keys(u);a.sort(),d.sort();for(let h=0;h<a.length&&h<d.length;++h){const f=Dy(a[h],d[h]);if(f!==0)return f;const g=ll(l[a[h]],u[d[h]]);if(g!==0)return g}return Fe(a.length,d.length)}(t.mapValue,e.mapValue);default:throw ve(23264,{he:n})}}function dS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=Qi(t),r=Qi(e),s=Fe(n.seconds,r.seconds);return s!==0?s:Fe(n.nanos,r.nanos)}function hS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ll(n[s],r[s]);if(i)return i}return Fe(n.length,r.length)}function ul(t){return My(t)}function My(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Qi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ye.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=My(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${My(n.fields[o])}`;return s+"}"}(t.mapValue):ve(61005,{value:t})}function eh(t){switch(Yi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ep(t);return e?16+eh(e):16;case 5:return 2*t.stringValue.length;case 6:return Xi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+eh(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return uo(r.fields,(i,o)=>{s+=i.length+eh(o)}),s}(t.mapValue);default:throw ve(13486,{value:t})}}function fS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Oy(t){return!!t&&"integerValue"in t}function zw(t){return!!t&&"arrayValue"in t}function pS(t){return!!t&&"nullValue"in t}function mS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function th(t){return!!t&&"mapValue"in t}function m5(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Bk])==null?void 0:r.stringValue)===Vk}function Pu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return uo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Pu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pu(t.arrayValue.values[n]);return e}return{...t}}function g5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===p5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(n)}setAll(e){let n=pn.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const a=this.getFieldsMap(n);this.applyChanges(a,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Pu(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ss(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];th(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){uo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Kn(Pu(this.value))}}function $k(t){const e=[];return uo(t.fields,(n,r)=>{const s=new pn([n]);if(th(r)){const i=$k(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new pr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Rn(e,0,Se.min(),Se.min(),Se.min(),Kn.empty(),0)}static newFoundDocument(e,n,r,s){return new Rn(e,1,n,Se.min(),r,s,0)}static newNoDocument(e,n){return new Rn(e,2,n,Se.min(),Se.min(),Kn.empty(),0)}static newUnknownDocument(e,n){return new Rn(e,3,n,Se.min(),Se.min(),Kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n){this.position=e,this.inclusive=n}}function gS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ye.comparator(ye.fromName(o.referenceValue),n.key):r=ll(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function yS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ss(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n="asc"){this.field=e,this.dir=n}}function y5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{}class Lt extends zk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new v5(e,n,r):n==="array-contains"?new E5(e,r):n==="in"?new S5(e,r):n==="not-in"?new b5(e,r):n==="array-contains-any"?new T5(e,r):new Lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _5(e,r):new x5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ll(n,this.value)):n!==null&&Yi(this.value)===Yi(n)&&this.matchesComparison(ll(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xr extends zk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xr(e,n)}matches(e){return qk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qk(t){return t.op==="and"}function Hk(t){return w5(t)&&qk(t)}function w5(t){for(const e of t.filters)if(e instanceof Xr)return!1;return!0}function jy(t){if(t instanceof Lt)return t.field.canonicalString()+t.op.toString()+ul(t.value);if(Hk(t))return t.filters.map(e=>jy(e)).join(",");{const e=t.filters.map(n=>jy(n)).join(",");return`${t.op}(${e})`}}function Wk(t,e){return t instanceof Lt?function(r,s){return s instanceof Lt&&r.op===s.op&&r.field.isEqual(s.field)&&Ss(r.value,s.value)}(t,e):t instanceof Xr?function(r,s){return s instanceof Xr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&Wk(o,s.filters[l]),!0):!1}(t,e):void ve(19439)}function Gk(t){return t instanceof Lt?function(n){return`${n.field.canonicalString()} ${n.op} ${ul(n.value)}`}(t):t instanceof Xr?function(n){return n.op.toString()+" {"+n.getFilters().map(Gk).join(" ,")+"}"}(t):"Filter"}class v5 extends Lt{constructor(e,n,r){super(e,n,r),this.key=ye.fromName(r.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class _5 extends Lt{constructor(e,n){super(e,"in",n),this.keys=Kk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class x5 extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=Kk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Kk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ye.fromName(r.referenceValue))}class E5 extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zw(n)&&mc(n.arrayValue,this.value)}}class S5 extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mc(this.value.arrayValue,n)}}class b5 extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mc(this.value.arrayValue,n)}}class T5 extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function wS(t,e=null,n=[],r=[],s=null,i=null,o=null){return new A5(t,e,n,r,s,i,o)}function qw(t){const e=Te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Zf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ul(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ul(r)).join(",")),e.Te=n}return e.Te}function Hw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!y5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Wk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yS(t.startAt,e.startAt)&&yS(t.endAt,e.endAt)}function Uy(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function C5(t,e,n,r,s,i,o,l){return new Il(t,e,n,r,s,i,o,l)}function tp(t){return new Il(t)}function vS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Jk(t){return t.collectionGroup!==null}function Nu(t){const e=Te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Yt(pn.comparator);return o.filters.forEach(a=>{a.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new gc(i,r))}),n.has(pn.keyField().canonicalString())||e.Ie.push(new gc(pn.keyField(),r))}return e.Ie}function ys(t){const e=Te(t);return e.Ee||(e.Ee=I5(e,Nu(t))),e.Ee}function I5(t,e){if(t.limitType==="F")return wS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new gc(s.field,i)});const n=t.endAt?new Jh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jh(t.startAt.position,t.startAt.inclusive):null;return wS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ly(t,e){const n=t.filters.concat([e]);return new Il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Qh(t,e,n){return new Il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function np(t,e){return Hw(ys(t),ys(e))&&t.limitType===e.limitType}function Qk(t){return`${qw(ys(t))}|lt:${t.limitType}`}function ga(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Gk(s)).join(", ")}]`),Zf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ul(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ul(s)).join(",")),`Target(${r})`}(ys(t))}; limitType=${t.limitType})`}function rp(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ye.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Nu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,a){const u=gS(o,l,a);return o.inclusive?u<=0:u<0}(r.startAt,Nu(r),s)||r.endAt&&!function(o,l,a){const u=gS(o,l,a);return o.inclusive?u>=0:u>0}(r.endAt,Nu(r),s))}(t,e)}function k5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Xk(t){return(e,n)=>{let r=!1;for(const s of Nu(t)){const i=R5(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function R5(t,e,n){const r=t.field.isKeyField()?ye.comparator(e.key,n.key):function(i,o,l){const a=o.data.field(i),u=l.data.field(i);return a!==null&&u!==null?ll(a,u):ve(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Mk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=new Et(ye.comparator);function Ks(){return P5}const Yk=new Et(ye.comparator);function pu(...t){let e=Yk;for(const n of t)e=e.insert(n.key,n);return e}function Zk(t){let e=Yk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ko(){return Du()}function eR(){return Du()}function Du(){return new ra(t=>t.toString(),(t,e)=>t.isEqual(e))}const N5=new Et(ye.comparator),D5=new Yt(ye.comparator);function Be(...t){let e=D5;for(const n of t)e=e.add(n);return e}const M5=new Yt(Fe);function O5(){return M5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wh(e)?"-0":e}}function tR(t){return{integerValue:""+t}}function nR(t,e){return u5(e)?tR(e):Ww(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this._=void 0}}function j5(t,e,n){return t instanceof yc?function(s,i){const o={fields:{[Uk]:{stringValue:jk},[Fk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&$w(i)&&(i=ep(i)),i&&(o.fields[Lk]=i),{mapValue:o}}(n,e):t instanceof wc?sR(t,e):t instanceof vc?iR(t,e):function(s,i){const o=rR(s,i),l=_S(o)+_S(s.Ae);return Oy(o)&&Oy(s.Ae)?tR(l):Ww(s.serializer,l)}(t,e)}function U5(t,e,n){return t instanceof wc?sR(t,e):t instanceof vc?iR(t,e):n}function rR(t,e){return t instanceof _c?function(r){return Oy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class yc extends sp{}class wc extends sp{constructor(e){super(),this.elements=e}}function sR(t,e){const n=oR(e);for(const r of t.elements)n.some(s=>Ss(s,r))||n.push(r);return{arrayValue:{values:n}}}class vc extends sp{constructor(e){super(),this.elements=e}}function iR(t,e){let n=oR(e);for(const r of t.elements)n=n.filter(s=>!Ss(s,r));return{arrayValue:{values:n}}}class _c extends sp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function _S(t){return Pt(t.integerValue||t.doubleValue)}function oR(t){return zw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.field=e,this.transform=n}}function L5(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof wc&&s instanceof wc||r instanceof vc&&s instanceof vc?al(r.elements,s.elements,Ss):r instanceof _c&&s instanceof _c?Ss(r.Ae,s.Ae):r instanceof yc&&s instanceof yc}(t.transform,e.transform)}class F5{constructor(e,n){this.version=e,this.transformResults=n}}class Mr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ip{}function lR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gw(t.key,Mr.none()):new Vc(t.key,t.data,Mr.none());{const n=t.data,r=Kn.empty();let s=new Yt(pn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new co(t.key,r,new pr(s.toArray()),Mr.none())}}function B5(t,e,n){t instanceof Vc?function(s,i,o){const l=s.value.clone(),a=ES(s.fieldTransforms,i,o.transformResults);l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof co?function(s,i,o){if(!nh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=ES(s.fieldTransforms,i,o.transformResults),a=i.data;a.setAll(uR(s)),a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Mu(t,e,n,r){return t instanceof Vc?function(i,o,l,a){if(!nh(i.precondition,o))return l;const u=i.value.clone(),d=SS(i.fieldTransforms,a,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof co?function(i,o,l,a){if(!nh(i.precondition,o))return l;const u=SS(i.fieldTransforms,a,o),d=o.data;return d.setAll(uR(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,l){return nh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function V5(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=rR(r.transform,s||null);i!=null&&(n===null&&(n=Kn.empty()),n.set(r.field,i))}return n||null}function xS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&al(r,s,(i,o)=>L5(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vc extends ip{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class co extends ip{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function uR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ES(t,e,n){const r=new Map;Je(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,U5(o,l,n[s]))}return r}function SS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,j5(i,o,e))}return r}class Gw extends ip{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $5 extends ip{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&B5(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=eR();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const a=lR(o,l);a!==null&&r.set(s.key,a),o.isValidDocument()||o.convertToNoDocument(Se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Be())}isEqual(e){return this.batchId===e.batchId&&al(this.mutations,e.mutations,(n,r)=>xS(n,r))&&al(this.baseMutations,e.baseMutations,(n,r)=>xS(n,r))}}class Kw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Je(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return N5}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Kw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,$e;function W5(t){switch(t){case H.OK:return ve(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ve(15467,{code:t})}}function cR(t){if(t===void 0)return Gs("GRPC error has no .code"),H.UNKNOWN;switch(t){case Ot.OK:return H.OK;case Ot.CANCELLED:return H.CANCELLED;case Ot.UNKNOWN:return H.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return H.INTERNAL;case Ot.UNAVAILABLE:return H.UNAVAILABLE;case Ot.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Ot.NOT_FOUND:return H.NOT_FOUND;case Ot.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Ot.ABORTED:return H.ABORTED;case Ot.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Ot.DATA_LOSS:return H.DATA_LOSS;default:return ve(39323,{code:t})}}($e=Ot||(Ot={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=new zi([4294967295,4294967295],0);function bS(t){const e=G5().encode(t),n=new Sk;return n.update(e),new Uint8Array(n.digest())}function TS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new zi([n,r],0),new zi([s,i],0)]}class Jw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mu(`Invalid padding: ${n}`);if(r<0)throw new mu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new mu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(zi.fromNumber(r)));return s.compare(K5)===1&&(s=new zi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=bS(e),[r,s]=TS(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Jw(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=bS(e),[r,s]=TS(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,$c.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new op(Se.min(),s,new Et(Fe),Ks(),Be())}}class $c{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $c(r,n,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class dR{constructor(e,n){this.targetId=e,this.Ce=n}}class hR{constructor(e,n,r=wn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class AS{constructor(){this.ve=0,this.Fe=CS(),this.Me=wn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),n=Be(),r=Be();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ve(38017,{changeType:i})}}),new $c(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=CS()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class J5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ks(),this.Je=Cd(),this.He=Cd(),this.Ye=new Et(Fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Uy(i))if(r===0){const o=new ye(i.path);this.et(n,o,Rn.newNoDocument(o,Se.min()))}else Je(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),a=l?this.ct(l,e,o):1;if(a!==0){this.it(n);const u=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Xi(r).toUint8Array()}catch(a){if(a instanceof Ok)return ol("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{l=new Jw(o,s,i)}catch(a){return ol(a instanceof mu?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Uy(l.target)){const a=new ye(l.target.path);this.It(a).has(o)||this.Et(o,a)||this.et(o,a,Rn.newNoDocument(a,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Be();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(a=>{const u=this.ot(a);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new op(e,n,this.Ye,this.je,r);return this.je=Ks(),this.Je=Cd(),this.He=Cd(),this.Ye=new Et(Fe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new AS,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Yt(Fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Yt(Fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new AS),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Cd(){return new Et(ye.comparator)}function CS(){return new Et(ye.comparator)}const Q5={asc:"ASCENDING",desc:"DESCENDING"},X5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y5={and:"AND",or:"OR"};class Z5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fy(t,e){return t.useProto3Json||Zf(e)?e:{value:e}}function Xh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eB(t,e){return Xh(t,e.toTimestamp())}function ws(t){return Je(!!t,49232),Se.fromTimestamp(function(n){const r=Qi(n);return new ht(r.seconds,r.nanos)}(t))}function Qw(t,e){return By(t,e).canonicalString()}function By(t,e){const n=function(s){return new at(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pR(t){const e=at.fromString(t);return Je(vR(e),10190,{key:e.toString()}),e}function Vy(t,e){return Qw(t.databaseId,e.path)}function Mm(t,e){const n=pR(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(gR(n))}function mR(t,e){return Qw(t.databaseId,e)}function tB(t){const e=pR(t);return e.length===4?at.emptyPath():gR(e)}function $y(t){return new at(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gR(t){return Je(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function IS(t,e,n){return{name:Vy(t,e),fields:n.value.mapValue.fields}}function nB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ve(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(Je(d===void 0||typeof d=="string",58123),wn.fromBase64String(d||"")):(Je(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),wn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?H.UNKNOWN:cR(u.code);return new oe(d,u.message||"")}(o);n=new hR(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Mm(t,r.document.name),i=ws(r.document.updateTime),o=r.document.createTime?ws(r.document.createTime):Se.min(),l=new Kn({mapValue:{fields:r.document.fields}}),a=Rn.newFoundDocument(s,i,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new rh(u,d,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Mm(t,r.document),i=r.readTime?ws(r.readTime):Se.min(),o=Rn.newNoDocument(s,i),l=r.removedTargetIds||[];n=new rh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Mm(t,r.document),i=r.removedTargetIds||[];n=new rh([],i,s,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new H5(s,i),l=r.targetId;n=new dR(l,o)}}return n}function rB(t,e){let n;if(e instanceof Vc)n={update:IS(t,e.key,e.value)};else if(e instanceof Gw)n={delete:Vy(t,e.key)};else if(e instanceof co)n={update:IS(t,e.key,e.data),updateMask:hB(e.fieldMask)};else{if(!(e instanceof $5))return ve(16599,{Vt:e.type});n={verify:Vy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof yc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof wc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof _c)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ve(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:eB(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ve(27497)}(t,e.precondition)),n}function sB(t,e){return t&&t.length>0?(Je(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?ws(s.updateTime):ws(i);return o.isEqual(Se.min())&&(o=ws(i)),new F5(o,s.transformResults||[])}(n,e))):[]}function iB(t,e){return{documents:[mR(t,e.path)]}}function oB(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mR(t,s);const i=function(u){if(u.length!==0)return wR(Xr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:ya(f.field),direction:uB(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Fy(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function aB(t){let e=tB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Je(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const f=yR(h);return f instanceof Xr&&Hk(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(w){return new gc(wa(w.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,Zf(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(h){const f=!!h.before,g=h.values||[];return new Jh(g,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,g=h.values||[];return new Jh(g,f)}(n.endAt)),C5(e,s,o,i,l,"F",a,u)}function lB(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wa(n.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=wa(n.unaryFilter.field);return Lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=wa(n.unaryFilter.field);return Lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=wa(n.unaryFilter.field);return Lt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}}(t):t.fieldFilter!==void 0?function(n){return Lt.create(wa(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xr.create(n.compositeFilter.filters.map(r=>yR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ve(1026)}}(n.compositeFilter.op))}(t):ve(30097,{filter:t})}function uB(t){return Q5[t]}function cB(t){return X5[t]}function dB(t){return Y5[t]}function ya(t){return{fieldPath:t.canonicalString()}}function wa(t){return pn.fromServerFormat(t.fieldPath)}function wR(t){return t instanceof Lt?function(n){if(n.op==="=="){if(mS(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NAN"}};if(pS(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mS(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NAN"}};if(pS(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ya(n.field),op:cB(n.op),value:n.value}}}(t):t instanceof Xr?function(n){const r=n.getFilters().map(s=>wR(s));return r.length===1?r[0]:{compositeFilter:{op:dB(n.op),filters:r}}}(t):ve(54877,{filter:t})}function hB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n,r,s,i=Se.min(),o=Se.min(),l=wn.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=a}withSequenceNumber(e){return new Ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e){this.yt=e}}function pB(t){const e=aB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Qh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(){this.Cn=new gB}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Ji.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class gB{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Yt(at.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Yt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_R=41943040;class Hn{static withCacheSize(e){return new Hn(e,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(_R,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new cl(0)}static cr(){return new cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="LruGarbageCollector",yB=1048576;function PS([t,e],[n,r]){const s=Fe(t,n);return s===0?Fe(e,r):s}class wB{constructor(e){this.Ir=e,this.buffer=new Yt(PS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();PS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vB{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(RS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Cl(n)?ue(RS,"Ignoring IndexedDB error during garbage collection: ",n):await Al(n)}await this.Vr(3e5)})}}class _B{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return G.resolve(Yf.ce);const r=new wB(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(kS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kS):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,a,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,l=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),ma()<=Le.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(a-l)+`ms
	Removed ${h} documents in `+(u-a)+`ms
Total Duration: ${u-d}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function xB(t,e){return new _B(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(){this.changes=new ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Mu(r.mutation,s,pr.empty(),ht.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Be()){const s=ko();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=pu();return i.forEach((l,a)=>{o=o.insert(l,a.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ko();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Be()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Ks();const o=Du(),l=function(){return Du()}();return n.forEach((a,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof co)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Mu(d.mutation,u,d.mutation.getFieldMask(),ht.now())):o.set(u.key,pr.empty())}),this.recalculateAndSaveOverlays(e,i).next(a=>(a.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>l.set(u,new SB(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Du();let s=new Et((o,l)=>o-l),i=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(a=>{const u=n.get(a);if(u===null)return;let d=r.get(a)||pr.empty();d=l.applyToLocalView(u,d),r.set(a,d);const h=(s.get(l.batchId)||Be()).add(a);s=s.insert(l.batchId,h)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const a=l.getNext(),u=a.key,d=a.value,h=eR();d.forEach(f=>{if(!i.has(f)){const g=lR(n.get(f),r.get(f));g!==null&&h.set(f,g),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ye.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Jk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(ko());let l=hc,a=i;return o.next(u=>G.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),i.get(d)?G.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{a=a.insert(d,f)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,a,u,Be())).next(d=>({batchId:l,changes:Zk(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(r=>{let s=pu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=pu();return this.indexManager.getCollectionParents(e,i).next(l=>G.forEach(l,a=>{const u=function(h,f){return new Il(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((a,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Rn.newInvalidDocument(d)))});let l=pu();return o.forEach((a,u)=>{const d=i.get(a);d!==void 0&&Mu(d.mutation,u,pr.empty(),ht.now()),rp(n,u)&&(l=l.insert(a,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ws(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:pB(s.bundledQuery),readTime:ws(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(){this.overlays=new Et(ye.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ko();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=ko(),i=n.length+1,o=new ye(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const a=l.getNext().value,u=a.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&a.largestBatchId>r&&s.set(a.getKey(),a)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Et((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=ko(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=ko(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return G.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new q5(n,r));let i=this.qr.get(n);i===void 0&&(i=Be(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.Qr=new Yt(an.$r),this.Ur=new Yt(an.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new an(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new an(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ye(new at([])),r=new an(n,e),s=new an(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new at([])),r=new an(n,e),s=new an(n,e+1);let i=Be();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new an(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class an{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||Fe(e.Yr,n.Yr)}static Kr(e,n){return Fe(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Yt(an.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new z5(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new an(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Vw:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new an(n,0),s=new an(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Yt(Fe);return n.forEach(s=>{const i=new an(s,0),o=new an(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ye.isDocumentKey(i)||(i=i.child(""));const o=new an(new ye(i),0);let l=new Yt(Fe);return this.Zr.forEachWhile(a=>{const u=a.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(a.Yr)),!0)},o),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(n.mutations,s=>{const i=new an(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new an(n,0),s=this.Zr.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e){this.ri=e,this.docs=function(){return new Et(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Rn.newInvalidDocument(n))}getEntries(e,n){let r=Ks();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Rn.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ks();const o=n.path,l=new ye(o.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(l);for(;a.hasNext();){const{key:u,value:{document:d}}=a.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||i5(s5(d),r)<=0||(s.has(d.key)||rp(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ve(9500)}ii(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new RB(this)}getSize(e){return G.resolve(this.size)}}class RB extends EB{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e){this.persistence=e,this.si=new ra(n=>qw(n),Hw),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Xw,this.targetCount=0,this.ai=cl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new cl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n){this.ui={},this.overlays={},this.ci=new Yf(0),this.li=!1,this.li=!0,this.hi=new CB,this.referenceDelegate=e(this),this.Pi=new PB(this),this.indexManager=new mB,this.remoteDocumentCache=function(s){return new kB(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new fB(n),this.Ii=new TB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new AB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new IB(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const s=new NB(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class NB extends a5{constructor(e){super(),this.currentSequenceNumber=e}}class Yw{constructor(e){this.persistence=e,this.Ri=new Xw,this.Vi=null}static mi(e){return new Yw(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{const s=ye.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Yh{constructor(e,n){this.persistence=e,this.pi=new ra(r=>c5(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=xB(this,n)}static mi(e,n){return new Yh(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?G.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,Se.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eh(e.data.value)),n}br(e,n,r){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return G.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Be(),s=Be();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Zw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return U4()?8:l5(Dn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new DB;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ma()<=Le.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",ga(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(ma()<=Le.DEBUG&&ue("QueryEngine","Query:",ga(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ma()<=Le.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",ga(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(n))):G.resolve())}ys(e,n){if(vS(n))return G.resolve(null);let r=ys(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Qh(n,null,"F"),r=ys(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Be(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(a=>{const u=this.Ds(n,l);return this.Cs(n,u,o,a.readTime)?this.ys(e,Qh(n,null,"F")):this.vs(e,u,n,a)}))})))}ws(e,n,r,s){return vS(n)||s.isEqual(Se.min())?G.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?G.resolve(null):(ma()<=Le.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ga(n)),this.vs(e,o,n,r5(s,hc)).next(l=>l))})}Ds(e,n){let r=new Yt(Xk(e));return n.forEach((s,i)=>{rp(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ma()<=Le.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",ga(n)),this.ps.getDocumentsMatchingQuery(e,n,Ji.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="LocalStore",OB=3e8;class jB{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Et(Fe),this.xs=new ra(i=>qw(i),Hw),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bB(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function UB(t,e,n,r){return new jB(t,e,n,r)}async function ER(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let a=Be();for(const u of s){o.push(u.batchId);for(const d of u.mutations)a=a.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)a=a.add(d.key)}return n.localDocuments.getDocuments(r,a).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function LB(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,a,u,d){const h=u.batch,f=h.keys();let g=G.resolve();return f.forEach(w=>{g=g.next(()=>d.getEntry(a,w)).next(E=>{const b=u.docVersions.get(w);Je(b!==null,48541),E.version.compareTo(b)<0&&(h.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),d.addEntry(E)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(a,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let a=Be();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(a=a.add(l.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function SR(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function FB(t,e){const n=Te(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let g=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(wn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(h,g),function(E,b,v){return E.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=OB?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,g,d)&&l.push(n.Pi.updateTargetData(i,g))});let a=Ks(),u=Be();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(BB(i,o,e.documentUpdates).next(d=>{a=d.ks,u=d.qs})),!r.isEqual(Se.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return G.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,a,u)).next(()=>a)}).then(i=>(n.Ms=s,i))}function BB(t,e,n){let r=Be(),s=Be();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ks();return n.forEach((l,a)=>{const u=i.get(l);a.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),a.isNoDocument()&&a.version.isEqual(Se.min())?(e.removeEntry(l,a.readTime),o=o.insert(l,a)):!u.isValidDocument()||a.version.compareTo(u.version)>0||a.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(a),o=o.insert(l,a)):ue(ev,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",a.version)}),{ks:o,qs:s}})}function VB(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Vw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $B(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Ri(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function zy(t,e,n){const r=Te(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Cl(o))throw o;ue(ev,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function NS(t,e,n){const r=Te(t);let s=Se.min(),i=Be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(a,u,d){const h=Te(a),f=h.xs.get(d);return f!==void 0?G.resolve(h.Ms.get(f)):h.Pi.getTargetData(u,d)}(r,o,ys(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(a=>{i=a})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Se.min(),n?i:Be())).next(l=>(zB(r,k5(e),l),{documents:l,Qs:i})))}function zB(t,e,n){let r=t.Os.get(e)||Se.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class DS{constructor(){this.activeTargetIds=O5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qB{constructor(){this.Mo=new DS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new DS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="ConnectivityMonitor";class OS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(MS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(MS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Id=null;function qy(){return Id===null?Id=function(){return 268435456+Math.round(2147483648*Math.random())}():Id++,"0x"+Id.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="RestConnection",WB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GB{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Gh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=qy(),l=this.zo(e,n.toUriEncodedString());ue(Om,`Sending RPC '${e}' ${o}:`,l,r);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,s,i);const{host:u}=new URL(l),d=El(u);return this.Jo(e,l,a,r,d).then(h=>(ue(Om,`Received RPC '${e}' ${o}: `,h),h),h=>{throw ol(Om,`RPC '${e}' ${o} failed with error: `,h,"url: ",l,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Tl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=WB[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class JB extends GB{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=qy();return new Promise((l,a)=>{const u=new bk;u.setWithCredentials(!0),u.listenOnce(Tk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Zd.NO_ERROR:const h=u.getResponseJson();ue(En,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),l(h);break;case Zd.TIMEOUT:ue(En,`RPC '${e}' ${o} timed out`),a(new oe(H.DEADLINE_EXCEEDED,"Request time out"));break;case Zd.HTTP_ERROR:const f=u.getStatus();if(ue(En,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const E=function(v){const x=v.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(x)>=0?x:H.UNKNOWN}(w.status);a(new oe(E,w.message))}else a(new oe(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new oe(H.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ue(En,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);ue(En,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",d,r,15)})}T_(e,n,r){const s=qy(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ik(),l=Ck(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(a.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const d=i.join("");ue(En,`Creating RPC '${e}' stream ${s}: ${d}`,a);const h=o.createWebChannel(d,a);this.I_(h);let f=!1,g=!1;const w=new KB({Yo:b=>{g?ue(En,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(f||(ue(En,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),ue(En,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},Zo:()=>h.close()}),E=(b,v,x)=>{b.listen(v,T=>{try{x(T)}catch(D){setTimeout(()=>{throw D},0)}})};return E(h,fu.EventType.OPEN,()=>{g||(ue(En,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),E(h,fu.EventType.CLOSE,()=>{g||(g=!0,ue(En,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(h))}),E(h,fu.EventType.ERROR,b=>{g||(g=!0,ol(En,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),w.a_(new oe(H.UNAVAILABLE,"The operation could not be completed")))}),E(h,fu.EventType.MESSAGE,b=>{var v;if(!g){const x=b.data[0];Je(!!x,16349);const T=x,D=(T==null?void 0:T.error)||((v=T[0])==null?void 0:v.error);if(D){ue(En,`RPC '${e}' stream ${s} received error:`,D);const L=D.status;let V=function(_){const k=Ot[_];if(k!==void 0)return cR(k)}(L),I=D.message;V===void 0&&(V=H.INTERNAL,I="Unknown error status: "+L+" with message "+D.message),g=!0,w.a_(new oe(V,I)),h.close()}else ue(En,`RPC '${e}' stream ${s} received:`,x),w.u_(x)}}),E(l,Ak.STAT_EVENT,b=>{b.stat===Ny.PROXY?ue(En,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Ny.NOPROXY&&ue(En,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function jm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(t){return new Z5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="PersistentStream";class TR{constructor(e,n,r,s,i,o,l,a){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bR(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Gs(n.toString()),Gs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new oe(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ue(jS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ue(jS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QB extends TR{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=nB(this.serializer,e),r=function(i){if(!("targetChange"in i))return Se.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?ws(o.readTime):Se.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=$y(this.serializer),n.addTarget=function(i,o){let l;const a=o.target;if(l=Uy(a)?{documents:iB(i,a)}:{query:oB(i,a).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=fR(i,o.resumeToken);const u=Fy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Se.min())>0){l.readTime=Xh(i,o.snapshotVersion.toTimestamp());const u=Fy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=lB(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=$y(this.serializer),n.removeTarget=e,this.q_(n)}}class XB extends TR{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=sB(e.writeResults,e.commitTime),r=ws(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=$y(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rB(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{}class ZB extends YB{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new oe(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,By(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(H.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,By(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(H.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class eV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gs(n),this.aa=!1):ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="RemoteStore";class tV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{sa(this)&&(ue(Wo,"Restarting streams for network reachability change."),await async function(a){const u=Te(a);u.Ea.add(4),await zc(u),u.Ra.set("Unknown"),u.Ea.delete(4),await lp(u)}(this))})}),this.Ra=new eV(r,s)}}async function lp(t){if(sa(t))for(const e of t.da)await e(!0)}async function zc(t){for(const e of t.da)await e(!1)}function AR(t,e){const n=Te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),sv(n)?rv(n):kl(n).O_()&&nv(n,e))}function tv(t,e){const n=Te(t),r=kl(n);n.Ia.delete(e),r.O_()&&CR(n,e),n.Ia.size===0&&(r.O_()?r.L_():sa(n)&&n.Ra.set("Unknown"))}function nv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}kl(t).Y_(e)}function CR(t,e){t.Va.Ue(e),kl(t).Z_(e)}function rv(t){t.Va=new J5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),kl(t).start(),t.Ra.ua()}function sv(t){return sa(t)&&!kl(t).x_()&&t.Ia.size>0}function sa(t){return Te(t).Ea.size===0}function IR(t){t.Va=void 0}async function nV(t){t.Ra.set("Online")}async function rV(t){t.Ia.forEach((e,n)=>{nv(t,e)})}async function sV(t,e){IR(t),sv(t)?(t.Ra.ha(e),rv(t)):t.Ra.set("Unknown")}async function iV(t,e,n){if(t.Ra.set("Online"),e instanceof hR&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){ue(Wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zh(t,r)}else if(e instanceof rh?t.Va.Ze(e):e instanceof dR?t.Va.st(e):t.Va.tt(e),!n.isEqual(Se.min()))try{const r=await SR(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const d=i.Ia.get(u);d&&i.Ia.set(u,d.withResumeToken(a.resumeToken,o))}}),l.targetMismatches.forEach((a,u)=>{const d=i.Ia.get(a);if(!d)return;i.Ia.set(a,d.withResumeToken(wn.EMPTY_BYTE_STRING,d.snapshotVersion)),CR(i,a);const h=new Ri(d.target,a,u,d.sequenceNumber);nv(i,h)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ue(Wo,"Failed to raise snapshot:",r),await Zh(t,r)}}async function Zh(t,e,n){if(!Cl(e))throw e;t.Ea.add(1),await zc(t),t.Ra.set("Offline"),n||(n=()=>SR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue(Wo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await lp(t)})}function kR(t,e){return e().catch(n=>Zh(t,n,e))}async function up(t){const e=Te(t),n=Zi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vw;for(;oV(e);)try{const s=await VB(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,aV(e,s)}catch(s){await Zh(e,s)}RR(e)&&PR(e)}function oV(t){return sa(t)&&t.Ta.length<10}function aV(t,e){t.Ta.push(e);const n=Zi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function RR(t){return sa(t)&&!Zi(t).x_()&&t.Ta.length>0}function PR(t){Zi(t).start()}async function lV(t){Zi(t).ra()}async function uV(t){const e=Zi(t);for(const n of t.Ta)e.ea(n.mutations)}async function cV(t,e,n){const r=t.Ta.shift(),s=Kw.from(r,e,n);await kR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await up(t)}async function dV(t,e){e&&Zi(t).X_&&await async function(r,s){if(function(o){return W5(o)&&o!==H.ABORTED}(s.code)){const i=r.Ta.shift();Zi(r).B_(),await kR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await up(r)}}(t,e),RR(t)&&PR(t)}async function US(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),ue(Wo,"RemoteStore received new credentials");const r=sa(n);n.Ea.add(3),await zc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await lp(n)}async function hV(t,e){const n=Te(t);e?(n.Ea.delete(2),await lp(n)):e||(n.Ea.add(2),await zc(n),n.Ra.set("Unknown"))}function kl(t){return t.ma||(t.ma=function(n,r,s){const i=Te(n);return i.sa(),new QB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:nV.bind(null,t),t_:rV.bind(null,t),r_:sV.bind(null,t),H_:iV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),sv(t)?rv(t):t.Ra.set("Unknown")):(await t.ma.stop(),IR(t))})),t.ma}function Zi(t){return t.fa||(t.fa=function(n,r,s){const i=Te(n);return i.sa(),new XB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:lV.bind(null,t),r_:dV.bind(null,t),ta:uV.bind(null,t),na:cV.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await up(t)):(await t.fa.stop(),t.Ta.length>0&&(ue(Wo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new iv(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ov(t,e){if(Gs("AsyncQueue",`${e}: ${t}`),Cl(t))return new oe(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{static emptySet(e){return new Wa(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ye.comparator(n.key,r.key):(n,r)=>ye.comparator(n.key,r.key),this.keyedMap=pu(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Wa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.ga=new Et(ye.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class dl{constructor(e,n,r,s,i,o,l,a,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=a,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new dl(e,n,Wa.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class pV{constructor(){this.queries=FS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Te(n),i=s.queries;s.queries=FS(),i.forEach((o,l)=>{for(const a of l.Sa)a.onError(r)})})(this,new oe(H.ABORTED,"Firestore shutting down"))}}function FS(){return new ra(t=>Qk(t),np)}async function av(t,e){const n=Te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new fV,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=ov(o,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&uv(n)}async function lv(t,e){const n=Te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function mV(t,e){const n=Te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&uv(n)}function gV(t,e,n){const r=Te(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function uv(t){t.Ca.forEach(e=>{e.next()})}var Hy,BS;(BS=Hy||(Hy={})).Ma="default",BS.Cache="cache";class cv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new dl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.key=e}}class DR{constructor(e){this.key=e}}class yV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=Xk(e),this.tu=new Wa(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new LS,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const a=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),g=rp(this.query,h)?h:null,w=!!f&&this.mutatedKeys.has(f.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;f&&g?f.data.isEqual(g.data)?w!==E&&(r.track({type:3,doc:g}),b=!0):this.su(f,g)||(r.track({type:2,doc:g}),b=!0,(a&&this.eu(g,a)>0||u&&this.eu(g,u)<0)&&(l=!0)):!f&&g?(r.track({type:0,doc:g}),b=!0):f&&!g&&(r.track({type:1,doc:f}),b=!0,(a||u)&&(l=!0)),b&&(g?(o=o.add(g),i=E?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(g,w){const E=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:b})}};return E(g)-E(w)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],a=this.Xa.size===0&&this.current&&!s?1:0,u=a!==this.Za;return this.Za=a,o.length!==0||u?{snapshot:new dl(this.query,e.tu,i,o,e.mutatedKeys,a===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new LS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new DR(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new NR(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return dl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const dv="SyncEngine";class wV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vV{constructor(e){this.key=e,this.hu=!1}}class _V{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ra(l=>Qk(l),np),this.Iu=new Map,this.Eu=new Set,this.du=new Et(ye.comparator),this.Au=new Map,this.Ru=new Xw,this.Vu={},this.mu=new Map,this.fu=cl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xV(t,e,n=!0){const r=FR(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await MR(r,e,n,!0),s}async function EV(t,e){const n=FR(t);await MR(n,e,!0,!1)}async function MR(t,e,n,r){const s=await $B(t.localStore,ys(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await SV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&AR(t.remoteStore,s),l}async function SV(t,e,n,r,s){t.pu=(h,f,g)=>async function(E,b,v,x){let T=b.view.ru(v);T.Cs&&(T=await NS(E.localStore,b.query,!1).then(({documents:I})=>b.view.ru(I,T)));const D=x&&x.targetChanges.get(b.targetId),L=x&&x.targetMismatches.get(b.targetId)!=null,V=b.view.applyChanges(T,E.isPrimaryClient,D,L);return $S(E,b.targetId,V.au),V.snapshot}(t,h,f,g);const i=await NS(t.localStore,e,!0),o=new yV(e,i.Qs),l=o.ru(i.documents),a=$c.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,a);$S(t,n,u.au);const d=new wV(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function bV(t,e,n){const r=Te(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!np(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await zy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&tv(r.remoteStore,s.targetId),Wy(r,s.targetId)}).catch(Al)):(Wy(r,s.targetId),await zy(r.localStore,s.targetId,!0))}async function TV(t,e){const n=Te(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tv(n.remoteStore,r.targetId))}async function AV(t,e,n){const r=DV(t);try{const s=await function(o,l){const a=Te(o),u=ht.now(),d=l.reduce((g,w)=>g.add(w.key),Be());let h,f;return a.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Ks(),E=Be();return a.Ns.getEntries(g,d).next(b=>{w=b,w.forEach((v,x)=>{x.isValidDocument()||(E=E.add(v))})}).next(()=>a.localDocuments.getOverlayedDocuments(g,w)).next(b=>{h=b;const v=[];for(const x of l){const T=V5(x,h.get(x.key).overlayedDocument);T!=null&&v.push(new co(x.key,T,$k(T.value.mapValue),Mr.exists(!0)))}return a.mutationQueue.addMutationBatch(g,u,v,l)}).next(b=>{f=b;const v=b.applyToLocalDocumentSet(h,E);return a.documentOverlayCache.saveOverlays(g,b.batchId,v)})}).then(()=>({batchId:f.batchId,changes:Zk(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,a){let u=o.Vu[o.currentUser.toKey()];u||(u=new Et(Fe)),u=u.insert(l,a),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await qc(r,s.changes),await up(r.remoteStore)}catch(s){const i=ov(s,"Failed to persist write");n.reject(i)}}async function OR(t,e){const n=Te(t);try{const r=await FB(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Je(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Je(o.hu,14607):s.removedDocuments.size>0&&(Je(o.hu,42227),o.hu=!1))}),await qc(n,r,e)}catch(r){await Al(r)}}function VS(t,e,n){const r=Te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const a=Te(o);a.onlineState=l;let u=!1;a.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(l)&&(u=!0)}),u&&uv(a)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CV(t,e,n){const r=Te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Et(ye.comparator);o=o.insert(i,Rn.newNoDocument(i,Se.min()));const l=Be().add(i),a=new op(Se.min(),new Map,new Et(Fe),o,l);await OR(r,a),r.du=r.du.remove(i),r.Au.delete(e),hv(r)}else await zy(r.localStore,e,!1).then(()=>Wy(r,e,n)).catch(Al)}async function IV(t,e){const n=Te(t),r=e.batch.batchId;try{const s=await LB(n.localStore,e);UR(n,r,null),jR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qc(n,s)}catch(s){await Al(s)}}async function kV(t,e,n){const r=Te(t);try{const s=await function(o,l){const a=Te(o);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return a.mutationQueue.lookupMutationBatch(u,l).next(h=>(Je(h!==null,37113),d=h.keys(),a.mutationQueue.removeMutationBatch(u,h))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>a.localDocuments.getDocuments(u,d))})}(r.localStore,e);UR(r,e,n),jR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qc(r,s)}catch(s){await Al(s)}}function jR(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function UR(t,e,n){const r=Te(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Wy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||LR(t,r)})}function LR(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(tv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),hv(t))}function $S(t,e,n){for(const r of n)r instanceof NR?(t.Ru.addReference(r.key,e),RV(t,r)):r instanceof DR?(ue(dv,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||LR(t,r.key)):ve(19791,{wu:r})}function RV(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ue(dv,"New document in limbo: "+n),t.Eu.add(r),hv(t))}function hv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ye(at.fromString(e)),r=t.fu.next();t.Au.set(r,new vV(n)),t.du=t.du.insert(n,r),AR(t.remoteStore,new Ri(ys(tp(n.path)),r,"TargetPurposeLimboResolution",Yf.ce))}}async function qc(t,e,n){const r=Te(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,a)=>{o.push(r.pu(a,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(a.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(u){s.push(u);const h=Zw.As(a.targetId,u);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(a,u){const d=Te(a);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>G.forEach(u,f=>G.forEach(f.Es,g=>d.persistence.referenceDelegate.addReference(h,f.targetId,g)).next(()=>G.forEach(f.ds,g=>d.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))}catch(h){if(!Cl(h))throw h;ue(ev,"Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const g=d.Ms.get(f),w=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(w);d.Ms=d.Ms.insert(f,E)}}}(r.localStore,i))}async function PV(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){ue(dv,"User change. New user:",e.toKey());const r=await ER(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(a=>{a.reject(new oe(H.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qc(n,r.Ls)}}function NV(t,e){const n=Te(t),r=n.Au.get(e);if(r&&r.hu)return Be().add(r.key);{let s=Be();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function FR(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CV.bind(null,e),e.Pu.H_=mV.bind(null,e.eventManager),e.Pu.yu=gV.bind(null,e.eventManager),e}function DV(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kV.bind(null,e),e}class ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ap(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UB(this.persistence,new MB,e.initialUser,this.serializer)}Cu(e){return new xR(Yw.mi,this.serializer)}Du(e){return new qB}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ef.provider={build:()=>new ef};class MV extends ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Je(this.persistence.referenceDelegate instanceof Yh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vB(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new xR(r=>Yh.mi(r,n),this.serializer)}}class Gy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>VS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PV.bind(null,this.syncEngine),await hV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new pV}()}createDatastore(e){const n=ap(e.databaseInfo.databaseId),r=function(i){return new JB(i)}(e.databaseInfo);return function(i,o,l,a){return new ZB(i,o,l,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new tV(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>VS(this.syncEngine,n,0),function(){return OS.v()?new OS:new HB}())}createSyncEngine(e,n){return function(s,i,o,l,a,u,d){const h=new _V(s,i,o,l,a,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Te(s);ue(Wo,"RemoteStore shutting down."),i.Ea.add(5),await zc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Gy.provider={build:()=>new Gy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="FirestoreClient";class OV{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=In.UNAUTHENTICATED,this.clientId=Bw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ue(eo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ue(eo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ov(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Um(t,e){t.asyncQueue.verifyOperationInProgress(),ue(eo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ER(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function zS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jV(t);ue(eo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>US(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>US(e.remoteStore,s)),t._onlineComponents=e}async function jV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue(eo,"Using user provided OfflineComponentProvider");try{await Um(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ol("Error using user provided cache. Falling back to memory cache: "+n),await Um(t,new ef)}}else ue(eo,"Using default OfflineComponentProvider"),await Um(t,new MV(void 0));return t._offlineComponents}async function BR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue(eo,"Using user provided OnlineComponentProvider"),await zS(t,t._uninitializedComponentsProvider._online)):(ue(eo,"Using default OnlineComponentProvider"),await zS(t,new Gy))),t._onlineComponents}function UV(t){return BR(t).then(e=>e.syncEngine)}async function tf(t){const e=await BR(t),n=e.eventManager;return n.onListen=xV.bind(null,e.syncEngine),n.onUnlisten=bV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=EV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=TV.bind(null,e.syncEngine),n}function LV(t,e,n={}){const r=new Fs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,a,u){const d=new fv({next:f=>{d.Nu(),o.enqueueAndForget(()=>lv(i,h));const g=f.docs.has(l);!g&&f.fromCache?u.reject(new oe(H.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&a&&a.source==="server"?u.reject(new oe(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new cv(tp(l.path),d,{includeMetadataChanges:!0,qa:!0});return av(i,h)}(await tf(t),t.asyncQueue,e,n,r)),r.promise}function FV(t,e,n={}){const r=new Fs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,a,u){const d=new fv({next:f=>{d.Nu(),o.enqueueAndForget(()=>lv(i,h)),f.fromCache&&a.source==="server"?u.reject(new oe(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new cv(l,d,{includeMetadataChanges:!0,qa:!0});return av(i,h)}(await tf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="firestore.googleapis.com",HS=!0;class WS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$R,this.ssl=HS}else this.host=e.host,this.ssl=e.ssl??HS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_R;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yB)throw new oe(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}t5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VR(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new oe(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HF;switch(r.type){case"firstParty":return new JF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=qS.get(n);r&&(ue("ComponentProvider","Removing Datastore"),qS.delete(n),r.terminate())}(this),Promise.resolve()}}function BV(t,e,n,r={}){var u;t=tr(t,cp);const s=El(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(fI(`https://${l}`),pI("Firestore",!0)),i.host!==$R&&i.host!==l&&ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const a={...i,host:l,ssl:s,emulatorOptions:r};if(!Ki(a,o)&&(t._setSettings(a),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=In.MOCK_USER;else{d=k4(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new oe(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new In(f)}t._authCredentials=new WF(new Rk(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ni(this.firestore,e,this._query)}}class Ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Bc(n,Ct._jsonSchema))return new Ct(e,r||null,new ye(at.fromString(n.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:Ft("string",Ct._jsonSchemaVersion),referencePath:Ft("string")};class qi extends ni{constructor(e,n,r){super(e,n,tp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new ye(e))}withConverter(e){return new qi(this.firestore,e,this._path)}}function Qt(t,e,...n){if(t=xt(t),Pk("collection","path",e),t instanceof cp){const r=at.fromString(e,...n);return iS(r),new qi(t,null,r)}{if(!(t instanceof Ct||t instanceof qi))throw new oe(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(at.fromString(e,...n));return iS(r),new qi(t.firestore,null,r)}}function nr(t,e,...n){if(t=xt(t),arguments.length===1&&(e=Bw.newId()),Pk("doc","path",e),t instanceof cp){const r=at.fromString(e,...n);return sS(r),new Ct(t,null,new ye(r))}{if(!(t instanceof Ct||t instanceof qi))throw new oe(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(at.fromString(e,...n));return sS(r),new Ct(t.firestore,t instanceof qi?t.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="AsyncQueue";class KS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bR(this,"async_queue_retry"),this._c=()=>{const r=jm();r&&ue(GS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=jm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=jm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Fs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Cl(e))throw e;ue(GS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Gs("INTERNAL UNHANDLED ERROR: ",JS(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=iv.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ve(47125,{Pc:JS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function JS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Js extends cp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new KS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new KS(e),this._firestoreClient=void 0,await e}}}function VV(t,e){const n=typeof t=="object"?t:Hf(),r=typeof t=="string"?t:Gh,s=na(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=C4("firestore");i&&BV(s,...i)}return s}function dp(t){if(t._terminated)throw new oe(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$V(t),t._firestoreClient}function $V(t){var r,s,i;const e=t._freezeSettings(),n=function(l,a,u,d){return new f5(l,a,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,VR(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new OV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const a=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(a),_online:a}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kr(wn.fromBase64String(e))}catch(n){throw new oe(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kr(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bc(e,kr._jsonSchema))return kr.fromBase64String(e.bytes)}}kr._jsonSchemaVersion="firestore/bytes/1.0",kr._jsonSchema={type:Ft("string",kr._jsonSchemaVersion),bytes:Ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vs._jsonSchemaVersion}}static fromJSON(e){if(Bc(e,vs._jsonSchema))return new vs(e.latitude,e.longitude)}}vs._jsonSchemaVersion="firestore/geoPoint/1.0",vs._jsonSchema={type:Ft("string",vs._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:_s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bc(e,_s._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new _s(e.vectorValues);throw new oe(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_s._jsonSchemaVersion="firestore/vectorValue/1.0",_s._jsonSchema={type:Ft("string",_s._jsonSchemaVersion),vectorValues:Ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=/^__.*__$/;class qV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vc(e,this.data,n,this.fieldTransforms)}}class zR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new co(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:t})}}class pv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qR(this.Ac)&&zV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ap(e)}Cc(e,n,r,s=!1){return new pv({Ac:e,methodName:n,Dc:r,path:pn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fp(t){const e=t._freezeSettings(),n=ap(t._databaseId);return new HV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HR(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);yv("Data must be an object, but it was:",o,r);const l=WR(r,o);let a,u;if(i.merge)a=new pr(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const f=Ky(e,h,n);if(!o.contains(f))throw new oe(H.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);KR(d,f)||d.push(f)}a=new pr(d),u=o.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,u=o.fieldTransforms;return new qV(new Kn(l),a,u)}class pp extends Hc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pp}}class mv extends Hc{_toFieldTransform(e){return new aR(e.path,new yc)}isEqual(e){return e instanceof mv}}class gv extends Hc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new _c(e.serializer,nR(e.serializer,this.Fc));return new aR(e.path,n)}isEqual(e){return e instanceof gv&&this.Fc===e.Fc}}function WV(t,e,n,r){const s=t.Cc(1,e,n);yv("Data must be an object, but it was:",s,r);const i=[],o=Kn.empty();uo(r,(a,u)=>{const d=wv(e,a,n);u=xt(u);const h=s.yc(d);if(u instanceof pp)i.push(d);else{const f=Wc(u,h);f!=null&&(i.push(d),o.set(d,f))}});const l=new pr(i);return new zR(o,l,s.fieldTransforms)}function GV(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Ky(e,r,n)],a=[s];if(i.length%2!=0)throw new oe(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)l.push(Ky(e,i[f])),a.push(i[f+1]);const u=[],d=Kn.empty();for(let f=l.length-1;f>=0;--f)if(!KR(u,l[f])){const g=l[f];let w=a[f];w=xt(w);const E=o.yc(g);if(w instanceof pp)u.push(g);else{const b=Wc(w,E);b!=null&&(u.push(g),d.set(g,b))}}const h=new pr(u);return new zR(d,h,o.fieldTransforms)}function KV(t,e,n,r=!1){return Wc(n,t.Cc(r?4:3,e))}function Wc(t,e){if(GR(t=xt(t)))return yv("Unsupported field value:",e,t),WR(t,e);if(t instanceof Hc)return function(r,s){if(!qR(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let a=Wc(l,s.wc(o));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ht.fromDate(r);return{timestampValue:Xh(s.serializer,i)}}if(r instanceof ht){const i=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xh(s.serializer,i)}}if(r instanceof vs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kr)return{bytesValue:fR(s.serializer,r._byteString)};if(r instanceof Ct){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Qw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof _s)return function(o,l){return{mapValue:{fields:{[Bk]:{stringValue:Vk},[Kh]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Ww(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Xf(r)}`)}(t,e)}function WR(t,e){const n={};return Mk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(t,(r,s)=>{const i=Wc(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function GR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof vs||t instanceof kr||t instanceof Ct||t instanceof Hc||t instanceof _s)}function yv(t,e,n){if(!GR(n)||!Nk(n)){const r=Xf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ky(t,e,n){if((e=xt(e))instanceof hp)return e._internalPath;if(typeof e=="string")return wv(t,e);throw nf("Field path arguments must be of type string or ",t,!1,void 0,n)}const JV=new RegExp("[~\\*/\\[\\]]");function wv(t,e,n){if(e.search(JV)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hp(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let a="";return(i||o)&&(a+=" (found",i&&(a+=` in field ${r}`),o&&(a+=` in document ${s}`),a+=")"),new oe(H.INVALID_ARGUMENT,l+t+a)}function KR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(mp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QV extends JR{data(){return super.data()}}function mp(t,e){return typeof e=="string"?wv(t,e):e instanceof hp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vv{}class _v extends vv{}function Qs(t,e,...n){let r=[];e instanceof vv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(a=>a instanceof xv).length,l=i.filter(a=>a instanceof gp).length;if(o>1||o>0&&l>0)throw new oe(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class gp extends _v{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new gp(e,n,r)}_apply(e){const n=this._parse(e);return YR(e._query,n),new ni(e.firestore,e.converter,Ly(e._query,n))}_parse(e){const n=fp(e.firestore);return function(i,o,l,a,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new oe(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){YS(h,d);const w=[];for(const E of h)w.push(XS(a,i,E));f={arrayValue:{values:w}}}else f=XS(a,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||YS(h,d),f=KV(l,o,h,d==="in"||d==="not-in");return Lt.create(u,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Jy(t,e,n){const r=e,s=mp("where",t);return gp._create(s,r,n)}class xv extends vv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Xr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const a of l)YR(o,a),o=Ly(o,a)}(e._query,n),new ni(e.firestore,e.converter,Ly(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ev extends _v{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ev(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new oe(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new oe(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gc(i,o)}(e._query,this._field,this._direction);return new ni(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Il(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Xs(t,e="asc"){const n=e,r=mp("orderBy",t);return Ev._create(r,n)}class Sv extends _v{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Sv(e,n,r)}_apply(e){return new ni(e.firestore,e.converter,Qh(e._query,this._limit,this._limitType))}}function XR(t){return n5("limit",t),Sv._create("limit",t,"F")}function XS(t,e,n){if(typeof(n=xt(n))=="string"){if(n==="")throw new oe(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jk(e)&&n.indexOf("/")!==-1)throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(at.fromString(n));if(!ye.isDocumentKey(r))throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fS(t,new ye(r))}if(n instanceof Ct)return fS(t,n._key);throw new oe(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xf(n)}.`)}function YS(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YR(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new oe(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class XV{convertValue(e,n="none"){switch(Yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return uo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Kh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Pt(o.doubleValue));return new _s(n)}convertGeoPoint(e){return new vs(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ep(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fc(e));default:return null}}convertTimestamp(e){const n=Qi(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=at.fromString(e);Je(vR(r),9688,{name:e});const s=new pc(r.get(1),r.get(3)),i=new ye(r.popFirst(5));return s.isEqual(n)||Gs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class gu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class No extends JR{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(mp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=No._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}No._jsonSchemaVersion="firestore/documentSnapshot/1.0",No._jsonSchema={type:Ft("string",No._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class sh extends No{data(e={}){return super.data(e)}}class Do{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new gu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sh(this._firestore,this._userDataWriter,r.key,r,new gu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const a=new sh(s._firestore,s._userDataWriter,l.doc.key,l.doc,new gu(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const a=new sh(s._firestore,s._userDataWriter,l.doc.key,l.doc,new gu(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:YV(l.type),doc:a,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Do._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t){t=tr(t,Ct);const e=tr(t.firestore,Js);return LV(dp(e),t._key).then(n=>n2(e,t,n))}Do._jsonSchemaVersion="firestore/querySnapshot/1.0",Do._jsonSchema={type:Ft("string",Do._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class bv extends XV{constructor(e){super(),this.firestore=e}convertBytes(e){return new kr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function e2(t){t=tr(t,ni);const e=tr(t.firestore,Js),n=dp(e),r=new bv(e);return QR(t._query),FV(n,t._query).then(s=>new Do(e,r,t,s))}function wp(t,e,n){t=tr(t,Ct);const r=tr(t.firestore,Js),s=ZR(t.converter,e,n);return vp(r,[HR(fp(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Mr.none())])}function rf(t,e,n,...r){t=tr(t,Ct);const s=tr(t.firestore,Js),i=fp(s);let o;return o=typeof(e=xt(e))=="string"||e instanceof hp?GV(i,"updateDoc",t._key,e,n,r):WV(i,"updateDoc",t._key,e),vp(s,[o.toMutation(t._key,Mr.exists(!0))])}function t2(t){return vp(tr(t.firestore,Js),[new Gw(t._key,Mr.none())])}function xc(t,e){const n=tr(t.firestore,Js),r=nr(t),s=ZR(t.converter,e);return vp(n,[HR(fp(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Mr.exists(!1))]).then(()=>r)}function Ln(t,...e){var a,u,d;t=xt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||QS(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(QS(e[r])){const h=e[r];e[r]=(a=h.next)==null?void 0:a.bind(h),e[r+1]=(u=h.error)==null?void 0:u.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,l;if(t instanceof Ct)o=tr(t.firestore,Js),l=tp(t._key.path),i={next:h=>{e[r]&&e[r](n2(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=tr(t,ni);o=tr(h.firestore,Js),l=h._query;const f=new bv(o);i={next:g=>{e[r]&&e[r](new Do(o,f,h,g))},error:e[r+1],complete:e[r+2]},QR(t._query)}return function(f,g,w,E){const b=new fv(E),v=new cv(g,b,w);return f.asyncQueue.enqueueAndForget(async()=>av(await tf(f),v)),()=>{b.Nu(),f.asyncQueue.enqueueAndForget(async()=>lv(await tf(f),v))}}(dp(o),l,s,i)}function vp(t,e){return function(r,s){const i=new Fs;return r.asyncQueue.enqueueAndForget(async()=>AV(await UV(r),s,i)),i.promise}(dp(t),e)}function n2(t,e,n){const r=n.docs.get(e._key),s=new bv(t);return new No(t,s,e._key,r,new gu(n.hasPendingWrites,n.fromCache),e.converter)}function bs(){return new mv("serverTimestamp")}function Qy(t){return new gv("increment",t)}(function(e,n=!0){(function(s){Tl=s})(Sl),Es(new Qr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Js(new GF(r.getProvider("auth-internal")),new QF(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new oe(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pc(u.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Dr(eS,tS,e),Dr(eS,tS,"esm2020")})();const gi={apiKey:"AIzaSyAYoY9qJ8pylIVX8w0vpqtMeEOb0cZLB7k",authDomain:"pandora-96c06.firebaseapp.com",projectId:"pandora-96c06",storageBucket:"pandora-96c06.firebasestorage.app",messagingSenderId:"300656853622",appId:"1:300656853622:web:db583e3de86f53ad5d1557",measurementId:"G-YD2B1NSMMN"};function ZV(){return gi.apiKey&&gi.authDomain&&gi.projectId&&gi.storageBucket&&gi.messagingSenderId&&gi.appId||console.warn("Firebase config is incomplete. Check your .env VITE_FIREBASE_* values."),Wj().length?Hf():vI(gi)}const Tv=ZV(),Ps=v6(Tv),He=VV(Tv);typeof window<"u"&&gi.measurementId&&VF().then(t=>{t&&FF(Tv)}).catch(()=>{});const e8=new Rs;function t8(t){return t?{uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL}:null}let ZS=!1;const Lr=xl(t=>(ZS||(ZS=!0,aL(Ps,e=>{t({user:t8(e),loading:!1,initialized:!0,error:null})})),{user:null,loading:!0,error:null,initialized:!1,async signInWithGoogle(){t({loading:!0,error:null});try{await IL(Ps,e8)}catch(e){const n=e instanceof Error?e.message:"Google sign-in failed.";t({error:n})}finally{t({loading:!1})}},async loginWithEmail(e,n){t({loading:!0,error:null});try{await nL(Ps,e,n)}catch(r){const s=r instanceof Error?r.message:"Email sign-in failed.";t({error:s})}finally{t({loading:!1})}},async registerWithEmail(e,n,r){t({loading:!0,error:null});try{const s=await tL(Ps,e,n);r&&await sL(s.user,{displayName:r})}catch(s){const i=s instanceof Error?s.message:"Signup failed.";t({error:i})}finally{t({loading:!1})}},async logout(){t({loading:!0,error:null});try{await lL(Ps)}catch(e){const n=e instanceof Error?e.message:"Logout failed.";t({error:n})}finally{t({loading:!1})}},setError(e){t({error:e})}})),r2=xl(t=>({profile:null,setProfile:e=>t({profile:e})}));function on(...t){return t.filter(Boolean).join(" ")}const n8={sm:"h-8 w-8",md:"h-12 w-12"};function r8(t){return t.length<=2?"*".repeat(t.length):`${t.slice(0,2)}${"*".repeat(Math.max(3,t.length-2))}`}function Go({username:t,src:e,size:n="md",className:r,showName:s=!1}){const i=Pr(a=>a.isBlind()),o=i?r8(t):t,l=n8[n];return p.jsxs("div",{className:on("flex items-center gap-3",r),children:[p.jsx("div",{className:on("overflow-hidden border border-pandora-border rounded-none bg-pandora-surface flex items-center justify-center",l),children:i?p.jsx("div",{className:"w-full h-full bg-gradient-to-br from-pandora-surface via-pandora-bg to-pandora-surface animate-pulse"}):e?p.jsx("img",{src:e,alt:t,className:"w-full h-full object-cover"}):p.jsx("div",{className:"flex flex-col items-center justify-center text-[10px] text-pandora-muted font-mono",children:p.jsx("span",{children:t[0]??"?"})})}),s&&p.jsx("span",{className:"text-sm font-medium text-pandora-text font-sans",children:o})]})}function Xy({stats:t}){const n=t.map(r=>Math.max(0,Math.min(100,r))).map((r,s)=>{const i=Math.PI*2/6*s-Math.PI/2,o=80*(r/100),l=100+o*Math.cos(i),a=100+o*Math.sin(i);return`${l},${a}`}).join(" ");return p.jsx("div",{className:"bg-[linear-gradient(#1a1a1a_1px,transparent_1px),linear-gradient(90deg,#1a1a1a_1px,transparent_1px)] bg-[length:18px_18px] p-4",children:p.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-48",children:[p.jsx("polygon",{points:"100,20 166,60 166,140 100,180 34,140 34,60",fill:"none",stroke:"#39FF14",strokeWidth:"1.5"}),p.jsx("polygon",{points:"100,40 150,70 150,130 100,160 50,130 50,70",fill:"none",stroke:"#39FF14",strokeWidth:"1"}),p.jsx("polygon",{points:n,fill:"rgba(57,255,20,0.12)",stroke:"#39FF14",strokeWidth:"2"})]})})}function eb({label:t="Drop Sample Video Here",description:e,accept:n="video/*",onUpload:r,onUploaded:s,onFileSelected:i,deferUpload:o=!1,onFilesSelected:l,multiple:a=!1}){var O,S;const[u,d]=N.useState([]),[h,f]=N.useState(null),[g,w]=N.useState(!1),[E,b]=N.useState(!1),[v,x]=N.useState(null),[T,D]=N.useState(null),L=N.useRef(null),V=u[0]??null,I=N.useCallback(()=>{h&&URL.revokeObjectURL(h)},[h]);N.useEffect(()=>()=>I(),[I]);const C=N.useCallback(Z=>{I(),x(null),D(null);const ie=Z?Array.from(Z):[],je=ie[0]??null;d(ie),i==null||i(je),l==null||l(ie),f(je?URL.createObjectURL(je):null)},[I,i,l]),_=Z=>{var ie;Z.preventDefault(),w(!1),(ie=Z.dataTransfer.files)!=null&&ie.length&&C(Z.dataTransfer.files)},k=Z=>{var ie;(ie=Z.target.files)!=null&&ie.length&&C(Z.target.files)},P=async()=>{if(V){b(!0),D(null);try{const Z=await r(V);x(Z),s==null||s(Z)}catch(Z){const ie=Z instanceof Error?Z.message:"Upload failed. Try again.";D(ie)}finally{b(!1)}}};return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{onClick:()=>{var Z;return(Z=L.current)==null?void 0:Z.click()},onDragOver:Z=>{Z.preventDefault(),w(!0)},onDragLeave:()=>w(!1),onDrop:_,className:`cursor-pointer border-2 border-dashed rounded-sm p-6 text-center transition ${g?"border-pandora-neon bg-pandora-bg":"border-pandora-border hover:border-pandora-neon"}`,children:[p.jsx("input",{ref:L,type:"file",accept:n,className:"hidden",multiple:a,onChange:k}),p.jsxs("div",{className:"flex flex-col items-center gap-2 text-pandora-text",children:[p.jsx(zO,{className:"text-pandora-neon",size:24}),p.jsx("p",{className:"text-sm font-semibold uppercase",children:t}),p.jsxs("p",{className:"text-xs text-pandora-muted font-mono",children:["Click or drag ",a?"files":"a file"," to begin"]}),e&&p.jsx("p",{className:"text-[11px] text-pandora-muted",children:e})]})]}),V&&p.jsxs("div",{className:"border border-pandora-border bg-pandora-bg rounded-sm p-3 space-y-3",children:[p.jsxs("div",{className:"flex gap-3 items-center",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-semibold text-pandora-text",children:V.name}),p.jsxs("p",{className:"text-xs text-pandora-muted",children:[(V.size/(1024*1024)).toFixed(1)," MB  ",V.type||"video"]}),a&&u.length>1&&p.jsxs("p",{className:"text-[11px] text-pandora-muted",children:[u.length-1," more file(s) selected"]})]}),!o&&p.jsx("button",{onClick:P,disabled:E,className:"px-4 py-2 border border-pandora-neon text-pandora-neon text-xs uppercase rounded-sm hover:bg-pandora-neon hover:text-pandora-bg transition disabled:opacity-60 disabled:cursor-not-allowed",children:E?p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(Xt,{className:"animate-spin",size:14}),"Uploading..."]}):"Upload"})]}),h&&p.jsx("div",{className:"relative w-full overflow-hidden rounded-sm border border-pandora-border bg-pandora-surface",children:(O=V==null?void 0:V.type)!=null&&O.startsWith("image")?p.jsx("img",{src:h,alt:V.name,className:"w-full h-56 object-cover"}):(S=V==null?void 0:V.type)!=null&&S.startsWith("video")?p.jsx("video",{src:h,className:"w-full h-56 object-cover",controls:!0,muted:!0,playsInline:!0}):p.jsx("div",{className:"h-24 flex items-center justify-center text-sm text-pandora-muted",children:V==null?void 0:V.name})}),p.jsxs("div",{className:"min-h-[20px]",children:[o&&!v&&p.jsx("p",{className:"text-xs text-pandora-muted",children:"Will upload when you submit."}),E&&!o&&p.jsx("p",{className:"text-xs text-pandora-muted",children:"Uploading to MinIO..."}),v&&!o&&p.jsxs("p",{className:"flex items-center gap-2 text-xs text-pandora-neon",children:[p.jsx(KC,{size:14})," Ready to submit"]}),T&&p.jsxs("p",{className:"flex items-center gap-2 text-xs text-pandora-pink",children:[p.jsx(TO,{size:14})," ",T]})]})]})]})}const s8=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,n){var r;(r=t.httpHandler)==null||r.updateHttpClientConfig(e,n)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),i8=t=>({httpHandler:t.httpHandler()});var Ec;(function(t){t.HTTP="http",t.HTTPS="https"})(Ec||(Ec={}));var sf;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(sf||(sf={}));const Yy="__smithy_context";class zt{constructor(e){j(this,"method");j(this,"protocol");j(this,"hostname");j(this,"port");j(this,"path");j(this,"query");j(this,"headers");j(this,"username");j(this,"password");j(this,"fragment");j(this,"body");this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const n=new zt({...e,headers:{...e.headers}});return n.query&&(n.query=o8(n.query)),n}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return zt.clone(this)}}function o8(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}class Ko{constructor(e){j(this,"statusCode");j(this,"reason");j(this,"headers");j(this,"body");this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const n=e;return typeof n.statusCode=="number"&&typeof n.headers=="object"}}function a8(t){return e=>async n=>{var s,i,o,l;const{request:r}=n;if(t.expectContinueHeader!==!1&&zt.isInstance(r)&&r.body&&t.runtime==="node"&&((i=(s=t.requestHandler)==null?void 0:s.constructor)==null?void 0:i.name)!=="FetchHttpHandler"){let a=!0;if(typeof t.expectContinueHeader=="number")try{a=(Number((o=r.headers)==null?void 0:o["content-length"])??((l=t.bodyLengthChecker)==null?void 0:l.call(t,r.body))??1/0)>=t.expectContinueHeader}catch{}else a=!!t.expectContinueHeader;a&&(r.headers.Expect="100-continue")}return e({...n,request:r})}}const l8={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},u8=t=>({applyToStack:e=>{e.add(a8(t),l8)}}),hl={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},c8=hl.WHEN_SUPPORTED,Lm={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},d8=hl.WHEN_SUPPORTED;var it;(function(t){t.MD5="MD5",t.CRC32="CRC32",t.CRC32C="CRC32C",t.CRC64NVME="CRC64NVME",t.SHA1="SHA1",t.SHA256="SHA256"})(it||(it={}));var tb;(function(t){t.HEADER="header",t.TRAILER="trailer"})(tb||(tb={}));const Zy=it.CRC32;function h8(t,e,n){return t.$source||(t.$source={}),t.$source[e]=n,t}function jt(t,e,n){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=n}const nb=t=>{var e,n;return Ko.isInstance(t)?((e=t.headers)==null?void 0:e.date)??((n=t.headers)==null?void 0:n.Date):void 0},Av=t=>new Date(Date.now()+t),f8=(t,e)=>Math.abs(Av(e).getTime()-t)>=3e5,rb=(t,e)=>{const n=Date.parse(t);return f8(n,e)?n-Date.now():e},Ou=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},s2=async t=>{var u,d,h;const e=Ou("context",t.context),n=Ou("config",t.config),r=(h=(d=(u=e.endpointV2)==null?void 0:u.properties)==null?void 0:d.authSchemes)==null?void 0:h[0],i=await Ou("signer",n.signer)(r),o=t==null?void 0:t.signingRegion,l=t==null?void 0:t.signingRegionSet,a=t==null?void 0:t.signingName;return{config:n,signer:i,signingRegion:o,signingRegionSet:l,signingName:a}};class i2{async sign(e,n,r){var h;if(!zt.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await s2(r),{config:i,signer:o}=s;let{signingRegion:l,signingName:a}=s;const u=r.context;if(((h=u==null?void 0:u.authSchemes)==null?void 0:h.length)??!1){const[f,g]=u.authSchemes;(f==null?void 0:f.name)==="sigv4a"&&(g==null?void 0:g.name)==="sigv4"&&(l=(g==null?void 0:g.signingRegion)??l,a=(g==null?void 0:g.signingName)??a)}return await o.sign(e,{signingDate:Av(i.systemClockOffset),signingRegion:l,signingService:a})}errorHandler(e){return n=>{const r=n.ServerTime??nb(n.$response);if(r){const s=Ou("config",e.config),i=s.systemClockOffset;s.systemClockOffset=rb(r,s.systemClockOffset),s.systemClockOffset!==i&&n.$metadata&&(n.$metadata.clockSkewCorrected=!0)}throw n}}successHandler(e,n){const r=nb(e);if(r){const s=Ou("config",n.config);s.systemClockOffset=rb(r,s.systemClockOffset)}}}class p8 extends i2{async sign(e,n,r){var f;if(!zt.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:s,signer:i,signingRegion:o,signingRegionSet:l,signingName:a}=await s2(r),d=(await((f=s.sigv4aSigningRegionSet)==null?void 0:f.call(s))??l??[o]).join(",");return await i.sign(e,{signingDate:Av(s.systemClockOffset),signingRegion:d,signingService:a})}}const ho=t=>t[Yy]||(t[Yy]={}),Kr=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},m8=(t,e)=>{if(!e||e.length===0)return t;const n=[];for(const r of e)for(const s of t)s.schemeId.split("#")[1]===r&&n.push(s);for(const r of t)n.find(({schemeId:s})=>s===r.schemeId)||n.push(r);return n};function g8(t){const e=new Map;for(const n of t)e.set(n.schemeId,n);return e}const y8=(t,e)=>(n,r)=>async s=>{var h;const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,r,s.input)),o=t.authSchemePreference?await t.authSchemePreference():[],l=m8(i,o),a=g8(t.httpAuthSchemes),u=ho(r),d=[];for(const f of l){const g=a.get(f.schemeId);if(!g){d.push(`HttpAuthScheme \`${f.schemeId}\` was not enabled for this service.`);continue}const w=g.identityProvider(await e.identityProviderConfigProvider(t));if(!w){d.push(`HttpAuthScheme \`${f.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:E={},signingProperties:b={}}=((h=f.propertiesExtractor)==null?void 0:h.call(f,t,r))||{};f.identityProperties=Object.assign(f.identityProperties||{},E),f.signingProperties=Object.assign(f.signingProperties||{},b),u.selectedHttpAuthScheme={httpAuthOption:f,identity:await w(f.identityProperties),signer:g.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(d.join(`
`));return n(s)},w8={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},v8=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(y8(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n}),w8)}}),_8={name:"serializerMiddleware"},x8=t=>e=>{throw e},E8=(t,e)=>{},S8=t=>(e,n)=>async r=>{if(!zt.isInstance(r.request))return e(r);const i=ho(n).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:l,signer:a}=i,u=await e({...r,request:await a.sign(r.request,l,o)}).catch((a.errorHandler||x8)(o));return(a.successHandler||E8)(u.response,o),u},o2={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},b8=t=>({applyToStack:e=>{e.addRelativeTo(S8(),o2)}}),Ga=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},a2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sb=Object.entries(a2).reduce((t,[e,n])=>(t[n]=Number(e),t),{}),T8=a2.split(""),Ka=6,ju=8,A8=63,fl=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const n=new ArrayBuffer(e),r=new DataView(n);for(let s=0;s<t.length;s+=4){let i=0,o=0;for(let u=s,d=s+3;u<=d;u++)if(t[u]!=="="){if(!(t[u]in sb))throw new TypeError(`Invalid character ${t[u]} in base64 string.`);i|=sb[t[u]]<<(d-u)*Ka,o+=Ka}else i>>=Ka;const l=s/4*3;i>>=o%ju;const a=Math.floor(o/ju);for(let u=0;u<a;u++){const d=(a-u-1)*ju;r.setUint8(l+u,(i&255<<d)>>d)}}return new Uint8Array(n)},to=t=>new TextEncoder().encode(t),pl=t=>typeof t=="string"?to(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),Rl=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function Jo(t){let e;typeof t=="string"?e=to(t):e=t;const n=typeof e=="object"&&typeof e.length=="number",r=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!n&&!r)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let i=0;i<e.length;i+=3){let o=0,l=0;for(let u=i,d=Math.min(i+3,e.length);u<d;u++)o|=e[u]<<(d-u-1)*ju,l+=ju;const a=Math.ceil(l/Ka);o<<=a*Ka-l;for(let u=1;u<=a;u++){const d=(a-u)*Ka;s+=T8[(o&A8<<d)>>d]}s+="==".slice(0,4-a)}return s}class Mo extends Uint8Array{static fromString(e,n="utf-8"){if(typeof e=="string")return n==="base64"?Mo.mutate(fl(e)):Mo.mutate(to(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,Mo.prototype),e}transformToString(e="utf-8"){return e==="base64"?Jo(this):Rl(this)}}const C8=typeof ReadableStream=="function"?ReadableStream:function(){};class I8 extends C8{}const e0=t=>{var e;return typeof ReadableStream=="function"&&(((e=t==null?void 0:t.constructor)==null?void 0:e.name)===ReadableStream.name||t instanceof ReadableStream)},k8=({expectedChecksum:t,checksum:e,source:n,checksumSourceLocation:r,base64Encoder:s})=>{var a;if(!e0(n))throw new Error(`@smithy/util-stream: unsupported source type ${((a=n==null?void 0:n.constructor)==null?void 0:a.name)??n} in ChecksumStream.`);const i=s??Jo;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const o=new TransformStream({start(){},async transform(u,d){e.update(u),d.enqueue(u)},async flush(u){const d=await e.digest(),h=i(d);if(t!==h){const f=new Error(`Checksum mismatch: expected "${t}" but received "${h}" in response header "${r}".`);u.error(f)}else u.terminate()}});n.pipeThrough(o);const l=o.readable;return Object.setPrototypeOf(l,I8.prototype),l};class R8{constructor(e){j(this,"allocByteArray");j(this,"byteLength",0);j(this,"byteArrays",[]);this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){const r=this.byteArrays[0];return this.reset(),r}const e=this.allocByteArray(this.byteLength);let n=0;for(let r=0;r<this.byteArrays.length;++r){const s=this.byteArrays[r];e.set(s,n),n+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}}function P8(t,e,n){const r=t.getReader();let s=!1,i=0;const o=["",new R8(u=>new Uint8Array(u))];let l=-1;const a=async u=>{const{value:d,done:h}=await r.read(),f=d;if(h){if(l!==-1){const g=Fm(o,l);Uu(g)>0&&u.enqueue(g)}u.close()}else{const g=M8(f,!1);if(l!==g&&(l>=0&&u.enqueue(Fm(o,l)),l=g),l===-1){u.enqueue(f);return}const w=Uu(f);i+=w;const E=Uu(o[l]);if(w>=e&&E===0)u.enqueue(f);else{const b=D8(o,l,f);!s&&i>e*2&&(s=!0,n==null||n.warn(`@smithy/util-stream - stream chunk size ${w} is below threshold of ${e}, automatically buffering.`)),b>=e?u.enqueue(Fm(o,l)):await a(u)}}};return new ReadableStream({pull:a})}const N8=P8;function D8(t,e,n){switch(e){case 0:return t[0]+=n,Uu(t[0]);case 1:case 2:return t[e].push(n),Uu(t[e])}}function Fm(t,e){switch(e){case 0:const n=t[0];return t[0]="",n;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function Uu(t){return(t==null?void 0:t.byteLength)??(t==null?void 0:t.length)??0}function M8(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}const O8=(t,e)=>{const{base64Encoder:n,bodyLengthChecker:r,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=e,l=n!==void 0&&r!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,a=l?o(s,t):void 0,u=t.getReader();return new ReadableStream({async pull(d){const{value:h,done:f}=await u.read();if(f){if(d.enqueue(`0\r
`),l){const g=n(await a);d.enqueue(`${i}:${g}\r
`),d.enqueue(`\r
`)}d.close()}else d.enqueue(`${(r(h)||0).toString(16)}\r
${h}\r
`)}})};async function j8(t,e){let n=0;const r=[],s=t.getReader();let i=!1;for(;!i;){const{done:a,value:u}=await s.read();if(u&&(r.push(u),n+=(u==null?void 0:u.byteLength)??0),n>=e)break;i=a}s.releaseLock();const o=new Uint8Array(Math.min(e,n));let l=0;for(const a of r){if(a.byteLength>o.byteLength-l){o.set(a.subarray(0,o.byteLength-l),l);break}else o.set(a,l);l+=a.length}return o}const Oo=t=>encodeURIComponent(t).replace(/[!'()*]/g,U8),U8=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function L8(t){const e=[];for(let n of Object.keys(t).sort()){const r=t[n];if(n=Oo(n),Array.isArray(r))for(let s=0,i=r.length;s<i;s++)e.push(`${n}=${Oo(r[s])}`);else{let s=n;(r||typeof r=="string")&&(s+=`=${Oo(r)}`),e.push(s)}}return e.join("&")}function ib(t,e){return new Request(t,e)}function F8(t=0){return new Promise((e,n)=>{t&&setTimeout(()=>{const r=new Error(`Request did not complete within ${t} ms`);r.name="TimeoutError",n(r)},t)})}const Bm={supported:void 0};class Cv{constructor(e){j(this,"config");j(this,"configProvider");typeof e=="function"?this.configProvider=e().then(n=>n||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),Bm.supported===void 0&&(Bm.supported=typeof Request<"u"&&"keepalive"in ib("https://[::1]"))}static create(e){return typeof(e==null?void 0:e.handle)=="function"?e:new Cv(e)}destroy(){}async handle(e,{abortSignal:n,requestTimeout:r}={}){var x;this.config||(this.config=await this.configProvider);const s=r??this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(n!=null&&n.aborted){const T=new Error("Request aborted");return T.name="AbortError",Promise.reject(T)}let l=e.path;const a=L8(e.query||{});a&&(l+=`?${a}`),e.fragment&&(l+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){const T=e.username??"",D=e.password??"";u=`${T}:${D}@`}const{port:d,method:h}=e,f=`${e.protocol}//${u}${e.hostname}${d?`:${d}`:""}${l}`,g=h==="GET"||h==="HEAD"?void 0:e.body,w={body:g,headers:new Headers(e.headers),method:h,credentials:o};(x=this.config)!=null&&x.cache&&(w.cache=this.config.cache),g&&(w.duplex="half"),typeof AbortController<"u"&&(w.signal=n),Bm.supported&&(w.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(w,this.config.requestInit(e));let E=()=>{};const b=ib(f,w),v=[fetch(b).then(T=>{const D=T.headers,L={};for(const I of D.entries())L[I[0]]=I[1];return T.body!=null?{response:new Ko({headers:L,reason:T.statusText,statusCode:T.status,body:T.body})}:T.blob().then(I=>({response:new Ko({headers:L,reason:T.statusText,statusCode:T.status,body:I})}))}),F8(s)];return n&&v.push(new Promise((T,D)=>{const L=()=>{const V=new Error("Request aborted");V.name="AbortError",D(V)};if(typeof n.addEventListener=="function"){const V=n;V.addEventListener("abort",L,{once:!0}),E=()=>V.removeEventListener("abort",L)}else n.onabort=L})),Promise.race(v).finally(E)}updateHttpClientConfig(e,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[e]=n,r))}httpHandlerConfigs(){return this.config??{}}}const l2=async t=>{var e;return typeof Blob=="function"&&t instanceof Blob||((e=t.constructor)==null?void 0:e.name)==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):B8(t):V8(t)};async function B8(t){const e=await $8(t),n=fl(e);return new Uint8Array(n)}async function V8(t){const e=[],n=t.getReader();let r=!1,s=0;for(;!r;){const{done:l,value:a}=await n.read();a&&(e.push(a),s+=a.length),r=l}const i=new Uint8Array(s);let o=0;for(const l of e)i.set(l,o),o+=l.length;return i}function $8(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(new Error("Reader aborted too early"));const s=r.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;e(s.substring(o))},r.onabort=()=>n(new Error("Read aborted")),r.onerror=()=>n(r.error),r.readAsDataURL(t)})}const u2={},t0={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),u2[t]=e,t0[e]=t}function c2(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2){const r=t.slice(n,n+2).toLowerCase();if(r in t0)e[n/2]=t0[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return e}function Jn(t){let e="";for(let n=0;n<t.byteLength;n++)e+=u2[t[n]];return e}const ob="The stream has already been transformed.",d2=t=>{var s,i;if(!ab(t)&&!e0(t)){const o=((i=(s=t==null?void 0:t.__proto__)==null?void 0:s.constructor)==null?void 0:i.name)||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let e=!1;const n=async()=>{if(e)throw new Error(ob);return e=!0,await l2(t)},r=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(t,{transformToByteArray:n,transformToString:async o=>{const l=await n();if(o==="base64")return Jo(l);if(o==="hex")return Jn(l);if(o===void 0||o==="utf8"||o==="utf-8")return Rl(l);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(l);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(ob);if(e=!0,ab(t))return r(t);if(e0(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})},ab=t=>typeof Blob=="function"&&t instanceof Blob;async function z8(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}const kd=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Mo.mutate(t);if(!t)return Mo.mutate(new Uint8Array);const n=e.streamCollector(t);return Mo.mutate(await n)};function lb(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}const Vm=t=>typeof t=="function"?t():t,h2=(t,e,n,r,s)=>({name:e,namespace:t,traits:n,input:r,output:s}),q8=t=>(e,n)=>async r=>{var h,f,g,w;const{response:s}=await e(r),{operationSchema:i}=ho(n),[,o,l,a,u,d]=i??[];try{const E=await t.protocol.deserializeResponse(h2(o,l,a,u,d),{...t,...n},s);return{response:s,output:E}}catch(E){if(Object.defineProperty(E,"$response",{value:s,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in E)){const b="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{E.message+=`
  `+b}catch{!n.logger||((f=(h=n.logger)==null?void 0:h.constructor)==null?void 0:f.name)==="NoOpLogger"?console.warn(b):(w=(g=n.logger)==null?void 0:g.warn)==null||w.call(g,b)}typeof E.$responseBodyText<"u"&&E.$response&&(E.$response.body=E.$responseBodyText);try{if(Ko.isInstance(s)){const{headers:v={}}=s,x=Object.entries(v);E.$metadata={httpStatusCode:s.statusCode,requestId:$m(/^x-[\w-]+-request-?id$/,x),extendedRequestId:$m(/^x-[\w-]+-id-2$/,x),cfId:$m(/^x-[\w-]+-cf-id$/,x)}}}catch{}}throw E}},$m=(t,e)=>(e.find(([n])=>n.match(t))||[void 0,void 0])[1],H8=t=>(e,n)=>async r=>{var f;const{operationSchema:s}=ho(n),[,i,o,l,a,u]=s??[],d=(f=n.endpointV2)!=null&&f.url&&t.urlParser?async()=>t.urlParser(n.endpointV2.url):t.endpoint,h=await t.protocol.serializeRequest(h2(i,o,l,a,u),r.input,{...t,...n,endpoint:d});return e({...r,request:h})},W8={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},G8={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function K8(t){return{applyToStack:e=>{e.add(H8(t),G8),e.add(q8(t),W8),t.protocol.setSerdeContext(t)}}}function Pa(t){if(typeof t=="object")return t;t=t|0;const e={};let n=0;for(const r of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>n++&1)===1&&(e[r]=1);return e}const _i=class _i{constructor(e,n){j(this,"ref");j(this,"memberName");j(this,"symbol",_i.symbol);j(this,"name");j(this,"schema");j(this,"_isMemberSchema");j(this,"traits");j(this,"memberTraits");j(this,"normalizedTraits");this.ref=e,this.memberName=n;const r=[];let s=e,i=e;for(this._isMemberSchema=!1;zm(s);)r.push(s[1]),s=s[0],i=Vm(s),this._isMemberSchema=!0;if(r.length>0){this.memberTraits={};for(let o=r.length-1;o>=0;--o){const l=r[o];Object.assign(this.memberTraits,Pa(l))}}else this.memberTraits=0;if(i instanceof _i){const o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=n??i.memberName;return}if(this.schema=Vm(i),J8(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!n)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){const n=this.prototype.isPrototypeOf(e);return!n&&typeof e=="object"&&e!==null?e.symbol===this.symbol:n}static of(e){const n=Vm(e);if(n instanceof _i)return n;if(zm(n)){const[r,s]=n;if(r instanceof _i)return Object.assign(r.getMergedTraits(),Pa(s)),r;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new _i(n)}getSchema(){const e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){const{name:n}=this;return!e&&n&&n.includes("#")?n.split("#")[1]:n||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){const e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){const e=this.getSchema();return e[0]===3||e[0]===-3}isBlobSchema(){const e=this.getSchema();return e===21||e===42}isTimestampSchema(){const e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){const{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){const e=i=>(i&4)===4||!!(i!=null&&i.idempotencyToken),{normalizedTraits:n,traits:r,memberTraits:s}=this;return e(n)||e(r)||e(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Pa(this.memberTraits)}getOwnTraits(){return Pa(this.traits)}getKeySchema(){const[e,n]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!n)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const r=this.getSchema(),s=e?15:r[4]??0;return ru([s,0],"key")}getValueSchema(){const e=this.getSchema(),[n,r,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(r||s)?e[3+e[0]]:n?15:void 0;if(i!=null)return ru([i,0],r?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){const n=this.getSchema();if(this.isStructSchema()&&n[4].includes(e)){const r=n[4].indexOf(e),s=n[5][r];return ru(zm(s)?s:[s,0],e)}if(this.isDocumentSchema())return ru([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){const e={};try{for(const[n,r]of this.structIterator())e[n]=r}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(const[e,n]of this.structIterator())if(n.isStreaming()&&n.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const e=this.getSchema();for(let n=0;n<e[4].length;++n)yield[e[4][n],ru([e[5][n],0],e[4][n])]}};j(_i,"symbol",Symbol.for("@smithy/nor"));let kt=_i;function ru(t,e){if(t instanceof kt)return Object.assign(t,{memberName:e,_isMemberSchema:!0});const n=kt;return new n(t,e)}const zm=t=>Array.isArray(t)&&t.length===2,J8=t=>Array.isArray(t)&&t.length>=5,cs=class cs{constructor(e,n=new Map,r=new Map){j(this,"namespace");j(this,"schemas");j(this,"exceptions");this.namespace=e,this.schemas=n,this.exceptions=r}static for(e){return cs.registries.has(e)||cs.registries.set(e,new cs(e)),cs.registries.get(e)}register(e,n){const r=this.normalizeShapeId(e);cs.for(r.split("#")[0]).schemas.set(r,n)}getSchema(e){const n=this.normalizeShapeId(e);if(!this.schemas.has(n))throw new Error(`@smithy/core/schema - schema not found for ${n}`);return this.schemas.get(n)}registerError(e,n){const r=e,s=cs.for(r[1]);s.schemas.set(r[1]+"#"+r[2],r),s.exceptions.set(r,n)}getErrorCtor(e){const n=e;return cs.for(n[1]).exceptions.get(n)}getBaseException(){for(const e of this.exceptions.keys())if(Array.isArray(e)){const[,n,r]=e,s=n+"#"+r;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}};j(cs,"registries",new Map);let qt=cs;const Q8=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],X8=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function n0(t){const e=t.getUTCFullYear(),n=t.getUTCMonth(),r=t.getUTCDay(),s=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),l=t.getUTCSeconds(),a=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,d=o<10?`0${o}`:`${o}`,h=l<10?`0${l}`:`${l}`;return`${Q8[r]}, ${a} ${X8[n]} ${e} ${u}:${d}:${h} GMT`}const ub=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Sn=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),Iv=()=>{if(ub)return ub();const t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,Sn[t[0]]+Sn[t[1]]+Sn[t[2]]+Sn[t[3]]+"-"+Sn[t[4]]+Sn[t[5]]+"-"+Sn[t[6]]+Sn[t[7]]+"-"+Sn[t[8]]+Sn[t[9]]+"-"+Sn[t[10]]+Sn[t[11]]+Sn[t[12]]+Sn[t[13]]+Sn[t[14]]+Sn[t[15]]},Pi=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};Pi.from=t=>t&&typeof t=="object"&&(t instanceof Pi||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?Pi(String(t)):Pi(JSON.stringify(t));Pi.fromObject=Pi.from;function Y8(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}const kv="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",Rv="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Pv="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",f2="(\\d?\\d)",p2="(\\d{4})",Z8=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),e9=new RegExp(`^${kv}, ${f2} ${Rv} ${p2} ${Pv} GMT$`),t9=new RegExp(`^${kv}, ${f2}-${Rv}-(\\d\\d) ${Pv} GMT$`),n9=new RegExp(`^${kv} ${Rv} ( [1-9]|\\d\\d) ${Pv} ${p2}$`),r9=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s9=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},i9=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");const e=Z8.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);const[,n,r,s,i,o,l,,a,u]=e;Ns(r,1,12),Ns(s,1,31),Ns(i,0,23),Ns(o,0,59),Ns(l,0,60);const d=new Date(Date.UTC(Number(n),Number(r)-1,Number(s),Number(i),Number(o),Number(l),Number(a)?Math.round(parseFloat(`0.${a}`)*1e3):0));if(d.setUTCFullYear(Number(n)),u.toUpperCase()!="Z"){const[,h,f,g]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],w=h==="-"?1:-1;d.setTime(d.getTime()+w*(Number(f)*60*60*1e3+Number(g)*60*1e3))}return d},o9=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,n,r,s,i,o,l,a;if((a=e9.exec(t))?[,e,n,r,s,i,o,l]=a:(a=t9.exec(t))?([,e,n,r,s,i,o,l]=a,r=(Number(r)+1900).toString()):(a=n9.exec(t))&&([,n,e,s,i,o,l,r]=a),r&&o){const u=Date.UTC(Number(r),r9.indexOf(n),Number(e),Number(s),Number(i),Number(o),l?Math.round(parseFloat(`0.${l}`)*1e3):0);Ns(e,1,31),Ns(s,0,23),Ns(i,0,59),Ns(o,0,60);const d=new Date(u);return d.setUTCFullYear(Number(r)),d}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)};function Ns(t,e,n){const r=Number(t);if(r<e||r>n)throw new Error(`Value ${r} out of range [${e}, ${n}]`)}function a9(t,e,n){if(!Number.isInteger(n))throw new Error("Invalid number of delimiters ("+n+") for splitEvery.");const r=t.split(e),s=[];let i="";for(let o=0;o<r.length;o++)i===""?i=r[o]:i+=e+r[o],(o+1)%n===0&&(s.push(i),i="");return i!==""&&s.push(i),s}const m2=t=>{const e=t.length,n=[];let r=!1,s,i=0;for(let o=0;o<e;++o){const l=t[o];switch(l){case'"':s!=="\\"&&(r=!r);break;case",":r||(n.push(t.slice(i,o)),i=o+1);break}s=l}return n.push(t.slice(i)),n.map(o=>{o=o.trim();const l=o.length;return l<2?o:(o[0]==='"'&&o[l-1]==='"'&&(o=o.slice(1,l-1)),o.replace(/\\"/g,'"'))})},cb=/^-?\d*(\.\d+)?$/;class _p{constructor(e,n){j(this,"string");j(this,"type");if(this.string=e,this.type=n,!cb.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;const n=e;return _p.prototype.isPrototypeOf(e)||n.type==="bigDecimal"&&cb.test(n.string)}}const l9="modulepreload",u9=function(t){return"/"+t},db={},c9=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(a=>{if(a=u9(a),a in db)return;db[a]=!0;const u=a.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":l9,u||(h.as="script"),h.crossOrigin="",h.href=a,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};class xp{constructor(){j(this,"serdeContext")}setSerdeContext(e){this.serdeContext=e}}class d9 extends xp{constructor(n){super();j(this,"options");this.options=n}getRequestType(){return zt}getResponseType(){return Ko}setSerdeContext(n){this.serdeContext=n,this.serializer.setSerdeContext(n),this.deserializer.setSerdeContext(n),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(n)}updateServiceEndpoint(n,r){if("url"in r){n.protocol=r.url.protocol,n.hostname=r.url.hostname,n.port=r.url.port?Number(r.url.port):void 0,n.path=r.url.pathname,n.fragment=r.url.hash||void 0,n.username=r.url.username||void 0,n.password=r.url.password||void 0,n.query||(n.query={});for(const[s,i]of r.url.searchParams.entries())n.query[s]=i;return n}else return n.protocol=r.protocol,n.hostname=r.hostname,n.port=r.port?Number(r.port):void 0,n.path=r.path,n.query={...r.query},n}setHostPrefix(n,r,s){var l;const i=kt.of(r.input),o=Pa(r.traits??{});if(o.endpoint){let a=(l=o.endpoint)==null?void 0:l[0];if(typeof a=="string"){const u=[...i.structIterator()].filter(([,d])=>d.getMergedTraits().hostLabel);for(const[d]of u){const h=s[d];if(typeof h!="string")throw new Error(`@smithy/core/schema - ${d} in input must be a string as hostLabel.`);a=a.replace(`{${d}}`,h)}n.hostname=a+n.hostname}}}deserializeMetadata(n){return{httpStatusCode:n.statusCode,requestId:n.headers["x-amzn-requestid"]??n.headers["x-amzn-request-id"]??n.headers["x-amz-request-id"],extendedRequestId:n.headers["x-amz-id-2"],cfId:n.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:n,requestSchema:r,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:n,requestSchema:r,initialRequest:s})}async deserializeEventStream({response:n,responseSchema:r,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:n,responseSchema:r,initialResponseContainer:s})}async loadEventStreamCapability(){const{EventStreamSerde:n}=await c9(async()=>{const{EventStreamSerde:r}=await import("./index-BQTtS-c6.js");return{EventStreamSerde:r}},[]);return new n({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(n,r,s,i,o){return[]}getEventStreamMarshaller(){const n=this.serdeContext;if(!n.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return n.eventStreamMarshaller}}class h9 extends d9{async serializeRequest(e,n,r){const s={...n??{}},i=this.serializer,o={},l={},a=await r.endpoint(),u=kt.of(e==null?void 0:e.input),d=u.getSchema();let h=!1,f;const g=new zt({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:o,headers:l,body:void 0});if(a){this.updateServiceEndpoint(g,a),this.setHostPrefix(g,e,s);const w=Pa(e.traits);if(w.http){g.method=w.http[0];const[E,b]=w.http[1].split("?");g.path=="/"?g.path=E:g.path+=E;const v=new URLSearchParams(b??"");Object.assign(o,Object.fromEntries(v))}}for(const[w,E]of u.structIterator()){const b=E.getMergedTraits()??{},v=s[w];if(!(v==null&&!E.isIdempotencyToken()))if(b.httpPayload)E.isStreaming()?E.isStructSchema()?s[w]&&(f=await this.serializeEventStream({eventStream:s[w],requestSchema:u})):f=v:(i.write(E,v),f=i.flush()),delete s[w];else if(b.httpLabel){i.write(E,v);const x=i.flush();g.path.includes(`{${w}+}`)?g.path=g.path.replace(`{${w}+}`,x.split("/").map(lb).join("/")):g.path.includes(`{${w}}`)&&(g.path=g.path.replace(`{${w}}`,lb(x))),delete s[w]}else if(b.httpHeader)i.write(E,v),l[b.httpHeader.toLowerCase()]=String(i.flush()),delete s[w];else if(typeof b.httpPrefixHeaders=="string"){for(const[x,T]of Object.entries(v)){const D=b.httpPrefixHeaders+x;i.write([E.getValueSchema(),{httpHeader:D}],T),l[D.toLowerCase()]=i.flush()}delete s[w]}else b.httpQuery||b.httpQueryParams?(this.serializeQuery(E,v,o),delete s[w]):h=!0}return h&&s&&(i.write(d,s),f=i.flush()),g.headers=l,g.query=o,g.body=f,g}serializeQuery(e,n,r){const s=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(const[o,l]of Object.entries(n))if(!(o in r)){const a=e.getValueSchema();Object.assign(a.getMergedTraits(),{...i,httpQuery:o,httpQueryParams:void 0}),this.serializeQuery(a,l,r)}return}if(e.isListSchema()){const o=!!e.getMergedTraits().sparse,l=[];for(const a of n){s.write([e.getValueSchema(),i],a);const u=s.flush();(o||u!==void 0)&&l.push(u)}r[i.httpQuery]=l}else s.write([e,i],n),r[i.httpQuery]=s.flush()}async deserializeResponse(e,n,r){const s=this.deserializer,i=kt.of(e.output),o={};if(r.statusCode>=300){const a=await kd(r.body,n);throw a.byteLength>0&&Object.assign(o,await s.read(15,a)),await this.handleError(e,n,r,o,this.deserializeMetadata(r)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(const a in r.headers){const u=r.headers[a];delete r.headers[a],r.headers[a.toLowerCase()]=u}const l=await this.deserializeHttpMessage(i,n,r,o);if(l.length){const a=await kd(r.body,n);if(a.byteLength>0){const u=await s.read(i,a);for(const d of l)o[d]=u[d]}}else l.discardResponseBody&&await kd(r.body,n);return o.$metadata=this.deserializeMetadata(r),o}async deserializeHttpMessage(e,n,r,s,i){let o;s instanceof Set?o=i:o=s;let l=!0;const a=this.deserializer,u=kt.of(e),d=[];for(const[h,f]of u.structIterator()){const g=f.getMemberTraits();if(g.httpPayload){if(l=!1,f.isStreaming())f.isStructSchema()?o[h]=await this.deserializeEventStream({response:r,responseSchema:u}):o[h]=d2(r.body);else if(r.body){const E=await kd(r.body,n);E.byteLength>0&&(o[h]=await a.read(f,E))}}else if(g.httpHeader){const w=String(g.httpHeader).toLowerCase(),E=r.headers[w];if(E!=null)if(f.isListSchema()){const b=f.getValueSchema();b.getMergedTraits().httpHeader=w;let v;b.isTimestampSchema()&&b.getSchema()===4?v=a9(E,",",2):v=m2(E);const x=[];for(const T of v)x.push(await a.read(b,T.trim()));o[h]=x}else o[h]=await a.read(f,E)}else if(g.httpPrefixHeaders!==void 0){o[h]={};for(const[w,E]of Object.entries(r.headers))if(w.startsWith(g.httpPrefixHeaders)){const b=f.getValueSchema();b.getMergedTraits().httpHeader=w,o[h][w.slice(g.httpPrefixHeaders.length)]=await a.read(b,E)}}else g.httpResponseCode?o[h]=r.statusCode:d.push(h)}return d.discardResponseBody=l,d}}function Nv(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();const{httpLabel:n,httpPrefixHeaders:r,httpHeader:s,httpQuery:i}=t.getMergedTraits();return(e.httpBindings?typeof r=="string"||s?6:i||n?5:void 0:void 0)??e.timestampFormat.default}class g2 extends xp{constructor(n){super();j(this,"settings");this.settings=n}read(n,r){var i;const s=kt.of(n);if(s.isListSchema())return m2(r).map(o=>this.read(s.getValueSchema(),o));if(s.isBlobSchema())return(((i=this.serdeContext)==null?void 0:i.base64Decoder)??fl)(r);if(s.isTimestampSchema())switch(Nv(s,this.settings)){case 5:return i9(r);case 6:return o9(r);case 7:return s9(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isStringSchema()){const o=s.getMergedTraits().mediaType;let l=r;if(o)return s.getMergedTraits().httpHeader&&(l=this.base64ToUtf8(l)),(o==="application/json"||o.endsWith("+json"))&&(l=Pi.from(l)),l}return s.isNumericSchema()?Number(r):s.isBigIntegerSchema()?BigInt(r):s.isBigDecimalSchema()?new _p(r,"bigDecimal"):s.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(n){var r,s;return(((r=this.serdeContext)==null?void 0:r.utf8Encoder)??Rl)((((s=this.serdeContext)==null?void 0:s.base64Decoder)??fl)(n))}}class f9 extends xp{constructor(n,r){super();j(this,"codecDeserializer");j(this,"stringDeserializer");this.codecDeserializer=n,this.stringDeserializer=new g2(r)}setSerdeContext(n){this.stringDeserializer.setSerdeContext(n),this.codecDeserializer.setSerdeContext(n),this.serdeContext=n}read(n,r){var l,a;const s=kt.of(n),i=s.getMergedTraits(),o=((l=this.serdeContext)==null?void 0:l.utf8Encoder)??Rl;if(i.httpHeader||i.httpResponseCode)return this.stringDeserializer.read(s,o(r));if(i.httpPayload){if(s.isBlobSchema()){const u=((a=this.serdeContext)==null?void 0:a.utf8Decoder)??to;return typeof r=="string"?u(r):r}else if(s.isStringSchema())return"byteLength"in r?o(r):r}return this.codecDeserializer.read(s,r)}}class p9 extends xp{constructor(n){super();j(this,"settings");j(this,"stringBuffer","");this.settings=n}write(n,r){var i,o;const s=kt.of(n);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(s.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${s.getName(!0)}`);switch(Nv(s,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=n0(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(s.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(((i=this.serdeContext)==null?void 0:i.base64Encoder)??Jo)(r);return}if(s.isListSchema()&&Array.isArray(r)){let u="";for(const d of r){this.write([s.getValueSchema(),s.getMergedTraits()],d);const h=this.flush(),f=s.getValueSchema().isTimestampSchema()?h:Y8(h);u!==""&&(u+=", "),u+=f}this.stringBuffer=u;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":const l=s.getMergedTraits().mediaType;let a=r;if(l&&((l==="application/json"||l.endsWith("+json"))&&(a=Pi.from(a)),s.getMergedTraits().httpHeader)){this.stringBuffer=(((o=this.serdeContext)==null?void 0:o.base64Encoder)??Jo)(a.toString());return}this.stringBuffer=r;break;default:s.isIdempotencyToken()?this.stringBuffer=Iv():this.stringBuffer=String(r)}}flush(){const n=this.stringBuffer;return this.stringBuffer="",n}}class m9{constructor(e,n,r=new p9(n)){j(this,"codecSerializer");j(this,"stringSerializer");j(this,"buffer");this.codecSerializer=e,this.stringSerializer=r}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,n){const r=kt.of(e),s=r.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(r,n),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(r,n)}flush(){if(this.buffer!==void 0){const e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}function g9(t,e,n){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=n}class y9{constructor(e){j(this,"authSchemes",new Map);for(const[n,r]of Object.entries(e))r!==void 0&&this.authSchemes.set(n,r)}getIdentityProvider(e){return this.authSchemes.get(e)}}const w9=t=>function(n){return y2(n)&&n.expiration.getTime()-Date.now()<t},v9=3e5,_9=w9(v9),y2=t=>t.expiration!==void 0,x9=(t,e,n)=>{if(t===void 0)return;const r=typeof t!="function"?async()=>Promise.resolve(t):t;let s,i,o,l=!1;const a=async u=>{i||(i=r(u));try{s=await i,o=!0,l=!1}finally{i=void 0}return s};return e===void 0?async u=>((!o||u!=null&&u.forceRefresh)&&(s=await a(u)),s):async u=>((!o||u!=null&&u.forceRefresh)&&(s=await a(u)),l?s:n(s)?(e(s)&&await a(u),s):(l=!0,s))},E9=(t,e,n)=>{let r,s,i,o=!1;const l=async()=>{s||(s=t());try{r=await s,i=!0,o=!1}finally{s=void 0}return r};return async a=>((!i||a!=null&&a.forceRefresh)&&(r=await l()),r)},S9=t=>(t.sigv4aSigningRegionSet=Ga(t.sigv4aSigningRegionSet),t),b9="X-Amz-Algorithm",T9="X-Amz-Credential",w2="X-Amz-Date",A9="X-Amz-SignedHeaders",C9="X-Amz-Expires",v2="X-Amz-Signature",_2="X-Amz-Security-Token",x2="authorization",E2=w2.toLowerCase(),I9="date",k9=[x2,E2,I9],R9=v2.toLowerCase(),r0="x-amz-content-sha256",P9=_2.toLowerCase(),N9={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},D9=/^proxy-/,M9=/^sec-/,qm="AWS4-HMAC-SHA256",O9="AWS4-HMAC-SHA256-PAYLOAD",j9="UNSIGNED-PAYLOAD",U9=50,S2="aws4_request",L9=60*60*24*7,Rd={},Hm=[],Wm=(t,e,n)=>`${t}/${e}/${n}/${S2}`,F9=async(t,e,n,r,s)=>{const i=await hb(t,e.secretAccessKey,e.accessKeyId),o=`${n}:${r}:${s}:${Jn(i)}:${e.sessionToken}`;if(o in Rd)return Rd[o];for(Hm.push(o);Hm.length>U9;)delete Rd[Hm.shift()];let l=`AWS4${e.secretAccessKey}`;for(const a of[n,r,s,S2])l=await hb(t,l,a);return Rd[o]=l},hb=(t,e,n)=>{const r=new t(e);return r.update(pl(n)),r.digest()},fb=({headers:t},e,n)=>{const r={};for(const s of Object.keys(t).sort()){if(t[s]==null)continue;const i=s.toLowerCase();(i in N9||e!=null&&e.has(i)||D9.test(i)||M9.test(i))&&(!n||n&&!n.has(i))||(r[i]=t[s].trim().replace(/\s+/g," "))}return r},b2=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",Gm=async({headers:t,body:e},n)=>{for(const r of Object.keys(t))if(r.toLowerCase()===r0)return t[r];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||b2(e)){const r=new n;return r.update(pl(e)),Jn(await r.digest())}return j9};class B9{format(e){const n=[];for(const i of Object.keys(e)){const o=to(i);n.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const r=new Uint8Array(n.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const l=to(e.value),a=new DataView(new ArrayBuffer(3+l.byteLength));a.setUint8(0,7),a.setUint16(1,l.byteLength,!1);const u=new Uint8Array(a.buffer);return u.set(l,3),u;case"timestamp":const d=new Uint8Array(9);return d[0]=8,d.set($9.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!V9.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const h=new Uint8Array(17);return h[0]=9,h.set(c2(e.value.replace(/\-/g,"")),1),h}}}var pb;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(pb||(pb={}));const V9=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let $9=class T2{constructor(e){j(this,"bytes");if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(e));r>-1&&s>0;r--,s/=256)n[r]=s;return e<0&&mb(n),new T2(n)}valueOf(){const e=this.bytes.slice(0),n=e[0]&128;return n&&mb(e),parseInt(Jn(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}};function mb(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const z9=(t,e)=>{t=t.toLowerCase();for(const n of Object.keys(e))if(t===n.toLowerCase())return!0;return!1},q9=(t,e={})=>{var s,i;const{headers:n,query:r={}}=zt.clone(t);for(const o of Object.keys(n)){const l=o.toLowerCase();(l.slice(0,6)==="x-amz-"&&!((s=e.unhoistableHeaders)!=null&&s.has(l))||(i=e.hoistableHeaders)!=null&&i.has(l))&&(r[o]=n[o],delete n[o])}return{...t,headers:n,query:r}},gb=t=>{t=zt.clone(t);for(const e of Object.keys(t.headers))k9.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},H9=({query:t={}})=>{const e=[],n={};for(const r of Object.keys(t)){if(r.toLowerCase()===R9)continue;const s=Oo(r);e.push(s);const i=t[r];typeof i=="string"?n[s]=`${s}=${Oo(i)}`:Array.isArray(i)&&(n[s]=i.slice(0).reduce((o,l)=>o.concat([`${s}=${Oo(l)}`]),[]).sort().join("&"))}return e.sort().map(r=>n[r]).filter(r=>r).join("&")},W9=t=>G9(t).toISOString().replace(/\.\d{3}Z$/,"Z"),G9=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class K9{constructor({applyChecksum:e,credentials:n,region:r,service:s,sha256:i,uriEscapePath:o=!0}){j(this,"service");j(this,"regionProvider");j(this,"credentialProvider");j(this,"sha256");j(this,"uriEscapePath");j(this,"applyChecksum");this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Kr(r),this.credentialProvider=Kr(n)}createCanonicalRequest(e,n,r){const s=Object.keys(n).sort();return`${e.method}
${this.getCanonicalPath(e)}
${H9(e)}
${s.map(i=>`${i}:${n[i]}`).join(`
`)}

${s.join(";")}
${r}`}async createStringToSign(e,n,r,s){const i=new this.sha256;i.update(pl(r));const o=await i.digest();return`${s}
${e}
${n}
${Jn(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const n=[];for(const i of e.split("/"))(i==null?void 0:i.length)!==0&&i!=="."&&(i===".."?n.pop():n.push(i));const r=`${e!=null&&e.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&(e!=null&&e.endsWith("/"))?"/":""}`;return Oo(r).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const n=W9(e).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class s0 extends K9{constructor({applyChecksum:n,credentials:r,region:s,service:i,sha256:o,uriEscapePath:l=!0}){super({applyChecksum:n,credentials:r,region:s,service:i,sha256:o,uriEscapePath:l});j(this,"headerFormatter",new B9)}async presign(n,r={}){const{signingDate:s=new Date,expiresIn:i=3600,unsignableHeaders:o,unhoistableHeaders:l,signableHeaders:a,hoistableHeaders:u,signingRegion:d,signingService:h}=r,f=await this.credentialProvider();this.validateResolvedCredentials(f);const g=d??await this.regionProvider(),{longDate:w,shortDate:E}=this.formatDate(s);if(i>L9)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const b=Wm(E,g,h??this.service),v=q9(gb(n),{unhoistableHeaders:l,hoistableHeaders:u});f.sessionToken&&(v.query[_2]=f.sessionToken),v.query[b9]=qm,v.query[T9]=`${f.accessKeyId}/${b}`,v.query[w2]=w,v.query[C9]=i.toString(10);const x=fb(v,o,a);return v.query[A9]=this.getCanonicalHeaderList(x),v.query[v2]=await this.getSignature(w,b,this.getSigningKey(f,g,E,h),this.createCanonicalRequest(v,x,await Gm(n,this.sha256))),v}async sign(n,r){return typeof n=="string"?this.signString(n,r):n.headers&&n.payload?this.signEvent(n,r):n.message?this.signMessage(n,r):this.signRequest(n,r)}async signEvent({headers:n,payload:r},{signingDate:s=new Date,priorSignature:i,signingRegion:o,signingService:l}){const a=o??await this.regionProvider(),{shortDate:u,longDate:d}=this.formatDate(s),h=Wm(u,a,l??this.service),f=await Gm({headers:{},body:r},this.sha256),g=new this.sha256;g.update(n);const w=Jn(await g.digest()),E=[O9,d,h,i,w,f].join(`
`);return this.signString(E,{signingDate:s,signingRegion:a,signingService:l})}async signMessage(n,{signingDate:r=new Date,signingRegion:s,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(n.message.headers),payload:n.message.body},{signingDate:r,signingRegion:s,signingService:i,priorSignature:n.priorSignature}).then(l=>({message:n.message,signature:l}))}async signString(n,{signingDate:r=new Date,signingRegion:s,signingService:i}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const l=s??await this.regionProvider(),{shortDate:a}=this.formatDate(r),u=new this.sha256(await this.getSigningKey(o,l,a,i));return u.update(pl(n)),Jn(await u.digest())}async signRequest(n,{signingDate:r=new Date,signableHeaders:s,unsignableHeaders:i,signingRegion:o,signingService:l}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const u=o??await this.regionProvider(),d=gb(n),{longDate:h,shortDate:f}=this.formatDate(r),g=Wm(f,u,l??this.service);d.headers[E2]=h,a.sessionToken&&(d.headers[P9]=a.sessionToken);const w=await Gm(d,this.sha256);!z9(r0,d.headers)&&this.applyChecksum&&(d.headers[r0]=w);const E=fb(d,i,s),b=await this.getSignature(h,g,this.getSigningKey(a,u,f,l),this.createCanonicalRequest(d,E,w));return d.headers[x2]=`${qm} Credential=${a.accessKeyId}/${g}, SignedHeaders=${this.getCanonicalHeaderList(E)}, Signature=${b}`,d}async getSignature(n,r,s,i){const o=await this.createStringToSign(n,r,i,qm),l=new this.sha256(await s);return l.update(pl(o)),Jn(await l.digest())}getSigningKey(n,r,s,i){return F9(this.sha256,n,s,r,i||this.service)}}const J9=t=>{let e=t.credentials,n=!!t.credentials,r;Object.defineProperty(t,"credentials",{set(u){u&&u!==e&&u!==r&&(n=!0),e=u;const d=Q9(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),h=X9(t,d);n&&!h.attributed?(r=async f=>h(f).then(g=>h8(g,"CREDENTIALS_CODE","e")),r.memoized=h.memoized,r.configBound=h.configBound,r.attributed=!0):r=h},get(){return r},enumerable:!0,configurable:!0}),t.credentials=e;const{signingEscapePath:s=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t;let l;return t.signer?l=Ga(t.signer):t.regionInfoProvider?l=()=>Ga(t.region)().then(async u=>[await t.regionInfoProvider(u,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},u]).then(([u,d])=>{const{signingRegion:h,signingService:f}=u;t.signingRegion=t.signingRegion||h||d,t.signingName=t.signingName||f||t.serviceId;const g={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},w=t.signerConstructor||s0;return new w(g)}):l=async u=>{u=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Ga(t.region)(),properties:{}},u);const d=u.signingRegion,h=u.signingName;t.signingRegion=t.signingRegion||d,t.signingName=t.signingName||h||t.serviceId;const f={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},g=t.signerConstructor||s0;return new g(f)},Object.assign(t,{systemClockOffset:i,signingEscapePath:s,signer:l})};function Q9(t,{credentials:e,credentialDefaultProvider:n}){let r;return e?e!=null&&e.memoized?r=e:r=x9(e,_9,y2):n?r=Ga(n(Object.assign({},t,{parentClientConfig:t}))):r=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},r.memoized=!0,r}function X9(t,e){if(e.configBound)return e;const n=async r=>e({...r,callerClientConfig:t});return n.memoized=e.memoized,n.configBound=!0,n}const yb=typeof TextEncoder=="function"?new TextEncoder:null,Y9=t=>{if(typeof t=="string"){if(yb)return yb.encode(t).byteLength;let e=t.length;for(let n=e-1;n>=0;n--){const r=t.charCodeAt(n);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&n--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},wo=(t,e)=>{const n=[];if(t&&n.push(t),e)for(const r of e)n.push(r);return n},fi=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,of=()=>{let t=[],e=[],n=!1;const r=new Set,s=h=>h.sort((f,g)=>wb[g.step]-wb[f.step]||vb[g.priority||"normal"]-vb[f.priority||"normal"]),i=h=>{let f=!1;const g=w=>{const E=wo(w.name,w.aliases);if(E.includes(h)){f=!0;for(const b of E)r.delete(b);return!1}return!0};return t=t.filter(g),e=e.filter(g),f},o=h=>{let f=!1;const g=w=>{if(w.middleware===h){f=!0;for(const E of wo(w.name,w.aliases))r.delete(E);return!1}return!0};return t=t.filter(g),e=e.filter(g),f},l=h=>{var f;return t.forEach(g=>{h.add(g.middleware,{...g})}),e.forEach(g=>{h.addRelativeTo(g.middleware,{...g})}),(f=h.identifyOnResolve)==null||f.call(h,d.identifyOnResolve()),h},a=h=>{const f=[];return h.before.forEach(g=>{g.before.length===0&&g.after.length===0?f.push(g):f.push(...a(g))}),f.push(h),h.after.reverse().forEach(g=>{g.before.length===0&&g.after.length===0?f.push(g):f.push(...a(g))}),f},u=(h=!1)=>{const f=[],g=[],w={};return t.forEach(b=>{const v={...b,before:[],after:[]};for(const x of wo(v.name,v.aliases))w[x]=v;f.push(v)}),e.forEach(b=>{const v={...b,before:[],after:[]};for(const x of wo(v.name,v.aliases))w[x]=v;g.push(v)}),g.forEach(b=>{if(b.toMiddleware){const v=w[b.toMiddleware];if(v===void 0){if(h)return;throw new Error(`${b.toMiddleware} is not found when adding ${fi(b.name,b.aliases)} middleware ${b.relation} ${b.toMiddleware}`)}b.relation==="after"&&v.after.push(b),b.relation==="before"&&v.before.push(b)}}),s(f).map(a).reduce((b,v)=>(b.push(...v),b),[])},d={add:(h,f={})=>{const{name:g,override:w,aliases:E}=f,b={step:"initialize",priority:"normal",middleware:h,...f},v=wo(g,E);if(v.length>0){if(v.some(x=>r.has(x))){if(!w)throw new Error(`Duplicate middleware name '${fi(g,E)}'`);for(const x of v){const T=t.findIndex(L=>{var V;return L.name===x||((V=L.aliases)==null?void 0:V.some(I=>I===x))});if(T===-1)continue;const D=t[T];if(D.step!==b.step||b.priority!==D.priority)throw new Error(`"${fi(D.name,D.aliases)}" middleware with ${D.priority} priority in ${D.step} step cannot be overridden by "${fi(g,E)}" middleware with ${b.priority} priority in ${b.step} step.`);t.splice(T,1)}}for(const x of v)r.add(x)}t.push(b)},addRelativeTo:(h,f)=>{const{name:g,override:w,aliases:E}=f,b={middleware:h,...f},v=wo(g,E);if(v.length>0){if(v.some(x=>r.has(x))){if(!w)throw new Error(`Duplicate middleware name '${fi(g,E)}'`);for(const x of v){const T=e.findIndex(L=>{var V;return L.name===x||((V=L.aliases)==null?void 0:V.some(I=>I===x))});if(T===-1)continue;const D=e[T];if(D.toMiddleware!==b.toMiddleware||D.relation!==b.relation)throw new Error(`"${fi(D.name,D.aliases)}" middleware ${D.relation} "${D.toMiddleware}" middleware cannot be overridden by "${fi(g,E)}" middleware ${b.relation} "${b.toMiddleware}" middleware.`);e.splice(T,1)}}for(const x of v)r.add(x)}e.push(b)},clone:()=>l(of()),use:h=>{h.applyToStack(d)},remove:h=>typeof h=="string"?i(h):o(h),removeByTag:h=>{let f=!1;const g=w=>{const{tags:E,name:b,aliases:v}=w;if(E&&E.includes(h)){const x=wo(b,v);for(const T of x)r.delete(T);return f=!0,!1}return!0};return t=t.filter(g),e=e.filter(g),f},concat:h=>{var g;const f=l(of());return f.use(h),f.identifyOnResolve(n||f.identifyOnResolve()||(((g=h.identifyOnResolve)==null?void 0:g.call(h))??!1)),f},applyToStack:l,identify:()=>u(!0).map(h=>{const f=h.step??h.relation+" "+h.toMiddleware;return fi(h.name,h.aliases)+" - "+f}),identifyOnResolve(h){return typeof h=="boolean"&&(n=h),n},resolve:(h,f)=>{for(const g of u().map(w=>w.middleware).reverse())h=g(h,f);return n&&console.log(d.identify()),h}};return d},wb={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},vb={high:3,normal:2,low:1};let Z9=class{constructor(e){j(this,"config");j(this,"middlewareStack",of());j(this,"initConfig");j(this,"handlers");this.config=e}send(e,n,r){const s=typeof n!="function"?n:void 0,i=typeof n=="function"?n:r,o=s===void 0&&this.config.cacheMiddleware===!0;let l;if(o){this.handlers||(this.handlers=new WeakMap);const a=this.handlers;a.has(e.constructor)?l=a.get(e.constructor):(l=e.resolveMiddleware(this.middlewareStack,this.config,s),a.set(e.constructor,l))}else delete this.handlers,l=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)l(e).then(a=>i(null,a.output),a=>i(a)).catch(()=>{});else return l(e).then(a=>a.output)}destroy(){var e,n,r;(r=(n=(e=this.config)==null?void 0:e.requestHandler)==null?void 0:n.destroy)==null||r.call(n),delete this.handlers}};const Km="***SensitiveInformation***";function i0(t,e){if(e==null)return e;const n=kt.of(t);if(n.getMergedTraits().sensitive)return Km;if(n.isListSchema()){if(!!n.getValueSchema().getMergedTraits().sensitive)return Km}else if(n.isMapSchema()){if(!!n.getKeySchema().getMergedTraits().sensitive||!!n.getValueSchema().getMergedTraits().sensitive)return Km}else if(n.isStructSchema()&&typeof e=="object"){const r=e,s={};for(const[i,o]of n.structIterator())r[i]!=null&&(s[i]=i0(o,r[i]));return s}return e}class Dv{constructor(){j(this,"middlewareStack",of());j(this,"schema")}static classBuilder(){return new e$}resolveMiddlewareWithContext(e,n,r,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:l,outputFilterSensitiveLog:a,smithyContext:u,additionalContext:d,CommandCtor:h}){for(const b of s.bind(this)(h,e,n,r))this.middlewareStack.use(b);const f=e.concat(this.middlewareStack),{logger:g}=n,w={logger:g,clientName:i,commandName:o,inputFilterSensitiveLog:l,outputFilterSensitiveLog:a,[Yy]:{commandInstance:this,...u},...d},{requestHandler:E}=n;return f.resolve(b=>E.handle(b.request,r||{}),w)}}class e${constructor(){j(this,"_init",()=>{});j(this,"_ep",{});j(this,"_middlewareFn",()=>[]);j(this,"_commandName","");j(this,"_clientName","");j(this,"_additionalContext",{});j(this,"_smithyContext",{});j(this,"_inputFilterSensitiveLog");j(this,"_outputFilterSensitiveLog");j(this,"_serializer",null);j(this,"_deserializer",null);j(this,"_operationSchema")}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,n,r={}){return this._smithyContext={service:e,operation:n,...r},this}c(e={}){return this._additionalContext=e,this}n(e,n){return this._clientName=e,this._commandName=n,this}f(e=r=>r,n=r=>r){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=n,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let n;return n=class extends Dv{constructor(...[s]){super();j(this,"input");j(this,"serialize",e._serializer);j(this,"deserialize",e._deserializer);this.input=s??{},e._init(this),this.schema=e._operationSchema}static getEndpointParameterInstructions(){return e._ep}resolveMiddleware(s,i,o){const l=e._operationSchema,a=(l==null?void 0:l[4])??(l==null?void 0:l.input),u=(l==null?void 0:l[5])??(l==null?void 0:l.output);return this.resolveMiddlewareWithContext(s,i,o,{CommandCtor:n,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(l?i0.bind(null,a):d=>d),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(l?i0.bind(null,u):d=>d),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}class Na extends Error{constructor(n){super(n.message);j(this,"$fault");j(this,"$response");j(this,"$retryable");j(this,"$metadata");Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=n.name,this.$fault=n.$fault,this.$metadata=n.$metadata}static isInstance(n){if(!n)return!1;const r=n;return Na.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](n){if(!n)return!1;const r=n;return this===Na?Na.isInstance(n):Na.isInstance(n)?r.name&&this.name?this.prototype.isPrototypeOf(n)||r.name===this.name:this.prototype.isPrototypeOf(n):!1}}const _b=(t,e={})=>{Object.entries(e).filter(([,r])=>r!==void 0).forEach(([r,s])=>{(t[r]==null||t[r]==="")&&(t[r]=s)});const n=t.message||t.Message||"UnknownError";return t.message=n,delete t.Message,t},t$=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},n$=t=>{const e=[];for(const n in sf){const r=sf[n];t[r]!==void 0&&e.push({algorithmId:()=>r,checksumConstructor:()=>t[r]})}return{addChecksumAlgorithm(n){e.push(n)},checksumAlgorithms(){return e}}},r$=t=>{const e={};return t.checksumAlgorithms().forEach(n=>{e[n.algorithmId()]=n.checksumConstructor()}),e},s$=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),i$=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},o$=t=>Object.assign(n$(t),s$(t)),a$=t=>Object.assign(r$(t),i$(t)),A2=t=>{const e="#text";for(const n in t)t.hasOwnProperty(n)&&t[n][e]!==void 0?t[n]=t[n][e]:typeof t[n]=="object"&&t[n]!==null&&(t[n]=A2(t[n]));return t};class Mv{trace(){}debug(){}info(){}warn(){}error(){}}class l${constructor(e=!1){j(this,"queryCompat");this.queryCompat=e}resolveRestContentType(e,n){const r=n.getMemberSchemas(),s=Object.values(r).find(i=>!!i.getMergedTraits().httpPayload);if(s){const i=s.getMergedTraits().mediaType;return i||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!n.isUnitSchema()&&Object.values(r).find(o=>{const{httpQuery:l,httpQueryParams:a,httpHeader:u,httpLabel:d,httpPrefixHeaders:h}=o.getMergedTraits();return!l&&!a&&!u&&!d&&h===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,n,r,s,i,o){let l=n,a=e;e.includes("#")&&([l,a]=e.split("#"));const u={$metadata:i,$fault:r.statusCode<500?"client":"server"},d=qt.for(l);try{return{errorSchema:(o==null?void 0:o(d,a))??d.getSchema(e),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";const f=qt.for("smithy.ts.sdk.synthetic."+l),g=f.getBaseException();if(g){const w=f.getErrorCtor(g)??Error;throw this.decorateServiceException(Object.assign(new w({name:a}),u),s)}throw this.decorateServiceException(Object.assign(new Error(a),u),s)}}decorateServiceException(e,n={}){if(this.queryCompat){const r=e.Message??n.Message,s=_b(e,n);r&&(s.message=r),s.Error={...s.Error,Type:s.Error.Type,Code:s.Error.Code,Message:s.Error.message??s.Error.Message??r};const i=s.$metadata.requestId;return i&&(s.RequestId=i),s}return _b(e,n)}setQueryCompatError(e,n){var s;const r=(s=n.headers)==null?void 0:s["x-amzn-query-error"];if(e!==void 0&&r!=null){const[i,o]=r.split(";"),l=Object.entries(e),a={Code:i,Type:o};Object.assign(e,a);for(const[u,d]of l)a[u==="message"?"Message":u]=d;delete a.__type,e.Error=a}}queryCompatOutput(e,n){e.Error&&(n.Error=e.Error),e.Type&&(n.Type=e.Type),e.Code&&(n.Code=e.Code)}findQueryCompatibleError(e,n){try{return e.getSchema(n)}catch{return e.find(s=>{var i;return((i=kt.of(s).getMergedTraits().awsQueryError)==null?void 0:i[0])===n})}}}class Ov{constructor(){j(this,"serdeContext")}setSerdeContext(e){this.serdeContext=e}}function*u$(t,e){if(t.isUnitSchema())return;const n=t.getSchema();for(let r=0;r<n[4].length;++r){const s=n[4][r],i=n[5][r],o=new kt([i,0],s);!(s in e)&&!o.isIdempotencyToken()||(yield[s,o])}}function c$(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function d$(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}class C2{constructor(e){j(this,"value");this.value=e}toString(){return d$(""+this.value)}}class ur{constructor(e,n=[]){j(this,"name");j(this,"children");j(this,"attributes",{});this.name=e,this.children=n}static of(e,n,r){const s=new ur(e);return n!==void 0&&s.addChildNode(new C2(n)),r!==void 0&&s.withName(r),s}withName(e){return this.name=e,this}addAttribute(e,n){return this.attributes[e]=n,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,n){return n!=null&&(this.attributes[e]=n),this}cc(e,n,r=n){if(e[n]!=null){const s=ur.of(n,e[n]).withName(r);this.c(s)}}l(e,n,r,s){e[n]!=null&&s().map(o=>{o.withName(r),this.c(o)})}lc(e,n,r,s){if(e[n]!=null){const i=s(),o=new ur(r);i.map(l=>{o.c(l)}),this.c(o)}}toString(){const e=!!this.children.length;let n=`<${this.name}`;const r=this.attributes;for(const s of Object.keys(r)){const i=r[s];i!=null&&(n+=` ${s}="${c$(""+i)}"`)}return n+=e?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}}let Jm;function h$(t){Jm||(Jm=new DOMParser);const e=Jm.parseFromString(t,"application/xml");if(e.getElementsByTagName("parsererror").length>0)throw new Error("DOMParser XML parsing error.");const n=r=>{var s;if(r.nodeType===Node.TEXT_NODE&&(s=r.textContent)!=null&&s.trim())return r.textContent;if(r.nodeType===Node.ELEMENT_NODE){const i=r;if(i.attributes.length===0&&i.childNodes.length===0)return"";const o={},l=Array.from(i.attributes);for(const u of l)o[`${u.name}`]=u.value;const a=Array.from(i.childNodes);for(const u of a){const d=n(u);if(d!=null){const h=u.nodeName;if(a.length===1&&l.length===0&&h==="#text")return d;o[h]?Array.isArray(o[h])?o[h].push(d):o[h]=[o[h],d]:o[h]=d}else if(a.length===1&&l.length===0)return i.textContent}return o}return null};return{[e.documentElement.nodeName]:n(e.documentElement)}}class f$ extends Ov{constructor(n){super();j(this,"settings");j(this,"stringDeserializer");this.settings=n,this.stringDeserializer=new g2(n)}setSerdeContext(n){this.serdeContext=n,this.stringDeserializer.setSerdeContext(n)}read(n,r,s){var d;const i=kt.of(n),o=i.getMemberSchemas();if(i.isStructSchema()&&i.isMemberSchema()&&!!Object.values(o).find(h=>!!h.getMemberTraits().eventPayload)){const h={},f=Object.keys(o)[0];return o[f].isBlobSchema()?h[f]=r:h[f]=this.read(o[f],r),h}const a=(((d=this.serdeContext)==null?void 0:d.utf8Encoder)??Rl)(r),u=this.parseXml(a);return this.readSchema(n,s?u[s]:u)}readSchema(n,r){const s=kt.of(n);if(s.isUnitSchema())return;const i=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(r))return this.readSchema(s,[r]);if(r==null)return r;if(typeof r=="object"){const o=!!i.sparse,l=!!i.xmlFlattened;if(s.isListSchema()){const u=s.getValueSchema(),d=[],h=u.getMergedTraits().xmlName??"member",f=l?r:(r[0]??r)[h],g=Array.isArray(f)?f:[f];for(const w of g)(w!=null||o)&&d.push(this.readSchema(u,w));return d}const a={};if(s.isMapSchema()){const u=s.getKeySchema(),d=s.getValueSchema();let h;l?h=Array.isArray(r)?r:[r]:h=Array.isArray(r.entry)?r.entry:[r.entry];const f=u.getMergedTraits().xmlName??"key",g=d.getMergedTraits().xmlName??"value";for(const w of h){const E=w[f],b=w[g];(b!=null||o)&&(a[E]=this.readSchema(d,b))}return a}if(s.isStructSchema()){for(const[u,d]of s.structIterator()){const h=d.getMergedTraits(),f=h.httpPayload?h.xmlName??d.getName():d.getMemberTraits().xmlName??u;r[f]!=null&&(a[u]=this.readSchema(d,r[f]))}return a}if(s.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,r)}parseXml(n){if(n.length){let r;try{r=h$(n)}catch(l){throw l&&typeof l=="object"&&Object.defineProperty(l,"$responseBodyText",{value:n}),l}const s="#text",i=Object.keys(r)[0],o=r[i];return o[s]&&(o[i]=o[s],delete o[s]),A2(o)}return{}}}const p$=(t,e)=>{var n;if(((n=e==null?void 0:e.Error)==null?void 0:n.Code)!==void 0)return e.Error.Code;if((e==null?void 0:e.Code)!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"};class m$ extends Ov{constructor(n){super();j(this,"settings");j(this,"stringBuffer");j(this,"byteBuffer");j(this,"buffer");this.settings=n}write(n,r){var i;const s=kt.of(n);if(s.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(s.isBlobSchema())this.byteBuffer="byteLength"in r?r:(((i=this.serdeContext)==null?void 0:i.base64Decoder)??fl)(r);else{this.buffer=this.writeStruct(s,r,void 0);const o=s.getMergedTraits();o.httpPayload&&!o.xmlName&&this.buffer.withName(s.getName())}}flush(){var r;if(this.byteBuffer!==void 0){const s=this.byteBuffer;return delete this.byteBuffer,s}if(this.stringBuffer!==void 0){const s=this.stringBuffer;return delete this.stringBuffer,s}const n=this.buffer;return this.settings.xmlNamespace&&((r=n==null?void 0:n.attributes)!=null&&r.xmlns||n.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,n.toString()}writeStruct(n,r,s){const i=n.getMergedTraits(),o=n.isMemberSchema()&&!i.httpPayload?n.getMemberTraits().xmlName??n.getMemberName():i.xmlName??n.getName();if(!o||!n.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${n.getName(!0)}.`);const l=ur.of(o),[a,u]=this.getXmlnsAttribute(n,s);for(const[d,h]of u$(n,r)){const f=r[d];if(f!=null||h.isIdempotencyToken()){if(h.getMergedTraits().xmlAttribute){l.addAttribute(h.getMergedTraits().xmlName??d,this.writeSimple(h,f));continue}if(h.isListSchema())this.writeList(h,f,l,u);else if(h.isMapSchema())this.writeMap(h,f,l,u);else if(h.isStructSchema())l.addChildNode(this.writeStruct(h,f,u));else{const g=ur.of(h.getMergedTraits().xmlName??h.getMemberName());this.writeSimpleInto(h,f,g,u),l.addChildNode(g)}}}return u&&l.addAttribute(a,u),l}writeList(n,r,s,i){if(!n.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${n.getName(!0)}`);const o=n.getMergedTraits(),l=n.getValueSchema(),a=l.getMergedTraits(),u=!!a.sparse,d=!!o.xmlFlattened,[h,f]=this.getXmlnsAttribute(n,i),g=(w,E)=>{if(l.isListSchema())this.writeList(l,Array.isArray(E)?E:[E],w,f);else if(l.isMapSchema())this.writeMap(l,E,w,f);else if(l.isStructSchema()){const b=this.writeStruct(l,E,f);w.addChildNode(b.withName(d?o.xmlName??n.getMemberName():a.xmlName??"member"))}else{const b=ur.of(d?o.xmlName??n.getMemberName():a.xmlName??"member");this.writeSimpleInto(l,E,b,f),w.addChildNode(b)}};if(d)for(const w of r)(u||w!=null)&&g(s,w);else{const w=ur.of(o.xmlName??n.getMemberName());f&&w.addAttribute(h,f);for(const E of r)(u||E!=null)&&g(w,E);s.addChildNode(w)}}writeMap(n,r,s,i,o=!1){if(!n.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${n.getName(!0)}`);const l=n.getMergedTraits(),a=n.getKeySchema(),d=a.getMergedTraits().xmlName??"key",h=n.getValueSchema(),f=h.getMergedTraits(),g=f.xmlName??"value",w=!!f.sparse,E=!!l.xmlFlattened,[b,v]=this.getXmlnsAttribute(n,i),x=(T,D,L)=>{const V=ur.of(d,D),[I,C]=this.getXmlnsAttribute(a,v);C&&V.addAttribute(I,C),T.addChildNode(V);let _=ur.of(g);h.isListSchema()?this.writeList(h,L,_,v):h.isMapSchema()?this.writeMap(h,L,_,v,!0):h.isStructSchema()?_=this.writeStruct(h,L,v):this.writeSimpleInto(h,L,_,v),T.addChildNode(_)};if(E){for(const[T,D]of Object.entries(r))if(w||D!=null){const L=ur.of(l.xmlName??n.getMemberName());x(L,T,D),s.addChildNode(L)}}else{let T;o||(T=ur.of(l.xmlName??n.getMemberName()),v&&T.addAttribute(b,v),s.addChildNode(T));for(const[D,L]of Object.entries(r))if(w||L!=null){const V=ur.of("entry");x(V,D,L),(o?s:T).addChildNode(V)}}}writeSimple(n,r){var o;if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");const s=kt.of(n);let i=null;if(r&&typeof r=="object")if(s.isBlobSchema())i=(((o=this.serdeContext)==null?void 0:o.base64Encoder)??Jo)(r);else if(s.isTimestampSchema()&&r instanceof Date)switch(Nv(s,this.settings)){case 5:i=r.toISOString().replace(".000Z","Z");break;case 6:i=n0(r);break;case 7:i=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),i=n0(r);break}else{if(s.isBigDecimalSchema()&&r)return r instanceof _p?r.string:String(r);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(i=String(r)),s.isStringSchema()&&(r===void 0&&s.isIdempotencyToken()?i=Iv():i=String(r)),i===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${r}`);return i}writeSimpleInto(n,r,s,i){const o=this.writeSimple(n,r),l=kt.of(n),a=new C2(o),[u,d]=this.getXmlnsAttribute(l,i);d&&s.addAttribute(u,d),s.addChildNode(a)}getXmlnsAttribute(n,r){const s=n.getMergedTraits(),[i,o]=s.xmlNamespace??[];return o&&o!==r?[i?`xmlns:${i}`:"xmlns",o]:[void 0,void 0]}}class g$ extends Ov{constructor(n){super();j(this,"settings");this.settings=n}createSerializer(){const n=new m$(this.settings);return n.setSerdeContext(this.serdeContext),n}createDeserializer(){const n=new f$(this.settings);return n.setSerdeContext(this.serdeContext),n}}class y$ extends h9{constructor(n){super(n);j(this,"codec");j(this,"serializer");j(this,"deserializer");j(this,"mixin",new l$);const r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:n.xmlNamespace,serviceNamespace:n.defaultNamespace};this.codec=new g$(r),this.serializer=new m9(this.codec.createSerializer(),r),this.deserializer=new f9(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(n,r,s){const i=await super.serializeRequest(n,r,s),o=kt.of(n.input);if(!i.headers["content-type"]){const l=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);l&&(i.headers["content-type"]=l)}return typeof i.body=="string"&&i.headers["content-type"]===this.getDefaultContentType()&&!i.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(o)&&(i.body='<?xml version="1.0" encoding="UTF-8"?>'+i.body),i}async deserializeResponse(n,r,s){return super.deserializeResponse(n,r,s)}async handleError(n,r,s,i,o){var E,b,v;const l=p$(s,i)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(l,this.options.defaultNamespace,s,i,o),d=kt.of(a),h=((E=i.Error)==null?void 0:E.message)??((b=i.Error)==null?void 0:b.Message)??i.message??i.Message??"Unknown",f=qt.for(a[1]).getErrorCtor(a)??Error,g=new f(h);await this.deserializeHttpMessage(a,r,s,i);const w={};for(const[x,T]of d.structIterator()){const D=T.getMergedTraits().xmlName??x,L=((v=i.Error)==null?void 0:v[D])??i[D];w[x]=this.codec.createDeserializer().readSchema(T,L)}throw this.mixin.decorateServiceException(Object.assign(g,u,{$fault:d.getMergedTraits().error,message:h},w),i)}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(n){for(const[,r]of n.structIterator())if(r.getMergedTraits().httpPayload)return!(r.isStructSchema()||r.isMapSchema()||r.isListSchema());return!1}}const o0=[it.CRC32,it.CRC32C,it.CRC64NVME,it.SHA1,it.SHA256],w$=[it.SHA256,it.SHA1,it.CRC32,it.CRC32C,it.CRC64NVME],v$=(t,{requestChecksumRequired:e,requestAlgorithmMember:n,requestChecksumCalculation:r})=>{if(!n)return r===hl.WHEN_SUPPORTED||e?Zy:void 0;if(!t[n])return;const s=t[n];if(!o0.includes(s))throw new Error(`The checksum algorithm "${s}" is not supported by the client. Select one of ${o0}.`);return s},jv=t=>t===it.MD5?"content-md5":`x-amz-checksum-${t.toLowerCase()}`,_$=(t,e)=>{const n=t.toLowerCase();for(const r of Object.keys(e))if(n===r.toLowerCase())return!0;return!1},x$=(t,e)=>{const n=t.toLowerCase();for(const r of Object.keys(e))if(r.toLowerCase().startsWith(n))return!0;return!1},I2=t=>t!==void 0&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!b2(t);function Uv(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function a(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,a)}u((r=r.apply(t,e||[])).next())})}function Lv(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return a([u,d])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function k2(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}const E$=t=>new TextEncoder().encode(t);var S$=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:E$;function no(t){return t instanceof Uint8Array?t:typeof t=="string"?S$(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function Sc(t){return typeof t=="string"?t.length===0:t.byteLength===0}function R2(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}function P2(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),n=0;n<t.length;)e[n]=t[n],n+=1;return e}return Uint32Array.from(t)}var b$=function(){function t(){this.crc32c=new xb}return t.prototype.update=function(e){Sc(e)||this.crc32c.update(no(e))},t.prototype.digest=function(){return Uv(this,void 0,void 0,function(){return Lv(this,function(e){return[2,R2(this.crc32c.digest())]})})},t.prototype.reset=function(){this.crc32c=new xb},t}(),xb=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var n,r;try{for(var s=k2(e),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^A$[(this.checksum^o)&255]}}catch(l){n={error:l}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}(),T$=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],A$=P2(T$),C$=function(){function t(){this.crc32=new af}return t.prototype.update=function(e){Sc(e)||this.crc32.update(no(e))},t.prototype.digest=function(){return Uv(this,void 0,void 0,function(){return Lv(this,function(e){return[2,R2(this.crc32.digest())]})})},t.prototype.reset=function(){this.crc32=new af},t}(),af=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var n,r;try{for(var s=k2(e),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^k$[(this.checksum^o)&255]}}catch(l){n={error:l}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}(),I$=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],k$=P2(I$);const R$=()=>C$,N2=(t,e)=>{switch(t){case it.MD5:return e.md5;case it.CRC32:return R$();case it.CRC32C:return b$;case it.CRC64NVME:throw new Error(`Please check whether you have installed the "@aws-sdk/crc64-nvme-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/crc64-nvme-crt");] or an ESM equivalent such as [import "@aws-sdk/crc64-nvme-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);case it.SHA1:return e.sha1;case it.SHA256:return e.sha256;default:throw new Error(`Unsupported checksum algorithm: ${t}`)}},D2=(t,e)=>{const n=new t;return n.update(pl(e||"")),n.digest()},P$={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},N$=(t,e)=>(n,r)=>async s=>{if(!zt.isInstance(s.request)||x$("x-amz-checksum-",s.request.headers))return n(s);const{request:i,input:o}=s,{body:l,headers:a}=i,{base64Encoder:u,streamHasher:d}=t,{requestChecksumRequired:h,requestAlgorithmMember:f}=e,g=await t.requestChecksumCalculation(),w=f==null?void 0:f.name,E=f==null?void 0:f.httpHeader;w&&!o[w]&&(g===hl.WHEN_SUPPORTED||h)&&(o[w]=Zy,E&&(a[E]=Zy));const b=v$(o,{requestChecksumRequired:h,requestAlgorithmMember:f==null?void 0:f.name,requestChecksumCalculation:g});let v=l,x=a;if(b){switch(b){case it.CRC32:jt(r,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case it.CRC32C:jt(r,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case it.CRC64NVME:jt(r,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case it.SHA1:jt(r,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case it.SHA256:jt(r,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}const D=jv(b),L=N2(b,t);if(I2(l)){const{getAwsChunkedEncodingStream:V,bodyLengthChecker:I}=t;v=V(typeof t.requestStreamBufferSize=="number"&&t.requestStreamBufferSize>=8*1024?N8(l,t.requestStreamBufferSize,r.logger):l,{base64Encoder:u,bodyLengthChecker:I,checksumLocationName:D,checksumAlgorithmFn:L,streamHasher:d}),x={...a,"content-encoding":a["content-encoding"]?`${a["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":a["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":D},delete x["content-length"]}else if(!_$(D,a)){const V=await D2(L,l);x={...a,[D]:u(V)}}}return await n({...s,request:{...i,headers:x,body:v}})},D$={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},M$=(t,e)=>(n,r)=>async s=>{const i=s.input,{requestValidationModeMember:o}=e,l=await t.requestChecksumCalculation(),a=await t.responseChecksumValidation();switch(l){case hl.WHEN_REQUIRED:jt(r,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case hl.WHEN_SUPPORTED:jt(r,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(a){case Lm.WHEN_REQUIRED:jt(r,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case Lm.WHEN_SUPPORTED:jt(r,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return o&&!i[o]&&a===Lm.WHEN_SUPPORTED&&(i[o]="ENABLED"),n(s)},M2=(t=[])=>{const e=[];for(const n of w$)!t.includes(n)||!o0.includes(n)||e.push(n);return e},O$=t=>{const e=t.lastIndexOf("-");if(e!==-1){const n=t.slice(e+1);if(!n.startsWith("0")){const r=parseInt(n,10);if(!isNaN(r)&&r>=1&&r<=1e4)return!0}}return!1},j$=async(t,{checksumAlgorithmFn:e,base64Encoder:n})=>n(await D2(e,t)),U$=async(t,{config:e,responseAlgorithms:n,logger:r})=>{const s=M2(n),{body:i,headers:o}=t;for(const l of s){const a=jv(l),u=o[a];if(u){let d;try{d=N2(l,e)}catch(g){if(l===it.CRC64NVME){r==null||r.warn(`Skipping ${it.CRC64NVME} checksum validation: ${g.message}`);continue}throw g}const{base64Encoder:h}=e;if(I2(i)){t.body=k8({expectedChecksum:u,checksumSourceLocation:a,checksum:new d,source:i,base64Encoder:h});return}const f=await j$(i,{checksumAlgorithmFn:d,base64Encoder:h});if(f===u)break;throw new Error(`Checksum mismatch: expected "${f}" but received "${u}" in response header "${a}".`)}}},L$={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},F$=(t,e)=>(n,r)=>async s=>{if(!zt.isInstance(s.request))return n(s);const i=s.input,o=await n(s),l=o.response,{requestValidationModeMember:a,responseAlgorithms:u}=e;if(a&&i[a]==="ENABLED"){const{clientName:d,commandName:h}=r;if(d==="S3Client"&&h==="GetObjectCommand"&&M2(u).every(g=>{const w=jv(g),E=l.headers[w];return!E||O$(E)}))return o;await U$(l,{config:t,responseAlgorithms:u,logger:r.logger})}return o},B$=(t,e)=>({applyToStack:n=>{n.add(N$(t,e),P$),n.addRelativeTo(M$(t,e),D$),n.addRelativeTo(F$(t,e),L$)}}),V$=t=>{const{requestChecksumCalculation:e,responseChecksumValidation:n,requestStreamBufferSize:r}=t;return Object.assign(t,{requestChecksumCalculation:Kr(e??c8),responseChecksumValidation:Kr(n??d8),requestStreamBufferSize:Number(r??0)})};const $$=t=>e=>async n=>{if(!zt.isInstance(n.request))return e(n);const{request:r}=n,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]=r.hostname+(r.port?":"+r.port:"");else if(!r.headers.host){let i=r.hostname;r.port!=null&&(i+=`:${r.port}`),r.headers.host=i}return e(n)},z$={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},q$=t=>({applyToStack:e=>{e.add($$(t),z$)}}),H$=()=>(t,e)=>async n=>{var r,s;try{const i=await t(n),{clientName:o,commandName:l,logger:a,dynamoDbDocumentClientOptions:u={}}=e,{overrideInputFilterSensitiveLog:d,overrideOutputFilterSensitiveLog:h}=u,f=d??e.inputFilterSensitiveLog,g=h??e.outputFilterSensitiveLog,{$metadata:w,...E}=i.output;return(r=a==null?void 0:a.info)==null||r.call(a,{clientName:o,commandName:l,input:f(n.input),output:g(E),metadata:w}),i}catch(i){const{clientName:o,commandName:l,logger:a,dynamoDbDocumentClientOptions:u={}}=e,{overrideInputFilterSensitiveLog:d}=u,h=d??e.inputFilterSensitiveLog;throw(s=a==null?void 0:a.error)==null||s.call(a,{clientName:o,commandName:l,input:h(n.input),error:i,metadata:i.$metadata}),i}},W$={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},G$=t=>({applyToStack:e=>{e.add(H$(),W$)}}),K$={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},J$=()=>t=>async e=>t(e),Q$=t=>({applyToStack:e=>{e.add(J$(),K$)}}),X$="content-length",Y$="x-amz-decoded-content-length";function Z$(){return(t,e)=>async n=>{var s;const{request:r}=n;if(zt.isInstance(r)&&!(X$ in r.headers)&&!(Y$ in r.headers)){const i="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof((s=e==null?void 0:e.logger)==null?void 0:s.warn)=="function"&&!(e.logger instanceof Mv)?e.logger.warn(i):console.warn(i)}return t({...n})}}const ez={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},tz=t=>({applyToStack:e=>{e.add(Z$(),ez)}}),nz=t=>(e,n)=>async r=>{const s=await t.region(),i=t.region;let o=()=>{};n.__s3RegionRedirect&&(Object.defineProperty(t,"region",{writable:!1,value:async()=>n.__s3RegionRedirect}),o=()=>Object.defineProperty(t,"region",{writable:!0,value:i}));try{const l=await e(r);if(n.__s3RegionRedirect){o();const a=await t.region();if(s!==a)throw new Error("Region was not restored following S3 region redirect.")}return l}catch(l){throw o(),l}},rz={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function sz(t){return(e,n)=>async r=>{var s,i,o,l;try{return await e(r)}catch(a){if(t.followRegionRedirects){const u=(s=a==null?void 0:a.$metadata)==null?void 0:s.httpStatusCode,d=n.commandName==="HeadBucketCommand",h=(o=(i=a==null?void 0:a.$response)==null?void 0:i.headers)==null?void 0:o["x-amz-bucket-region"];if(h&&(u===301||u===400&&((a==null?void 0:a.name)==="IllegalLocationConstraintException"||d))){try{const f=h;(l=n.logger)==null||l.debug(`Redirecting from ${await t.region()} to ${f}`),n.__s3RegionRedirect=f}catch(f){throw new Error("Region redirect failed: "+f)}return e(r)}}throw a}}}const iz={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},oz=t=>({applyToStack:e=>{e.add(sz(t),iz),e.addRelativeTo(nz(t),rz)}}),vf=class vf{constructor(e={}){j(this,"data");j(this,"lastPurgeTime",Date.now());this.data=e}get(e){const n=this.data[e];if(n)return n}set(e,n){return this.data[e]=n,n}delete(e){delete this.data[e]}async purgeExpired(){const e=Date.now();if(!(this.lastPurgeTime+vf.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>e))for(const n in this.data){const r=this.data[n];if(!r.isRefreshing){const s=await r.identity;s.expiration&&s.expiration.getTime()<e&&delete this.data[n]}}}};j(vf,"EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS",3e4);let a0=vf;class Qm{constructor(e,n=!1,r=Date.now()){j(this,"_identity");j(this,"isRefreshing");j(this,"accessed");this._identity=e,this.isRefreshing=n,this.accessed=r}get identity(){return this.accessed=Date.now(),this._identity}}const _f=class _f{constructor(e,n=new a0){j(this,"createSessionFn");j(this,"cache");this.createSessionFn=e,this.cache=n}async getS3ExpressIdentity(e,n){const r=n.Bucket,{cache:s}=this,i=s.get(r);return i?i.identity.then(o=>{var u,d;return(((u=o.expiration)==null?void 0:u.getTime())??0)<Date.now()?s.set(r,new Qm(this.getIdentity(r))).identity:((((d=o.expiration)==null?void 0:d.getTime())??0)<Date.now()+_f.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(r).then(h=>{s.set(r,new Qm(Promise.resolve(h)))})),o)}):s.set(r,new Qm(this.getIdentity(r))).identity}async getIdentity(e){var s,i;await this.cache.purgeExpired().catch(o=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+o)});const n=await this.createSessionFn(e);if(!((s=n.Credentials)!=null&&s.AccessKeyId)||!((i=n.Credentials)!=null&&i.SecretAccessKey))throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:n.Credentials.AccessKeyId,secretAccessKey:n.Credentials.SecretAccessKey,sessionToken:n.Credentials.SessionToken,expiration:n.Credentials.Expiration?new Date(n.Credentials.Expiration):void 0}}};j(_f,"REFRESH_WINDOW_MS",6e4);let l0=_f;const az="Directory",lz="S3Express",uz="sigv4-s3express",u0="X-Amz-S3session-Token",c0=u0.toLowerCase();class cz extends s0{async signWithCredentials(e,n,r){const s=Eb(n);e.headers[c0]=n.sessionToken;const i=this;return Sb(i,s),i.signRequest(e,r??{})}async presignWithCredentials(e,n,r){const s=Eb(n);return delete e.headers[c0],e.headers[u0]=n.sessionToken,e.query=e.query??{},e.query[u0]=n.sessionToken,Sb(this,s),this.presign(e,r)}}function Eb(t){return{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,expiration:t.expiration}}function Sb(t,e){const n=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),r=t.credentialProvider,s=()=>(clearTimeout(n),t.credentialProvider=r,Promise.resolve(e));t.credentialProvider=s}const dz=t=>(e,n)=>async r=>{var s,i,o,l,a;if(n.endpointV2){const u=n.endpointV2,d=((o=(i=(s=u.properties)==null?void 0:s.authSchemes)==null?void 0:i[0])==null?void 0:o.name)===uz;if((((l=u.properties)==null?void 0:l.backend)===lz||((a=u.properties)==null?void 0:a.bucketType)===az)&&(jt(n,"S3_EXPRESS_BUCKET","J"),n.isS3ExpressBucket=!0),d){const f=r.input.Bucket;if(f){const g=await t.s3ExpressIdentityProvider.getS3ExpressIdentity(await t.credentials(),{Bucket:f});n.s3ExpressIdentity=g,zt.isInstance(r.request)&&g.sessionToken&&(r.request.headers[c0]=g.sessionToken)}}}return e(r)},hz={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},fz=t=>({applyToStack:e=>{e.add(dz(t),hz)}}),pz=async(t,e,n,r)=>{const s=await r.signWithCredentials(n,t,{});if(s.headers["X-Amz-Security-Token"]||s.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return s},mz=t=>e=>{throw e},gz=(t,e)=>{},yz=t=>(e,n)=>async r=>{if(!zt.isInstance(r.request))return e(r);const i=ho(n).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:l,signer:a}=i;let u;n.s3ExpressIdentity?u=await pz(n.s3ExpressIdentity,o,r.request,await t.signer()):u=await a.sign(r.request,l,o);const d=await e({...r,request:u}).catch((a.errorHandler||mz)(o));return(a.successHandler||gz)(d.response,o),d},wz=t=>({applyToStack:e=>{e.addRelativeTo(yz(t),o2)}}),vz=(t,{session:e})=>{const[n,r]=e,{forcePathStyle:s,useAccelerateEndpoint:i,disableMultiregionAccessPoints:o,followRegionRedirects:l,s3ExpressIdentityProvider:a,bucketEndpoint:u,expectContinueHeader:d}=t;return Object.assign(t,{forcePathStyle:s??!1,useAccelerateEndpoint:i??!1,disableMultiregionAccessPoints:o??!1,followRegionRedirects:l??!1,s3ExpressIdentityProvider:a??new l0(async h=>n().send(new r({Bucket:h}))),bucketEndpoint:u??!1,expectContinueHeader:d??2097152})},_z={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},xz=3e3,Ez=t=>(e,n)=>async r=>{const s=await e(r),{response:i}=s;if(!Ko.isInstance(i))return s;const{statusCode:o,body:l}=i;if(o<200||o>=300||!(typeof(l==null?void 0:l.stream)=="function"||typeof(l==null?void 0:l.pipe)=="function"||typeof(l==null?void 0:l.tee)=="function"))return s;let u=l,d=l;l&&typeof l=="object"&&!(l instanceof Uint8Array)&&([u,d]=await z8(l)),i.body=d;const h=await Sz(u,{streamCollector:async g=>j8(g,xz)});typeof(u==null?void 0:u.destroy)=="function"&&u.destroy();const f=t.utf8Encoder(h.subarray(h.length-16));if(h.length===0&&_z[n.commandName]){const g=new Error("S3 aborted request");throw g.name="InternalError",g}return f&&f.endsWith("</Error>")&&(i.statusCode=400),s},Sz=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),bz={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},O2=t=>({applyToStack:e=>{e.addRelativeTo(Ez(t),bz)}}),Tz=t=>typeof t=="string"&&t.indexOf("arn:")===0&&t.split(":").length>=6;function Az(t){return(e,n)=>async r=>{var s,i,o,l;if(t.bucketEndpoint){const a=n.endpointV2;if(a){const u=r.input.Bucket;if(typeof u=="string")try{const d=new URL(u);n.endpointV2={...a,url:d}}catch(d){const h=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${u} could not be parsed as URL.`;throw((i=(s=n.logger)==null?void 0:s.constructor)==null?void 0:i.name)==="NoOpLogger"?console.warn(h):(l=(o=n.logger)==null?void 0:o.warn)==null||l.call(o,h),d}}}return e(r)}}const Cz={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function Iz({bucketEndpoint:t}){return e=>async n=>{const{input:{Bucket:r}}=n;if(!t&&typeof r=="string"&&!Tz(r)&&r.indexOf("/")>=0){const s=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw s.name="InvalidBucketName",s}return e({...n})}}const kz={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Rz=t=>({applyToStack:e=>{e.add(Iz(t),kz),e.addRelativeTo(Az(t),Cz)}}),Pz=void 0;function Nz(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function Dz(t){const e=Ga(t.userAgentAppId??Pz),{customUserAgent:n}=t;return Object.assign(t,{customUserAgent:typeof n=="string"?[[n]]:n,userAgentAppId:async()=>{var s,i;const r=await e();if(!Nz(r)){const o=((i=(s=t.logger)==null?void 0:s.constructor)==null?void 0:i.name)==="NoOpLogger"||!t.logger?console:t.logger;typeof r!="string"?o==null||o.warn("userAgentAppId must be a string or undefined."):r.length>50&&(o==null||o.warn("The provided userAgentAppId exceeds the maximum length of 50 characters."))}return r}})}class Mz{constructor({size:e,params:n}){j(this,"capacity");j(this,"data",new Map);j(this,"parameters",[]);this.capacity=e??50,n&&(this.parameters=n)}get(e,n){const r=this.hash(e);if(r===!1)return n();if(!this.data.has(r)){if(this.data.size>this.capacity+10){const s=this.data.keys();let i=0;for(;;){const{value:o,done:l}=s.next();if(this.data.delete(o),l||++i>10)break}}this.data.set(r,n())}return this.data.get(r)}size(){return this.data.size}hash(e){let n="";const{parameters:r}=this;if(r.length===0)return!1;for(const s of r){const i=String(e[s]??"");if(i.includes("|;"))return!1;n+=i+"|;"}return n}}const Oz=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),j2=t=>Oz.test(t)||t.startsWith("[")&&t.endsWith("]"),jz=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Ep=(t,e=!1)=>{if(!e)return jz.test(t);const n=t.split(".");for(const r of n)if(!Ep(r))return!1;return!0},lf={},bc="endpoints";function ro(t){return typeof t!="object"||t==null?t:"ref"in t?`$${ro(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(ro).join(", ")})`:JSON.stringify(t,null,2)}class wr extends Error{constructor(e){super(e),this.name="EndpointError"}}const Uz=(t,e)=>t===e,Lz=t=>{const e=t.split("."),n=[];for(const r of e){const s=r.indexOf("[");if(s!==-1){if(r.indexOf("]")!==r.length-1)throw new wr(`Path: '${t}' does not end with ']'`);const i=r.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new wr(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&n.push(r.slice(0,s)),n.push(i)}else n.push(r)}return n},U2=(t,e)=>Lz(e).reduce((n,r)=>{if(typeof n!="object")throw new wr(`Index '${r}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},t),Fz=t=>t!=null,Bz=t=>!t,Xm={[Ec.HTTP]:80,[Ec.HTTPS]:443},Vz=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:f,port:g,protocol:w="",path:E="",query:b={}}=t,v=new URL(`${w}//${f}${g?`:${g}`:""}${E}`);return v.search=Object.entries(b).map(([x,T])=>`${x}=${T}`).join("&"),v}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const n=e.href,{host:r,hostname:s,pathname:i,protocol:o,search:l}=e;if(l)return null;const a=o.slice(0,-1);if(!Object.values(Ec).includes(a))return null;const u=j2(s),d=n.includes(`${r}:${Xm[a]}`)||typeof t=="string"&&t.includes(`${r}:${Xm[a]}`),h=`${r}${d?`:${Xm[a]}`:""}`;return{scheme:a,authority:h,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},$z=(t,e)=>t===e,zz=(t,e,n,r)=>e>=n||t.length<n?null:r?t.substring(t.length-n,t.length-e):t.substring(e,n),qz=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Hz={booleanEquals:Uz,getAttr:U2,isSet:Fz,isValidHostLabel:Ep,not:Bz,parseURL:Vz,stringEquals:$z,substring:zz,uriEncode:qz},L2=(t,e)=>{const n=[],r={...e.endpointParams,...e.referenceRecord};let s=0;for(;s<t.length;){const i=t.indexOf("{",s);if(i===-1){n.push(t.slice(s));break}n.push(t.slice(s,i));const o=t.indexOf("}",i);if(o===-1){n.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(n.push(t.slice(i+1,o)),s=o+2);const l=t.substring(i+1,o);if(l.includes("#")){const[a,u]=l.split("#");n.push(U2(r[a],u))}else n.push(r[l]);s=o+1}return n.join("")},Wz=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],Sp=(t,e,n)=>{if(typeof t=="string")return L2(t,n);if(t.fn)return B2.callFunction(t,n);if(t.ref)return Wz(t,n);throw new wr(`'${e}': ${String(t)} is not a string, function or reference.`)},F2=({fn:t,argv:e},n)=>{const r=e.map(i=>["boolean","number"].includes(typeof i)?i:B2.evaluateExpression(i,"arg",n)),s=t.split(".");return s[0]in lf&&s[1]!=null?lf[s[0]][s[1]](...r):Hz[t](...r)},B2={evaluateExpression:Sp,callFunction:F2},Gz=({assign:t,...e},n)=>{var s,i;if(t&&t in n.referenceRecord)throw new wr(`'${t}' is already defined in Reference Record.`);const r=F2(e,n);return(i=(s=n.logger)==null?void 0:s.debug)==null||i.call(s,`${bc} evaluateCondition: ${ro(e)} = ${ro(r)}`),{result:r===""?!0:!!r,...t!=null&&{toAssign:{name:t,value:r}}}},Fv=(t=[],e)=>{var r,s;const n={};for(const i of t){const{result:o,toAssign:l}=Gz(i,{...e,referenceRecord:{...e.referenceRecord,...n}});if(!o)return{result:o};l&&(n[l.name]=l.value,(s=(r=e.logger)==null?void 0:r.debug)==null||s.call(r,`${bc} assign: ${l.name} := ${ro(l.value)}`))}return{result:!0,referenceRecord:n}},Kz=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:s.map(i=>{const o=Sp(i,"Header value entry",e);if(typeof o!="string")throw new wr(`Header '${r}' value '${o}' is not a string`);return o})}),{}),V2=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:z2.getEndpointProperty(s,e)}),{}),$2=(t,e)=>{if(Array.isArray(t))return t.map(n=>$2(n,e));switch(typeof t){case"string":return L2(t,e);case"object":if(t===null)throw new wr(`Unexpected endpoint property: ${t}`);return z2.getEndpointProperties(t,e);case"boolean":return t;default:throw new wr(`Unexpected endpoint property type: ${typeof t}`)}},z2={getEndpointProperty:$2,getEndpointProperties:V2},Jz=(t,e)=>{const n=Sp(t,"Endpoint URL",e);if(typeof n=="string")try{return new URL(n)}catch(r){throw console.error(`Failed to construct URL with ${n}`,r),r}throw new wr(`Endpoint URL must be a string, got ${typeof n}`)},Qz=(t,e)=>{var d,h;const{conditions:n,endpoint:r}=t,{result:s,referenceRecord:i}=Fv(n,e);if(!s)return;const o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:l,properties:a,headers:u}=r;return(h=(d=e.logger)==null?void 0:d.debug)==null||h.call(d,`${bc} Resolving endpoint from template: ${ro(r)}`),{...u!=null&&{headers:Kz(u,o)},...a!=null&&{properties:V2(a,o)},url:Jz(l,o)}},Xz=(t,e)=>{const{conditions:n,error:r}=t,{result:s,referenceRecord:i}=Fv(n,e);if(s)throw new wr(Sp(r,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},q2=(t,e)=>{for(const n of t)if(n.type==="endpoint"){const r=Qz(n,e);if(r)return r}else if(n.type==="error")Xz(n,e);else if(n.type==="tree"){const r=H2.evaluateTreeRule(n,e);if(r)return r}else throw new wr(`Unknown endpoint rule: ${n}`);throw new wr("Rules evaluation failed")},Yz=(t,e)=>{const{conditions:n,rules:r}=t,{result:s,referenceRecord:i}=Fv(n,e);if(s)return H2.evaluateRules(r,{...e,referenceRecord:{...e.referenceRecord,...i}})},H2={evaluateRules:q2,evaluateTreeRule:Yz},Zz=(t,e)=>{var u,d,h,f;const{endpointParams:n,logger:r}=e,{parameters:s,rules:i}=t;(d=(u=e.logger)==null?void 0:u.debug)==null||d.call(u,`${bc} Initial EndpointParams: ${ro(n)}`);const o=Object.entries(s).filter(([,g])=>g.default!=null).map(([g,w])=>[g,w.default]);if(o.length>0)for(const[g,w]of o)n[g]=n[g]??w;const l=Object.entries(s).filter(([,g])=>g.required).map(([g])=>g);for(const g of l)if(n[g]==null)throw new wr(`Missing required parameter: '${g}'`);const a=q2(i,{endpointParams:n,logger:r,referenceRecord:{}});return(f=(h=e.logger)==null?void 0:h.debug)==null||f.call(h,`${bc} Resolved endpoint: ${ro(a)}`),a},W2=(t,e=!1)=>{if(e){for(const n of t.split("."))if(!W2(n))return!1;return!0}return!(!Ep(t)||t.length<3||t.length>63||t!==t.toLowerCase()||j2(t))},bb=":",e7="/",t7=t=>{const e=t.split(bb);if(e.length<6)return null;const[n,r,s,i,o,...l]=e;if(n!=="arn"||r===""||s===""||l.join(bb)==="")return null;const a=l.map(u=>u.split(e7)).flat();return{partition:r,service:s,region:i,accountId:o,resourceId:a}},n7=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],r7={partitions:n7};let s7=r7;const i7=t=>{const{partitions:e}=s7;for(const r of e){const{regions:s,outputs:i}=r;for(const[o,l]of Object.entries(s))if(o===t)return{...i,...l}}for(const r of e){const{regionRegex:s,outputs:i}=r;if(new RegExp(s).test(t))return{...i}}const n=e.find(r=>r.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},G2={isVirtualHostableS3Bucket:W2,parseArn:t7,partition:i7};lf.aws=G2;function o7(t){const e={};if(t=t.replace(/^\?/,""),t)for(const n of t.split("&")){let[r,s=null]=n.split("=");r=decodeURIComponent(r),s&&(s=decodeURIComponent(s)),r in e?Array.isArray(e[r])?e[r].push(s):e[r]=[e[r],s]:e[r]=s}return e}const uf=t=>{if(typeof t=="string")return uf(new URL(t));const{hostname:e,pathname:n,port:r,protocol:s,search:i}=t;let o;return i&&(o=o7(i)),{hostname:e,port:r?parseInt(r):void 0,protocol:s,path:n,query:o}},a7=/\d{12}\.ddb/;async function l7(t,e,n){var i,o,l,a,u,d,h;const r=n.request;if(((i=r==null?void 0:r.headers)==null?void 0:i["smithy-protocol"])==="rpc-v2-cbor"&&jt(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const f=await e.retryStrategy();typeof f.acquireInitialRetryToken=="function"?(l=(o=f.constructor)==null?void 0:o.name)!=null&&l.includes("Adaptive")?jt(t,"RETRY_MODE_ADAPTIVE","F"):jt(t,"RETRY_MODE_STANDARD","E"):jt(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const f=t.endpointV2;switch(String((a=f==null?void 0:f.url)==null?void 0:a.hostname).match(a7)&&jt(t,"ACCOUNT_ID_ENDPOINT","O"),await((u=e.accountIdEndpointMode)==null?void 0:u.call(e))){case"disabled":jt(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":jt(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":jt(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=(h=(d=t.__smithy_context)==null?void 0:d.selectedHttpAuthScheme)==null?void 0:h.identity;if(s!=null&&s.$source){const f=s;f.accountId&&jt(t,"RESOLVED_ACCOUNT_ID","T");for(const[g,w]of Object.entries(f.$source??{}))jt(t,g,w)}}const Tb="user-agent",Ym="x-amz-user-agent",Ab=" ",Zm="/",u7=/[^!$%&'*+\-.^_`|~\w]/g,c7=/[^!$%&'*+\-.^_`|~\w#]/g,Cb="-",d7=1024;function h7(t){let e="";for(const n in t){const r=t[n];if(e.length+r.length+1<=d7){e.length?e+=","+r:e+=r;continue}break}return e}const f7=t=>(e,n)=>async r=>{var g,w,E,b;const{request:s}=r;if(!zt.isInstance(s))return e(r);const{headers:i}=s,o=((g=n==null?void 0:n.userAgent)==null?void 0:g.map(Pd))||[],l=(await t.defaultUserAgentProvider()).map(Pd);await l7(n,t,r);const a=n;l.push(`m/${h7(Object.assign({},(w=n.__smithy_context)==null?void 0:w.features,(E=a.__aws_sdk_context)==null?void 0:E.features))}`);const u=((b=t==null?void 0:t.customUserAgent)==null?void 0:b.map(Pd))||[],d=await t.userAgentAppId();d&&l.push(Pd(["app",`${d}`]));const h=[].concat([...l,...o,...u]).join(Ab),f=[...l.filter(v=>v.startsWith("aws-sdk-")),...u].join(Ab);return t.runtime!=="browser"?(f&&(i[Ym]=i[Ym]?`${i[Tb]} ${f}`:f),i[Tb]=h):i[Ym]=h,e({...r,request:s})},Pd=t=>{var o;const e=t[0].split(Zm).map(l=>l.replace(u7,Cb)).join(Zm),n=(o=t[1])==null?void 0:o.replace(c7,Cb),r=e.indexOf(Zm),s=e.substring(0,r);let i=e.substring(r+1);return s==="api"&&(i=i.toLowerCase()),[s,i,n].filter(l=>l&&l.length>0).reduce((l,a,u)=>{switch(u){case 0:return a;case 1:return`${l}/${a}`;default:return`${l}#${a}`}},"")},p7={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},m7=t=>({applyToStack:e=>{e.add(f7(t),p7)}}),g7=!1,y7=!1,Ib=new Set,w7=(t,e=Ep)=>{if(!Ib.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else Ib.add(t)},K2=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),v7=t=>K2(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,_7=t=>{const{region:e,useFipsEndpoint:n}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{const r=typeof e=="function"?await e():e,s=v7(r);return w7(s),s},useFipsEndpoint:async()=>{const r=typeof e=="string"?e:await e();return K2(r)?!0:typeof n!="function"?Promise.resolve(!!n):n()}})},x7=t=>Object.assign(t,{eventStreamMarshaller:t.eventStreamSerdeProvider(t)}),kb="content-length";function E7(t){return e=>async n=>{const r=n.request;if(zt.isInstance(r)){const{body:s,headers:i}=r;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(kb)===-1)try{const o=t(s);r.headers={...r.headers,[kb]:String(o)}}catch{}}return e({...n,request:r})}}const S7={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},b7=t=>({applyToStack:e=>{e.add(E7(t.bodyLengthChecker),S7)}}),T7=async t=>{const e=(t==null?void 0:t.Bucket)||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),R7(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!k7(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},A7=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,C7=/(\d+\.){3}\d+/,I7=/\.\./,k7=t=>A7.test(t)&&!C7.test(t)&&!I7.test(t),R7=t=>{const[e,n,r,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&n&&r&&s);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},P7=(t,e,n)=>{const r=async()=>{const s=n[t]??n[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return(s==null?void 0:s.credentialScope)??(s==null?void 0:s.CredentialScope)}:t==="accountId"||e==="AccountId"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return(s==null?void 0:s.accountId)??(s==null?void 0:s.AccountId)}:t==="endpoint"||e==="endpoint"?async()=>{if(n.isCustomEndpoint===!1)return;const s=await r();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:o,port:l,path:a}=s;return`${i}//${o}${l?":"+l:""}${a}`}}return s}:r},J2=async t=>{},Q2=t=>typeof t=="object"?"url"in t?uf(t.url):t:uf(t),N7=async(t,e,n,r)=>{if(!n.isCustomEndpoint){let o;n.serviceConfiguredEndpoint?o=await n.serviceConfiguredEndpoint():o=await J2(n.serviceId),o&&(n.endpoint=()=>Promise.resolve(Q2(o)),n.isCustomEndpoint=!0)}const s=await X2(t,e,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)},X2=async(t,e,n)=>{var i;const r={},s=((i=e==null?void 0:e.getEndpointParameterInstructions)==null?void 0:i.call(e))||{};for(const[o,l]of Object.entries(s))switch(l.type){case"staticContextParams":r[o]=l.value;break;case"contextParams":r[o]=t[l.name];break;case"clientContextParams":case"builtInParams":r[o]=await P7(l.name,o,n)();break;case"operationContextParams":r[o]=l.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(l))}return Object.keys(s).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()==="s3"&&await T7(r),r},D7=({config:t,instructions:e})=>(n,r)=>async s=>{var l,a,u;t.isCustomEndpoint&&g9(r,"ENDPOINT_OVERRIDE","N");const i=await N7(s.input,{getEndpointParameterInstructions(){return e}},{...t},r);r.endpointV2=i,r.authSchemes=(l=i.properties)==null?void 0:l.authSchemes;const o=(a=r.authSchemes)==null?void 0:a[0];if(o){r.signing_region=o.signingRegion,r.signing_service=o.signingName;const d=ho(r),h=(u=d==null?void 0:d.selectedHttpAuthScheme)==null?void 0:u.httpAuthOption;h&&(h.signingProperties=Object.assign(h.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return n({...s})},M7={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:_8.name},Y2=(t,e)=>({applyToStack:n=>{n.addRelativeTo(D7({config:t,instructions:e}),M7)}}),O7=t=>{const e=t.tls??!0,{endpoint:n,useDualstackEndpoint:r,useFipsEndpoint:s}=t,i=n!=null?async()=>Q2(await Kr(n)()):void 0,l=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!n,useDualstackEndpoint:Kr(r??!1),useFipsEndpoint:Kr(s??!1)});let a;return l.serviceConfiguredEndpoint=async()=>(t.serviceId&&!a&&(a=J2(t.serviceId)),a),l};var ml;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(ml||(ml={}));const cf=3,j7=ml.STANDARD,U7=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],L7=["TimeoutError","RequestTimeout","RequestTimeoutException"],F7=[500,502,503,504],B7=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],V7=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],$7=t=>(t==null?void 0:t.$retryable)!==void 0,z7=t=>{var e;return(e=t.$metadata)==null?void 0:e.clockSkewCorrected},q7=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},Z2=t=>{var e,n;return((e=t.$metadata)==null?void 0:e.httpStatusCode)===429||U7.includes(t.name)||((n=t.$retryable)==null?void 0:n.throttling)==!0},Bv=(t,e=0)=>{var n;return $7(t)||z7(t)||L7.includes(t.name)||B7.includes((t==null?void 0:t.code)||"")||V7.includes((t==null?void 0:t.code)||"")||F7.includes(((n=t.$metadata)==null?void 0:n.httpStatusCode)||0)||q7(t)||t.cause!==void 0&&e<=10&&Bv(t.cause,e+1)},H7=t=>{var e;if(((e=t.$metadata)==null?void 0:e.httpStatusCode)!==void 0){const n=t.$metadata.httpStatusCode;return 500<=n&&n<=599&&!Bv(t)}return!1},xf=class xf{constructor(e){j(this,"beta");j(this,"minCapacity");j(this,"minFillRate");j(this,"scaleConstant");j(this,"smooth");j(this,"currentCapacity",0);j(this,"enabled",!1);j(this,"lastMaxRate",0);j(this,"measuredTxRate",0);j(this,"requestCount",0);j(this,"fillRate");j(this,"lastThrottleTime");j(this,"lastTimestamp",0);j(this,"lastTxRateBucket");j(this,"maxCapacity");j(this,"timeWindow",0);this.beta=(e==null?void 0:e.beta)??.7,this.minCapacity=(e==null?void 0:e.minCapacity)??1,this.minFillRate=(e==null?void 0:e.minFillRate)??.5,this.scaleConstant=(e==null?void 0:e.scaleConstant)??.4,this.smooth=(e==null?void 0:e.smooth)??.8;const n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const n=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(r=>xf.setTimeoutFn(r,n))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const n=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=e}updateClientSendingRate(e){let n;if(this.updateMeasuredRate(),Z2(e)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),n=Math.floor(e*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){const r=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(e){return parseFloat(e.toFixed(8))}};j(xf,"setTimeoutFn",setTimeout);let d0=xf;const h0=100,eP=20*1e3,W7=500,Rb=500,G7=5,K7=10,J7=1,Q7="amz-sdk-invocation-id",X7="amz-sdk-request",Y7=()=>{let t=h0;return{computeNextBackoffDelay:r=>Math.floor(Math.min(eP,Math.random()*2**r*t)),setDelayBase:r=>{t=r}}},Pb=({retryDelay:t,retryCount:e,retryCost:n})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(eP,t),getRetryCost:()=>n});class tP{constructor(e){j(this,"maxAttempts");j(this,"mode",ml.STANDARD);j(this,"capacity",Rb);j(this,"retryBackoffStrategy",Y7());j(this,"maxAttemptsProvider");this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return Pb({retryDelay:h0,retryCount:0})}async refreshRetryTokenForRetry(e,n){const r=await this.getMaxAttempts();if(this.shouldRetry(e,n,r)){const s=n.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?W7:h0);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,i):i,l=this.getCapacityCost(s);return this.capacity-=l,Pb({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:l})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(Rb,this.capacity+(e.getRetryCost()??J7))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${cf}`),cf}}shouldRetry(e,n,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(e){return e==="TRANSIENT"?K7:G7}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class Z7{constructor(e,n){j(this,"maxAttemptsProvider");j(this,"rateLimiter");j(this,"standardRetryStrategy");j(this,"mode",ml.ADAPTIVE);this.maxAttemptsProvider=e;const{rateLimiter:r}=n??{};this.rateLimiter=r??new d0,this.standardRetryStrategy=new tP(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(e,n)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const eq=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),tq=t=>{const{retryStrategy:e,retryMode:n,maxAttempts:r}=t,s=Kr(r??cf);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await Kr(n)()===ml.ADAPTIVE?new Z7(s):new tP(s))})},nq=t=>(t==null?void 0:t.body)instanceof ReadableStream,rq=t=>(e,n)=>async r=>{var o;let s=await t.retryStrategy();const i=await t.maxAttempts();if(sq(s)){s=s;let l=await s.acquireInitialRetryToken(n.partition_id),a=new Error,u=0,d=0;const{request:h}=r,f=zt.isInstance(h);for(f&&(h.headers[Q7]=Iv());;)try{f&&(h.headers[X7]=`attempt=${u+1}; max=${i}`);const{response:g,output:w}=await e(r);return s.recordSuccess(l),w.$metadata.attempts=u+1,w.$metadata.totalRetryDelay=d,{response:g,output:w}}catch(g){const w=iq(g);if(a=eq(g),f&&nq(h))throw(o=n.logger instanceof Mv?console:n.logger)==null||o.warn("An error was encountered in a non-retryable streaming request."),a;try{l=await s.refreshRetryTokenForRetry(l,w)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=u+1,a.$metadata.totalRetryDelay=d,a}u=l.getRetryCount();const E=l.getRetryDelay();d+=E,await new Promise(b=>setTimeout(b,E))}}else return s=s,s!=null&&s.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,r)},sq=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",iq=t=>{const e={error:t,errorType:oq(t)},n=uq(t.$response);return n&&(e.retryAfterHint=n),e},oq=t=>Z2(t)?"THROTTLING":Bv(t)?"TRANSIENT":H7(t)?"SERVER_ERROR":"CLIENT_ERROR",aq={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},lq=t=>({applyToStack:e=>{e.add(rq(t),aq)}}),uq=t=>{if(!Ko.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const n=t.headers[e],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(r*1e3)};class nP{constructor(e){j(this,"sigv4aSigner");j(this,"sigv4Signer");j(this,"signerOptions");this.sigv4Signer=new cz(e),this.signerOptions=e}static sigv4aDependency(){return"none"}async sign(e,n={}){return n.signingRegion==="*"?this.getSigv4aSigner().sign(e,n):this.sigv4Signer.sign(e,n)}async signWithCredentials(e,n,r={}){if(r.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.signWithCredentials(e,n,r)}async presign(e,n={}){if(n.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.presign(e,n)}async presignWithCredentials(e,n,r={}){if(r.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(e,n,r)}getSigv4aSigner(){if(!this.sigv4aSigner)throw this.signerOptions.runtime==="node"?new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt"):new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");return this.sigv4aSigner}}const Vv="required",R="type",z="rules",M="conditions",F="fn",B="argv",fe="ref",Ce="assign",ne="url",re="properties",Us="backend",un="authSchemes",Bt="disableDoubleEncoding",Vt="signingName",mn="signingRegion",se="headers",$v="signingRegionSet",cq=6,dq=!1,ss=!0,hr="isSet",Dt="booleanEquals",le="error",df="aws.partition",ze="stringEquals",yt="getAttr",wt="name",st="substring",Nb="bucketSuffix",zv="parseURL",W="endpoint",q="tree",hf="aws.isVirtualHostableS3Bucket",ff="{url#scheme}://{Bucket}.{url#authority}{url#path}",xs="not",Db="accessPointSuffix",ih="{url#scheme}://{url#authority}{url#path}",rP="hardwareType",sP="regionPrefix",Mb="bucketAliasSuffix",f0="outpostId",ia="isValidHostLabel",qv="sigv4a",Tc="s3-outposts",gl="s3",iP="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",oP="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",Ob="https://{Bucket}.s3.{partitionResult#dnsSuffix}",aP="aws.parseArn",lP="bucketArn",uP="arnType",pf="",Hv="s3-object-lambda",cP="accesspoint",Wv="accessPointName",jb="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",Ub="mrapPartition",Lb="outpostType",Fb="arnPrefix",dP="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",Bb="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",Vb="https://s3.{partitionResult#dnsSuffix}",ha={[Vv]:!1,[R]:"string"},fa={[Vv]:!0,default:!1,[R]:"boolean"},su={[Vv]:!1,[R]:"boolean"},Tr={[F]:Dt,[B]:[{[fe]:"Accelerate"},!0]},ot={[F]:Dt,[B]:[{[fe]:"UseFIPS"},!0]},tt={[F]:Dt,[B]:[{[fe]:"UseDualStack"},!0]},Rt={[F]:hr,[B]:[{[fe]:"Endpoint"}]},hP={[F]:df,[B]:[{[fe]:"Region"}],[Ce]:"partitionResult"},$b={[F]:ze,[B]:[{[F]:yt,[B]:[{[fe]:"partitionResult"},wt]},"aws-cn"]},Lu={[F]:hr,[B]:[{[fe]:"Bucket"}]},Ve={[fe]:"Bucket"},zb={[M]:[Tr],[le]:"S3Express does not support S3 Accelerate.",[R]:le},qb={[M]:[Rt,{[F]:zv,[B]:[{[fe]:"Endpoint"}],[Ce]:"url"}],[z]:[{[M]:[{[F]:hr,[B]:[{[fe]:"DisableS3ExpressSessionAuth"}]},{[F]:Dt,[B]:[{[fe]:"DisableS3ExpressSessionAuth"},!0]}],[z]:[{[M]:[{[F]:Dt,[B]:[{[F]:yt,[B]:[{[fe]:"url"},"isIp"]},!0]}],[z]:[{[M]:[{[F]:"uriEncode",[B]:[Ve],[Ce]:"uri_encoded_bucket"}],[z]:[{[W]:{[ne]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[re]:{[Us]:"S3Express",[un]:[{[Bt]:!0,[wt]:"sigv4",[Vt]:"s3express",[mn]:"{Region}"}]},[se]:{}},[R]:W}],[R]:q}],[R]:q},{[M]:[{[F]:hf,[B]:[Ve,!1]}],[z]:[{[W]:{[ne]:ff,[re]:{[Us]:"S3Express",[un]:[{[Bt]:!0,[wt]:"sigv4",[Vt]:"s3express",[mn]:"{Region}"}]},[se]:{}},[R]:W}],[R]:q},{[le]:"S3Express bucket name is not a valid virtual hostable name.",[R]:le}],[R]:q},{[M]:[{[F]:Dt,[B]:[{[F]:yt,[B]:[{[fe]:"url"},"isIp"]},!0]}],[z]:[{[M]:[{[F]:"uriEncode",[B]:[Ve],[Ce]:"uri_encoded_bucket"}],[z]:[{[W]:{[ne]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[re]:{[Us]:"S3Express",[un]:[{[Bt]:!0,[wt]:"sigv4-s3express",[Vt]:"s3express",[mn]:"{Region}"}]},[se]:{}},[R]:W}],[R]:q}],[R]:q},{[M]:[{[F]:hf,[B]:[Ve,!1]}],[z]:[{[W]:{[ne]:ff,[re]:{[Us]:"S3Express",[un]:[{[Bt]:!0,[wt]:"sigv4-s3express",[Vt]:"s3express",[mn]:"{Region}"}]},[se]:{}},[R]:W}],[R]:q},{[le]:"S3Express bucket name is not a valid virtual hostable name.",[R]:le}],[R]:q},Mn={[F]:zv,[B]:[{[fe]:"Endpoint"}],[Ce]:"url"},eg={[F]:Dt,[B]:[{[F]:yt,[B]:[{[fe]:"url"},"isIp"]},!0]},fP={[fe]:"url"},pP={[F]:"uriEncode",[B]:[Ve],[Ce]:"uri_encoded_bucket"},cr={[Us]:"S3Express",[un]:[{[Bt]:!0,[wt]:"sigv4",[Vt]:"s3express",[mn]:"{Region}"}]},_e={},mP={[F]:hf,[B]:[Ve,!1]},Hb={[le]:"S3Express bucket name is not a valid virtual hostable name.",[R]:le},Wb={[F]:hr,[B]:[{[fe]:"UseS3ExpressControlEndpoint"}]},Gb={[F]:Dt,[B]:[{[fe]:"UseS3ExpressControlEndpoint"},!0]},be={[F]:xs,[B]:[Rt]},Me={[F]:Dt,[B]:[{[fe]:"UseDualStack"},!1]},Re={[F]:Dt,[B]:[{[fe]:"UseFIPS"},!1]},Nd={[le]:"Unrecognized S3Express bucket name format.",[R]:le},Kb={[F]:xs,[B]:[Lu]},Jb={[fe]:rP},Qb={[M]:[be],[le]:"Expected a endpoint to be specified but no endpoint was found",[R]:le},Dd={[un]:[{[Bt]:!0,[wt]:qv,[Vt]:Tc,[$v]:["*"]},{[Bt]:!0,[wt]:"sigv4",[Vt]:Tc,[mn]:"{Region}"}]},tg={[F]:Dt,[B]:[{[fe]:"ForcePathStyle"},!1]},hq={[fe]:"ForcePathStyle"},Mt={[F]:Dt,[B]:[{[fe]:"Accelerate"},!1]},Gt={[F]:ze,[B]:[{[fe]:"Region"},"aws-global"]},nn={[un]:[{[Bt]:!0,[wt]:"sigv4",[Vt]:gl,[mn]:"us-east-1"}]},Ue={[F]:xs,[B]:[Gt]},rn={[F]:Dt,[B]:[{[fe]:"UseGlobalEndpoint"},!0]},Xb={[ne]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[re]:{[un]:[{[Bt]:!0,[wt]:"sigv4",[Vt]:gl,[mn]:"{Region}"}]},[se]:{}},$t={[un]:[{[Bt]:!0,[wt]:"sigv4",[Vt]:gl,[mn]:"{Region}"}]},sn={[F]:Dt,[B]:[{[fe]:"UseGlobalEndpoint"},!1]},Yb={[ne]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[re]:$t,[se]:{}},Zb={[ne]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[re]:$t,[se]:{}},e1={[ne]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[re]:$t,[se]:{}},ng={[F]:Dt,[B]:[{[F]:yt,[B]:[fP,"isIp"]},!1]},rg={[ne]:iP,[re]:$t,[se]:{}},p0={[ne]:ff,[re]:$t,[se]:{}},t1={[W]:p0,[R]:W},sg={[ne]:oP,[re]:$t,[se]:{}},n1={[ne]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[re]:$t,[se]:{}},Md={[le]:"Invalid region: region was not a valid DNS name.",[R]:le},Xn={[fe]:lP},gP={[fe]:uP},ig={[F]:yt,[B]:[Xn,"service"]},Gv={[fe]:Wv},r1={[M]:[tt],[le]:"S3 Object Lambda does not support Dual-stack",[R]:le},s1={[M]:[Tr],[le]:"S3 Object Lambda does not support S3 Accelerate",[R]:le},i1={[M]:[{[F]:hr,[B]:[{[fe]:"DisableAccessPoints"}]},{[F]:Dt,[B]:[{[fe]:"DisableAccessPoints"},!0]}],[le]:"Access points are not supported for this operation",[R]:le},og={[M]:[{[F]:hr,[B]:[{[fe]:"UseArnRegion"}]},{[F]:Dt,[B]:[{[fe]:"UseArnRegion"},!1]},{[F]:xs,[B]:[{[F]:ze,[B]:[{[F]:yt,[B]:[Xn,"region"]},"{Region}"]}]}],[le]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[R]:le},yP={[F]:yt,[B]:[{[fe]:"bucketPartition"},wt]},wP={[F]:yt,[B]:[Xn,"accountId"]},ag={[un]:[{[Bt]:!0,[wt]:"sigv4",[Vt]:Hv,[mn]:"{bucketArn#region}"}]},o1={[le]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[R]:le},lg={[le]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[R]:le},ug={[le]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[R]:le},cg={[le]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[R]:le},a1={[le]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[R]:le},l1={[le]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[R]:le},iu={[un]:[{[Bt]:!0,[wt]:"sigv4",[Vt]:gl,[mn]:"{bucketArn#region}"}]},u1={[un]:[{[Bt]:!0,[wt]:qv,[Vt]:Tc,[$v]:["*"]},{[Bt]:!0,[wt]:"sigv4",[Vt]:Tc,[mn]:"{bucketArn#region}"}]},c1={[F]:aP,[B]:[Ve]},d1={[ne]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[re]:$t,[se]:{}},h1={[ne]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[re]:$t,[se]:{}},f1={[ne]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[re]:$t,[se]:{}},dg={[ne]:dP,[re]:$t,[se]:{}},p1={[ne]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[re]:$t,[se]:{}},m1={[fe]:"UseObjectLambdaEndpoint"},hg={[un]:[{[Bt]:!0,[wt]:"sigv4",[Vt]:Hv,[mn]:"{Region}"}]},g1={[ne]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[re]:$t,[se]:{}},y1={[ne]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[re]:$t,[se]:{}},w1={[ne]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[re]:$t,[se]:{}},fg={[ne]:ih,[re]:$t,[se]:{}},v1={[ne]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[re]:$t,[se]:{}},pg=[{[fe]:"Region"}],fq=[{[fe]:"Endpoint"}],pq=[Ve],mg=[Tr],pa=[Rt,Mn],_1=[{[F]:hr,[B]:[{[fe]:"DisableS3ExpressSessionAuth"}]},{[F]:Dt,[B]:[{[fe]:"DisableS3ExpressSessionAuth"},!0]}],mq=[pP],x1=[mP],br=[hP],gg=[ot,tt],Fu=[ot,Me],Bu=[Re,tt],Vu=[Re,Me],E1=[{[F]:st,[B]:[Ve,6,14,!0],[Ce]:"s3expressAvailabilityZoneId"},{[F]:st,[B]:[Ve,14,16,!0],[Ce]:"s3expressAvailabilityZoneDelim"},{[F]:ze,[B]:[{[fe]:"s3expressAvailabilityZoneDelim"},"--"]}],is=[{[M]:[ot,tt],[W]:{[ne]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[re]:cr,[se]:{}},[R]:W},{[M]:Fu,[W]:{[ne]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[re]:cr,[se]:{}},[R]:W},{[M]:Bu,[W]:{[ne]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[re]:cr,[se]:{}},[R]:W},{[M]:Vu,[W]:{[ne]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[re]:cr,[se]:{}},[R]:W}],S1=[{[F]:st,[B]:[Ve,6,15,!0],[Ce]:"s3expressAvailabilityZoneId"},{[F]:st,[B]:[Ve,15,17,!0],[Ce]:"s3expressAvailabilityZoneDelim"},{[F]:ze,[B]:[{[fe]:"s3expressAvailabilityZoneDelim"},"--"]}],b1=[{[F]:st,[B]:[Ve,6,19,!0],[Ce]:"s3expressAvailabilityZoneId"},{[F]:st,[B]:[Ve,19,21,!0],[Ce]:"s3expressAvailabilityZoneDelim"},{[F]:ze,[B]:[{[fe]:"s3expressAvailabilityZoneDelim"},"--"]}],T1=[{[F]:st,[B]:[Ve,6,20,!0],[Ce]:"s3expressAvailabilityZoneId"},{[F]:st,[B]:[Ve,20,22,!0],[Ce]:"s3expressAvailabilityZoneDelim"},{[F]:ze,[B]:[{[fe]:"s3expressAvailabilityZoneDelim"},"--"]}],A1=[{[F]:st,[B]:[Ve,6,26,!0],[Ce]:"s3expressAvailabilityZoneId"},{[F]:st,[B]:[Ve,26,28,!0],[Ce]:"s3expressAvailabilityZoneDelim"},{[F]:ze,[B]:[{[fe]:"s3expressAvailabilityZoneDelim"},"--"]}],os=[{[M]:[ot,tt],[W]:{[ne]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[re]:{[Us]:"S3Express",[un]:[{[Bt]:!0,[wt]:"sigv4-s3express",[Vt]:"s3express",[mn]:"{Region}"}]},[se]:{}},[R]:W},{[M]:Fu,[W]:{[ne]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[re]:{[Us]:"S3Express",[un]:[{[Bt]:!0,[wt]:"sigv4-s3express",[Vt]:"s3express",[mn]:"{Region}"}]},[se]:{}},[R]:W},{[M]:Bu,[W]:{[ne]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[re]:{[Us]:"S3Express",[un]:[{[Bt]:!0,[wt]:"sigv4-s3express",[Vt]:"s3express",[mn]:"{Region}"}]},[se]:{}},[R]:W},{[M]:Vu,[W]:{[ne]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[re]:{[Us]:"S3Express",[un]:[{[Bt]:!0,[wt]:"sigv4-s3express",[Vt]:"s3express",[mn]:"{Region}"}]},[se]:{}},[R]:W}],C1=[Ve,0,7,!0],I1=[{[F]:st,[B]:[Ve,7,15,!0],[Ce]:"s3expressAvailabilityZoneId"},{[F]:st,[B]:[Ve,15,17,!0],[Ce]:"s3expressAvailabilityZoneDelim"},{[F]:ze,[B]:[{[fe]:"s3expressAvailabilityZoneDelim"},"--"]}],k1=[{[F]:st,[B]:[Ve,7,16,!0],[Ce]:"s3expressAvailabilityZoneId"},{[F]:st,[B]:[Ve,16,18,!0],[Ce]:"s3expressAvailabilityZoneDelim"},{[F]:ze,[B]:[{[fe]:"s3expressAvailabilityZoneDelim"},"--"]}],R1=[{[F]:st,[B]:[Ve,7,20,!0],[Ce]:"s3expressAvailabilityZoneId"},{[F]:st,[B]:[Ve,20,22,!0],[Ce]:"s3expressAvailabilityZoneDelim"},{[F]:ze,[B]:[{[fe]:"s3expressAvailabilityZoneDelim"},"--"]}],P1=[{[F]:st,[B]:[Ve,7,21,!0],[Ce]:"s3expressAvailabilityZoneId"},{[F]:st,[B]:[Ve,21,23,!0],[Ce]:"s3expressAvailabilityZoneDelim"},{[F]:ze,[B]:[{[fe]:"s3expressAvailabilityZoneDelim"},"--"]}],N1=[{[F]:st,[B]:[Ve,7,27,!0],[Ce]:"s3expressAvailabilityZoneId"},{[F]:st,[B]:[Ve,27,29,!0],[Ce]:"s3expressAvailabilityZoneDelim"},{[F]:ze,[B]:[{[fe]:"s3expressAvailabilityZoneDelim"},"--"]}],gq=[Lu],D1=[{[F]:ia,[B]:[{[fe]:f0},!1]}],M1=[{[F]:ze,[B]:[{[fe]:sP},"beta"]}],yq=["*"],O1=[{[F]:ia,[B]:[{[fe]:"Region"},!1]}],pi=[{[F]:ze,[B]:[{[fe]:"Region"},"us-east-1"]}],yg=[{[F]:ze,[B]:[gP,cP]}],j1=[{[F]:yt,[B]:[Xn,"resourceId[1]"],[Ce]:Wv},{[F]:xs,[B]:[{[F]:ze,[B]:[Gv,pf]}]}],wq=[Xn,"resourceId[1]"],U1=[tt],wg=[{[F]:xs,[B]:[{[F]:ze,[B]:[{[F]:yt,[B]:[Xn,"region"]},pf]}]}],L1=[{[F]:xs,[B]:[{[F]:hr,[B]:[{[F]:yt,[B]:[Xn,"resourceId[2]"]}]}]}],vq=[Xn,"resourceId[2]"],vg=[{[F]:df,[B]:[{[F]:yt,[B]:[Xn,"region"]}],[Ce]:"bucketPartition"}],F1=[{[F]:ze,[B]:[yP,{[F]:yt,[B]:[{[fe]:"partitionResult"},wt]}]}],_g=[{[F]:ia,[B]:[{[F]:yt,[B]:[Xn,"region"]},!0]}],xg=[{[F]:ia,[B]:[wP,!1]}],B1=[{[F]:ia,[B]:[Gv,!1]}],Od=[ot],V1=[{[F]:ia,[B]:[{[fe]:"Region"},!0]}],_q={parameters:{Bucket:ha,Region:ha,UseFIPS:fa,UseDualStack:fa,Endpoint:ha,ForcePathStyle:fa,Accelerate:fa,UseGlobalEndpoint:fa,UseObjectLambdaEndpoint:su,Key:ha,Prefix:ha,CopySource:ha,DisableAccessPoints:su,DisableMultiRegionAccessPoints:fa,UseArnRegion:su,UseS3ExpressControlEndpoint:su,DisableS3ExpressSessionAuth:su},[z]:[{[M]:[{[F]:hr,[B]:pg}],[z]:[{[M]:[Tr,ot],error:"Accelerate cannot be used with FIPS",[R]:le},{[M]:[tt,Rt],error:"Cannot set dual-stack in combination with a custom endpoint.",[R]:le},{[M]:[Rt,ot],error:"A custom endpoint cannot be combined with FIPS",[R]:le},{[M]:[Rt,Tr],error:"A custom endpoint cannot be combined with S3 Accelerate",[R]:le},{[M]:[ot,hP,$b],error:"Partition does not support FIPS",[R]:le},{[M]:[Lu,{[F]:st,[B]:[Ve,0,cq,ss],[Ce]:Nb},{[F]:ze,[B]:[{[fe]:Nb},"--x-s3"]}],[z]:[zb,qb,{[M]:[Wb,Gb],[z]:[{[M]:br,[z]:[{[M]:[pP,be],[z]:[{[M]:gg,endpoint:{[ne]:"https://s3express-control-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[re]:cr,[se]:_e},[R]:W},{[M]:Fu,endpoint:{[ne]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[re]:cr,[se]:_e},[R]:W},{[M]:Bu,endpoint:{[ne]:"https://s3express-control.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[re]:cr,[se]:_e},[R]:W},{[M]:Vu,endpoint:{[ne]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[re]:cr,[se]:_e},[R]:W}],[R]:q}],[R]:q}],[R]:q},{[M]:x1,[z]:[{[M]:br,[z]:[{[M]:_1,[z]:[{[M]:E1,[z]:is,[R]:q},{[M]:S1,[z]:is,[R]:q},{[M]:b1,[z]:is,[R]:q},{[M]:T1,[z]:is,[R]:q},{[M]:A1,[z]:is,[R]:q},Nd],[R]:q},{[M]:E1,[z]:os,[R]:q},{[M]:S1,[z]:os,[R]:q},{[M]:b1,[z]:os,[R]:q},{[M]:T1,[z]:os,[R]:q},{[M]:A1,[z]:os,[R]:q},Nd],[R]:q}],[R]:q},Hb],[R]:q},{[M]:[Lu,{[F]:st,[B]:C1,[Ce]:Db},{[F]:ze,[B]:[{[fe]:Db},"--xa-s3"]}],[z]:[zb,qb,{[M]:x1,[z]:[{[M]:br,[z]:[{[M]:_1,[z]:[{[M]:I1,[z]:is,[R]:q},{[M]:k1,[z]:is,[R]:q},{[M]:R1,[z]:is,[R]:q},{[M]:P1,[z]:is,[R]:q},{[M]:N1,[z]:is,[R]:q},Nd],[R]:q},{[M]:I1,[z]:os,[R]:q},{[M]:k1,[z]:os,[R]:q},{[M]:R1,[z]:os,[R]:q},{[M]:P1,[z]:os,[R]:q},{[M]:N1,[z]:os,[R]:q},Nd],[R]:q}],[R]:q},Hb],[R]:q},{[M]:[Kb,Wb,Gb],[z]:[{[M]:br,[z]:[{[M]:pa,endpoint:{[ne]:ih,[re]:cr,[se]:_e},[R]:W},{[M]:gg,endpoint:{[ne]:"https://s3express-control-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[re]:cr,[se]:_e},[R]:W},{[M]:Fu,endpoint:{[ne]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}",[re]:cr,[se]:_e},[R]:W},{[M]:Bu,endpoint:{[ne]:"https://s3express-control.dualstack.{Region}.{partitionResult#dnsSuffix}",[re]:cr,[se]:_e},[R]:W},{[M]:Vu,endpoint:{[ne]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}",[re]:cr,[se]:_e},[R]:W}],[R]:q}],[R]:q},{[M]:[Lu,{[F]:st,[B]:[Ve,49,50,ss],[Ce]:rP},{[F]:st,[B]:[Ve,8,12,ss],[Ce]:sP},{[F]:st,[B]:C1,[Ce]:Mb},{[F]:st,[B]:[Ve,32,49,ss],[Ce]:f0},{[F]:df,[B]:pg,[Ce]:"regionPartition"},{[F]:ze,[B]:[{[fe]:Mb},"--op-s3"]}],[z]:[{[M]:D1,[z]:[{[M]:[{[F]:ze,[B]:[Jb,"e"]}],[z]:[{[M]:M1,[z]:[Qb,{[M]:pa,endpoint:{[ne]:"https://{Bucket}.ec2.{url#authority}",[re]:Dd,[se]:_e},[R]:W}],[R]:q},{endpoint:{[ne]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[re]:Dd,[se]:_e},[R]:W}],[R]:q},{[M]:[{[F]:ze,[B]:[Jb,"o"]}],[z]:[{[M]:M1,[z]:[Qb,{[M]:pa,endpoint:{[ne]:"https://{Bucket}.op-{outpostId}.{url#authority}",[re]:Dd,[se]:_e},[R]:W}],[R]:q},{endpoint:{[ne]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[re]:Dd,[se]:_e},[R]:W}],[R]:q},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[R]:le}],[R]:q},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[R]:le}],[R]:q},{[M]:gq,[z]:[{[M]:[Rt,{[F]:xs,[B]:[{[F]:hr,[B]:[{[F]:zv,[B]:fq}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[R]:le},{[M]:[tg,mP],[z]:[{[M]:br,[z]:[{[M]:O1,[z]:[{[M]:[Tr,$b],error:"S3 Accelerate cannot be used in this region",[R]:le},{[M]:[tt,ot,Mt,be,Gt],endpoint:{[ne]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[re]:nn,[se]:_e},[R]:W},{[M]:[tt,ot,Mt,be,Ue,rn],[z]:[{endpoint:Xb,[R]:W}],[R]:q},{[M]:[tt,ot,Mt,be,Ue,sn],endpoint:Xb,[R]:W},{[M]:[Me,ot,Mt,be,Gt],endpoint:{[ne]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[re]:nn,[se]:_e},[R]:W},{[M]:[Me,ot,Mt,be,Ue,rn],[z]:[{endpoint:Yb,[R]:W}],[R]:q},{[M]:[Me,ot,Mt,be,Ue,sn],endpoint:Yb,[R]:W},{[M]:[tt,Re,Tr,be,Gt],endpoint:{[ne]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[re]:nn,[se]:_e},[R]:W},{[M]:[tt,Re,Tr,be,Ue,rn],[z]:[{endpoint:Zb,[R]:W}],[R]:q},{[M]:[tt,Re,Tr,be,Ue,sn],endpoint:Zb,[R]:W},{[M]:[tt,Re,Mt,be,Gt],endpoint:{[ne]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[re]:nn,[se]:_e},[R]:W},{[M]:[tt,Re,Mt,be,Ue,rn],[z]:[{endpoint:e1,[R]:W}],[R]:q},{[M]:[tt,Re,Mt,be,Ue,sn],endpoint:e1,[R]:W},{[M]:[Me,Re,Mt,Rt,Mn,eg,Gt],endpoint:{[ne]:iP,[re]:nn,[se]:_e},[R]:W},{[M]:[Me,Re,Mt,Rt,Mn,ng,Gt],endpoint:{[ne]:ff,[re]:nn,[se]:_e},[R]:W},{[M]:[Me,Re,Mt,Rt,Mn,eg,Ue,rn],[z]:[{[M]:pi,endpoint:rg,[R]:W},{endpoint:rg,[R]:W}],[R]:q},{[M]:[Me,Re,Mt,Rt,Mn,ng,Ue,rn],[z]:[{[M]:pi,endpoint:p0,[R]:W},t1],[R]:q},{[M]:[Me,Re,Mt,Rt,Mn,eg,Ue,sn],endpoint:rg,[R]:W},{[M]:[Me,Re,Mt,Rt,Mn,ng,Ue,sn],endpoint:p0,[R]:W},{[M]:[Me,Re,Tr,be,Gt],endpoint:{[ne]:oP,[re]:nn,[se]:_e},[R]:W},{[M]:[Me,Re,Tr,be,Ue,rn],[z]:[{[M]:pi,endpoint:sg,[R]:W},{endpoint:sg,[R]:W}],[R]:q},{[M]:[Me,Re,Tr,be,Ue,sn],endpoint:sg,[R]:W},{[M]:[Me,Re,Mt,be,Gt],endpoint:{[ne]:Ob,[re]:nn,[se]:_e},[R]:W},{[M]:[Me,Re,Mt,be,Ue,rn],[z]:[{[M]:pi,endpoint:{[ne]:Ob,[re]:$t,[se]:_e},[R]:W},{endpoint:n1,[R]:W}],[R]:q},{[M]:[Me,Re,Mt,be,Ue,sn],endpoint:n1,[R]:W}],[R]:q},Md],[R]:q}],[R]:q},{[M]:[Rt,Mn,{[F]:ze,[B]:[{[F]:yt,[B]:[fP,"scheme"]},"http"]},{[F]:hf,[B]:[Ve,ss]},tg,Re,Me,Mt],[z]:[{[M]:br,[z]:[{[M]:O1,[z]:[t1],[R]:q},Md],[R]:q}],[R]:q},{[M]:[tg,{[F]:aP,[B]:pq,[Ce]:lP}],[z]:[{[M]:[{[F]:yt,[B]:[Xn,"resourceId[0]"],[Ce]:uP},{[F]:xs,[B]:[{[F]:ze,[B]:[gP,pf]}]}],[z]:[{[M]:[{[F]:ze,[B]:[ig,Hv]}],[z]:[{[M]:yg,[z]:[{[M]:j1,[z]:[r1,s1,{[M]:wg,[z]:[i1,{[M]:L1,[z]:[og,{[M]:vg,[z]:[{[M]:br,[z]:[{[M]:F1,[z]:[{[M]:_g,[z]:[{[M]:[{[F]:ze,[B]:[wP,pf]}],error:"Invalid ARN: Missing account id",[R]:le},{[M]:xg,[z]:[{[M]:B1,[z]:[{[M]:pa,endpoint:{[ne]:jb,[re]:ag,[se]:_e},[R]:W},{[M]:Od,endpoint:{[ne]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[re]:ag,[se]:_e},[R]:W},{endpoint:{[ne]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[re]:ag,[se]:_e},[R]:W}],[R]:q},o1],[R]:q},lg],[R]:q},ug],[R]:q},cg],[R]:q}],[R]:q}],[R]:q},a1],[R]:q},{error:"Invalid ARN: bucket ARN is missing a region",[R]:le}],[R]:q},l1],[R]:q},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[R]:le}],[R]:q},{[M]:yg,[z]:[{[M]:j1,[z]:[{[M]:wg,[z]:[{[M]:yg,[z]:[{[M]:wg,[z]:[i1,{[M]:L1,[z]:[og,{[M]:vg,[z]:[{[M]:br,[z]:[{[M]:[{[F]:ze,[B]:[yP,"{partitionResult#name}"]}],[z]:[{[M]:_g,[z]:[{[M]:[{[F]:ze,[B]:[ig,gl]}],[z]:[{[M]:xg,[z]:[{[M]:B1,[z]:[{[M]:mg,error:"Access Points do not support S3 Accelerate",[R]:le},{[M]:gg,endpoint:{[ne]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[re]:iu,[se]:_e},[R]:W},{[M]:Fu,endpoint:{[ne]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[re]:iu,[se]:_e},[R]:W},{[M]:Bu,endpoint:{[ne]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[re]:iu,[se]:_e},[R]:W},{[M]:[Re,Me,Rt,Mn],endpoint:{[ne]:jb,[re]:iu,[se]:_e},[R]:W},{[M]:Vu,endpoint:{[ne]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[re]:iu,[se]:_e},[R]:W}],[R]:q},o1],[R]:q},lg],[R]:q},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[R]:le}],[R]:q},ug],[R]:q},cg],[R]:q}],[R]:q}],[R]:q},a1],[R]:q}],[R]:q}],[R]:q},{[M]:[{[F]:ia,[B]:[Gv,ss]}],[z]:[{[M]:U1,error:"S3 MRAP does not support dual-stack",[R]:le},{[M]:Od,error:"S3 MRAP does not support FIPS",[R]:le},{[M]:mg,error:"S3 MRAP does not support S3 Accelerate",[R]:le},{[M]:[{[F]:Dt,[B]:[{[fe]:"DisableMultiRegionAccessPoints"},ss]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[R]:le},{[M]:[{[F]:df,[B]:pg,[Ce]:Ub}],[z]:[{[M]:[{[F]:ze,[B]:[{[F]:yt,[B]:[{[fe]:Ub},wt]},{[F]:yt,[B]:[Xn,"partition"]}]}],[z]:[{endpoint:{[ne]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[re]:{[un]:[{[Bt]:ss,name:qv,[Vt]:gl,[$v]:yq}]},[se]:_e},[R]:W}],[R]:q},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[R]:le}],[R]:q}],[R]:q},{error:"Invalid Access Point Name",[R]:le}],[R]:q},l1],[R]:q},{[M]:[{[F]:ze,[B]:[ig,Tc]}],[z]:[{[M]:U1,error:"S3 Outposts does not support Dual-stack",[R]:le},{[M]:Od,error:"S3 Outposts does not support FIPS",[R]:le},{[M]:mg,error:"S3 Outposts does not support S3 Accelerate",[R]:le},{[M]:[{[F]:hr,[B]:[{[F]:yt,[B]:[Xn,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[R]:le},{[M]:[{[F]:yt,[B]:wq,[Ce]:f0}],[z]:[{[M]:D1,[z]:[og,{[M]:vg,[z]:[{[M]:br,[z]:[{[M]:F1,[z]:[{[M]:_g,[z]:[{[M]:xg,[z]:[{[M]:[{[F]:yt,[B]:vq,[Ce]:Lb}],[z]:[{[M]:[{[F]:yt,[B]:[Xn,"resourceId[3]"],[Ce]:Wv}],[z]:[{[M]:[{[F]:ze,[B]:[{[fe]:Lb},cP]}],[z]:[{[M]:pa,endpoint:{[ne]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[re]:u1,[se]:_e},[R]:W},{endpoint:{[ne]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[re]:u1,[se]:_e},[R]:W}],[R]:q},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[R]:le}],[R]:q},{error:"Invalid ARN: expected an access point name",[R]:le}],[R]:q},{error:"Invalid ARN: Expected a 4-component resource",[R]:le}],[R]:q},lg],[R]:q},ug],[R]:q},cg],[R]:q}],[R]:q}],[R]:q},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[R]:le}],[R]:q},{error:"Invalid ARN: The Outpost Id was not set",[R]:le}],[R]:q},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[R]:le}],[R]:q},{error:"Invalid ARN: No ARN type specified",[R]:le}],[R]:q},{[M]:[{[F]:st,[B]:[Ve,0,4,dq],[Ce]:Fb},{[F]:ze,[B]:[{[fe]:Fb},"arn:"]},{[F]:xs,[B]:[{[F]:hr,[B]:[c1]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[R]:le},{[M]:[{[F]:Dt,[B]:[hq,ss]},c1],error:"Path-style addressing cannot be used with ARN buckets",[R]:le},{[M]:mq,[z]:[{[M]:br,[z]:[{[M]:[Mt],[z]:[{[M]:[tt,be,ot,Gt],endpoint:{[ne]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[re]:nn,[se]:_e},[R]:W},{[M]:[tt,be,ot,Ue,rn],[z]:[{endpoint:d1,[R]:W}],[R]:q},{[M]:[tt,be,ot,Ue,sn],endpoint:d1,[R]:W},{[M]:[Me,be,ot,Gt],endpoint:{[ne]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[re]:nn,[se]:_e},[R]:W},{[M]:[Me,be,ot,Ue,rn],[z]:[{endpoint:h1,[R]:W}],[R]:q},{[M]:[Me,be,ot,Ue,sn],endpoint:h1,[R]:W},{[M]:[tt,be,Re,Gt],endpoint:{[ne]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[re]:nn,[se]:_e},[R]:W},{[M]:[tt,be,Re,Ue,rn],[z]:[{endpoint:f1,[R]:W}],[R]:q},{[M]:[tt,be,Re,Ue,sn],endpoint:f1,[R]:W},{[M]:[Me,Rt,Mn,Re,Gt],endpoint:{[ne]:dP,[re]:nn,[se]:_e},[R]:W},{[M]:[Me,Rt,Mn,Re,Ue,rn],[z]:[{[M]:pi,endpoint:dg,[R]:W},{endpoint:dg,[R]:W}],[R]:q},{[M]:[Me,Rt,Mn,Re,Ue,sn],endpoint:dg,[R]:W},{[M]:[Me,be,Re,Gt],endpoint:{[ne]:Bb,[re]:nn,[se]:_e},[R]:W},{[M]:[Me,be,Re,Ue,rn],[z]:[{[M]:pi,endpoint:{[ne]:Bb,[re]:$t,[se]:_e},[R]:W},{endpoint:p1,[R]:W}],[R]:q},{[M]:[Me,be,Re,Ue,sn],endpoint:p1,[R]:W}],[R]:q},{error:"Path-style addressing cannot be used with S3 Accelerate",[R]:le}],[R]:q}],[R]:q}],[R]:q},{[M]:[{[F]:hr,[B]:[m1]},{[F]:Dt,[B]:[m1,ss]}],[z]:[{[M]:br,[z]:[{[M]:V1,[z]:[r1,s1,{[M]:pa,endpoint:{[ne]:ih,[re]:hg,[se]:_e},[R]:W},{[M]:Od,endpoint:{[ne]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[re]:hg,[se]:_e},[R]:W},{endpoint:{[ne]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[re]:hg,[se]:_e},[R]:W}],[R]:q},Md],[R]:q}],[R]:q},{[M]:[Kb],[z]:[{[M]:br,[z]:[{[M]:V1,[z]:[{[M]:[ot,tt,be,Gt],endpoint:{[ne]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[re]:nn,[se]:_e},[R]:W},{[M]:[ot,tt,be,Ue,rn],[z]:[{endpoint:g1,[R]:W}],[R]:q},{[M]:[ot,tt,be,Ue,sn],endpoint:g1,[R]:W},{[M]:[ot,Me,be,Gt],endpoint:{[ne]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[re]:nn,[se]:_e},[R]:W},{[M]:[ot,Me,be,Ue,rn],[z]:[{endpoint:y1,[R]:W}],[R]:q},{[M]:[ot,Me,be,Ue,sn],endpoint:y1,[R]:W},{[M]:[Re,tt,be,Gt],endpoint:{[ne]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[re]:nn,[se]:_e},[R]:W},{[M]:[Re,tt,be,Ue,rn],[z]:[{endpoint:w1,[R]:W}],[R]:q},{[M]:[Re,tt,be,Ue,sn],endpoint:w1,[R]:W},{[M]:[Re,Me,Rt,Mn,Gt],endpoint:{[ne]:ih,[re]:nn,[se]:_e},[R]:W},{[M]:[Re,Me,Rt,Mn,Ue,rn],[z]:[{[M]:pi,endpoint:fg,[R]:W},{endpoint:fg,[R]:W}],[R]:q},{[M]:[Re,Me,Rt,Mn,Ue,sn],endpoint:fg,[R]:W},{[M]:[Re,Me,be,Gt],endpoint:{[ne]:Vb,[re]:nn,[se]:_e},[R]:W},{[M]:[Re,Me,be,Ue,rn],[z]:[{[M]:pi,endpoint:{[ne]:Vb,[re]:$t,[se]:_e},[R]:W},{endpoint:v1,[R]:W}],[R]:q},{[M]:[Re,Me,be,Ue,sn],endpoint:v1,[R]:W}],[R]:q},Md],[R]:q}],[R]:q}],[R]:q},{error:"A region must be set when sending requests to S3.",[R]:le}]},xq=_q,Eq=new Mz({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),vP=(t,e={})=>Eq.get(t,()=>Zz(xq,{endpointParams:t,logger:e.logger}));lf.aws=G2;const Sq=t=>async(e,n,r)=>{var l,a,u;if(!r)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");const s=await t(e,n,r),i=(u=(a=(l=ho(n))==null?void 0:l.commandInstance)==null?void 0:a.constructor)==null?void 0:u.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${n.commandName}\``);const o=await X2(r,{getEndpointParameterInstructions:i},e);return Object.assign(s,o)},bq=async(t,e,n)=>({operation:ho(e).operation,region:await Kr(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),Tq=Sq(bq);function _P(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,n)=>({signingProperties:{config:e,context:n}})}}function xP(t){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,n)=>({signingProperties:{config:e,context:n}})}}const Aq=(t,e,n)=>s=>{var a;const o=(a=t(s).properties)==null?void 0:a.authSchemes;if(!o)return e(s);const l=[];for(const u of o){const{name:d,properties:h={},...f}=u,g=d.toLowerCase();d!==g&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${d}\` to \`${g}\``);let w;if(g==="sigv4a"){w="aws.auth#sigv4a";const v=o.find(x=>{const T=x.name.toLowerCase();return T!=="sigv4a"&&T.startsWith("sigv4")});if(nP.sigv4aDependency()==="none"&&v)continue}else if(g.startsWith("sigv4"))w="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${g}\``);const E=n[w];if(!E)throw new Error(`Could not find HttpAuthOption create function for \`${w}\``);const b=E(s);b.schemeId=w,b.signingProperties={...b.signingProperties||{},...f,...h},l.push(b)}return l},Cq=t=>{const e=[];switch(t.operation){default:e.push(_P(t)),e.push(xP(t))}return e},Iq=Aq(vP,Cq,{"aws.auth#sigv4":_P,"aws.auth#sigv4a":xP}),kq=t=>{const e=J9(t),n=S9(e);return Object.assign(n,{authSchemePreference:Kr(t.authSchemePreference??[])})},Rq=t=>Object.assign(t,{useFipsEndpoint:t.useFipsEndpoint??!1,useDualstackEndpoint:t.useDualstackEndpoint??!1,forcePathStyle:t.forcePathStyle??!1,useAccelerateEndpoint:t.useAccelerateEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,disableMultiregionAccessPoints:t.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),EP={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};let Vn=class SP extends Na{constructor(e){super(e),Object.setPrototypeOf(this,SP.prototype)}},Pq=class bP extends Vn{constructor(n){super({name:"NoSuchUpload",$fault:"client",...n});j(this,"name","NoSuchUpload");j(this,"$fault","client");Object.setPrototypeOf(this,bP.prototype)}},Nq=class TP extends Vn{constructor(n){super({name:"ObjectNotInActiveTierError",$fault:"client",...n});j(this,"name","ObjectNotInActiveTierError");j(this,"$fault","client");Object.setPrototypeOf(this,TP.prototype)}},Dq=class AP extends Vn{constructor(n){super({name:"BucketAlreadyExists",$fault:"client",...n});j(this,"name","BucketAlreadyExists");j(this,"$fault","client");Object.setPrototypeOf(this,AP.prototype)}},Mq=class CP extends Vn{constructor(n){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...n});j(this,"name","BucketAlreadyOwnedByYou");j(this,"$fault","client");Object.setPrototypeOf(this,CP.prototype)}},Oq=class IP extends Vn{constructor(n){super({name:"NoSuchBucket",$fault:"client",...n});j(this,"name","NoSuchBucket");j(this,"$fault","client");Object.setPrototypeOf(this,IP.prototype)}},jq=class kP extends Vn{constructor(n){super({name:"InvalidObjectState",$fault:"client",...n});j(this,"name","InvalidObjectState");j(this,"$fault","client");j(this,"StorageClass");j(this,"AccessTier");Object.setPrototypeOf(this,kP.prototype),this.StorageClass=n.StorageClass,this.AccessTier=n.AccessTier}},Uq=class RP extends Vn{constructor(n){super({name:"NoSuchKey",$fault:"client",...n});j(this,"name","NoSuchKey");j(this,"$fault","client");Object.setPrototypeOf(this,RP.prototype)}},Lq=class PP extends Vn{constructor(n){super({name:"NotFound",$fault:"client",...n});j(this,"name","NotFound");j(this,"$fault","client");Object.setPrototypeOf(this,PP.prototype)}},Fq=class NP extends Vn{constructor(n){super({name:"EncryptionTypeMismatch",$fault:"client",...n});j(this,"name","EncryptionTypeMismatch");j(this,"$fault","client");Object.setPrototypeOf(this,NP.prototype)}},Bq=class DP extends Vn{constructor(n){super({name:"InvalidRequest",$fault:"client",...n});j(this,"name","InvalidRequest");j(this,"$fault","client");Object.setPrototypeOf(this,DP.prototype)}},Vq=class MP extends Vn{constructor(n){super({name:"InvalidWriteOffset",$fault:"client",...n});j(this,"name","InvalidWriteOffset");j(this,"$fault","client");Object.setPrototypeOf(this,MP.prototype)}},$q=class OP extends Vn{constructor(n){super({name:"TooManyParts",$fault:"client",...n});j(this,"name","TooManyParts");j(this,"$fault","client");Object.setPrototypeOf(this,OP.prototype)}},zq=class jP extends Vn{constructor(n){super({name:"IdempotencyParameterMismatch",$fault:"client",...n});j(this,"name","IdempotencyParameterMismatch");j(this,"$fault","client");Object.setPrototypeOf(this,jP.prototype)}},qq=class UP extends Vn{constructor(n){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...n});j(this,"name","ObjectAlreadyInActiveTierError");j(this,"$fault","client");Object.setPrototypeOf(this,UP.prototype)}};const Hq="ACL",$1="AccessKeyId",Wq="AccessTier",LP="Bucket",Gq="BucketAlreadyExists",Kq="BucketAlreadyOwnedByYou",bp="BucketKeyEnabled",Jq="Body",Qq="ChecksumAlgorithm",Xq="CacheControl",FP="ChecksumCRC32",BP="ChecksumCRC32C",VP="ChecksumCRC64NVME",Yq="Cache-Control",Zq="Content-Disposition",eH="ContentDisposition",tH="Content-Encoding",nH="ContentEncoding",rH="ContentLanguage",sH="Content-Language",iH="Content-Length",oH="ContentLength",aH="Content-MD5",lH="ContentMD5",$P="ChecksumSHA1",zP="ChecksumSHA256",uH="CreateSessionOutput",cH="CreateSessionResult",dH="CreateSessionRequest",hH="CreateSession",fH="ChecksumType",pH="Content-Type",mH="ContentType",z1="Credentials",m0="Expiration",gH="ExpectedBucketOwner",yH="EncryptionTypeMismatch",q1="ETag",H1="Expires",wH="GrantFullControl",vH="GrantRead",_H="GrantReadACP",xH="GrantWriteACP",EH="IfMatch",SH="If-Match",bH="IfNoneMatch",TH="If-None-Match",AH="InvalidObjectState",CH="IdempotencyParameterMismatch",IH="InvalidRequest",kH="InvalidWriteOffset",RH="Key",PH="Metadata",NH="NotFound",DH="NoSuchBucket",MH="NoSuchKey",OH="NoSuchUpload",jH="ObjectAlreadyInActiveTierError",UH="ObjectLockLegalHoldStatus",LH="ObjectLockMode",FH="ObjectLockRetainUntilDate",BH="ObjectNotInActiveTierError",VH="PutObject",$H="PutObjectOutput",zH="PutObjectRequest",qH="RequestCharged",HH="RequestPayer",W1="SecretAccessKey",WH="StreamingBlob",qP="StorageClass",GH="SessionCredentialValue",KH="SessionCredentials",JH="SessionMode",Tp="ServerSideEncryption",HP="SSECustomerAlgorithm",WP="SSECustomerKey",GP="SSECustomerKeyMD5",Gc="SSEKMSEncryptionContext",Kc="SSEKMSKeyId",G1="SessionToken",QH="Size",XH="TooManyParts",YH="Tagging",ZH="VersionId",eW="WriteOffsetBytes",tW="WebsiteRedirectLocation",rr="client",sr="error",KP="http",xr="httpError",he="httpHeader",nW="httpPrefixHeaders",rW="streaming",JP="smithy.ts.sdk.synthetic.com.amazonaws.s3",Da="xmlName",sW="x-amz-acl",QP="x-amz-checksum-crc32",XP="x-amz-checksum-crc32c",YP="x-amz-checksum-crc64nvme",ZP="x-amz-checksum-sha1",eN="x-amz-checksum-sha256",iW="x-amz-create-session-mode",oW="x-amz-checksum-type",aW="x-amz-expiration",lW="x-amz-expected-bucket-owner",uW="x-amz-grant-full-control",cW="x-amz-grant-read",dW="x-amz-grant-read-acp",hW="x-amz-grant-write-acp",fW="x-amz-meta-",pW="x-amz-object-lock-legal-hold",mW="x-amz-object-lock-mode",gW="x-amz-object-lock-retain-until-date",yW="x-amz-object-size",wW="x-amz-request-charged",vW="x-amz-request-payer",_W="x-amz-storage-class",xW="x-amz-sdk-checksum-algorithm",Ap="x-amz-server-side-encryption",Cp="x-amz-server-side-encryption-aws-kms-key-id",Ip="x-amz-server-side-encryption-bucket-key-enabled",kp="x-amz-server-side-encryption-context",tN="x-amz-server-side-encryption-customer-algorithm",EW="x-amz-server-side-encryption-customer-key",nN="x-amz-server-side-encryption-customer-key-MD5",SW="x-amz-tagging",bW="x-amz-version-id",TW="x-amz-write-offset-bytes",AW="x-amz-website-redirect-location",Pe="com.amazonaws.s3";var K1=[0,Pe,GH,8,0],CW=[0,Pe,WP,8,0],Rp=[0,Pe,Gc,8,0],Pp=[0,Pe,Kc,8,0],IW=[0,Pe,WH,{[rW]:1},42],kW=[-3,Pe,Gq,{[sr]:rr,[xr]:409},[],[]];qt.for(Pe).registerError(kW,Dq);var RW=[-3,Pe,Kq,{[sr]:rr,[xr]:409},[],[]];qt.for(Pe).registerError(RW,Mq);var PW=[3,Pe,uH,{[Da]:cH},[Tp,Kc,Gc,bp,z1],[[0,{[he]:Ap}],[()=>Pp,{[he]:Cp}],[()=>Rp,{[he]:kp}],[2,{[he]:Ip}],[()=>WW,{[Da]:z1}]]],NW=[3,Pe,dH,0,[JH,LP,Tp,Kc,Gc,bp],[[0,{[he]:iW}],[0,1],[0,{[he]:Ap}],[()=>Pp,{[he]:Cp}],[()=>Rp,{[he]:kp}],[2,{[he]:Ip}]]],DW=[-3,Pe,yH,{[sr]:rr,[xr]:400},[],[]];qt.for(Pe).registerError(DW,Fq);var MW=[-3,Pe,CH,{[sr]:rr,[xr]:400},[],[]];qt.for(Pe).registerError(MW,zq);var OW=[-3,Pe,AH,{[sr]:rr,[xr]:403},[qP,Wq],[0,0]];qt.for(Pe).registerError(OW,jq);var jW=[-3,Pe,IH,{[sr]:rr,[xr]:400},[],[]];qt.for(Pe).registerError(jW,Bq);var UW=[-3,Pe,kH,{[sr]:rr,[xr]:400},[],[]];qt.for(Pe).registerError(UW,Vq);var LW=[-3,Pe,DH,{[sr]:rr,[xr]:404},[],[]];qt.for(Pe).registerError(LW,Oq);var FW=[-3,Pe,MH,{[sr]:rr,[xr]:404},[],[]];qt.for(Pe).registerError(FW,Uq);var BW=[-3,Pe,OH,{[sr]:rr,[xr]:404},[],[]];qt.for(Pe).registerError(BW,Pq);var VW=[-3,Pe,NH,{[sr]:rr},[],[]];qt.for(Pe).registerError(VW,Lq);var $W=[-3,Pe,jH,{[sr]:rr,[xr]:403},[],[]];qt.for(Pe).registerError($W,qq);var zW=[-3,Pe,BH,{[sr]:rr,[xr]:403},[],[]];qt.for(Pe).registerError(zW,Nq);var qW=[3,Pe,$H,0,[m0,q1,FP,BP,VP,$P,zP,fH,Tp,ZH,HP,GP,Kc,Gc,bp,QH,qH],[[0,{[he]:aW}],[0,{[he]:q1}],[0,{[he]:QP}],[0,{[he]:XP}],[0,{[he]:YP}],[0,{[he]:ZP}],[0,{[he]:eN}],[0,{[he]:oW}],[0,{[he]:Ap}],[0,{[he]:bW}],[0,{[he]:tN}],[0,{[he]:nN}],[()=>Pp,{[he]:Cp}],[()=>Rp,{[he]:kp}],[2,{[he]:Ip}],[1,{[he]:yW}],[0,{[he]:wW}]]],HW=[3,Pe,zH,0,[Hq,Jq,LP,Xq,eH,nH,rH,oH,lH,mH,Qq,FP,BP,VP,$P,zP,H1,EH,bH,wH,vH,_H,xH,RH,eW,PH,Tp,qP,tW,HP,WP,GP,Kc,Gc,bp,HH,YH,LH,FH,UH,gH],[[0,{[he]:sW}],[()=>IW,16],[0,1],[0,{[he]:Yq}],[0,{[he]:Zq}],[0,{[he]:tH}],[0,{[he]:sH}],[1,{[he]:iH}],[0,{[he]:aH}],[0,{[he]:pH}],[0,{[he]:xW}],[0,{[he]:QP}],[0,{[he]:XP}],[0,{[he]:YP}],[0,{[he]:ZP}],[0,{[he]:eN}],[4,{[he]:H1}],[0,{[he]:SH}],[0,{[he]:TH}],[0,{[he]:uW}],[0,{[he]:cW}],[0,{[he]:dW}],[0,{[he]:hW}],[0,1],[1,{[he]:TW}],[128,{[nW]:fW}],[0,{[he]:Ap}],[0,{[he]:_W}],[0,{[he]:AW}],[0,{[he]:tN}],[()=>CW,{[he]:EW}],[0,{[he]:nN}],[()=>Pp,{[he]:Cp}],[()=>Rp,{[he]:kp}],[2,{[he]:Ip}],[0,{[he]:vW}],[0,{[he]:SW}],[0,{[he]:mW}],[5,{[he]:gW}],[0,{[he]:pW}],[0,{[he]:lW}]]],WW=[3,Pe,KH,0,[$1,W1,G1,m0],[[0,{[Da]:$1}],[()=>K1,{[Da]:W1}],[()=>K1,{[Da]:G1}],[4,{[Da]:m0}]]],GW=[-3,Pe,XH,{[sr]:rr,[xr]:400},[],[]];qt.for(Pe).registerError(GW,$q);var KW=[-3,JP,"S3ServiceException",0,[],[]];qt.for(JP).registerError(KW,Vn);var JW=[9,Pe,hH,{[KP]:["GET","/?session",200]},()=>NW,()=>PW],QW=[9,Pe,VH,{[KP]:["PUT","/{Key+}?x-id=PutObject",200]},()=>HW,()=>qW];class XW extends Dv.classBuilder().ep({...EP,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(e,n,r,s){return[Y2(r,e.getEndpointParameterInstructions()),O2(r)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").sc(JW).build(){}const YW="3.948.0",ZW={version:YW},eG=t=>new TextEncoder().encode(t);function J1(t){return typeof t=="string"?t.length===0:t.byteLength===0}var rN={name:"SHA-1"},Q1={name:"HMAC",hash:rN},tG=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]);const nG={};function Hi(){return typeof window<"u"?window:typeof self<"u"?self:nG}var rG=function(){function t(e){this.toHash=new Uint8Array(0),e!==void 0&&(this.key=new Promise(function(n,r){Hi().crypto.subtle.importKey("raw",X1(e),Q1,!1,["sign"]).then(n,r)}),this.key.catch(function(){}))}return t.prototype.update=function(e){if(!J1(e)){var n=X1(e),r=new Uint8Array(this.toHash.byteLength+n.byteLength);r.set(this.toHash,0),r.set(n,this.toHash.byteLength),this.toHash=r}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(n){return Hi().crypto.subtle.sign(Q1,n,e.toHash).then(function(r){return new Uint8Array(r)})}):J1(this.toHash)?Promise.resolve(tG):Promise.resolve().then(function(){return Hi().crypto.subtle.digest(rN,e.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},t.prototype.reset=function(){this.toHash=new Uint8Array(0)},t}();function X1(t){return typeof t=="string"?eG(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}var sG=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function sN(t){if(iG(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return oG(e)}return!1}function iG(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function oG(t){return t&&sG.every(function(e){return typeof t[e]=="function"})}var aG=function(){function t(e){if(sN(Hi()))this.hash=new rG(e);else throw new Error("SHA1 not supported")}return t.prototype.update=function(e,n){this.hash.update(no(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}(),iN={name:"SHA-256"},Y1={name:"HMAC",hash:iN},lG=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]),uG=function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!Sc(e)){var n=no(e),r=new Uint8Array(this.toHash.byteLength+n.byteLength);r.set(this.toHash,0),r.set(n,this.toHash.byteLength),this.toHash=r}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(n){return Hi().crypto.subtle.sign(Y1,n,e.toHash).then(function(r){return new Uint8Array(r)})}):Sc(this.toHash)?Promise.resolve(lG):Promise.resolve().then(function(){return Hi().crypto.subtle.digest(iN,e.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(n,r){Hi().crypto.subtle.importKey("raw",no(e.secret),Y1,!1,["sign"]).then(n,r)}),this.key.catch(function(){}))},t}(),Ar=64,cG=32,dG=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),hG=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],fG=Math.pow(2,53)-1,oh=function(){function t(){this.state=Int32Array.from(hG),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,r=e.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>fG)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[n++],r--,this.bufferLength===Ar&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(n.setUint8(this.bufferLength++,128),r%Ar>=Ar-8){for(var s=this.bufferLength;s<Ar;s++)n.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<Ar-8;s++)n.setUint8(s,0);n.setUint32(Ar-8,Math.floor(e/4294967296),!0),n.setUint32(Ar-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(cG),s=0;s<8;s++)i[s*4]=this.state[s]>>>24&255,i[s*4+1]=this.state[s]>>>16&255,i[s*4+2]=this.state[s]>>>8&255,i[s*4+3]=this.state[s]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,n=e.buffer,r=e.state,s=r[0],i=r[1],o=r[2],l=r[3],a=r[4],u=r[5],d=r[6],h=r[7],f=0;f<Ar;f++){if(f<16)this.temp[f]=(n[f*4]&255)<<24|(n[f*4+1]&255)<<16|(n[f*4+2]&255)<<8|n[f*4+3]&255;else{var g=this.temp[f-2],w=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10;g=this.temp[f-15];var E=(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3;this.temp[f]=(w+this.temp[f-7]|0)+(E+this.temp[f-16]|0)}var b=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&d)|0)+(h+(dG[f]+this.temp[f]|0)|0)|0,v=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&i^s&o^i&o)|0;h=d,d=u,u=a,a=l+b|0,l=o,o=i,i=s,s=b+v|0}r[0]+=s,r[1]+=i,r[2]+=o,r[3]+=l,r[4]+=a,r[5]+=u,r[6]+=d,r[7]+=h},t}(),pG=function(){function t(e){this.secret=e,this.hash=new oh,this.reset()}return t.prototype.update=function(e){if(!(Sc(e)||this.error))try{this.hash.update(no(e))}catch(n){this.error=n}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return Uv(this,void 0,void 0,function(){return Lv(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new oh,this.secret){this.outer=new oh;var e=mG(this.secret),n=new Uint8Array(Ar);n.set(e);for(var r=0;r<Ar;r++)e[r]^=54,n[r]^=92;this.hash.update(e),this.outer.update(n);for(var r=0;r<e.byteLength;r++)e[r]=0}},t}();function mG(t){var e=no(t);if(e.byteLength>Ar){var n=new oh;n.update(e),e=n.digest()}var r=new Uint8Array(Ar);return r.set(e),r}var gG=function(){function t(e){sN(Hi())?this.hash=new uG(e):this.hash=new pG(e)}return t.prototype.update=function(e,n){this.hash.update(no(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();const yG=({serviceId:t,clientVersion:e})=>async n=>{var g,w,E;const r=typeof window<"u"?window.navigator:void 0,s=(r==null?void 0:r.userAgent)??"",i=((g=r==null?void 0:r.userAgentData)==null?void 0:g.platform)??Z1.os(s)??"other",o=void 0,l=((w=r==null?void 0:r.userAgentData)==null?void 0:w.brands)??[],a=l[l.length-1],u=(a==null?void 0:a.brand)??Z1.browser(s)??"unknown",d=(a==null?void 0:a.version)??"unknown",h=[["aws-sdk-js",e],["ua","2.1"],[`os/${i}`,o],["lang/js"],["md/browser",`${u}_${d}`]];t&&h.push([`api/${t}`,e]);const f=await((E=n==null?void 0:n.userAgentAppId)==null?void 0:E.call(n));return f&&h.push([`app/${f}`]),h},Z1={os(t){if(/iPhone|iPad|iPod/.test(t))return"iOS";if(/Macintosh|Mac OS X/.test(t))return"macOS";if(/Windows NT/.test(t))return"Windows";if(/Android/.test(t))return"Android";if(/Linux/.test(t))return"Linux"},browser(t){if(/EdgiOS|EdgA|Edg\//.test(t))return"Microsoft Edge";if(/Firefox\//.test(t))return"Firefox";if(/Chrome\//.test(t))return"Chrome";if(/Safari\//.test(t))return"Safari"}};class $u{constructor(e){j(this,"bytes");if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(e));r>-1&&s>0;r--,s/=256)n[r]=s;return e<0&&eT(n),new $u(n)}valueOf(){const e=this.bytes.slice(0),n=e[0]&128;return n&&eT(e),parseInt(Jn(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}}function eT(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}class wG{constructor(e,n){j(this,"toUtf8");j(this,"fromUtf8");this.toUtf8=e,this.fromUtf8=n}format(e){const n=[];for(const i of Object.keys(e)){const o=this.fromUtf8(i);n.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const r=new Uint8Array(n.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const l=this.fromUtf8(e.value),a=new DataView(new ArrayBuffer(3+l.byteLength));a.setUint8(0,7),a.setUint16(1,l.byteLength,!1);const u=new Uint8Array(a.buffer);return u.set(l,3),u;case"timestamp":const d=new Uint8Array(9);return d[0]=8,d.set($u.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!CG.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const h=new Uint8Array(17);return h[0]=9,h.set(c2(e.value.replace(/\-/g,"")),1),h}}parse(e){const n={};let r=0;for(;r<e.byteLength;){const s=e.getUint8(r++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,s));switch(r+=s,e.getUint8(r++)){case 0:n[i]={type:nT,value:!0};break;case 1:n[i]={type:nT,value:!1};break;case 2:n[i]={type:vG,value:e.getInt8(r++)};break;case 3:n[i]={type:_G,value:e.getInt16(r,!1)},r+=2;break;case 4:n[i]={type:xG,value:e.getInt32(r,!1)},r+=4;break;case 5:n[i]={type:EG,value:new $u(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:const o=e.getUint16(r,!1);r+=2,n[i]={type:SG,value:new Uint8Array(e.buffer,e.byteOffset+r,o)},r+=o;break;case 7:const l=e.getUint16(r,!1);r+=2,n[i]={type:bG,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,l))},r+=l;break;case 8:n[i]={type:TG,value:new Date(new $u(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:const a=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,n[i]={type:AG,value:`${Jn(a.subarray(0,4))}-${Jn(a.subarray(4,6))}-${Jn(a.subarray(6,8))}-${Jn(a.subarray(8,10))}-${Jn(a.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return n}}var tT;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(tT||(tT={}));const nT="boolean",vG="byte",_G="short",xG="integer",EG="long",SG="binary",bG="string",TG="timestamp",AG="uuid",CG=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,oN=4,yi=oN*2,Eo=4,IG=yi+Eo*2;function kG({byteLength:t,byteOffset:e,buffer:n}){if(t<IG)throw new Error("Provided message too short to accommodate event stream message overhead");const r=new DataView(n,e,t),s=r.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");const i=r.getUint32(oN,!1),o=r.getUint32(yi,!1),l=r.getUint32(t-Eo,!1),a=new af().update(new Uint8Array(n,e,yi));if(o!==a.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${a.digest()})`);if(a.update(new Uint8Array(n,e+yi,t-(yi+Eo))),l!==a.digest())throw new Error(`The message checksum (${a.digest()}) did not match the expected value of ${l}`);return{headers:new DataView(n,e+yi+Eo,i),body:new Uint8Array(n,e+yi+Eo+i,s-i-(yi+Eo+Eo))}}class RG{constructor(e,n){j(this,"headerMarshaller");j(this,"messageBuffer");j(this,"isEndOfStream");this.headerMarshaller=new wG(e,n),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){const e=this.messageBuffer.pop(),n=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return n}}}getAvailableMessages(){const e=this.messageBuffer;this.messageBuffer=[];const n=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return n}}}encode({headers:e,body:n}){const r=this.headerMarshaller.format(e),s=r.byteLength+n.byteLength+16,i=new Uint8Array(s),o=new DataView(i.buffer,i.byteOffset,i.byteLength),l=new af;return o.setUint32(0,s,!1),o.setUint32(4,r.byteLength,!1),o.setUint32(8,l.update(i.subarray(0,8)).digest(),!1),i.set(r,12),i.set(n,r.byteLength+12),o.setUint32(s-4,l.update(i.subarray(8,s-4)).digest(),!1),i}decode(e){const{headers:n,body:r}=kG(e);return{headers:this.headerMarshaller.parse(n),body:r}}formatHeaders(e){return this.headerMarshaller.format(e)}}class PG{constructor(e){j(this,"options");this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.decoder.decode(e)}}class NG{constructor(e){j(this,"options");this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class DG{constructor(e){j(this,"options");this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream){const n=await this.options.deserializer(e);n!==void 0&&(yield n)}}}class MG{constructor(e){j(this,"options");this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.serializer(e)}}function OG(t){let e=0,n=0,r=null,s=null;const i=l=>{if(typeof l!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+l);e=l,n=4,r=new Uint8Array(l),new DataView(r.buffer).setUint32(0,l,!1)},o=async function*(){const l=t[Symbol.asyncIterator]();for(;;){const{value:a,done:u}=await l.next();if(u){if(e)if(e===n)yield r;else throw new Error("Truncated event message received.");else return;return}const d=a.length;let h=0;for(;h<d;){if(!r){const g=d-h;s||(s=new Uint8Array(4));const w=Math.min(4-n,g);if(s.set(a.slice(h,h+w),n),n+=w,h+=w,n<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}const f=Math.min(e-n,d-h);r.set(a.slice(h,h+f),n),n+=f,h+=f,e&&e===n&&(yield r,r=null,e=0,n=0)}}};return{[Symbol.asyncIterator]:o}}function jG(t,e){return async function(n){const{value:r}=n.headers[":message-type"];if(r==="error"){const s=new Error(n.headers[":error-message"].value||"UnknownError");throw s.name=n.headers[":error-code"].value,s}else if(r==="exception"){const s=n.headers[":exception-type"].value,i={[s]:n},o=await t(i);if(o.$unknown){const l=new Error(e(n.body));throw l.name=s,l}throw o[s]}else if(r==="event"){const s={[n.headers[":event-type"].value]:n},i=await t(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${n.headers[":event-type"].value}`)}}let UG=class{constructor({utf8Encoder:e,utf8Decoder:n}){j(this,"eventStreamCodec");j(this,"utfEncoder");this.eventStreamCodec=new RG(e,n),this.utfEncoder=e}deserialize(e,n){const r=OG(e);return new DG({messageStream:new PG({inputStream:r,decoder:this.eventStreamCodec}),deserializer:jG(n,this.utfEncoder)})}serialize(e,n){return new NG({messageStream:new MG({inputStream:e,serializer:n}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const LG=t=>({[Symbol.asyncIterator]:async function*(){const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)return;yield r}}finally{e.releaseLock()}}}),FG=t=>{const e=t[Symbol.asyncIterator]();return new ReadableStream({async pull(n){const{done:r,value:s}=await e.next();if(r)return n.close();n.enqueue(s)}})};class BG{constructor({utf8Encoder:e,utf8Decoder:n}){j(this,"universalMarshaller");this.universalMarshaller=new UG({utf8Decoder:n,utf8Encoder:e})}deserialize(e,n){const r=VG(e)?LG(e):e;return this.universalMarshaller.deserialize(r,n)}serialize(e,n){const r=this.universalMarshaller.serialize(e,n);return typeof ReadableStream=="function"?FG(r):r}}const VG=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,$G=t=>new BG(t);async function zG(t,e,n=1024*1024){const r=t.size;let s=0;for(;s<r;){const i=t.slice(s,Math.min(r,s+n));e(new Uint8Array(await i.arrayBuffer())),s+=i.size}}const qG=async function(e,n){const r=new e;return await zG(n,s=>{r.update(s)}),r.digest()},HG=t=>()=>Promise.reject(t),mi=64,WG=16,GG=[1732584193,4023233417,2562383102,271733878];class KG{constructor(){j(this,"state");j(this,"buffer");j(this,"bufferLength");j(this,"bytesHashed");j(this,"finished");this.reset()}update(e){if(JG(e))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const n=QG(e);let r=0,{byteLength:s}=n;for(this.bytesHashed+=s;s>0;)this.buffer.setUint8(this.bufferLength++,n[r++]),s--,this.bufferLength===mi&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:n,bufferLength:r,bytesHashed:s}=this,i=s*8;if(n.setUint8(this.bufferLength++,128),r%mi>=mi-8){for(let o=this.bufferLength;o<mi;o++)n.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(let o=this.bufferLength;o<mi-8;o++)n.setUint8(o,0);n.setUint32(mi-8,i>>>0,!0),n.setUint32(mi-4,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}const e=new DataView(new ArrayBuffer(WG));for(let n=0;n<4;n++)e.setUint32(n*4,this.state[n],!0);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}hashBuffer(){const{buffer:e,state:n}=this;let r=n[0],s=n[1],i=n[2],o=n[3];r=bn(r,s,i,o,e.getUint32(0,!0),7,3614090360),o=bn(o,r,s,i,e.getUint32(4,!0),12,3905402710),i=bn(i,o,r,s,e.getUint32(8,!0),17,606105819),s=bn(s,i,o,r,e.getUint32(12,!0),22,3250441966),r=bn(r,s,i,o,e.getUint32(16,!0),7,4118548399),o=bn(o,r,s,i,e.getUint32(20,!0),12,1200080426),i=bn(i,o,r,s,e.getUint32(24,!0),17,2821735955),s=bn(s,i,o,r,e.getUint32(28,!0),22,4249261313),r=bn(r,s,i,o,e.getUint32(32,!0),7,1770035416),o=bn(o,r,s,i,e.getUint32(36,!0),12,2336552879),i=bn(i,o,r,s,e.getUint32(40,!0),17,4294925233),s=bn(s,i,o,r,e.getUint32(44,!0),22,2304563134),r=bn(r,s,i,o,e.getUint32(48,!0),7,1804603682),o=bn(o,r,s,i,e.getUint32(52,!0),12,4254626195),i=bn(i,o,r,s,e.getUint32(56,!0),17,2792965006),s=bn(s,i,o,r,e.getUint32(60,!0),22,1236535329),r=Tn(r,s,i,o,e.getUint32(4,!0),5,4129170786),o=Tn(o,r,s,i,e.getUint32(24,!0),9,3225465664),i=Tn(i,o,r,s,e.getUint32(44,!0),14,643717713),s=Tn(s,i,o,r,e.getUint32(0,!0),20,3921069994),r=Tn(r,s,i,o,e.getUint32(20,!0),5,3593408605),o=Tn(o,r,s,i,e.getUint32(40,!0),9,38016083),i=Tn(i,o,r,s,e.getUint32(60,!0),14,3634488961),s=Tn(s,i,o,r,e.getUint32(16,!0),20,3889429448),r=Tn(r,s,i,o,e.getUint32(36,!0),5,568446438),o=Tn(o,r,s,i,e.getUint32(56,!0),9,3275163606),i=Tn(i,o,r,s,e.getUint32(12,!0),14,4107603335),s=Tn(s,i,o,r,e.getUint32(32,!0),20,1163531501),r=Tn(r,s,i,o,e.getUint32(52,!0),5,2850285829),o=Tn(o,r,s,i,e.getUint32(8,!0),9,4243563512),i=Tn(i,o,r,s,e.getUint32(28,!0),14,1735328473),s=Tn(s,i,o,r,e.getUint32(48,!0),20,2368359562),r=An(r,s,i,o,e.getUint32(20,!0),4,4294588738),o=An(o,r,s,i,e.getUint32(32,!0),11,2272392833),i=An(i,o,r,s,e.getUint32(44,!0),16,1839030562),s=An(s,i,o,r,e.getUint32(56,!0),23,4259657740),r=An(r,s,i,o,e.getUint32(4,!0),4,2763975236),o=An(o,r,s,i,e.getUint32(16,!0),11,1272893353),i=An(i,o,r,s,e.getUint32(28,!0),16,4139469664),s=An(s,i,o,r,e.getUint32(40,!0),23,3200236656),r=An(r,s,i,o,e.getUint32(52,!0),4,681279174),o=An(o,r,s,i,e.getUint32(0,!0),11,3936430074),i=An(i,o,r,s,e.getUint32(12,!0),16,3572445317),s=An(s,i,o,r,e.getUint32(24,!0),23,76029189),r=An(r,s,i,o,e.getUint32(36,!0),4,3654602809),o=An(o,r,s,i,e.getUint32(48,!0),11,3873151461),i=An(i,o,r,s,e.getUint32(60,!0),16,530742520),s=An(s,i,o,r,e.getUint32(8,!0),23,3299628645),r=Cn(r,s,i,o,e.getUint32(0,!0),6,4096336452),o=Cn(o,r,s,i,e.getUint32(28,!0),10,1126891415),i=Cn(i,o,r,s,e.getUint32(56,!0),15,2878612391),s=Cn(s,i,o,r,e.getUint32(20,!0),21,4237533241),r=Cn(r,s,i,o,e.getUint32(48,!0),6,1700485571),o=Cn(o,r,s,i,e.getUint32(12,!0),10,2399980690),i=Cn(i,o,r,s,e.getUint32(40,!0),15,4293915773),s=Cn(s,i,o,r,e.getUint32(4,!0),21,2240044497),r=Cn(r,s,i,o,e.getUint32(32,!0),6,1873313359),o=Cn(o,r,s,i,e.getUint32(60,!0),10,4264355552),i=Cn(i,o,r,s,e.getUint32(24,!0),15,2734768916),s=Cn(s,i,o,r,e.getUint32(52,!0),21,1309151649),r=Cn(r,s,i,o,e.getUint32(16,!0),6,4149444226),o=Cn(o,r,s,i,e.getUint32(44,!0),10,3174756917),i=Cn(i,o,r,s,e.getUint32(8,!0),15,718787259),s=Cn(s,i,o,r,e.getUint32(36,!0),21,3951481745),n[0]=r+n[0]&4294967295,n[1]=s+n[1]&4294967295,n[2]=i+n[2]&4294967295,n[3]=o+n[3]&4294967295}reset(){this.state=Uint32Array.from(GG),this.buffer=new DataView(new ArrayBuffer(mi)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function Np(t,e,n,r,s,i){return e=(e+t&4294967295)+(r+i&4294967295)&4294967295,(e<<s|e>>>32-s)+n&4294967295}function bn(t,e,n,r,s,i,o){return Np(e&n|~e&r,t,e,s,i,o)}function Tn(t,e,n,r,s,i,o){return Np(e&r|n&~r,t,e,s,i,o)}function An(t,e,n,r,s,i,o){return Np(e^n^r,t,e,s,i,o)}function Cn(t,e,n,r,s,i,o){return Np(n^(e|~r),t,e,s,i,o)}function JG(t){return typeof t=="string"?t.length===0:t.byteLength===0}function QG(t){return typeof t=="string"?to(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}const XG=["in-region","cross-region","mobile","standard","legacy"],YG=({defaultsMode:t}={})=>E9(async()=>{const e=typeof t=="function"?await t():t;switch(e==null?void 0:e.toLowerCase()){case"auto":return Promise.resolve(ZG()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e==null?void 0:e.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${XG.join(", ")}, got ${e}`)}}),ZG=()=>{var e;const t=window==null?void 0:window.navigator;if(t!=null&&t.connection){const{effectiveType:n,rtt:r,downlink:s}=t==null?void 0:t.connection;if(typeof n=="string"&&n!=="4g"||Number(r)>100||Number(s)<10)return!0}return((e=t==null?void 0:t.userAgentData)==null?void 0:e.mobile)||typeof(t==null?void 0:t.maxTouchPoints)=="number"&&(t==null?void 0:t.maxTouchPoints)>1},eK=t=>({apiVersion:"2006-03-01",base64Decoder:(t==null?void 0:t.base64Decoder)??fl,base64Encoder:(t==null?void 0:t.base64Encoder)??Jo,disableHostPrefix:(t==null?void 0:t.disableHostPrefix)??!1,endpointProvider:(t==null?void 0:t.endpointProvider)??vP,extensions:(t==null?void 0:t.extensions)??[],getAwsChunkedEncodingStream:(t==null?void 0:t.getAwsChunkedEncodingStream)??O8,httpAuthSchemeProvider:(t==null?void 0:t.httpAuthSchemeProvider)??Iq,httpAuthSchemes:(t==null?void 0:t.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new i2},{schemeId:"aws.auth#sigv4a",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4a"),signer:new p8}],logger:(t==null?void 0:t.logger)??new Mv,protocol:(t==null?void 0:t.protocol)??new y$({defaultNamespace:"com.amazonaws.s3",xmlNamespace:"http://s3.amazonaws.com/doc/2006-03-01/"}),sdkStreamMixin:(t==null?void 0:t.sdkStreamMixin)??d2,serviceId:(t==null?void 0:t.serviceId)??"S3",signerConstructor:(t==null?void 0:t.signerConstructor)??nP,signingEscapePath:(t==null?void 0:t.signingEscapePath)??!1,urlParser:(t==null?void 0:t.urlParser)??uf,useArnRegion:(t==null?void 0:t.useArnRegion)??void 0,utf8Decoder:(t==null?void 0:t.utf8Decoder)??to,utf8Encoder:(t==null?void 0:t.utf8Encoder)??Rl}),tK=t=>{const e=YG(t),n=()=>e().then(t$),r=eK(t);return{...r,...t,runtime:"browser",defaultsMode:e,bodyLengthChecker:(t==null?void 0:t.bodyLengthChecker)??Y9,credentialDefaultProvider:(t==null?void 0:t.credentialDefaultProvider)??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(t==null?void 0:t.defaultUserAgentProvider)??yG({serviceId:r.serviceId,clientVersion:ZW.version}),eventStreamSerdeProvider:(t==null?void 0:t.eventStreamSerdeProvider)??$G,maxAttempts:(t==null?void 0:t.maxAttempts)??cf,md5:(t==null?void 0:t.md5)??KG,region:(t==null?void 0:t.region)??HG("Region is missing"),requestHandler:Cv.create((t==null?void 0:t.requestHandler)??n),retryMode:(t==null?void 0:t.retryMode)??(async()=>(await n()).retryMode||j7),sha1:(t==null?void 0:t.sha1)??aG,sha256:(t==null?void 0:t.sha256)??gG,streamCollector:(t==null?void 0:t.streamCollector)??l2,streamHasher:(t==null?void 0:t.streamHasher)??qG,useDualstackEndpoint:(t==null?void 0:t.useDualstackEndpoint)??(()=>Promise.resolve(g7)),useFipsEndpoint:(t==null?void 0:t.useFipsEndpoint)??(()=>Promise.resolve(y7))}},nK=t=>({setRegion(e){t.region=e},region(){return t.region}}),rK=t=>({region:t.region()}),sK=t=>{const e=t.httpAuthSchemes;let n=t.httpAuthSchemeProvider,r=t.credentials;return{setHttpAuthScheme(s){const i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){r=s},credentials(){return r}}},iK=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),oK=(t,e)=>{const n=Object.assign(nK(t),o$(t),s8(t),sK(t));return e.forEach(r=>r.configure(n)),Object.assign(t,rK(n),a$(n),i8(n),iK(n))};class aK extends Z9{constructor(...[n]){const r=tK(n||{});super(r);j(this,"config");this.initConfig=r;const s=Rq(r),i=Dz(s),o=V$(i),l=tq(o),a=_7(l),u=a,d=O7(u),h=x7(d),f=kq(h),g=vz(f,{session:[()=>this,XW]}),w=oK(g,(n==null?void 0:n.extensions)||[]);this.config=w,this.middlewareStack.use(K8(this.config)),this.middlewareStack.use(m7(this.config)),this.middlewareStack.use(lq(this.config)),this.middlewareStack.use(b7(this.config)),this.middlewareStack.use(q$(this.config)),this.middlewareStack.use(G$(this.config)),this.middlewareStack.use(Q$(this.config)),this.middlewareStack.use(v8(this.config,{httpAuthSchemeParametersProvider:Tq,identityProviderConfigProvider:async E=>new y9({"aws.auth#sigv4":E.credentials,"aws.auth#sigv4a":E.credentials})})),this.middlewareStack.use(b8(this.config)),this.middlewareStack.use(Rz(this.config)),this.middlewareStack.use(u8(this.config)),this.middlewareStack.use(oz(this.config)),this.middlewareStack.use(fz(this.config)),this.middlewareStack.use(wz(this.config))}destroy(){super.destroy()}}function lK(t){return e=>async n=>{const r={...n.input},s=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const i of s){const o=r[i.target];if(o){let l;typeof o=="string"?dK(o,t)?l=t.base64Decoder(o):(l=t.utf8Decoder(o),r[i.target]=t.base64Encoder(l)):(l=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o),r[i.target]=t.base64Encoder(l));const a=new t.md5;a.update(l),r[i.hash]=t.base64Encoder(await a.digest())}}return e({...n,input:r})}}const uK={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},cK=t=>({applyToStack:e=>{e.add(lK(t),uK)}});function dK(t,e){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t))return!1;try{return e.base64Decoder(t).length===32}catch{return!1}}class hK extends Dv.classBuilder().ep({...EP,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,n,r,s){return[Y2(r,e.getEndpointParameterInstructions()),B$(r,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),tz(),O2(r),cK(r)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").sc(QW).build(){}const aN="https://files.devdlfjstizlzl.xyz",fK="dlfjstizlzl",pK="@@zlzl1234",lN="pandora-assets",mK=new aK({region:"us-east-1",endpoint:aN,credentials:{accessKeyId:fK,secretAccessKey:pK},forcePathStyle:!0});function gK(t,e){const n=t.name.split(".").pop()||"bin",r=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID().replace(/-/g,"").slice(0,12):Math.random().toString(36).slice(2,10);return`${e.replace(/^\/+|\/+$/g,"")}/${Date.now()}_${r}.${n}`}function yK(t){return`${aN.replace(/\/+$/,"")}/${lN}/${t}`}async function Eg(t,e){if(!t)throw new Error("No file provided for upload.");try{const n=gK(t,e),r=await t.arrayBuffer(),s=new hK({Bucket:lN,Key:n,Body:new Uint8Array(r),ContentType:t.type||"application/octet-stream",ContentLength:t.size});return await mK.send(s),yK(n)}catch(n){throw console.error("File upload failed",n),new Error("Upload failed. Please try again.")}}async function wK(){return Ps.currentUser||await XU(Ps),Ps.currentUser}async function vK(t){var r;await wK();const e=Object.fromEntries(Object.entries(t).filter(([,s])=>s!==void 0));return(await xc(Qt(He,"transmissions"),{...e,uid:((r=Ps.currentUser)==null?void 0:r.uid)??null,createdAt:bs()})).id}const g0="pandora-locale",ah=["ko","en","ja","zh","ru","es"],_K=()=>{if(typeof window>"u")return"ko";const t=window.localStorage.getItem(g0);if(t&&ah.includes(t))return t;const e=navigator.language.toLowerCase();return e.startsWith("ko")?"ko":e.startsWith("ja")?"ja":e.startsWith("zh")?"zh":e.startsWith("ru")?"ru":e.startsWith("es")?"es":"en"},Kv=xl((t,e)=>({locale:_K(),setLocale:n=>{t({locale:n}),typeof window<"u"&&window.localStorage.setItem(g0,n)},toggleLocale:()=>{const n=e().locale,r=ah.indexOf(n),s=ah[(r+1)%ah.length];t({locale:s}),typeof window<"u"&&window.localStorage.setItem(g0,s)}})),rT={en:{"auth.title":"Authenticate","auth.login":"Login","auth.signup":"Sign Up","auth.email":"Email","auth.password":"Password","auth.loginEmail":"Login with Email","auth.createAccount":"Create Account","auth.or":"or","auth.google":"Continue with Google","auth.signOut":"Sign out","auth.accessRequired":"Access Required","auth.enter":"Authenticate to enter PANDORA","auth.nickname":"Nickname","auth.nicknameSkip":"Skip","auth.nicknameHint":"Skip to join with a random anonymous ID.","nav.home":"Home","nav.sectors":"Sectors","nav.samples":"Samples","nav.messages":"Messages","nav.search":"Search","nav.settings":"Settings","nav.admin":"Admin","banner.default":"[SYSTEM: Experimental overlay active]","banner.feedLive":"[FEED LIVE]","banner.authRequired":"[AUTH REQUIRED]","banner.transmissions":"[TRANSMISSIONS STREAM]"},ko:{"auth.title":"","auth.login":"","auth.signup":"","auth.email":"","auth.password":"","auth.loginEmail":" ","auth.createAccount":" ","auth.or":"","auth.google":" ","auth.signOut":"","auth.accessRequired":" ","auth.enter":"PANDORA   ","auth.nickname":"","auth.nicknameSkip":"","auth.nicknameHint":"     .","nav.home":"","nav.sectors":"","nav.samples":"","nav.messages":"","nav.search":"","nav.settings":"","nav.admin":"","banner.default":"[:    ]","banner.feedLive":"[ ]","banner.authRequired":"[ ]","banner.transmissions":"[ ]"},ja:{"auth.title":"","auth.login":"","auth.signup":"","auth.email":"","auth.password":"","auth.loginEmail":"","auth.createAccount":"","auth.or":"","auth.google":"Google","auth.signOut":"","auth.accessRequired":"","auth.enter":"PANDORA","auth.nickname":"","auth.nicknameSkip":"","auth.nicknameHint":"ID","nav.home":"","nav.sectors":"","nav.samples":"","nav.messages":"","nav.search":"","nav.settings":"","nav.admin":"","banner.default":"[: ]","banner.feedLive":"[ ]","banner.authRequired":"[]","banner.transmissions":"[]"},zh:{"auth.title":"","auth.login":"","auth.signup":"","auth.email":"","auth.password":"","auth.loginEmail":"","auth.createAccount":"","auth.or":"","auth.google":"","auth.signOut":"","auth.accessRequired":"","auth.enter":" PANDORA ","auth.nickname":"","auth.nicknameSkip":"","auth.nicknameHint":"ID","nav.home":"","nav.sectors":"","nav.samples":"","nav.messages":"","nav.search":"","nav.settings":"","nav.admin":"","banner.default":"[: ]","banner.feedLive":"[]","banner.authRequired":"[]","banner.transmissions":"[]"},ru:{"auth.title":"","auth.login":"","auth.signup":"","auth.email":"","auth.password":"","auth.loginEmail":"  ","auth.createAccount":" ","auth.or":"","auth.google":"  Google","auth.signOut":"","auth.accessRequired":" ","auth.enter":",    PANDORA","auth.nickname":"","auth.nicknameSkip":"","auth.nicknameHint":",     ID.","nav.home":"","nav.sectors":"","nav.samples":"","nav.messages":"","nav.search":"","nav.settings":"","nav.admin":"","banner.default":"[:   ]","banner.feedLive":"[  ]","banner.authRequired":"[ ]","banner.transmissions":"[ ]"},es:{"auth.title":"Autenticacin","auth.login":"Iniciar sesin","auth.signup":"Crear cuenta","auth.email":"Correo","auth.password":"Contrasea","auth.loginEmail":"Entrar con correo","auth.createAccount":"Crear cuenta","auth.or":"o","auth.google":"Continuar con Google","auth.signOut":"Cerrar sesin","auth.accessRequired":"Acceso requerido","auth.enter":"Autentcate para entrar a PANDORA","auth.nickname":"Apodo","auth.nicknameSkip":"Saltar","auth.nicknameHint":"Si saltas, usaremos un ID annimo aleatorio.","nav.home":"Inicio","nav.sectors":"Sectores","nav.samples":"Muestras","nav.messages":"Mensajes","nav.search":"Buscar","nav.settings":"Ajustes","nav.admin":"Admin","banner.default":"[SISTEMA: superposicin experimental activa]","banner.feedLive":"[FEED EN VIVO]","banner.authRequired":"[SE REQUIERE ACCESO]","banner.transmissions":"[CORRIENTE DE DATOS]"}};function xK(t,e){var r;const n=e??Kv.getState().locale;return((r=rT[n])==null?void 0:r[t])||rT.en[t]||t}function Jv(){const t=Kv(e=>e.locale);return e=>xK(e,t)}function uN(){const[t,e]=N.useState("login"),[n,r]=N.useState(""),[s,i]=N.useState(""),[o,l]=N.useState(""),{user:a,loading:u,error:d,signInWithGoogle:h,loginWithEmail:f,registerWithEmail:g,logout:w,setError:E}=Lr(),b=Jv(),v=()=>`${Math.floor(100+Math.random()*900)}`,x=async T=>{if(T.preventDefault(),!n||!s){E("Email and password are required.");return}if(t==="login")await f(n,s);else{const D=o.trim()||v();await g(n,s,D)}};return a?p.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm space-y-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 border border-pandora-border rounded-full flex items-center justify-center",children:p.jsx(cE,{size:18,className:"text-pandora-neon"})}),p.jsxs("div",{className:"min-w-0",children:[p.jsx("p",{className:"text-sm text-pandora-text truncate",children:a.displayName||a.email||"Authenticated"}),p.jsx("p",{className:"text-xs text-pandora-muted font-mono truncate",children:a.email??"Google Account"})]})]}),p.jsxs("button",{onClick:w,disabled:u,className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-xs uppercase border border-pandora-border text-pandora-muted hover:border-pandora-neon hover:text-pandora-neon rounded-sm transition disabled:opacity-60",children:[u?p.jsx(Xt,{size:14,className:"animate-spin"}):p.jsx(OO,{size:14}),b("auth.signOut")]})]}):p.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(MO,{size:16,className:"text-pandora-neon"}),p.jsx("p",{className:"text-sm font-semibold uppercase text-pandora-text",children:b("auth.title")})]}),p.jsx("div",{className:"flex gap-2 text-xs font-semibold uppercase",children:["login","signup"].map(T=>p.jsx("button",{onClick:()=>{e(T),E(null)},className:on("flex-1 border border-pandora-border py-2 rounded-sm",t===T?"border-pandora-neon text-pandora-neon":"text-pandora-muted hover:border-pandora-neon"),children:b(T==="login"?"auth.login":"auth.signup")},T))}),p.jsxs("form",{onSubmit:x,className:"space-y-3",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:b("auth.email")}),p.jsx("input",{type:"email",value:n,onChange:T=>r(T.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon",placeholder:"you@example.com",autoComplete:"email"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:b("auth.password")}),p.jsx("input",{type:"password",value:s,onChange:T=>i(T.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon",placeholder:"",autoComplete:t==="login"?"current-password":"new-password"})]}),t==="signup"&&p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:b("auth.nickname")}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:o,onChange:T=>l(T.target.value),className:"flex-1 bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon",placeholder:": NeonFox",maxLength:24}),p.jsx("button",{type:"button",onClick:()=>l(v()),className:"px-3 py-2 text-xs uppercase border border-pandora-border text-pandora-text rounded-sm hover:border-pandora-neon",children:b("auth.nicknameSkip")})]}),p.jsx("p",{className:"text-[11px] text-pandora-muted",children:b("auth.nicknameHint")})]}),d&&p.jsx("p",{className:"text-xs text-pandora-pink",children:d}),p.jsxs("button",{type:"submit",disabled:u,className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-xs uppercase border border-pandora-neon text-pandora-neon rounded-sm hover:bg-pandora-neon hover:text-pandora-bg transition disabled:opacity-60",children:[u?p.jsx(Xt,{size:14,className:"animate-spin"}):p.jsx(jO,{size:14}),b(t==="login"?"auth.loginEmail":"auth.createAccount")]})]}),p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute inset-0 flex items-center",children:p.jsx("div",{className:"w-full border-t border-pandora-border"})}),p.jsx("div",{className:"relative flex justify-center text-xs uppercase text-pandora-muted",children:p.jsx("span",{className:"bg-pandora-surface px-2",children:b("auth.or")})})]}),p.jsxs("button",{onClick:h,disabled:u,className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-xs uppercase border border-pandora-border text-pandora-text rounded-sm hover:border-pandora-neon hover:text-pandora-neon transition disabled:opacity-60",children:[u?p.jsx(Xt,{size:14,className:"animate-spin"}):p.jsx(cE,{size:14}),b("auth.google")]})]})}const sT={logic:50,altruism:50,aggression:50,credit:50};async function Qv(t){const e=nr(He,"profiles",t.uid),n=await yp(e),r={uid:t.uid,displayName:t.displayName||t.email||"New Subject",displayNameLower:(t.displayName||t.email||"New Subject").toLowerCase(),email:t.email??null,photoURL:t.photoURL??null,stats:sT,role:"user",createdAt:bs(),updatedAt:bs()};if(!n.exists())return await wp(e,r),r;const s=n.data();return{...r,...s,uid:t.uid,stats:s.stats||sT,displayNameLower:(s.displayName||r.displayName).toLowerCase()}}async function EK(t,e){const n=nr(He,"profiles",t),r=e.displayName?{displayNameLower:e.displayName.toLowerCase()}:{};await rf(n,{...e,...r,updatedAt:bs()})}function SK(t){const e=nr(He,"experiments","global");return Ln(e,n=>{if(!n.exists()){t(null);return}t(n.data())})}async function bK(t){const e=nr(He,"experiments","global");await wp(e,t,{merge:!0})}function TK(){const t=ea();Pr(X=>X.experimentMode),Pr(X=>X.setExperimentMode);const e=Pr(X=>X.userStats),n=Pr(X=>X.setUserStats),{user:r,loading:s,initialized:i}=Lr(),{profile:o,setProfile:l}=r2(),{locale:a,setLocale:u}=Kv(),d=Jv(),[h,f]=N.useState(!1),[g,w]=N.useState(!1),[E,b]=N.useState(""),[v,x]=N.useState("TEXT"),[T,D]=N.useState(null),[L,V]=N.useState([]),[I,C]=N.useState([]),[_,k]=N.useState(null),[P,O]=N.useState(!1),[S,Z]=N.useState(null),[ie,je]=N.useState(null),[et,te]=N.useState(!1),[me,Ee]=N.useState(!0),[Ie,We]=N.useState(!1),[pt,St]=N.useState(!1),ut=N.useRef(null),Ge=N.useRef(null),nt=N.useRef(null),[ir,or]=N.useState(!1),[Zr,Ht]=N.useState(0),[Fr,Er]=N.useState(!1),[Q,ae]=N.useState(0);N.useEffect(()=>{const X=E.toLowerCase().includes("#order");w(X)},[E]),N.useEffect(()=>{(async()=>{if(!r){l(null);return}const pe=await Qv({uid:r.uid,displayName:r.displayName,email:r.email,photoURL:r.photoURL});n(pe.stats),l({...pe,role:pe.role||"user"})})().catch(()=>{})},[r,n,l]),N.useEffect(()=>{const X=SK(pe=>je(pe));return()=>X()},[]);const de=[{code:"ko",label:""},{code:"en",label:"English"},{code:"ja",label:""},{code:"zh",label:""},{code:"ru",label:""},{code:"es",label:"Espaol"}],ge=[{to:"/",label:d("nav.home"),icon:RO},{to:"/search",label:d("nav.search"),icon:XC},{to:"/sectors",label:d("nav.sectors"),icon:JC},{to:"/samples",label:d("nav.samples"),icon:Vf},{to:"/messages",label:d("nav.messages"),icon:rl},{to:"/settings",label:d("nav.settings"),icon:ZC},...(o==null?void 0:o.role)==="admin"?[{to:"/admin",label:d("nav.admin"),icon:eI}]:[]],Ne=t.pathname.startsWith("/samples"),Qe=t.pathname.startsWith("/t/"),Ae=t.pathname.startsWith("/messages"),bt=!Ae&&me,Sr=t.pathname==="/"||t.pathname.startsWith("/sectors"),ri=()=>{b(""),D(null),V([]),C([]),k(null),x("TEXT"),w(!1),O(!1),Z(null)},Xe=()=>{f(!1),ri()},vn=async X=>{const pe=await Eg(X,"samples");return D(pe),k(null),pe},en=async X=>{const pe=await Eg(X,"attachments");return V(xe=>[...xe,{url:pe,name:X.name,contentType:X.type}]),pe},As=async()=>{const X=E.trim();if(!(!(v==="TEXT"?X.length>0||L.length>0||I.length>0:T||_)||P)){O(!0),Z(null);try{let xe=[...L];if(v==="TEXT"&&I.length){for(const Ye of I){const $n=await Eg(Ye,"attachments");xe.push({url:$n,name:Ye.name,contentType:Ye.type})}V(xe),C([])}let Ke=T;v==="SAMPLES"&&!T&&_&&(Ke=await vn(_)),await vK({type:v==="TEXT"?"text":"sample",content:v==="TEXT"&&X||void 0,attachments:v==="TEXT"?xe:void 0,sampleUrl:v==="SAMPLES"?Ke??void 0:void 0}),Xe()}catch(xe){const Ke=xe instanceof Error?xe.message:"Failed to submit. Please try again.";Z(Ke)}finally{O(!1)}}},es=v==="TEXT"?E.trim().length>0||L.length>0||I.length>0:!!(T||_);if(!i||s)return p.jsx("div",{className:"h-dvh flex items-center justify-center bg-pandora-bg text-pandora-text",children:p.jsxs("div",{className:"flex items-center gap-3 text-sm uppercase font-semibold",children:[p.jsx(Xt,{className:"animate-spin text-pandora-text",size:18}),"Initializing..."]})});if(!r)return p.jsx("div",{className:"min-h-dvh bg-pandora-bg text-pandora-text flex items-center justify-center px-4",children:p.jsxs("div",{className:"w-full max-w-md space-y-4",children:[p.jsxs("div",{className:"text-center space-y-2",children:[p.jsx("p",{className:"text-sm uppercase text-pandora-muted font-semibold",children:d("auth.accessRequired")}),p.jsx("p",{className:"text-lg font-semibold text-pandora-text",children:d("auth.enter")})]}),p.jsx(uN,{})]})});const oa=X=>{var Ye;const pe=((Ye=X.touches[0])==null?void 0:Ye.clientX)??0;if(window.innerWidth>1024)return;const xe=320;if(Ie&&pe<=280+20){ut.current=pe,Ge.current="left",or(!0),Ht(1);return}if(pt&&pe>=window.innerWidth-(xe+20)){ut.current=pe,Ge.current="right",Er(!0),ae(1);return}if(!Ie&&pe<40){ut.current=pe,Ge.current="left",or(!0),Ht(0);return}!pt&&pe>window.innerWidth-40&&(ut.current=pe,Ge.current="right",Er(!0),ae(0))},Nl=X=>{var Ke;if(ut.current===null)return;const pe=((Ke=X.changedTouches[0])==null?void 0:Ke.clientX)??0,xe=pe-ut.current;if(Ge.current==="left"){const Ye=Ie?Zr>.35:xe>90||Zr>.55;We(Ye),or(!1),Ht(0)}else if(Ge.current==="right"){const Ye=ut.current-pe,$n=pt?Q>.35:Ye>80||Q>.55;St($n),Er(!1),ae(0)}ut.current=null,Ge.current=null},si=X=>{var Ye;if(ut.current===null)return;const pe=((Ye=X.touches[0])==null?void 0:Ye.clientX)??0,xe=320,Ke=280;if(Ge.current==="left"&&ir)if(Ie){const $n=Math.max(0,Math.min(Ke,ut.current-pe));Ht(Math.max(0,1-$n/Ke))}else{const $n=Math.max(0,Math.min(Ke,pe-ut.current));Ht($n/Ke)}if(Ge.current==="right"&&Fr)if(pt){const $n=Math.max(0,Math.min(xe,pe-ut.current));ae(Math.max(0,1-$n/xe))}else{const $n=Math.max(0,Math.min(xe,ut.current-pe));ae($n/xe)}},aa=X=>{if(window.innerWidth>1024)return;const pe=X.clientX;if(pt&&pe>=window.innerWidth-(320+20)){nt.current=pe,Ge.current="right",Er(!0),ae(1);return}!pt&&pe>window.innerWidth-16&&(nt.current=pe,Ge.current="right",Er(!0),ae(0))},fo=X=>{if(nt.current===null||!Fr)return;const pe=X.clientX,xe=320;if(pt){const Ke=Math.max(0,Math.min(xe,pe-nt.current));ae(Math.max(0,1-Ke/xe))}else{const Ke=Math.max(0,Math.min(xe,nt.current-pe));ae(Ke/xe)}},Dl=X=>{if(nt.current===null||!Fr)return;const pe=X.clientX,xe=nt.current-pe,Ke=pt?Q>.35:xe>80||Q>.55;St(Ke),Er(!1),ae(0),nt.current=null,Ge.current=null},Ml=X=>{if(window.innerWidth>1024)return;const pe=X.clientX;if(Ie&&pe<=280+20){nt.current=pe,Ge.current="left",or(!0),Ht(1);return}!Ie&&pe<24&&(nt.current=pe,Ge.current="left",or(!0),Ht(0))},Cs=X=>{if(nt.current===null||!ir)return;const pe=X.clientX,xe=280;if(Ie){const Ke=Math.max(0,Math.min(xe,nt.current-pe));Ht(Math.max(0,1-Ke/xe))}else{const Ke=Math.max(0,Math.min(xe,pe-nt.current));Ht(Ke/xe)}},Ol=X=>{if(nt.current===null||!ir)return;const xe=X.clientX-nt.current,Ke=Ie?Zr>.35:xe>90||Zr>.55;We(Ke),or(!1),Ht(0),nt.current=null,Ge.current=null};return p.jsxs("div",{className:"h-dvh overflow-hidden bg-pandora-bg text-pandora-text",onTouchStart:oa,onTouchEnd:Nl,onTouchMove:si,onMouseDown:Ml,onMouseMove:Cs,onMouseUp:Ol,onMouseLeave:Ol,onMouseDownCapture:aa,onMouseMoveCapture:fo,onMouseUpCapture:Dl,children:[!Ie&&p.jsx("div",{className:"lg:hidden fixed left-1 top-1/2 -translate-y-1/2 z-40 pointer-events-none",children:p.jsx("div",{className:"w-1.5 h-12 rounded-full bg-white/20 shadow-[0_0_18px_rgba(255,255,255,0.15)] animate-pulse"})}),!pt&&p.jsx("div",{className:"lg:hidden fixed right-1 top-1/2 -translate-y-1/2 z-40 pointer-events-none",children:p.jsx("div",{className:"w-1.5 h-12 rounded-full bg-white/20 shadow-[0_0_18px_rgba(255,255,255,0.15)] animate-pulse"})}),p.jsx("aside",{className:"hidden lg:flex flex-col fixed top-0 left-0 w-[260px] h-screen border-r border-pandora-border/60 bg-pandora-surface/80 backdrop-blur-md px-5 py-6 z-30 rounded-r-3xl",children:p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between gap-3 relative",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 border border-pandora-border/70 rounded-3xl bg-white/5 flex items-center justify-center",children:p.jsx(uE,{className:"text-pandora-text",size:20})}),p.jsx("div",{className:"text-lg font-semibold tracking-wide text-pandora-text",children:"PANDORA"})]}),p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>te(X=>!X),className:"text-xs font-semibold uppercase px-2 py-1 border border-pandora-border/70 text-pandora-text rounded-full hover:border-pandora-text hover:bg-white/10",title:"Select language",children:a.toUpperCase()}),et&&p.jsx("div",{className:"absolute right-0 mt-2 w-36 border border-pandora-border/70 bg-pandora-bg/90 rounded-3xl shadow-xl backdrop-blur-md",children:de.map(X=>p.jsx("button",{onClick:()=>{u(X.code),te(!1)},className:on("w-full text-left px-3 py-2 text-xs rounded-3xl hover:bg-white/5",X.code===a?"text-pandora-text font-semibold":"text-pandora-text"),children:X.label},X.code))})]})]}),p.jsx("nav",{className:"space-y-2",children:ge.map(X=>{const pe=X.icon;return p.jsxs(oE,{to:X.to,className:({isActive:xe})=>on("w-full flex items-center gap-3 px-3 py-3 border border-pandora-border/70 text-left text-sm rounded-2xl transition bg-white/0",xe?"text-pandora-text border-white/30 shadow-[0_12px_32px_-10px_rgba(165,180,252,0.75)]":"text-pandora-muted",!xe&&"hover:bg-white/5 hover:text-pandora-text hover:border-white/20"),children:[p.jsx(pe,{size:16}),p.jsx("span",{children:X.label})]},X.to)})}),p.jsx("button",{onClick:()=>f(!0),className:"w-full border border-transparent text-pandora-text bg-[#8D7BFF]/85 font-semibold py-3 rounded-2xl uppercase text-sm shadow-[0_10px_24px_-16px_rgba(141,123,255,0.35)] ring-1 ring-white/10 hover:shadow-xl transition backdrop-blur",children:(ie==null?void 0:ie.primaryButtonLabel)??"[ NEW DATA + ]"})]})}),bt&&p.jsx("aside",{className:"hidden lg:block fixed top-0 right-0 w-[320px] h-screen border-l border-pandora-border/60 bg-pandora-surface/80 backdrop-blur-md overflow-y-auto",children:p.jsx("div",{className:"p-5 space-y-6 sticky top-0 bg-pandora-surface/60 backdrop-blur",children:p.jsxs("div",{className:"border border-pandora-border/70 bg-white/5 p-5 rounded-2xl space-y-4 shadow-[0_20px_50px_-30px_rgba(0,0,0,0.6)]",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold tracking-wide text-pandora-text",children:"My Passport"}),p.jsx("p",{className:"text-xs text-pandora-muted font-semibold",children:(o==null?void 0:o.displayName)||"Subject"})]}),p.jsx("span",{className:"text-xs font-semibold uppercase text-pandora-neon bg-white/10 px-3 py-1 rounded-full",children:"Online"})]}),p.jsx(Go,{username:(o==null?void 0:o.displayName)||(o==null?void 0:o.email)||"Subject",showName:!0,size:"md"}),p.jsx(Xy,{stats:[e.logic,e.altruism,e.aggression,e.credit,e.logic,e.credit]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm font-semibold",children:[p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[p.jsx("span",{className:"text-pandora-muted",children:"Logic"}),p.jsx("span",{children:e.logic})]}),p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[p.jsx("span",{className:"text-pandora-muted",children:"Altruism"}),p.jsx("span",{children:e.altruism})]}),p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[p.jsx("span",{className:"text-pandora-muted",children:"Aggression"}),p.jsx("span",{children:e.aggression})]}),p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[p.jsx("span",{className:"text-pandora-muted",children:"Credit"}),p.jsxs("span",{children:[e.credit,"%"]})]})]})]})})}),p.jsxs("div",{className:on("h-full lg:pl-[270px]",Ae?"overflow-hidden":"overflow-y-auto no-scrollbar",bt?"lg:pr-[340px]":"lg:pr-6",Ne?"pt-0 pb-16":Ae?"pt-2 pb-4":"pt-12 pb-16 md:pb-10"),children:[!Ae&&p.jsx("button",{onClick:()=>Ee(X=>!X),className:on("hidden lg:flex fixed top-1/2 -translate-y-1/2 z-40 h-12 w-8 items-center justify-center border border-pandora-border/70 bg-white/10 backdrop-blur-md text-xs font-semibold uppercase hover:border-pandora-text rounded-full",bt?"right-[320px]":"right-0"),"aria-label":me?"Hide profile panel":"Show profile panel",children:me?"":""}),p.jsxs("div",{className:on(Ne?"w-full h-full":Ae?"w-full max-w-[1200px] mx-auto px-2 lg:px-4":"max-w-[1200px] mx-auto px-4",Ne&&"px-0"),children:[!Ne&&!t.pathname.startsWith("/messages")&&p.jsx("header",{className:"lg:hidden bg-pandora-surface/85 border-b border-pandora-border/70 backdrop-blur-md px-3 py-2 space-y-1",children:p.jsxs("div",{className:"flex items-center gap-3 text-[11px] uppercase",children:[p.jsx("span",{className:"text-[10px] font-bold text-pandora-neon",children:"[FEED LIVE]"}),p.jsx("span",{className:"text-[10px] font-bold text-[#FF6B6B]",children:"[AUTH REQUIRED]"}),p.jsx("span",{className:"text-pandora-text truncate",children:(ie==null?void 0:ie.tickerMessage)||d("banner.default")})]})}),p.jsx("main",{className:on("grid grid-cols-1",Ne?"h-full mt-0 gap-8":Ae?"h-full mt-0 gap-3":"mt-4 gap-8"),children:p.jsx("div",{className:on("mx-auto w-full",Ne||Ae?"max-w-none h-full":Qe?"max-w-[1100px]":"max-w-[640px]"),children:p.jsx(aO,{})})})]})]}),(Ie||ir)&&p.jsx("div",{className:"lg:hidden fixed top-0 left-0 bottom-0 z-50 pointer-events-none",children:p.jsxs("div",{className:"w-64 h-full bg-pandora-surface/95 backdrop-blur-md border-r border-pandora-border/70 p-4 space-y-4 transform transition-transform duration-300 ease-out pointer-events-auto",style:{transform:`translateX(${(-1+(ir?Zr:Ie?1:0))*100}%)`,transition:ir?"none":"transform 300ms ease"},children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-9 h-9 rounded-2xl border border-pandora-border/70 bg-white/5 flex items-center justify-center",children:p.jsx(uE,{className:"text-pandora-text",size:18})}),p.jsx("span",{className:"text-sm font-semibold text-pandora-text",children:"PANDORA"})]}),p.jsx("button",{onClick:()=>We(!1),className:"text-pandora-muted hover:text-pandora-text text-lg","aria-label":"Close navigation",children:""})]}),p.jsx("nav",{className:"space-y-2",children:ge.map(X=>{const pe=X.icon,xe=t.pathname===X.to;return p.jsxs(oE,{to:X.to,onClick:()=>We(!1),className:({isActive:Ke})=>on("w-full flex items-center gap-3 px-3 py-3 border border-pandora-border/70 text-left text-sm rounded-full transition bg-white/0",Ke||xe?"text-pandora-text border-white/30 shadow-[0_12px_32px_-10px_rgba(165,180,252,0.75)]":"text-pandora-muted"),children:[p.jsx(pe,{size:16}),p.jsx("span",{children:X.label})]},X.to)})}),p.jsxs("div",{className:"pt-4",children:[p.jsx("div",{className:"text-[11px] uppercase text-pandora-muted mb-2",children:"Language"}),p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>te(X=>!X),className:"w-full flex items-center justify-between px-3 py-2 rounded-full border border-pandora-border/70 text-pandora-text hover:border-pandora-accent-to",children:[p.jsx("span",{className:"font-semibold",children:a.toUpperCase()}),p.jsx("span",{className:"text-xs text-pandora-muted",children:""})]}),et&&p.jsx("div",{className:"absolute mt-2 w-full border border-pandora-border/70 bg-pandora-bg/95 rounded-3xl shadow-lg z-10",children:de.map(X=>p.jsx("button",{onClick:()=>{u(X.code),te(!1)},className:on("w-full text-left px-3 py-2 text-xs rounded-3xl hover:bg-white/5",X.code===a?"text-pandora-text font-semibold":"text-pandora-text"),children:X.label},X.code))})]})]})]})}),(pt||Fr)&&p.jsx("div",{className:"lg:hidden fixed top-0 right-0 bottom-0 z-50 pointer-events-none",children:p.jsxs("div",{className:"w-72 h-full bg-pandora-surface/95 backdrop-blur-md border-l border-pandora-border/70 p-4 space-y-4 transform transition-transform duration-300 ease-out pointer-events-auto",style:{transform:`translateX(${(1-(Fr?Q:pt?1:0))*100}%)`,transition:Fr?"none":"transform 300ms ease"},children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Go,{username:(o==null?void 0:o.displayName)||"You",size:"sm"}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-sm font-semibold text-pandora-text truncate",children:(o==null?void 0:o.displayName)||"You"}),(o==null?void 0:o.email)&&p.jsx("span",{className:"text-xs text-pandora-muted truncate",children:o.email})]})]}),p.jsx("button",{onClick:()=>St(!1),className:"text-pandora-muted hover:text-pandora-text text-lg","aria-label":"Close profile",children:""})]}),p.jsxs("div",{className:"border border-pandora-border/70 bg-white/5 p-4 rounded-2xl space-y-3 shadow-[0_20px_50px_-30px_rgba(0,0,0,0.6)]",children:[p.jsxs("div",{className:"flex items-center justify-between text-xs text-pandora-text",children:[p.jsx("span",{className:"font-semibold",children:"My Passport"}),p.jsx("span",{className:"text-[10px] uppercase text-pandora-neon bg-white/10 px-2 py-0.5 rounded-full",children:"Online"})]}),p.jsx(Xy,{stats:[e.logic,e.altruism,e.aggression,e.credit,e.logic,e.credit]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm font-semibold",children:[p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[p.jsx("span",{className:"text-pandora-muted text-xs",children:"Logic"}),p.jsx("span",{children:e.logic})]}),p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[p.jsx("span",{className:"text-pandora-muted text-xs",children:"Altruism"}),p.jsx("span",{children:e.altruism})]}),p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[p.jsx("span",{className:"text-pandora-muted text-xs",children:"Aggression"}),p.jsx("span",{children:e.aggression})]}),p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[p.jsx("span",{className:"text-pandora-muted text-xs",children:"Credit"}),p.jsxs("span",{children:[e.credit,"%"]})]})]})]})]})}),Sr&&!Ae&&p.jsx("button",{onClick:()=>{t.pathname.startsWith("/sectors")?window.dispatchEvent(new CustomEvent("open-sector-modal")):f(!0)},className:"lg:hidden fixed bottom-20 right-4 z-50 w-14 h-14 rounded-full text-white shadow-[0_12px_32px_-10px_rgba(165,180,252,0.75)] border border-white/30 flex items-center justify-center hover:scale-105 transition bg-transparent backdrop-blur-md","aria-label":"New Data",children:p.jsx(FO,{size:24,className:"text-white"})}),h&&p.jsx("section",{className:"fixed inset-0 z-40 bg-black/70 backdrop-blur-sm flex items-end lg:items-center lg:justify-center px-4",children:p.jsxs("div",{className:"w-full lg:w-[640px] border border-white/15 bg-pandora-surface/95 shadow-2xl rounded-t-3xl lg:rounded-2xl max-h-[90vh] lg:max-h-[85vh] overflow-hidden flex flex-col",children:[p.jsx("div",{className:"flex items-center justify-center py-3 lg:hidden",children:p.jsx("div",{className:"w-12 h-1.5 rounded-full bg-white/30"})}),p.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 px-6 pb-3",children:[p.jsx("h3",{className:"text-base font-semibold text-pandora-text",children:"Compose"}),p.jsx("button",{onClick:Xe,className:"text-pandora-muted hover:text-pandora-text text-lg",children:""})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[p.jsx("div",{className:"flex items-center gap-2",children:["TEXT","SAMPLES"].map(X=>p.jsx("button",{onClick:()=>x(X),className:on("px-3 py-2 text-xs rounded-full font-semibold tracking-wide border border-white/10",v===X?"text-pandora-text bg-gradient-to-r from-pandora-accent-from/40 to-pandora-accent-to/40 border-transparent":"text-pandora-muted hover:border-white/30"),children:X==="TEXT"?"Notes":"Samples"},X))}),v==="TEXT"?p.jsxs(p.Fragment,{children:[p.jsx("textarea",{value:E,onChange:X=>b(X.target.value),placeholder:"Type your field note... try #Order",className:"w-full h-40 bg-pandora-bg/60 border border-white/10 text-pandora-text text-sm p-3 rounded-2xl focus:outline-none focus:border-pandora-accent-to"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{className:"text-xs text-pandora-muted",children:"Attach photos, videos, or files (optional)."}),p.jsx(eb,{label:"Attach files",description:"Images, videos, docs, pdf up to your limit",accept:"image/*,video/*,.pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.txt,.zip",onUpload:en,deferUpload:!0,multiple:!0,onFilesSelected:X=>{X.length&&C(pe=>[...pe,...X])}}),L.length>0&&p.jsxs("div",{className:"border border-white/10 bg-pandora-bg/70 p-3 rounded-2xl space-y-2",children:[p.jsx("p",{className:"text-xs text-pandora-muted",children:"Attached"}),p.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:L.map(X=>p.jsxs("div",{className:"flex items-center justify-between text-xs text-pandora-text border border-white/10 rounded-xl px-3 py-2",children:[p.jsx("span",{className:"truncate",children:X.name}),p.jsx("button",{className:"text-pandora-muted hover:text-pandora-text text-[11px]",onClick:()=>V(pe=>pe.filter(xe=>xe.url!==X.url)),children:""})]},X.url))})]}),I.length>0&&p.jsxs("div",{className:"border border-dashed border-white/15 bg-pandora-bg/60 p-3 rounded-2xl space-y-2",children:[p.jsx("p",{className:"text-xs text-pandora-muted",children:"Pending upload"}),p.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:I.map((X,pe)=>p.jsxs("div",{className:"flex items-center justify-between text-xs text-pandora-text border border-white/10 rounded-xl px-3 py-2",children:[p.jsx("span",{className:"truncate",children:X.name}),p.jsx("span",{className:"text-[11px] text-pandora-muted",children:"will upload on post"})]},`${X.name}-${pe}`))})]})]}),p.jsx("div",{className:on("transform transition-all duration-200 origin-bottom",g?"translate-y-0 opacity-100":"translate-y-4 opacity-0"),children:p.jsxs("div",{className:"border border-dashed border-white/20 bg-pandora-bg/70 p-4 rounded-2xl space-y-3",children:[p.jsx("div",{className:"text-xs text-pandora-muted font-semibold",children:"#Order Details"}),p.jsx("input",{type:"text",placeholder:"Price",className:"w-full bg-pandora-surface/70 border border-white/10 text-pandora-text text-sm p-3 rounded-2xl placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to"}),p.jsx("input",{type:"text",placeholder:"Qty",className:"w-full bg-pandora-surface/70 border border-white/10 text-pandora-text text-sm p-3 rounded-2xl placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to"}),p.jsx("input",{type:"text",placeholder:"Account",className:"w-full bg-pandora-surface/70 border border-white/10 text-pandora-text text-sm p-3 rounded-2xl placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon"})]})})]}):p.jsxs("div",{className:"space-y-3",children:[p.jsx("p",{className:"text-xs text-pandora-muted",children:"Upload a sample video to share to SAMPLES."}),p.jsx(eb,{label:"Drop Sample Video Here",description:"MP4, MOV, WEBM  keep it concise",accept:"video/*",onUpload:vn,deferUpload:!0,onFileSelected:X=>{k(X??null),D(null)}}),T&&p.jsxs("div",{className:"border border-white/10 bg-pandora-bg/70 p-3 rounded-2xl flex items-center justify-between gap-3",children:[p.jsxs("div",{className:"min-w-0",children:[p.jsx("p",{className:"text-xs text-pandora-muted",children:"Linked Sample"}),p.jsx("p",{className:"text-sm text-pandora-text truncate",children:T})]}),p.jsxs("span",{className:"flex items-center gap-2 text-xs text-pandora-text",children:[p.jsx(KC,{size:14})," Ready to submit"]})]})]}),S&&p.jsx("p",{className:"text-xs text-pandora-pink",children:S})]}),p.jsxs("div",{className:"flex items-center justify-end gap-2 px-6 py-4 border-t border-white/10 bg-pandora-surface/95",children:[p.jsx("button",{onClick:Xe,className:"px-4 py-2 text-sm rounded-full border border-white/20 text-pandora-text hover:border-white/40",children:"Cancel"}),p.jsx("button",{onClick:As,disabled:!es||P,className:"px-5 py-2 text-xs font-semibold rounded-full bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg shadow-lg hover:shadow-xl transition disabled:opacity-50 disabled:cursor-not-allowed disabled:grayscale",children:P?p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(Xt,{size:14,className:"animate-spin"})," Saving..."]}):v==="SAMPLES"?T?"Submit Sample":"Upload Sample":"Transmit"})]})]})})]})}async function Xv(t,e){const n=nr(He,"transmissions",t,"likes",e),r=nr(He,"transmissions",t);return(await yp(n)).exists()?(await t2(n),await rf(r,{likes:Qy(-1)}),{liked:!1}):(await wp(n,{uid:e,createdAt:bs()}),await rf(r,{likes:Qy(1)}),{liked:!0})}async function Yv(t,e,n){const r=Qt(He,"transmissions",t,"comments"),s=nr(He,"transmissions",t);await xc(r,{uid:e,text:n,createdAt:bs()}),await rf(s,{comments:Qy(1)})}function iT(){const t=Pr(_=>_.isBlind()),{user:e}=Lr(),[n,r]=N.useState([]),[s,i]=N.useState({}),[o,l]=N.useState({}),[a,u]=N.useState({}),[d,h]=N.useState(!0),[f,g]=N.useState(!0),[w,E]=N.useState(null),[b,v]=N.useState({}),[x,T]=N.useState({}),D=Jv();N.useEffect(()=>{const _=Qs(Qt(He,"transmissions"),Xs("createdAt","desc")),k=Ln(_,P=>{const O=P.docs.map(S=>({id:S.id,...S.data()}));r(O),i(S=>{const Z={...S};return O.forEach(ie=>{var je;Z[ie.id]||(Z[ie.id]={count:ie.likes||0,liked:((je=S[ie.id])==null?void 0:je.liked)||!1})}),Z}),l(S=>{const Z={...S};return O.forEach(ie=>{Z[ie.id]===void 0&&(Z[ie.id]=ie.comments||0)}),Z}),h(!1)},()=>h(!1));return()=>k()},[]),N.useEffect(()=>{const _=Ln(Qt(He,"profiles"),k=>{const P={};k.docs.forEach(O=>{const S=O.data();P[S.uid]=S}),u(P)});return()=>_()},[]);const L=_=>_?t?_.slice(0,2)+"****":_:"Subject",V=_=>{if(!_||!("seconds"in _))return"Just now";const k=Date.now()-_.seconds*1e3,P=Math.floor(k/6e4);if(P<1)return"Just now";if(P<60)return`${P}m ago`;const O=Math.floor(P/60);return O<24?`${O}h ago`:`${Math.floor(O/24)}d ago`},I=async _=>{if(!e)return;const k=s[_]||{count:0,liked:!1};i(P=>({...P,[_]:{count:k.count+(k.liked?-1:1),liked:!k.liked}}));try{await Xv(_,e.uid)}catch{i(P=>({...P,[_]:k}))}};N.useEffect(()=>{if(!w)return;const _=Qs(Qt(He,"transmissions",w,"comments"),Xs("createdAt","desc")),k=Ln(_,P=>{T(O=>({...O,[w]:P.docs.map(S=>({id:S.id,...S.data()}))}))});return()=>k()},[w]);const C=async _=>{if(!e)return;const k=(b[_]||"").trim();if(k){v(P=>({...P,[_]:""})),T(P=>({...P,[_]:[{id:`temp-${Date.now()}`,uid:e.uid,text:k,createdAt:{seconds:Date.now()/1e3,nanoseconds:0}},...P[_]||[]]})),l(P=>({...P,[_]:(P[_]||0)+1}));try{await Yv(_,e.uid,k)}catch{l(P=>({...P,[_]:Math.max(0,(P[_]||1)-1)}))}}};return p.jsxs("div",{className:"space-y-6",children:[p.jsx("header",{className:"sticky top-0 z-10 h-12 bg-pandora-surface/85 border-b border-pandora-border/70 overflow-hidden hidden lg:block backdrop-blur-md px-4",children:p.jsxs("div",{className:"flex items-center gap-4 text-[11px] uppercase h-full",children:[p.jsx("span",{className:"text-[10px] font-bold text-pandora-neon",children:D("banner.feedLive")}),p.jsx("span",{className:"text-[10px] font-bold text-[#FF6B6B]",children:D("banner.authRequired")}),p.jsx("span",{className:"text-pandora-text truncate",children:D("banner.transmissions")})]})}),d&&p.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted text-sm",children:[p.jsx(Xt,{size:16,className:"animate-spin"})," Loading transmissions..."]}),!d&&n.length===0&&p.jsxs("article",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-none font-mono text-sm text-pandora-muted space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2 text-pandora-neon text-xs uppercase",children:[p.jsx($O,{size:14})," No transmissions yet"]}),p.jsx("p",{children:"Share a note or upload a sample from the Compose modal."})]}),p.jsx("div",{className:"space-y-4",children:n.map(_=>{var O,S,Z;const k=_.uid?a[_.uid]:void 0,P=(k==null?void 0:k.displayName)||(k==null?void 0:k.email)||_.uid;return p.jsxs("article",{className:"space-y-3 border border-pandora-border p-4 bg-pandora-surface rounded-none",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("a",{href:_.uid?`/u/${_.uid}`:"#",className:"flex items-center gap-3 min-w-0",children:[p.jsx(Go,{username:L(P??"Subject"),size:"sm"}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"text-sm font-semibold text-pandora-text truncate",children:L(P??"Subject")}),p.jsx("div",{className:"text-[11px] text-pandora-muted",children:V(_.createdAt)})]})]}),_.type==="sample"&&p.jsxs("span",{className:"text-[11px] uppercase font-semibold flex items-center gap-1 px-2 py-1 rounded-full bg-[#8D7BFF]/85 text-white shadow-[0_10px_24px_-16px_rgba(141,123,255,0.35)] border border-transparent ring-1 ring-white/10 backdrop-blur",children:[p.jsx(Vf,{size:14})," Sample"]})]}),_.type==="text"&&_.content&&p.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:_.content}),_.type==="text"&&_.attachments&&_.attachments.length>0&&p.jsx("div",{className:"space-y-2",children:_.attachments.map(ie=>{var te,me;const je=(te=ie.contentType)==null?void 0:te.startsWith("image"),et=(me=ie.contentType)==null?void 0:me.startsWith("video");return je?p.jsx("div",{className:"border border-pandora-border rounded-2xl overflow-hidden bg-black/40",children:p.jsx("img",{src:ie.url,alt:ie.name,className:"w-full max-h-[360px] object-contain bg-black"})},ie.url):et?p.jsx("div",{className:"border border-pandora-border rounded-2xl overflow-hidden bg-black/40",children:p.jsx("video",{src:ie.url,controls:!0,className:"w-full max-h-[360px] bg-black"})},ie.url):p.jsxs("a",{href:ie.url,target:"_blank",rel:"noreferrer",className:"flex items-center justify-between text-xs text-pandora-text border border-pandora-border px-3 py-2 rounded-2xl hover:border-pandora-accent-to hover:text-pandora-text",children:[p.jsx("span",{className:"truncate",children:ie.name}),p.jsx("span",{className:"text-pandora-muted text-[11px]",children:"Open"})]},ie.url)})}),_.type==="sample"&&_.sampleUrl&&p.jsx("div",{className:"relative border border-pandora-border rounded-sm overflow-hidden bg-pandora-bg",children:p.jsxs("div",{className:"relative w-full aspect-[9/16] max-h-[480px] bg-black",children:[p.jsx("video",{src:_.sampleUrl,className:"w-full h-full object-contain bg-black",controls:!0,muted:f,playsInline:!0},_.sampleUrl),p.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/35 to-transparent"}),p.jsxs("div",{className:"absolute top-2 left-2 z-10 flex items-center gap-2",children:[p.jsx("button",{onClick:()=>g(ie=>!ie),className:"w-9 h-9 flex items-center justify-center border border-pandora-border bg-pandora-bg/80 text-pandora-text hover:border-pandora-neon rounded-sm",title:f?"Unmute":"Mute",children:f?p.jsx(ww,{size:16}):p.jsx(yw,{size:16})}),p.jsx(gw,{to:`/t/${_.id}`,className:"text-[11px] uppercase px-2.5 py-1.5 rounded-full bg-[#8D7BFF]/85 text-white shadow-[0_10px_24px_-16px_rgba(141,123,255,0.35)] border border-transparent ring-1 ring-white/10 hover:shadow-lg backdrop-blur",children:"View sample"})]})]})}),p.jsxs("div",{className:"flex items-center gap-4 text-xs uppercase font-semibold tracking-wide",children:[p.jsxs("button",{onClick:()=>I(_.id),className:on("flex items-center gap-2",(O=s[_.id])!=null&&O.liked?"text-pandora-neon":"text-pandora-muted hover:text-pandora-text"),children:[p.jsx(jh,{size:14}),p.jsxs("span",{children:[((S=s[_.id])==null?void 0:S.count)??0," Likes"]})]}),p.jsxs("button",{className:"flex items-center gap-2 text-pandora-muted hover:text-pandora-text",onClick:()=>E(ie=>ie===_.id?null:_.id),children:[p.jsx(rl,{size:14}),p.jsxs("span",{children:[o[_.id]??0," Comments"]})]})]}),w===_.id&&p.jsxs("div",{className:"mt-3 space-y-3 border border-pandora-border/70 bg-pandora-surface/70 rounded-2xl p-3",children:[p.jsxs("div",{className:"flex items-end gap-2",children:[p.jsx("textarea",{value:b[_.id]||"",onChange:ie=>v(je=>({...je,[_.id]:ie.target.value})),placeholder:"Write a comment...",className:"flex-1 h-16 bg-pandora-bg/70 border border-white/10 text-pandora-text text-sm p-2 rounded-2xl focus:outline-none focus:border-pandora-neon"}),p.jsx("button",{onClick:()=>C(_.id),disabled:!((Z=b[_.id])!=null&&Z.trim()),className:"px-4 py-2 text-xs font-semibold rounded-full bg-white/10 text-pandora-text border border-white/25 transition hover:bg-gradient-to-r hover:from-pandora-accent-from hover:to-pandora-accent-to hover:text-pandora-text hover:shadow-[0_12px_32px_-8px_rgba(125,140,255,0.9)] disabled:opacity-60",children:"Post"})]}),p.jsxs("div",{className:"space-y-2 max-h-56 overflow-y-auto",children:[(x[_.id]||[]).map(ie=>{const je=t?"Subject-****":ie.uid||"Unknown",et=ie.createdAt&&"seconds"in ie.createdAt?new Date(ie.createdAt.seconds*1e3).toLocaleTimeString():"Just now";return p.jsxs("div",{className:"border border-pandora-border/60 bg-pandora-bg/60 rounded-2xl p-2",children:[p.jsxs("div",{className:"flex items-center justify-between text-[11px] text-pandora-muted",children:[p.jsx("span",{className:"truncate",children:je}),p.jsx("span",{children:et})]}),p.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:ie.text})]},ie.id)}),(x[_.id]||[]).length===0&&p.jsx("p",{className:"text-xs text-pandora-muted",children:"No comments yet."})]})]})]},_.id)})})]})}var AK=Object.defineProperty,oT=Object.getOwnPropertySymbols,CK=Object.prototype.hasOwnProperty,IK=Object.prototype.propertyIsEnumerable,aT=(t,e,n)=>e in t?AK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lh=(t,e)=>{for(var n in e||(e={}))CK.call(e,n)&&aT(t,n,e[n]);if(oT)for(var n of oT(e))IK.call(e,n)&&aT(t,n,e[n]);return t},K=(t,e,n)=>new Promise((r,s)=>{var i=a=>{try{l(n.next(a))}catch(u){s(u)}},o=a=>{try{l(n.throw(a))}catch(u){s(u)}},l=a=>a.done?r(a.value):Promise.resolve(a.value).then(i,o);l((n=n.apply(t,e)).next())}),Pn=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Pn<"u"&&Pn,qn={searchParams:"URLSearchParams"in Pn,iterable:"Symbol"in Pn&&"iterator"in Symbol,blob:"FileReader"in Pn&&"Blob"in Pn&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in Pn,arrayBuffer:"ArrayBuffer"in Pn};function kK(t){return t&&DataView.prototype.isPrototypeOf(t)}qn.arrayBuffer&&(lT=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],cN=ArrayBuffer.isView||function(t){return t&&lT.indexOf(Object.prototype.toString.call(t))>-1});var lT,cN;function Jc(t){if(typeof t!="string"&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||t==="")throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function Zv(t){return typeof t!="string"&&(t=String(t)),t}function e_(t){var e={next:function(){var n=t.shift();return{done:n===void 0,value:n}}};return qn.iterable&&(e[Symbol.iterator]=function(){return e}),e}function Zt(t){this.map={},t instanceof Zt?t.forEach(function(e,n){this.append(n,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}Zt.prototype.append=function(t,e){t=Jc(t),e=Zv(e);var n=this.map[t];this.map[t]=n?n+", "+e:e};Zt.prototype.delete=function(t){delete this.map[Jc(t)]};Zt.prototype.get=function(t){return t=Jc(t),this.has(t)?this.map[t]:null};Zt.prototype.has=function(t){return this.map.hasOwnProperty(Jc(t))};Zt.prototype.set=function(t,e){this.map[Jc(t)]=Zv(e)};Zt.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)};Zt.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),e_(t)};Zt.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),e_(t)};Zt.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),e_(t)};qn.iterable&&(Zt.prototype[Symbol.iterator]=Zt.prototype.entries);function Sg(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function dN(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function RK(t){var e=new FileReader,n=dN(e);return e.readAsArrayBuffer(t),n}function PK(t){var e=new FileReader,n=dN(e);return e.readAsText(t),n}function NK(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function uT(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function hN(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?typeof t=="string"?this._bodyText=t:qn.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:qn.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:qn.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():qn.arrayBuffer&&qn.blob&&kK(t)?(this._bodyArrayBuffer=uT(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):qn.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||cN(t))?this._bodyArrayBuffer=uT(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||(typeof t=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):qn.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},qn.blob&&(this.blob=function(){var t=Sg(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=Sg(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(RK)}),this.text=function(){var t=Sg(this);if(t)return t;if(this._bodyBlob)return PK(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(NK(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},qn.formData&&(this.formData=function(){return this.text().then(OK)}),this.json=function(){return this.text().then(JSON.parse)},this}var DK=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function MK(t){var e=t.toUpperCase();return DK.indexOf(e)>-1?e:t}function Qo(t,e){if(!(this instanceof Qo))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var n=e.body;if(t instanceof Qo){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new Zt(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,!n&&t._bodyInit!=null&&(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new Zt(e.headers)),this.method=MK(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+new Date().getTime());else{var s=/\?/;this.url+=(s.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Qo.prototype.clone=function(){return new Qo(this,{body:this._bodyInit})};function OK(t){var e=new FormData;return t.trim().split("&").forEach(function(n){if(n){var r=n.split("="),s=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(s),decodeURIComponent(i))}}),e}function jK(t){var e=new Zt,n=t.replace(/\r?\n[\t ]+/g," ");return n.split("\r").map(function(r){return r.indexOf(`
`)===0?r.substr(1,r.length):r}).forEach(function(r){var s=r.split(":"),i=s.shift().trim();if(i){var o=s.join(":").trim();e.append(i,o)}}),e}hN.call(Qo.prototype);function Ts(t,e){if(!(this instanceof Ts))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new Zt(e.headers),this.url=e.url||"",this._initBody(t)}hN.call(Ts.prototype);Ts.prototype.clone=function(){return new Ts(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Zt(this.headers),url:this.url})};Ts.error=function(){var t=new Ts(null,{status:0,statusText:""});return t.type="error",t};var UK=[301,302,303,307,308];Ts.redirect=function(t,e){if(UK.indexOf(e)===-1)throw new RangeError("Invalid status code");return new Ts(null,{status:e,headers:{location:t}})};var So=Pn.DOMException;try{new So}catch{So=function(e,n){this.message=e,this.name=n;var r=Error(e);this.stack=r.stack},So.prototype=Object.create(Error.prototype),So.prototype.constructor=So}function fN(t,e){return new Promise(function(n,r){var s=new Qo(t,e);if(s.signal&&s.signal.aborted)return r(new So("Aborted","AbortError"));var i=new XMLHttpRequest;function o(){i.abort()}i.onload=function(){var a={status:i.status,statusText:i.statusText,headers:jK(i.getAllResponseHeaders()||"")};a.url="responseURL"in i?i.responseURL:a.headers.get("X-Request-URL");var u="response"in i?i.response:i.responseText;setTimeout(function(){n(new Ts(u,a))},0)},i.onerror=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},i.ontimeout=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},i.onabort=function(){setTimeout(function(){r(new So("Aborted","AbortError"))},0)};function l(a){try{return a===""&&Pn.location.href?Pn.location.href:a}catch{return a}}i.open(s.method,l(s.url),!0),s.credentials==="include"?i.withCredentials=!0:s.credentials==="omit"&&(i.withCredentials=!1),"responseType"in i&&(qn.blob?i.responseType="blob":qn.arrayBuffer&&s.headers.get("Content-Type")&&s.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(i.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof Zt)?Object.getOwnPropertyNames(e.headers).forEach(function(a){i.setRequestHeader(a,Zv(e.headers[a]))}):s.headers.forEach(function(a,u){i.setRequestHeader(u,a)}),s.signal&&(s.signal.addEventListener("abort",o),i.onreadystatechange=function(){i.readyState===4&&s.signal.removeEventListener("abort",o)}),i.send(typeof s._bodyInit>"u"?null:s._bodyInit)})}fN.polyfill=!0;Pn.fetch||(Pn.fetch=fN,Pn.Headers=Zt,Pn.Request=Qo,Pn.Response=Ts);var LK=typeof atob=="function",FK=typeof btoa=="function",Pl=typeof Buffer=="function",cT=typeof TextDecoder=="function"?new TextDecoder:void 0,dT=typeof TextEncoder=="function"?new TextEncoder:void 0,BK="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",yu=Array.prototype.slice.call(BK),jd=(t=>{let e={};return t.forEach((n,r)=>e[n]=r),e})(yu),VK=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,hn=String.fromCharCode.bind(String),hT=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),$K=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),pN=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),zK=t=>{let e,n,r,s,i="";const o=t.length%3;for(let l=0;l<t.length;){if((n=t.charCodeAt(l++))>255||(r=t.charCodeAt(l++))>255||(s=t.charCodeAt(l++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|s,i+=yu[e>>18&63]+yu[e>>12&63]+yu[e>>6&63]+yu[e&63]}return o?i.slice(0,o-3)+"===".substring(o):i},mf=FK?t=>btoa(t):Pl?t=>Buffer.from(t,"binary").toString("base64"):zK,qK=Pl?t=>Buffer.from(t).toString("base64"):t=>{let n=[];for(let r=0,s=t.length;r<s;r+=4096)n.push(hn.apply(null,t.subarray(r,r+4096)));return mf(n.join(""))},HK=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?hn(192|e>>>6)+hn(128|e&63):hn(224|e>>>12&15)+hn(128|e>>>6&63)+hn(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return hn(240|e>>>18&7)+hn(128|e>>>12&63)+hn(128|e>>>6&63)+hn(128|e&63)}},WK=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,GK=t=>t.replace(WK,HK),fT=Pl?t=>Buffer.from(t,"utf8").toString("base64"):dT?t=>qK(dT.encode(t)):t=>mf(GK(t)),as=(t,e=!1)=>e?$K(fT(t)):fT(t),KK=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,JK=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return hn((n>>>10)+55296)+hn((n&1023)+56320);case 3:return hn((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return hn((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},QK=t=>t.replace(KK,JK),XK=t=>{if(t=t.replace(/\s+/g,""),!VK.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",r,s;for(let i=0;i<t.length;)e=jd[t.charAt(i++)]<<18|jd[t.charAt(i++)]<<12|(r=jd[t.charAt(i++)])<<6|(s=jd[t.charAt(i++)]),n+=r===64?hn(e>>16&255):s===64?hn(e>>16&255,e>>8&255):hn(e>>16&255,e>>8&255,e&255);return n},gf=LK?t=>atob(pN(t)):Pl?t=>Buffer.from(t,"base64").toString("binary"):XK,YK=Pl?t=>hT(Buffer.from(t,"base64")):t=>hT(gf(t).split("").map(e=>e.charCodeAt(0))),ZK=Pl?t=>Buffer.from(t,"base64").toString("utf8"):cT?t=>cT.decode(YK(t)):t=>QK(gf(t)),eJ=t=>pN(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),pT=t=>ZK(eJ(t));function Y(t,e,n){const r=lh(lh({},{method:t}),e);if(r.headers=lh({},e.headers),typeof XMLHttpRequest<"u"){const s=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"withCredentials");s!=null&&s.set||(r.credentials="cocos-ignore")}return Object.keys(r.headers).includes("Accept")||(r.headers.Accept="application/json"),Object.keys(r.headers).includes("Content-Type")||(r.headers["Content-Type"]="application/json"),Object.keys(r.headers).forEach(s=>{r.headers[s]||delete r.headers[s]}),n&&(r.body=n),r}var tJ=class{constructor(t,e,n){this.serverKey=t,this.basePath=e,this.timeoutMs=n}healthcheck(t,e={}){const n="/healthcheck",r=new Map;let s="";const i=this.buildFullUrl(this.basePath,n,r),o=Y("GET",e,s);return t&&(o.headers.Authorization="Bearer "+t),Promise.race([fetch(i,o).then(l=>{if(l.status==204)return l;if(l.status>=200&&l.status<300)return l.json();throw l}),new Promise((l,a)=>setTimeout(a,this.timeoutMs,"Request timed out."))])}deleteAccount(t,e={}){const n="/v2/account",r=new Map;let s="";const i=this.buildFullUrl(this.basePath,n,r),o=Y("DELETE",e,s);return t&&(o.headers.Authorization="Bearer "+t),Promise.race([fetch(i,o).then(l=>{if(l.status==204)return l;if(l.status>=200&&l.status<300)return l.json();throw l}),new Promise((l,a)=>setTimeout(a,this.timeoutMs,"Request timed out."))])}getAccount(t,e={}){const n="/v2/account",r=new Map;let s="";const i=this.buildFullUrl(this.basePath,n,r),o=Y("GET",e,s);return t&&(o.headers.Authorization="Bearer "+t),Promise.race([fetch(i,o).then(l=>{if(l.status==204)return l;if(l.status>=200&&l.status<300)return l.json();throw l}),new Promise((l,a)=>setTimeout(a,this.timeoutMs,"Request timed out."))])}updateAccount(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("PUT",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}authenticateApple(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/apple",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=Y("POST",i,a);return t&&(d.headers.Authorization="Basic "+as(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,f)=>setTimeout(f,this.timeoutMs,"Request timed out."))])}authenticateCustom(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/custom",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=Y("POST",i,a);return t&&(d.headers.Authorization="Basic "+as(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,f)=>setTimeout(f,this.timeoutMs,"Request timed out."))])}authenticateDevice(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/device",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=Y("POST",i,a);return t&&(d.headers.Authorization="Basic "+as(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,f)=>setTimeout(f,this.timeoutMs,"Request timed out."))])}authenticateEmail(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/email",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=Y("POST",i,a);return t&&(d.headers.Authorization="Basic "+as(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,f)=>setTimeout(f,this.timeoutMs,"Request timed out."))])}authenticateFacebook(t,e,n,r,s,i,o={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const l="/v2/account/authenticate/facebook",a=new Map;a.set("create",r),a.set("username",s),a.set("sync",i);let u="";u=JSON.stringify(n||{});const d=this.buildFullUrl(this.basePath,l,a),h=Y("POST",o,u);return t&&(h.headers.Authorization="Basic "+as(t+":"+e)),Promise.race([fetch(d,h).then(f=>{if(f.status==204)return f;if(f.status>=200&&f.status<300)return f.json();throw f}),new Promise((f,g)=>setTimeout(g,this.timeoutMs,"Request timed out."))])}authenticateFacebookInstantGame(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/facebookinstantgame",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=Y("POST",i,a);return t&&(d.headers.Authorization="Basic "+as(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,f)=>setTimeout(f,this.timeoutMs,"Request timed out."))])}authenticateGameCenter(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/gamecenter",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=Y("POST",i,a);return t&&(d.headers.Authorization="Basic "+as(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,f)=>setTimeout(f,this.timeoutMs,"Request timed out."))])}authenticateGoogle(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/google",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=Y("POST",i,a);return t&&(d.headers.Authorization="Basic "+as(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,f)=>setTimeout(f,this.timeoutMs,"Request timed out."))])}authenticateSteam(t,e,n,r,s,i,o={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const l="/v2/account/authenticate/steam",a=new Map;a.set("create",r),a.set("username",s),a.set("sync",i);let u="";u=JSON.stringify(n||{});const d=this.buildFullUrl(this.basePath,l,a),h=Y("POST",o,u);return t&&(h.headers.Authorization="Basic "+as(t+":"+e)),Promise.race([fetch(d,h).then(f=>{if(f.status==204)return f;if(f.status>=200&&f.status<300)return f.json();throw f}),new Promise((f,g)=>setTimeout(g,this.timeoutMs,"Request timed out."))])}linkApple(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/apple",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkCustom(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/custom",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkDevice(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/device",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkEmail(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/email",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkFacebook(t,e,n,r={}){if(e==null)throw new Error("'account' is a required parameter but is null or undefined.");const s="/v2/account/link/facebook",i=new Map;i.set("sync",n);let o="";o=JSON.stringify(e||{});const l=this.buildFullUrl(this.basePath,s,i),a=Y("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}linkFacebookInstantGame(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/facebookinstantgame",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkGameCenter(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/gamecenter",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkGoogle(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/google",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkSteam(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/steam",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}sessionRefresh(t,e,n,r={}){if(n==null)throw new Error("'body' is a required parameter but is null or undefined.");const s="/v2/account/session/refresh",i=new Map;let o="";o=JSON.stringify(n||{});const l=this.buildFullUrl(this.basePath,s,i),a=Y("POST",r,o);return t&&(a.headers.Authorization="Basic "+as(t+":"+e)),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}unlinkApple(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/apple",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkCustom(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/custom",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkDevice(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/device",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkEmail(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/email",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkFacebook(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/facebook",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkFacebookInstantGame(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/facebookinstantgame",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkGameCenter(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/gamecenter",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkGoogle(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/google",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkSteam(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/steam",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listChannelMessages(t,e,n,r,s,i={}){if(e==null)throw new Error("'channelId' is a required parameter but is null or undefined.");const o="/v2/channel/{channelId}".replace("{channelId}",encodeURIComponent(String(e))),l=new Map;l.set("limit",n),l.set("forward",r),l.set("cursor",s);let a="";const u=this.buildFullUrl(this.basePath,o,l),d=Y("GET",i,a);return t&&(d.headers.Authorization="Bearer "+t),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,f)=>setTimeout(f,this.timeoutMs,"Request timed out."))])}event(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/event",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}deleteFriends(t,e,n,r={}){const s="/v2/friend",i=new Map;i.set("ids",e),i.set("usernames",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=Y("DELETE",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}listFriends(t,e,n,r,s={}){const i="/v2/friend",o=new Map;o.set("limit",e),o.set("state",n),o.set("cursor",r);let l="";const a=this.buildFullUrl(this.basePath,i,o),u=Y("GET",s,l);return t&&(u.headers.Authorization="Bearer "+t),Promise.race([fetch(a,u).then(d=>{if(d.status==204)return d;if(d.status>=200&&d.status<300)return d.json();throw d}),new Promise((d,h)=>setTimeout(h,this.timeoutMs,"Request timed out."))])}addFriends(t,e,n,r={}){const s="/v2/friend",i=new Map;i.set("ids",e),i.set("usernames",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=Y("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}blockFriends(t,e,n,r={}){const s="/v2/friend/block",i=new Map;i.set("ids",e),i.set("usernames",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=Y("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}importFacebookFriends(t,e,n,r={}){if(e==null)throw new Error("'account' is a required parameter but is null or undefined.");const s="/v2/friend/facebook",i=new Map;i.set("reset",n);let o="";o=JSON.stringify(e||{});const l=this.buildFullUrl(this.basePath,s,i),a=Y("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}listFriendsOfFriends(t,e,n,r={}){const s="/v2/friend/friends",i=new Map;i.set("limit",e),i.set("cursor",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=Y("GET",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}importSteamFriends(t,e,n,r={}){if(e==null)throw new Error("'account' is a required parameter but is null or undefined.");const s="/v2/friend/steam",i=new Map;i.set("reset",n);let o="";o=JSON.stringify(e||{});const l=this.buildFullUrl(this.basePath,s,i),a=Y("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}listGroups(t,e,n,r,s,i,o,l={}){const a="/v2/group",u=new Map;u.set("name",e),u.set("cursor",n),u.set("limit",r),u.set("lang_tag",s),u.set("members",i),u.set("open",o);let d="";const h=this.buildFullUrl(this.basePath,a,u),f=Y("GET",l,d);return t&&(f.headers.Authorization="Bearer "+t),Promise.race([fetch(h,f).then(g=>{if(g.status==204)return g;if(g.status>=200&&g.status<300)return g.json();throw g}),new Promise((g,w)=>setTimeout(w,this.timeoutMs,"Request timed out."))])}createGroup(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/group",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}deleteGroup(t,e,n={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const r="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=Y("DELETE",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}updateGroup(t,e,n,r={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");if(n==null)throw new Error("'body' is a required parameter but is null or undefined.");const s="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(e))),i=new Map;let o="";o=JSON.stringify(n||{});const l=this.buildFullUrl(this.basePath,s,i),a=Y("PUT",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}addGroupUsers(t,e,n,r={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const s="/v2/group/{groupId}/add".replace("{groupId}",encodeURIComponent(String(e))),i=new Map;i.set("user_ids",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=Y("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}banGroupUsers(t,e,n,r={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const s="/v2/group/{groupId}/ban".replace("{groupId}",encodeURIComponent(String(e))),i=new Map;i.set("user_ids",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=Y("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}demoteGroupUsers(t,e,n,r={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const s="/v2/group/{groupId}/demote".replace("{groupId}",encodeURIComponent(String(e))),i=new Map;i.set("user_ids",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=Y("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}joinGroup(t,e,n={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const r="/v2/group/{groupId}/join".replace("{groupId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}kickGroupUsers(t,e,n,r={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const s="/v2/group/{groupId}/kick".replace("{groupId}",encodeURIComponent(String(e))),i=new Map;i.set("user_ids",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=Y("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}leaveGroup(t,e,n={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const r="/v2/group/{groupId}/leave".replace("{groupId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}promoteGroupUsers(t,e,n,r={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const s="/v2/group/{groupId}/promote".replace("{groupId}",encodeURIComponent(String(e))),i=new Map;i.set("user_ids",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=Y("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}listGroupUsers(t,e,n,r,s,i={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const o="/v2/group/{groupId}/user".replace("{groupId}",encodeURIComponent(String(e))),l=new Map;l.set("limit",n),l.set("state",r),l.set("cursor",s);let a="";const u=this.buildFullUrl(this.basePath,o,l),d=Y("GET",i,a);return t&&(d.headers.Authorization="Bearer "+t),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,f)=>setTimeout(f,this.timeoutMs,"Request timed out."))])}validatePurchaseApple(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/purchase/apple",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}validatePurchaseFacebookInstant(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/purchase/facebookinstant",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}validatePurchaseGoogle(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/purchase/google",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}validatePurchaseHuawei(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/purchase/huawei",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listSubscriptions(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/subscription",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}validateSubscriptionApple(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/subscription/apple",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}validateSubscriptionGoogle(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/subscription/google",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}getSubscription(t,e,n={}){if(e==null)throw new Error("'productId' is a required parameter but is null or undefined.");const r="/v2/iap/subscription/{productId}".replace("{productId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=Y("GET",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}deleteLeaderboardRecord(t,e,n={}){if(e==null)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const r="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=Y("DELETE",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listLeaderboardRecords(t,e,n,r,s,i,o={}){if(e==null)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const l="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(e))),a=new Map;a.set("owner_ids",n),a.set("limit",r),a.set("cursor",s),a.set("expiry",i);let u="";const d=this.buildFullUrl(this.basePath,l,a),h=Y("GET",o,u);return t&&(h.headers.Authorization="Bearer "+t),Promise.race([fetch(d,h).then(f=>{if(f.status==204)return f;if(f.status>=200&&f.status<300)return f.json();throw f}),new Promise((f,g)=>setTimeout(g,this.timeoutMs,"Request timed out."))])}writeLeaderboardRecord(t,e,n,r={}){if(e==null)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(n==null)throw new Error("'record' is a required parameter but is null or undefined.");const s="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(e))),i=new Map;let o="";o=JSON.stringify(n||{});const l=this.buildFullUrl(this.basePath,s,i),a=Y("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}listLeaderboardRecordsAroundOwner(t,e,n,r,s,i,o={}){if(e==null)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(n==null)throw new Error("'ownerId' is a required parameter but is null or undefined.");const l="/v2/leaderboard/{leaderboardId}/owner/{ownerId}".replace("{leaderboardId}",encodeURIComponent(String(e))).replace("{ownerId}",encodeURIComponent(String(n))),a=new Map;a.set("limit",r),a.set("expiry",s),a.set("cursor",i);let u="";const d=this.buildFullUrl(this.basePath,l,a),h=Y("GET",o,u);return t&&(h.headers.Authorization="Bearer "+t),Promise.race([fetch(d,h).then(f=>{if(f.status==204)return f;if(f.status>=200&&f.status<300)return f.json();throw f}),new Promise((f,g)=>setTimeout(g,this.timeoutMs,"Request timed out."))])}listMatches(t,e,n,r,s,i,o,l={}){const a="/v2/match",u=new Map;u.set("limit",e),u.set("authoritative",n),u.set("label",r),u.set("min_size",s),u.set("max_size",i),u.set("query",o);let d="";const h=this.buildFullUrl(this.basePath,a,u),f=Y("GET",l,d);return t&&(f.headers.Authorization="Bearer "+t),Promise.race([fetch(h,f).then(g=>{if(g.status==204)return g;if(g.status>=200&&g.status<300)return g.json();throw g}),new Promise((g,w)=>setTimeout(w,this.timeoutMs,"Request timed out."))])}deleteNotifications(t,e,n={}){const r="/v2/notification",s=new Map;s.set("ids",e);let i="";const o=this.buildFullUrl(this.basePath,r,s),l=Y("DELETE",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listNotifications(t,e,n,r={}){const s="/v2/notification",i=new Map;i.set("limit",e),i.set("cacheable_cursor",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=Y("GET",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}rpcFunc2(t,e,n,r,s={}){if(e==null)throw new Error("'id' is a required parameter but is null or undefined.");const i="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(e))),o=new Map;o.set("payload",n),o.set("http_key",r);let l="";const a=this.buildFullUrl(this.basePath,i,o),u=Y("GET",s,l);return t&&(u.headers.Authorization="Bearer "+t),Promise.race([fetch(a,u).then(d=>{if(d.status==204)return d;if(d.status>=200&&d.status<300)return d.json();throw d}),new Promise((d,h)=>setTimeout(h,this.timeoutMs,"Request timed out."))])}rpcFunc(t,e,n,r,s={}){if(e==null)throw new Error("'id' is a required parameter but is null or undefined.");if(n==null)throw new Error("'body' is a required parameter but is null or undefined.");const i="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(e))),o=new Map;o.set("http_key",r);let l="";l=JSON.stringify(n||{});const a=this.buildFullUrl(this.basePath,i,o),u=Y("POST",s,l);return t&&(u.headers.Authorization="Bearer "+t),Promise.race([fetch(a,u).then(d=>{if(d.status==204)return d;if(d.status>=200&&d.status<300)return d.json();throw d}),new Promise((d,h)=>setTimeout(h,this.timeoutMs,"Request timed out."))])}sessionLogout(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/session/logout",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}readStorageObjects(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/storage",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}writeStorageObjects(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/storage",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("PUT",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}deleteStorageObjects(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/storage/delete",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=Y("PUT",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listStorageObjects(t,e,n,r,s,i={}){if(e==null)throw new Error("'collection' is a required parameter but is null or undefined.");const o="/v2/storage/{collection}".replace("{collection}",encodeURIComponent(String(e))),l=new Map;l.set("user_id",n),l.set("limit",r),l.set("cursor",s);let a="";const u=this.buildFullUrl(this.basePath,o,l),d=Y("GET",i,a);return t&&(d.headers.Authorization="Bearer "+t),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,f)=>setTimeout(f,this.timeoutMs,"Request timed out."))])}listStorageObjects2(t,e,n,r,s,i={}){if(e==null)throw new Error("'collection' is a required parameter but is null or undefined.");if(n==null)throw new Error("'userId' is a required parameter but is null or undefined.");const o="/v2/storage/{collection}/{userId}".replace("{collection}",encodeURIComponent(String(e))).replace("{userId}",encodeURIComponent(String(n))),l=new Map;l.set("limit",r),l.set("cursor",s);let a="";const u=this.buildFullUrl(this.basePath,o,l),d=Y("GET",i,a);return t&&(d.headers.Authorization="Bearer "+t),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,f)=>setTimeout(f,this.timeoutMs,"Request timed out."))])}listTournaments(t,e,n,r,s,i,o,l={}){const a="/v2/tournament",u=new Map;u.set("category_start",e),u.set("category_end",n),u.set("start_time",r),u.set("end_time",s),u.set("limit",i),u.set("cursor",o);let d="";const h=this.buildFullUrl(this.basePath,a,u),f=Y("GET",l,d);return t&&(f.headers.Authorization="Bearer "+t),Promise.race([fetch(h,f).then(g=>{if(g.status==204)return g;if(g.status>=200&&g.status<300)return g.json();throw g}),new Promise((g,w)=>setTimeout(w,this.timeoutMs,"Request timed out."))])}deleteTournamentRecord(t,e,n={}){if(e==null)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const r="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=Y("DELETE",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listTournamentRecords(t,e,n,r,s,i,o={}){if(e==null)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const l="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(e))),a=new Map;a.set("owner_ids",n),a.set("limit",r),a.set("cursor",s),a.set("expiry",i);let u="";const d=this.buildFullUrl(this.basePath,l,a),h=Y("GET",o,u);return t&&(h.headers.Authorization="Bearer "+t),Promise.race([fetch(d,h).then(f=>{if(f.status==204)return f;if(f.status>=200&&f.status<300)return f.json();throw f}),new Promise((f,g)=>setTimeout(g,this.timeoutMs,"Request timed out."))])}writeTournamentRecord2(t,e,n,r={}){if(e==null)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(n==null)throw new Error("'record' is a required parameter but is null or undefined.");const s="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(e))),i=new Map;let o="";o=JSON.stringify(n||{});const l=this.buildFullUrl(this.basePath,s,i),a=Y("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}writeTournamentRecord(t,e,n,r={}){if(e==null)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(n==null)throw new Error("'record' is a required parameter but is null or undefined.");const s="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(e))),i=new Map;let o="";o=JSON.stringify(n||{});const l=this.buildFullUrl(this.basePath,s,i),a=Y("PUT",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}joinTournament(t,e,n={}){if(e==null)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const r="/v2/tournament/{tournamentId}/join".replace("{tournamentId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=Y("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listTournamentRecordsAroundOwner(t,e,n,r,s,i,o={}){if(e==null)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(n==null)throw new Error("'ownerId' is a required parameter but is null or undefined.");const l="/v2/tournament/{tournamentId}/owner/{ownerId}".replace("{tournamentId}",encodeURIComponent(String(e))).replace("{ownerId}",encodeURIComponent(String(n))),a=new Map;a.set("limit",r),a.set("expiry",s),a.set("cursor",i);let u="";const d=this.buildFullUrl(this.basePath,l,a),h=Y("GET",o,u);return t&&(h.headers.Authorization="Bearer "+t),Promise.race([fetch(d,h).then(f=>{if(f.status==204)return f;if(f.status>=200&&f.status<300)return f.json();throw f}),new Promise((f,g)=>setTimeout(g,this.timeoutMs,"Request timed out."))])}getUsers(t,e,n,r,s={}){const i="/v2/user",o=new Map;o.set("ids",e),o.set("usernames",n),o.set("facebook_ids",r);let l="";const a=this.buildFullUrl(this.basePath,i,o),u=Y("GET",s,l);return t&&(u.headers.Authorization="Bearer "+t),Promise.race([fetch(a,u).then(d=>{if(d.status==204)return d;if(d.status>=200&&d.status<300)return d.json();throw d}),new Promise((d,h)=>setTimeout(h,this.timeoutMs,"Request timed out."))])}listUserGroups(t,e,n,r,s,i={}){if(e==null)throw new Error("'userId' is a required parameter but is null or undefined.");const o="/v2/user/{userId}/group".replace("{userId}",encodeURIComponent(String(e))),l=new Map;l.set("limit",n),l.set("state",r),l.set("cursor",s);let a="";const u=this.buildFullUrl(this.basePath,o,l),d=Y("GET",i,a);return t&&(d.headers.Authorization="Bearer "+t),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,f)=>setTimeout(f,this.timeoutMs,"Request timed out."))])}buildFullUrl(t,e,n){let r=t+e+"?";for(let[s,i]of n)i instanceof Array?r+=i.reduce((o,l)=>o+encodeURIComponent(s)+"="+encodeURIComponent(l)+"&",""):i!=null&&(r+=encodeURIComponent(s)+"="+encodeURIComponent(i)+"&");return r}},ls=class{constructor(t,e,n){this.created=n,this.token=t,this.refresh_token=e,this.created_at=Math.floor(new Date().getTime()/1e3),this.update(t,e)}isexpired(t){return this.expires_at-t<0}isrefreshexpired(t){return this.refresh_expires_at-t<0}update(t,e){const n=t.split(".");if(n.length!=3)throw"jwt is not valid.";const r=JSON.parse(gf(n[1])),s=Math.floor(parseInt(r.exp));if(e){const i=e.split(".");if(i.length!=3)throw"refresh jwt is not valid.";const o=JSON.parse(gf(i[1])),l=Math.floor(parseInt(o.exp));this.refresh_expires_at=l,this.refresh_token=e}this.token=t,this.expires_at=s,this.username=r.usn,this.user_id=r.uid,this.vars=r.vrs}static restore(t,e){return new ls(t,e,!1)}},Ma="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(ou=0;ou<Ma.length;ou++)wu[Ma.charCodeAt(ou)]=ou;var ou,mT=function(t){var e=new Uint8Array(t),n,r=e.length,s="";for(n=0;n<r;n+=3)s+=Ma[e[n]>>2],s+=Ma[(e[n]&3)<<4|e[n+1]>>4],s+=Ma[(e[n+1]&15)<<2|e[n+2]>>6],s+=Ma[e[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s},gT=function(t){var e=t.length*.75,n=t.length,r,s=0,i,o,l,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=new ArrayBuffer(e),d=new Uint8Array(u);for(r=0;r<n;r+=4)i=wu[t.charCodeAt(r)],o=wu[t.charCodeAt(r+1)],l=wu[t.charCodeAt(r+2)],a=wu[t.charCodeAt(r+3)],d[s++]=i<<2|o>>4,d[s++]=(o&15)<<4|l>>2,d[s++]=(l&3)<<6|a&63;return u},mN=class{get onClose(){return this._socket.onclose}set onClose(t){this._socket.onclose=t}get onError(){return this._socket.onerror}set onError(t){this._socket.onerror=t}get onMessage(){return this._socket.onmessage}set onMessage(t){t?this._socket.onmessage=e=>{const n=JSON.parse(e.data);n.match_data&&n.match_data.data?n.match_data.data=new Uint8Array(gT(n.match_data.data)):n.party_data&&n.party_data.data&&(n.party_data.data=new Uint8Array(gT(n.party_data.data))),t(n)}:t=null}get onOpen(){return this._socket.onopen}set onOpen(t){this._socket.onopen=t}isOpen(){var t;return((t=this._socket)==null?void 0:t.readyState)==WebSocket.OPEN}connect(t,e,n,r,s){const i=`${t}${e}:${n}/ws?lang=en&status=${encodeURIComponent(r.toString())}&token=${encodeURIComponent(s)}`;this._socket=new WebSocket(i)}close(){this._socket.close(),this._socket=void 0}send(t){if(t.match_data_send){t.match_data_send.op_code=t.match_data_send.op_code.toString();let e=t.match_data_send.data;e&&e instanceof Uint8Array?t.match_data_send.data=mT(e.buffer):e&&(t.match_data_send.data=mf(e))}else if(t.party_data_send){t.party_data_send.op_code=t.party_data_send.op_code.toString();let e=t.party_data_send.data;e&&e instanceof Uint8Array?t.party_data_send.data=mT(e.buffer):e&&(t.party_data_send.data=mf(e))}this._socket.send(JSON.stringify(t))}},vu=class{constructor(t,e,n=!1,r=!1,s=new mN,i=vu.DefaultSendTimeoutMs){this.host=t,this.port=e,this.useSSL=n,this.verbose=r,this.adapter=s,this.sendTimeoutMs=i,this.cIds={},this.nextCid=1,this._heartbeatTimeoutMs=vu.DefaultHeartbeatTimeoutMs}generatecid(){const t=this.nextCid.toString();return++this.nextCid,t}connect(t,e=!1,n=vu.DefaultConnectTimeoutMs){if(this.adapter.isOpen())return Promise.resolve(t);const r=this.useSSL?"wss://":"ws://";return this.adapter.connect(r,this.host,this.port,e,t.token),this.adapter.onClose=s=>{this.ondisconnect(s)},this.adapter.onError=s=>{this.onerror(s)},this.adapter.onMessage=s=>{if(this.verbose&&window&&window.console&&console.log("Response: %o",JSON.stringify(s)),!s.cid)s.notifications?s.notifications.notifications.forEach(i=>{i.content=i.content?JSON.parse(i.content):void 0,this.onnotification(i)}):s.match_data?(s.match_data.op_code=parseInt(s.match_data.op_code),this.onmatchdata(s.match_data)):s.match_presence_event?this.onmatchpresence(s.match_presence_event):s.matchmaker_ticket?this.onmatchmakerticket(s.matchmaker_ticket):s.matchmaker_matched?this.onmatchmakermatched(s.matchmaker_matched):s.status_presence_event?this.onstatuspresence(s.status_presence_event):s.stream_presence_event?this.onstreampresence(s.stream_presence_event):s.stream_data?this.onstreamdata(s.stream_data):s.channel_message?(s.channel_message.content=JSON.parse(s.channel_message.content),this.onchannelmessage(s.channel_message)):s.channel_presence_event?this.onchannelpresence(s.channel_presence_event):s.party_data?(s.party_data.op_code=parseInt(s.party_data.op_code),this.onpartydata(s.party_data)):s.party_close?this.onpartyclose(s.party_close):s.party_join_request?this.onpartyjoinrequest(s.party_join_request):s.party_leader?this.onpartyleader(s.party_leader):s.party_matchmaker_ticket?this.onpartymatchmakerticket(s.party_matchmaker_ticket):s.party_presence_event?this.onpartypresence(s.party_presence_event):s.party?this.onparty(s.party):this.verbose&&window&&window.console&&console.log("Unrecognized message received: %o",s);else{const i=this.cIds[s.cid];if(!i){this.verbose&&window&&window.console&&console.error("No promise executor for message: %o",s);return}delete this.cIds[s.cid],s.error?i.reject(s.error):i.resolve(s)}},new Promise((s,i)=>{this.adapter.onOpen=o=>{this.verbose&&window&&window.console&&console.log(o),this.pingPong(),s(t)},this.adapter.onError=o=>{i(o),this.adapter.close()},setTimeout(()=>{i("The socket timed out when trying to connect.")},n)})}disconnect(t=!0){this.adapter.isOpen()&&this.adapter.close(),t&&this.ondisconnect({})}setHeartbeatTimeoutMs(t){this._heartbeatTimeoutMs=t}getHeartbeatTimeoutMs(){return this._heartbeatTimeoutMs}ondisconnect(t){this.verbose&&window&&window.console&&console.log(t)}onerror(t){this.verbose&&window&&window.console&&console.log(t)}onchannelmessage(t){this.verbose&&window&&window.console&&console.log(t)}onchannelpresence(t){this.verbose&&window&&window.console&&console.log(t)}onnotification(t){this.verbose&&window&&window.console&&console.log(t)}onmatchdata(t){this.verbose&&window&&window.console&&console.log(t)}onmatchpresence(t){this.verbose&&window&&window.console&&console.log(t)}onmatchmakerticket(t){this.verbose&&window&&window.console&&console.log(t)}onmatchmakermatched(t){this.verbose&&window&&window.console&&console.log(t)}onparty(t){this.verbose&&window&&window.console&&console.log(t)}onpartyclose(t){this.verbose&&window&&window.console&&console.log("Party closed: "+t)}onpartyjoinrequest(t){this.verbose&&window&&window.console&&console.log(t)}onpartydata(t){this.verbose&&window&&window.console&&console.log(t)}onpartyleader(t){this.verbose&&window&&window.console&&console.log(t)}onpartymatchmakerticket(t){this.verbose&&window&&window.console&&console.log(t)}onpartypresence(t){this.verbose&&window&&window.console&&console.log(t)}onstatuspresence(t){this.verbose&&window&&window.console&&console.log(t)}onstreampresence(t){this.verbose&&window&&window.console&&console.log(t)}onstreamdata(t){this.verbose&&window&&window.console&&console.log(t)}onheartbeattimeout(){this.verbose&&window&&window.console&&console.log("Heartbeat timeout.")}send(t,e=vu.DefaultSendTimeoutMs){const n=t;return new Promise((r,s)=>{if(!this.adapter.isOpen())s("Socket connection has not been established yet.");else if(n.match_data_send)this.adapter.send(n),r();else if(n.party_data_send)this.adapter.send(n),r();else{n.channel_message_send?n.channel_message_send.content=JSON.stringify(n.channel_message_send.content):n.channel_message_update&&(n.channel_message_update.content=JSON.stringify(n.channel_message_update.content));const i=this.generatecid();this.cIds[i]={resolve:r,reject:s},setTimeout(()=>{s("The socket timed out while waiting for a response.")},e),n.cid=i,this.adapter.send(n)}if(this.verbose&&window&&window.console){const i=lh({},n);i.match_data_send&&i.match_data_send.data?i.match_data_send.data=pT(i.match_data_send.data):i.party_data_send&&i.party_data_send.data&&(i.party_data_send.data=pT(i.party_data_send.data)),console.log("Sent message: %o",JSON.stringify(i))}})}acceptPartyMember(t,e){return this.send({party_accept:{party_id:t,presence:e}})}addMatchmaker(t,e,n,r,s){return K(this,null,function*(){return(yield this.send({matchmaker_add:{min_count:e,max_count:n,query:t,string_properties:r,numeric_properties:s}})).matchmaker_ticket})}addMatchmakerParty(t,e,n,r,s,i){return K(this,null,function*(){return(yield this.send({party_matchmaker_add:{party_id:t,min_count:n,max_count:r,query:e,string_properties:s,numeric_properties:i}})).party_matchmaker_ticket})}closeParty(t){return K(this,null,function*(){return yield this.send({party_close:{party_id:t}})})}createMatch(t){return K(this,null,function*(){return(yield this.send({match_create:{name:t}})).match})}createParty(t,e){return K(this,null,function*(){return(yield this.send({party_create:{open:t,max_size:e}})).party})}followUsers(t){return K(this,null,function*(){return(yield this.send({status_follow:{user_ids:t}})).status})}joinChat(t,e,n,r){return K(this,null,function*(){return(yield this.send({channel_join:{target:t,type:e,persistence:n,hidden:r}})).channel})}joinMatch(t,e,n){return K(this,null,function*(){const r={match_join:{metadata:n}};return e?r.match_join.token=e:r.match_join.match_id=t,(yield this.send(r)).match})}joinParty(t){return K(this,null,function*(){return yield this.send({party_join:{party_id:t}})})}leaveChat(t){return this.send({channel_leave:{channel_id:t}})}leaveMatch(t){return this.send({match_leave:{match_id:t}})}leaveParty(t){return this.send({party_leave:{party_id:t}})}listPartyJoinRequests(t){return K(this,null,function*(){return(yield this.send({party_join_request_list:{party_id:t}})).party_join_request})}promotePartyMember(t,e){return K(this,null,function*(){return(yield this.send({party_promote:{party_id:t,presence:e}})).party_leader})}removeChatMessage(t,e){return K(this,null,function*(){return(yield this.send({channel_message_remove:{channel_id:t,message_id:e}})).channel_message_ack})}removeMatchmaker(t){return this.send({matchmaker_remove:{ticket:t}})}removeMatchmakerParty(t,e){return this.send({party_matchmaker_remove:{party_id:t,ticket:e}})}removePartyMember(t,e){return K(this,null,function*(){return this.send({party_remove:{party_id:t,presence:e}})})}rpc(t,e,n){return K(this,null,function*(){return(yield this.send({rpc:{id:t,payload:e,http_key:n}})).rpc})}sendMatchState(t,e,n,r,s){return K(this,null,function*(){return this.send({match_data_send:{match_id:t,op_code:e,data:n,presences:r??[],reliable:s}})})}sendPartyData(t,e,n){return this.send({party_data_send:{party_id:t,op_code:e,data:n}})}unfollowUsers(t){return this.send({status_unfollow:{user_ids:t}})}updateChatMessage(t,e,n){return K(this,null,function*(){return(yield this.send({channel_message_update:{channel_id:t,message_id:e,content:n}})).channel_message_ack})}updateStatus(t){return this.send({status_update:{status:t}})}writeChatMessage(t,e){return K(this,null,function*(){return(yield this.send({channel_message_send:{channel_id:t,content:e}})).channel_message_ack})}pingPong(){return K(this,null,function*(){if(this.adapter.isOpen()){try{yield this.send({ping:{}},this._heartbeatTimeoutMs)}catch{this.adapter.isOpen()&&(window&&window.console&&console.error("Server unreachable from heartbeat."),this.onheartbeattimeout(),this.adapter.close());return}setTimeout(()=>this.pingPong(),this._heartbeatTimeoutMs)}})}},Ac=vu;Ac.DefaultHeartbeatTimeoutMs=1e4;Ac.DefaultSendTimeoutMs=1e4;Ac.DefaultConnectTimeoutMs=3e4;var nJ="127.0.0.1",rJ="7350",sJ="defaultkey",iJ=7e3,oJ=5*60*1e3,aJ=class{constructor(t=sJ,e=nJ,n=rJ,r=!1,s=iJ,i=!0){this.serverkey=t,this.host=e,this.port=n,this.useSSL=r,this.timeout=s,this.autoRefreshSession=i,this.expiredTimespanMs=oJ;const l=`${r?"https://":"http://"}${e}:${n}`;this.apiClient=new tJ(t,l,s)}addGroupUsers(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.addGroupUsers(t.token,e,n).then(r=>r!==void 0)})}addFriends(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.addFriends(t.token,e,n).then(r=>r!==void 0)})}authenticateApple(t,e,n){return K(this,arguments,function*(r,s,i,o={},l={}){const a={token:r,vars:o};return this.apiClient.authenticateApple(this.serverkey,"",a,s,i,l).then(u=>new ls(u.token||"",u.refresh_token||"",u.created||!1))})}authenticateCustom(t,e,n,r={},s={}){const i={id:t,vars:r};return this.apiClient.authenticateCustom(this.serverkey,"",i,e,n,s).then(o=>new ls(o.token||"",o.refresh_token||"",o.created||!1))}authenticateDevice(t,e,n,r){const s={id:t,vars:r};return this.apiClient.authenticateDevice(this.serverkey,"",s,e,n).then(i=>new ls(i.token||"",i.refresh_token||"",i.created||!1))}authenticateEmail(t,e,n,r,s){const i={email:t,password:e,vars:s};return this.apiClient.authenticateEmail(this.serverkey,"",i,n,r).then(o=>new ls(o.token||"",o.refresh_token||"",o.created||!1))}authenticateFacebookInstantGame(t,e,n,r,s={}){const i={signed_player_info:t,vars:r};return this.apiClient.authenticateFacebookInstantGame(this.serverkey,"",{signed_player_info:i.signed_player_info,vars:i.vars},e,n,s).then(o=>new ls(o.token||"",o.refresh_token||"",o.created||!1))}authenticateFacebook(t,e,n,r,s,i={}){const o={token:t,vars:s};return this.apiClient.authenticateFacebook(this.serverkey,"",o,e,n,r,i).then(l=>new ls(l.token||"",l.refresh_token||"",l.created||!1))}authenticateGoogle(t,e,n,r){return K(this,arguments,function*(s,i,o,l,a={}){const u={token:s,vars:l},d=yield this.apiClient.authenticateGoogle(this.serverkey,"",u,i,o,a);return new ls(d.token||"",d.refresh_token||"",d.created||!1)})}authenticateGameCenter(t,e,n,r,s,i,o,l,a){return K(this,arguments,function*(u,d,h,f,g,w,E,b,v,x={}){const T={bundle_id:u,player_id:d,public_key_url:h,salt:f,signature:g,timestamp_seconds:w,vars:v},D=yield this.apiClient.authenticateGameCenter(this.serverkey,"",T,b,E,x);return new ls(D.token||"",D.refresh_token||"",D.created||!1)})}authenticateSteam(t,e,n,r,s){return K(this,null,function*(){const i={token:t,vars:s,sync:r};return this.apiClient.authenticateSteam(this.serverkey,"",i,e,n).then(o=>new ls(o.token||"",o.refresh_token||"",o.created||!1))})}banGroupUsers(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.banGroupUsers(t.token,e,n).then(r=>r!==void 0)})}blockFriends(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.blockFriends(t.token,e,n).then(r=>Promise.resolve(r!=null))})}createGroup(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.createGroup(t.token,e).then(n=>Promise.resolve({avatar_url:n.avatar_url,create_time:n.create_time,creator_id:n.creator_id,description:n.description,edge_count:n.edge_count?Number(n.edge_count):0,id:n.id,lang_tag:n.lang_tag,max_count:n.max_count?Number(n.max_count):0,metadata:n.metadata?JSON.parse(n.metadata):void 0,name:n.name,open:n.open,update_time:n.update_time}))})}createSocket(t=!1,e=!1,n=new mN,r=Ac.DefaultSendTimeoutMs){return new Ac(this.host,this.port,t,e,n,r)}deleteAccount(t){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.deleteAccount(t.token).then(e=>e!==void 0)})}deleteFriends(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.deleteFriends(t.token,e,n).then(r=>r!==void 0)})}deleteGroup(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.deleteGroup(t.token,e).then(n=>n!==void 0)})}deleteNotifications(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.deleteNotifications(t.token,e).then(n=>Promise.resolve(n!=null))})}deleteStorageObjects(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.deleteStorageObjects(t.token,e).then(n=>Promise.resolve(n!=null))})}deleteTournamentRecord(t,e){return K(this,null,function*(){return this.apiClient.deleteTournamentRecord(t.token,e)})}demoteGroupUsers(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.demoteGroupUsers(t.token,e,n).then(r=>Promise.resolve(r!=null))})}emitEvent(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.event(t.token,e).then(n=>Promise.resolve(n!=null))})}getAccount(t){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.getAccount(t.token)})}getSubscription(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.getSubscription(t.token,e)})}importFacebookFriends(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.importFacebookFriends(t.token,e).then(n=>n!==void 0)})}importSteamFriends(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.importSteamFriends(t.token,e,n).then(r=>r!==void 0)})}getUsers(t,e,n,r){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.getUsers(t.token,e,n,r).then(s=>{var i={users:[]};return s.users==null||s.users.forEach(o=>{i.users.push({avatar_url:o.avatar_url,create_time:o.create_time,display_name:o.display_name,edge_count:o.edge_count?Number(o.edge_count):0,facebook_id:o.facebook_id,gamecenter_id:o.gamecenter_id,google_id:o.google_id,id:o.id,lang_tag:o.lang_tag,location:o.location,online:o.online,steam_id:o.steam_id,timezone:o.timezone,update_time:o.update_time,username:o.username,metadata:o.metadata?JSON.parse(o.metadata):void 0})}),Promise.resolve(i)})})}joinGroup(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.joinGroup(t.token,e,{}).then(n=>n!==void 0)})}joinTournament(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.joinTournament(t.token,e,{}).then(n=>n!==void 0)})}kickGroupUsers(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.kickGroupUsers(t.token,e,n).then(r=>Promise.resolve(r!=null))})}leaveGroup(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.leaveGroup(t.token,e,{}).then(n=>n!==void 0)})}listChannelMessages(t,e,n,r,s){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listChannelMessages(t.token,e,n,r,s).then(i=>{var o={messages:[],next_cursor:i.next_cursor,prev_cursor:i.prev_cursor,cacheable_cursor:i.cacheable_cursor};return i.messages==null||i.messages.forEach(l=>{o.messages.push({channel_id:l.channel_id,code:l.code?Number(l.code):0,create_time:l.create_time,message_id:l.message_id,persistent:l.persistent,sender_id:l.sender_id,update_time:l.update_time,username:l.username,content:l.content?JSON.parse(l.content):void 0,group_id:l.group_id,room_name:l.room_name,user_id_one:l.user_id_one,user_id_two:l.user_id_two})}),Promise.resolve(o)})})}listGroupUsers(t,e,n,r,s){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listGroupUsers(t.token,e,r,n,s).then(i=>{var o={group_users:[],cursor:i.cursor};return i.group_users==null||i.group_users.forEach(l=>{o.group_users.push({user:{avatar_url:l.user.avatar_url,create_time:l.user.create_time,display_name:l.user.display_name,edge_count:l.user.edge_count?Number(l.user.edge_count):0,facebook_id:l.user.facebook_id,gamecenter_id:l.user.gamecenter_id,google_id:l.user.google_id,id:l.user.id,lang_tag:l.user.lang_tag,location:l.user.location,online:l.user.online,steam_id:l.user.steam_id,timezone:l.user.timezone,update_time:l.user.update_time,username:l.user.username,metadata:l.user.metadata?JSON.parse(l.user.metadata):void 0},state:l.state?Number(l.state):0})}),Promise.resolve(o)})})}listUserGroups(t,e,n,r,s){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listUserGroups(t.token,e,n,r,s).then(i=>{var o={user_groups:[],cursor:i.cursor};return i.user_groups==null||i.user_groups.forEach(l=>{o.user_groups.push({group:{avatar_url:l.group.avatar_url,create_time:l.group.create_time,creator_id:l.group.creator_id,description:l.group.description,edge_count:l.group.edge_count?Number(l.group.edge_count):0,id:l.group.id,lang_tag:l.group.lang_tag,max_count:l.group.max_count,metadata:l.group.metadata?JSON.parse(l.group.metadata):void 0,name:l.group.name,open:l.group.open,update_time:l.group.update_time},state:l.state?Number(l.state):0})}),Promise.resolve(o)})})}listGroups(t,e,n,r){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listGroups(t.token,e,n,r).then(s=>{var i={groups:[]};return s.groups==null||(i.cursor=s.cursor,s.groups.forEach(o=>{i.groups.push({avatar_url:o.avatar_url,create_time:o.create_time,creator_id:o.creator_id,description:o.description,edge_count:o.edge_count?Number(o.edge_count):0,id:o.id,lang_tag:o.lang_tag,max_count:o.max_count,metadata:o.metadata?JSON.parse(o.metadata):void 0,name:o.name,open:o.open,update_time:o.update_time})})),Promise.resolve(i)})})}linkApple(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkApple(t.token,e).then(n=>n!==void 0)})}linkCustom(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkCustom(t.token,e).then(n=>n!==void 0)})}linkDevice(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkDevice(t.token,e).then(n=>n!==void 0)})}linkEmail(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkEmail(t.token,e).then(n=>n!==void 0)})}linkFacebook(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkFacebook(t.token,e).then(n=>n!==void 0)})}linkFacebookInstantGame(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkFacebookInstantGame(t.token,e).then(n=>n!==void 0)})}linkGoogle(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkGoogle(t.token,e).then(n=>n!==void 0)})}linkGameCenter(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkGameCenter(t.token,e).then(n=>n!==void 0)})}linkSteam(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkSteam(t.token,e).then(n=>n!==void 0)})}listFriends(t,e,n,r){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listFriends(t.token,n,e,r).then(s=>{var i={friends:[],cursor:s.cursor};return s.friends==null||s.friends.forEach(o=>{i.friends.push({user:{avatar_url:o.user.avatar_url,create_time:o.user.create_time,display_name:o.user.display_name,edge_count:o.user.edge_count?Number(o.user.edge_count):0,facebook_id:o.user.facebook_id,gamecenter_id:o.user.gamecenter_id,google_id:o.user.google_id,id:o.user.id,lang_tag:o.user.lang_tag,location:o.user.location,online:o.user.online,steam_id:o.user.steam_id,timezone:o.user.timezone,update_time:o.user.update_time,username:o.user.username,metadata:o.user.metadata?JSON.parse(o.user.metadata):void 0,facebook_instant_game_id:o.user.facebook_instant_game_id},state:o.state})}),Promise.resolve(i)})})}listFriendsOfFriends(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listFriendsOfFriends(t.token,e,n).then(r=>{var s={friends_of_friends:[],cursor:r.cursor};return r.friends_of_friends==null||r.friends_of_friends.forEach(i=>{s.friends_of_friends.push({referrer:i.referrer,user:{avatar_url:i.user.avatar_url,create_time:i.user.create_time,display_name:i.user.display_name,edge_count:i.user.edge_count?Number(i.user.edge_count):0,facebook_id:i.user.facebook_id,gamecenter_id:i.user.gamecenter_id,google_id:i.user.google_id,id:i.user.id,lang_tag:i.user.lang_tag,location:i.user.location,online:i.user.online,steam_id:i.user.steam_id,timezone:i.user.timezone,update_time:i.user.update_time,username:i.user.username,metadata:i.user.metadata?JSON.parse(i.user.metadata):void 0,facebook_instant_game_id:i.user.facebook_instant_game_id}})}),Promise.resolve(s)})})}listLeaderboardRecords(t,e,n,r,s,i){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listLeaderboardRecords(t.token,e,n,r,s,i).then(o=>{var l={next_cursor:o.next_cursor,prev_cursor:o.prev_cursor,rank_count:o.rank_count?Number(o.rank_count):0,owner_records:[],records:[]};return o.owner_records!=null&&o.owner_records.forEach(a=>{l.owner_records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),o.records!=null&&o.records.forEach(a=>{l.records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),Promise.resolve(l)})})}listLeaderboardRecordsAroundOwner(t,e,n,r,s,i){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listLeaderboardRecordsAroundOwner(t.token,e,n,r,s,i).then(o=>{var l={next_cursor:o.next_cursor,prev_cursor:o.prev_cursor,rank_count:o.rank_count?Number(o.rank_count):0,owner_records:[],records:[]};return o.owner_records!=null&&o.owner_records.forEach(a=>{l.owner_records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),o.records!=null&&o.records.forEach(a=>{l.records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),Promise.resolve(l)})})}listMatches(t,e,n,r,s,i,o){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listMatches(t.token,e,n,r,s,i,o)})}listNotifications(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listNotifications(t.token,e,n).then(r=>{var s={cacheable_cursor:r.cacheable_cursor,notifications:[]};return r.notifications==null||r.notifications.forEach(i=>{s.notifications.push({code:i.code?Number(i.code):0,create_time:i.create_time,id:i.id,persistent:i.persistent,sender_id:i.sender_id,subject:i.subject,content:i.content?JSON.parse(i.content):void 0})}),Promise.resolve(s)})})}listStorageObjects(t,e,n,r,s){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listStorageObjects(t.token,e,n,r,s).then(i=>{var o={objects:[],cursor:i.cursor};return i.objects==null||i.objects.forEach(l=>{o.objects.push({collection:l.collection,key:l.key,permission_read:l.permission_read?Number(l.permission_read):0,permission_write:l.permission_write?Number(l.permission_write):0,value:l.value?JSON.parse(l.value):void 0,version:l.version,user_id:l.user_id,create_time:l.create_time,update_time:l.update_time})}),Promise.resolve(o)})})}listTournaments(t,e,n,r,s,i,o){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listTournaments(t.token,e,n,r,s,i,o).then(l=>{var a={cursor:l.cursor,tournaments:[]};return l.tournaments!=null&&l.tournaments.forEach(u=>{a.tournaments.push({id:u.id,title:u.title,description:u.description,duration:u.duration?Number(u.duration):0,category:u.category?Number(u.category):0,sort_order:u.sort_order?Number(u.sort_order):0,size:u.size?Number(u.size):0,max_size:u.max_size?Number(u.max_size):0,max_num_score:u.max_num_score?Number(u.max_num_score):0,can_enter:u.can_enter,end_active:u.end_active?Number(u.end_active):0,next_reset:u.next_reset?Number(u.next_reset):0,metadata:u.metadata?JSON.parse(u.metadata):void 0,create_time:u.create_time,start_time:u.start_time,end_time:u.end_time,start_active:u.start_active,authoritative:u.authoritative})}),Promise.resolve(a)})})}listSubscriptions(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listSubscriptions(t.token,{cursor:e,limit:n})})}listTournamentRecords(t,e,n,r,s,i){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listTournamentRecords(t.token,e,n,r,s,i).then(o=>{var l={next_cursor:o.next_cursor,prev_cursor:o.prev_cursor,owner_records:[],records:[]};return o.owner_records!=null&&o.owner_records.forEach(a=>{l.owner_records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),o.records!=null&&o.records.forEach(a=>{l.records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),Promise.resolve(l)})})}listTournamentRecordsAroundOwner(t,e,n,r,s,i){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listTournamentRecordsAroundOwner(t.token,e,n,r,s,i).then(o=>{var l={next_cursor:o.next_cursor,prev_cursor:o.prev_cursor,owner_records:[],records:[]};return o.owner_records!=null&&o.owner_records.forEach(a=>{l.owner_records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),o.records!=null&&o.records.forEach(a=>{l.records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),Promise.resolve(l)})})}promoteGroupUsers(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.promoteGroupUsers(t.token,e,n)})}readStorageObjects(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.readStorageObjects(t.token,e).then(n=>{var r={objects:[]};return n.objects==null||n.objects.forEach(s=>{r.objects.push({collection:s.collection,key:s.key,permission_read:s.permission_read?Number(s.permission_read):0,permission_write:s.permission_write?Number(s.permission_write):0,value:s.value?JSON.parse(s.value):void 0,version:s.version,user_id:s.user_id,create_time:s.create_time,update_time:s.update_time})}),Promise.resolve(r)})})}rpc(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.rpcFunc(t.token,e,JSON.stringify(n)).then(r=>Promise.resolve({id:r.id,payload:r.payload?JSON.parse(r.payload):void 0}))})}rpcHttpKey(t,e,n){return K(this,null,function*(){return this.apiClient.rpcFunc2("",e,n&&JSON.stringify(n)||"",t).then(r=>Promise.resolve({id:r.id,payload:r.payload?JSON.parse(r.payload):void 0})).catch(r=>{throw r})})}sessionLogout(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.sessionLogout(t.token,{refresh_token:n,token:e}).then(r=>r!==void 0)})}sessionRefresh(t){return K(this,arguments,function*(e,n={}){if(!e)return console.error("Cannot refresh a null session."),e;e.created&&e.expires_at-e.created_at<70&&console.warn("Session lifetime too short, please set '--session.token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session"),e.created&&e.refresh_expires_at-e.created_at<3700&&console.warn("Session refresh lifetime too short, please set '--session.refresh_token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session");const r=yield this.apiClient.sessionRefresh(this.serverkey,"",{token:e.refresh_token,vars:n});return e.update(r.token,r.refresh_token),e})}unlinkApple(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkApple(t.token,e).then(n=>n!==void 0)})}unlinkCustom(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkCustom(t.token,e).then(n=>n!==void 0)})}unlinkDevice(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkDevice(t.token,e).then(n=>n!==void 0)})}unlinkEmail(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkEmail(t.token,e).then(n=>n!==void 0)})}unlinkFacebook(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkFacebook(t.token,e).then(n=>n!==void 0)})}unlinkFacebookInstantGame(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkFacebookInstantGame(t.token,e).then(n=>n!==void 0)})}unlinkGoogle(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkGoogle(t.token,e).then(n=>n!==void 0)})}unlinkGameCenter(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkGameCenter(t.token,e).then(n=>n!==void 0)})}unlinkSteam(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkSteam(t.token,e).then(n=>n!==void 0)})}updateAccount(t,e){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.updateAccount(t.token,e).then(n=>n!==void 0)})}updateGroup(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.updateGroup(t.token,e,n).then(r=>r!==void 0)})}validatePurchaseApple(t,e,n=!0){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.validatePurchaseApple(t.token,{receipt:e,persist:n})})}validatePurchaseFacebookInstant(t,e,n=!0){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.validatePurchaseFacebookInstant(t.token,{signed_request:e,persist:n})})}validatePurchaseGoogle(t,e,n=!0){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.validatePurchaseGoogle(t.token,{purchase:e,persist:n})})}validatePurchaseHuawei(t,e,n,r=!0){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.validatePurchaseHuawei(t.token,{purchase:e,signature:n,persist:r})})}validateSubscriptionApple(t,e,n=!0){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.validateSubscriptionApple(t.token,{receipt:e,persist:n})})}validateSubscriptionGoogle(t,e,n=!0){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.validateSubscriptionGoogle(t.token,{receipt:e,persist:n})})}writeLeaderboardRecord(t,e,n){return K(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.writeLeaderboardRecord(t.token,e,{metadata:n.metadata?JSON.stringify(n.metadata):void 0,score:n.score,subscore:n.subscore}).then(r=>Promise.resolve({expiry_time:r.expiry_time,leaderboard_id:r.leaderboard_id,metadata:r.metadata?JSON.parse(r.metadata):void 0,num_score:r.num_score?Number(r.num_score):0,owner_id:r.owner_id,score:r.score?Number(r.score):0,subscore:r.subscore?Number(r.subscore):0,update_time:r.update_time,username:r.username,max_num_score:r.max_num_score?Number(r.max_num_score):0,rank:r.rank?Number(r.rank):0}))})}writeStorageObjects(t,e){return K(this,null,function*(){this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t));var n={objects:[]};return e.forEach(r=>{n.objects.push({collection:r.collection,key:r.key,permission_read:r.permission_read,permission_write:r.permission_write,value:JSON.stringify(r.value),version:r.version})}),this.apiClient.writeStorageObjects(t.token,n)})}writeTournamentRecord(t,e,n){return K(this,null,function*(){return this.apiClient.writeTournamentRecord(t.token,e,{metadata:n.metadata?JSON.stringify(n.metadata):void 0,score:n.score,subscore:n.subscore}).then(r=>Promise.resolve({expiry_time:r.expiry_time,leaderboard_id:r.leaderboard_id,metadata:r.metadata?JSON.parse(r.metadata):void 0,num_score:r.num_score?Number(r.num_score):0,owner_id:r.owner_id,score:r.score?Number(r.score):0,subscore:r.subscore?Number(r.subscore):0,update_time:r.update_time,username:r.username,max_num_score:r.max_num_score?Number(r.max_num_score):0,rank:r.rank?Number(r.rank):0}))})}};const Ai={};let t_=null,jo=null,Oa=null,Xo=null,y0=null;const zu=new Set,w0=new Set,yT=t=>{if(!t)return!1;const e=t.adapter;if(e&&typeof e.isOpen=="function")try{return!!e.isOpen()}catch{return!1}return!1},yf=t=>{t&&Ai[t]&&delete Ai[t],t_=null,jo=null,Oa=null,Xo=null,y0=null},lJ="chat.devdlfjstizlzl.xyz",wT=lJ.replace(/^https?:\/\//,"").replace(/\/+$/,""),bg="true".toLowerCase()==="true",vT="443",uJ="defaultkey";function Cc(t){if(!t)return"";if(typeof t=="string")return t.trim();if(typeof t=="object"){const e=t,n=e.uid||e.id;if(typeof n=="string")return n.trim()}return String(t).trim()}function gN(t){const e=Cc(t);if(!e)return console.error(" Nakama Error: deviceId is empty or invalid.",t),Promise.reject(new Error("Missing device id for Nakama authentication"));const n=e;return Ai[n]||(Ai[n]=(async()=>{try{const r=new aJ(uJ,wT,vT,bg);console.log(" [Nakama] Connecting...",{host:wT,port:vT,useSSL:bg,deviceIdType:typeof e,deviceId:e});const s=await r.authenticateDevice(e,!0);console.log(" [Nakama] Auth Success:",s.user_id);const i=r.createSocket(bg,!1);return await i.connect(s,!0),console.log(" [Nakama] Socket Connected"),{client:r,socket:i,session:s}}catch(r){throw console.error(" [Nakama] Connection Failed:",r),delete Ai[n],r}})()),Ai[n]}function cJ(t){y0!==t&&(y0=t,console.log("[Nakama] Installing socket dispatchers..."),t.onchannelmessage=e=>{console.log(`[Nakama] onchannelmessage received. Channel: ${e.channel_id}, Code: ${e.code}, Content:`,e.content),console.log(`[Nakama] Dispatching to ${zu.size} handlers.`),zu.size===0&&console.warn("[Nakama] No handlers registered! Message dropped."),zu.forEach(n=>{try{n(e)}catch(r){console.error("[Nakama] onchannelmessage handler error",r)}})},t.onchannelpresence=e=>{console.log("[Nakama] onchannelpresence received:",e),w0.forEach(n=>{try{n(e)}catch(r){console.error("[Nakama] onchannelpresence handler error",r)}})},t.ondisconnect=e=>{console.warn("[Nakama] Socket Disconnected:",e),yf(Xo)},t.onerror=e=>{console.error("[Nakama] Socket Error:",e),yf(Xo)})}async function Dp(t){const e=Cc(t);if(!e)throw new Error("Missing device id for Nakama socket");if(Oa&&Xo===e&&yT(Oa))return Oa;const{client:n,socket:r,session:s}=await gN(e);try{yT(r)||await r.connect(s,!0)}catch(i){throw yf(e),i}return t_=n,jo=s,Oa=r,Xo=e,cJ(r),r}function dJ(){return Oa}function hJ(){return(jo==null?void 0:jo.user_id)||null}function fJ(t){const e=Cc(t);if(!e)return;const n=Ai[e];n&&n.then(({socket:r})=>{try{typeof r.close=="function"?r.close():r.disconnect(!1)}catch{}}).catch(()=>{}),yf(e),console.log("[Nakama] Connection reset.")}async function uh(t,e){const n=Cc(t),r=Cc(e);if(!n||!r)throw new Error("Missing user id for chat channel");const s=await Dp(n),{client:i,session:o}=await gN(n),l=["dm",n,r].sort().join("_"),a=await s.joinChat(l,1,!0,!1),u=await i.listChannelMessages(o,a.id,50,!1);return{channelId:a.id,messages:u.messages||[],socket:s}}async function pJ(t,e){if(!jo||!Xo)throw new Error("Socket not connected. Call connectSocket after login.");const n=await Dp(Xo),r=t_,s=jo,i=await n.joinChat(t,e,!0,!1),o=await r.listChannelMessages(s,i.id,50,!1);return{channel:i,messages:o.messages||[],socket:n}}function wf(t){return zu.add(t),()=>zu.delete(t)}function mJ(t){return w0.add(t),()=>w0.delete(t)}const yN=xl(t=>({isConnected:!1,activeChannelId:null,setSocketStatus:e=>t({isConnected:e}),setActiveChannel:e=>t({activeChannelId:e})}));function gJ(t,e=1){const[n,r]=N.useState([]),[s,i]=N.useState(0),[o,l]=N.useState(!1),[a,u]=N.useState(null),d=N.useRef(null),{isConnected:h}=yN();N.useEffect(()=>{if(!h||!t)return;let g=!0;l(!0),u(null),pJ(t,e).then(({channel:b,messages:v})=>{g&&(d.current=b.id,i(b.presences?b.presences.length:1),r(v),l(!1))}).catch(b=>{g&&(console.error("Failed to join chat:",b),u("Failed to join chat channel."),l(!1))});const w=wf(b=>{const v=d.current;!v||b.channel_id!==v||(console.log("[useChat] Message received for current channel:",{messageId:b.message_id,channelId:b.channel_id,senderId:b.sender_id}),r(x=>x.some(T=>T.message_id===b.message_id)?(console.log("[useChat] Duplicate message ignored:",b.message_id),x):[...x,b]))}),E=mJ(b=>{const v=d.current;(v&&b.channel_id===v||b.channel_id===t)&&i(T=>{const D=b.joins?b.joins.length:0,L=b.leaves?b.leaves.length:0;return Math.max(0,T+D-L)})});return()=>{g=!1,w(),E()}},[t,e,h]);const f=N.useCallback(async g=>{if(!d.current||!g.trim())return;const w=dJ();if(!w){u("Socket disconnected");return}try{const E=await w.writeChatMessage(d.current,{content:g})}catch(E){console.error("Failed to send message:",E),u("Failed to send message")}},[]);return{messages:n,sendMessage:f,onlineCount:s,isLoading:o,error:a}}function yJ({channelId:t,type:e=1,title:n,subtitle:r,className:s=""}){const{messages:i,sendMessage:o,onlineCount:l,isLoading:a}=gJ(t,e),[u,d]=N.useState(""),h=N.useRef(null),f=hJ();N.useEffect(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[i]);const g=async()=>{u.trim()&&(await o(u),d(""))},w=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),g())},E=v=>{try{return JSON.parse(v).content||v}catch{return v}},b=v=>v?new Date(v).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return p.jsxs("div",{className:`flex flex-col h-[600px] border border-pandora-border bg-pandora-bg rounded-2xl overflow-hidden ${s}`,children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-pandora-border bg-pandora-surface/50 backdrop-blur-sm",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-pandora-text",children:n||"Chat Room"}),r&&p.jsx("p",{className:"text-xs text-pandora-muted",children:r})]}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-pandora-muted bg-black/20 px-2 py-1 rounded-full",children:[p.jsx(tI,{size:12}),p.jsxs("span",{children:[l," Online"]})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-black/5",ref:h,children:[a&&i.length===0?p.jsxs("div",{className:"flex items-center justify-center h-full text-pandora-muted",children:[p.jsx(Xt,{className:"animate-spin mr-2",size:16}),"Loading messages..."]}):i.map(v=>{const x=v.sender_id===f,T=E(v.content);return p.jsx("div",{className:`flex flex-col ${x?"items-end":"items-start"}`,children:p.jsxs("div",{className:`flex flex-col max-w-[80%] ${x?"items-end":"items-start"}`,children:[!x&&p.jsx("span",{className:"text-[10px] text-pandora-muted mb-1 ml-1",children:v.username||"Unknown"}),p.jsx("div",{className:`px-4 py-2 rounded-2xl text-sm ${x?"bg-blue-600 text-white rounded-tr-none":"bg-gray-800 text-gray-100 rounded-tl-none"}`,children:T}),p.jsx("span",{className:"text-[10px] text-pandora-muted mt-1 px-1 opacity-70",children:b(v.create_time)})]})},v.message_id)}),i.length===0&&!a&&p.jsx("div",{className:"text-center text-xs text-pandora-muted mt-10",children:"No messages yet. Say hello!"})]}),p.jsx("div",{className:"p-3 border-t border-pandora-border bg-pandora-surface",children:p.jsxs("div",{className:"flex items-center gap-2 bg-pandora-bg border border-pandora-border rounded-full px-4 py-2 focus-within:border-pandora-accent-to transition",children:[p.jsx("input",{className:"flex-1 bg-transparent text-sm text-pandora-text placeholder:text-pandora-muted focus:outline-none",placeholder:"Type a message...",value:u,onChange:v=>d(v.target.value),onKeyDown:w}),p.jsx("button",{onClick:g,disabled:!u.trim(),className:"text-pandora-muted hover:text-pandora-accent-to disabled:opacity-50 transition",children:p.jsx(YC,{size:18})})]})})]})}function wJ(){const t=Pr(S=>S.userStats),{user:e}=Lr(),[n,r]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState([]),[a,u]=N.useState(!1),[d,h]=N.useState(""),[f,g]=N.useState(""),[w,E]=N.useState("PUBLIC"),[b,v]=N.useState("logic"),[x,T]=N.useState(50),[D,L]=N.useState(!1),[V,I]=N.useState(!1),C=s?`sector-${s.id}`:null;N.useEffect(()=>{const S=()=>u(!0);return window.addEventListener("open-sector-modal",S),()=>window.removeEventListener("open-sector-modal",S)},[]),N.useEffect(()=>{const S=Qs(Qt(He,"sectors"),Xs("name","asc")),Z=Ln(S,ie=>{const je=ie.docs.map(et=>({id:et.id,...et.data()}));r(je)});return()=>Z()},[]),N.useEffect(()=>{if(!s){l([]);return}const S=Qs(Qt(He,"sectors",s.id,"screens"),Xs("createdAt","desc")),Z=Ln(S,ie=>{const je=ie.docs.map(et=>({id:et.id,sectorId:s.id,...et.data()}));l(je)});return()=>Z()},[s]);const _=S=>{if(S.type==="CLASSIFIED"&&S.requirement&&t[S.requirement.stat]<S.requirement.value){window.alert(`ACCESS DENIED: Need ${S.requirement.stat.toUpperCase()} > ${S.requirement.value}`);return}i(S)},k=async()=>{if(!(!d.trim()||!e)){L(!0);try{await xc(Qt(He,"sectors"),{name:d.trim(),type:w,description:f.trim()||"No description.",requirement:w==="CLASSIFIED"?{stat:b,value:x}:null,createdBy:e.uid,createdAt:bs()}),h(""),g(""),E("PUBLIC"),v("logic"),T(50),u(!1)}finally{L(!1)}}},P=async()=>{if(!(!s||!e)){I(!0);try{await xc(Qt(He,"sectors",s.id,"screens"),{title:`${s.name} Screen ${o.length+1}`,createdBy:e.uid,createdAt:bs()})}finally{I(!1)}}},O=S=>S.requirement?`Req: ${S.requirement.stat.toUpperCase()} > ${S.requirement.value} (yours: ${t[S.requirement.stat]})`:null;return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2 text-pandora-text",children:[p.jsx(JC,{size:18,className:"text-pandora-text"}),p.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:"SECTORS"})]}),p.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 text-xs uppercase px-3 py-2 rounded-full bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg shadow hover:shadow-lg transition",children:[p.jsx(LO,{size:14})," New Sector"]})]}),p.jsxs("div",{className:"space-y-3",children:[n.map(S=>{const Z=S.type==="CLASSIFIED"&&S.requirement&&t[S.requirement.stat]<S.requirement.value;return p.jsxs("button",{onClick:()=>_(S),className:"w-full text-left border border-pandora-border px-4 py-3 bg-pandora-surface rounded-2xl hover:border-pandora-accent-to hover:bg-white/5 transition",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[S.type==="PUBLIC"?p.jsx(VO,{size:16,className:"text-pandora-text"}):Z?p.jsx(DO,{size:16,className:"text-pandora-pink"}):p.jsx(AO,{size:16,className:"text-pandora-text"}),p.jsx("div",{className:"font-semibold text-pandora-text",children:S.name})]}),p.jsxs("span",{className:`text-[11px] font-mono px-2 py-1 rounded-full ${S.type==="PUBLIC"?"bg-gradient-to-r from-pandora-accent-from/70 to-pandora-accent-to/70 text-pandora-bg":"border border-pandora-pink text-pandora-pink"}`,children:["[",S.type,"]"]})]}),p.jsx("div",{className:"text-xs text-pandora-muted mt-1",children:S.description}),S.requirement&&p.jsx("div",{className:"text-[11px] font-mono text-pandora-muted mt-1",children:O(S)})]},S.id)}),n.length===0&&p.jsx("p",{className:"text-sm text-pandora-muted",children:"No sectors yet. Create one to begin."})]}),s&&p.jsxs("div",{className:"border border-pandora-border bg-pandora-bg p-4 rounded-2xl space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2 text-pandora-text",children:[p.jsx(PO,{size:16,className:"text-pandora-text"}),p.jsxs("h3",{className:"text-sm font-semibold uppercase",children:[s.name," Gallery"]})]}),p.jsx("button",{onClick:P,disabled:V,className:"text-xs uppercase px-3 py-1 rounded-full bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg shadow hover:shadow-lg transition disabled:opacity-50",children:V?"Creating...":"Create Screen"})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.map(S=>{const Z=S.createdAt&&"seconds"in S.createdAt?new Date(S.createdAt.seconds*1e3).toLocaleString():"Just now";return p.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-3 rounded-2xl space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"text-sm font-semibold text-pandora-text truncate",children:S.title}),p.jsx("span",{className:"text-[11px] text-pandora-muted uppercase",children:"Screen"})]}),p.jsxs("div",{className:"text-xs text-pandora-muted",children:["Created: ",Z]}),p.jsx("div",{className:"h-32 border border-dashed border-pandora-border bg-pandora-bg flex items-center justify-center text-xs text-pandora-muted",children:"Visuals reserved"})]},S.id)}),o.length===0&&p.jsx("div",{className:"text-sm text-pandora-muted border border-pandora-border bg-pandora-surface p-4 rounded-2xl",children:"No screens yet. Create one to start the gallery."})]}),C&&p.jsx("div",{className:"mt-3",children:p.jsx(yJ,{channelId:C,type:1,title:`${s.name} Chat`,subtitle:"Sector room"})})]}),a&&p.jsx("div",{className:"fixed inset-0 z-40 bg-black/70 flex items-center justify-center",children:p.jsxs("div",{className:"w-full max-w-md border border-white/15 bg-pandora-surface/95 p-5 rounded-2xl space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"text-sm font-semibold uppercase text-pandora-text",children:"Create Sector"}),p.jsx("button",{onClick:()=>u(!1),className:"text-pandora-muted hover:text-pandora-text text-lg",children:""})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Name"}),p.jsx("input",{value:d,onChange:S=>h(S.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-2xl font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to",placeholder:"Sector name"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Description"}),p.jsx("textarea",{value:f,onChange:S=>g(S.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-2xl font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to",placeholder:"What happens here?"})]}),p.jsxs("div",{className:"flex items-center gap-3 text-xs uppercase text-pandora-muted",children:[p.jsxs("label",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"radio",checked:w==="PUBLIC",onChange:()=>E("PUBLIC")}),"Public"]}),p.jsxs("label",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"radio",checked:w==="CLASSIFIED",onChange:()=>E("CLASSIFIED")}),"Classified"]})]}),w==="CLASSIFIED"&&p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Stat"}),p.jsx("select",{value:b,onChange:S=>v(S.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-2 rounded-2xl",children:["logic","altruism","aggression","credit"].map(S=>p.jsx("option",{value:S,children:S},S))})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Value"}),p.jsx("input",{type:"number",value:x,onChange:S=>T(Number(S.target.value)),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-2 rounded-2xl",min:0,max:100})]})]}),p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{onClick:k,disabled:D,className:"px-4 py-2 border border-transparent bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg font-semibold uppercase text-xs rounded-full hover:shadow-lg transition disabled:opacity-50",children:D?p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(Xt,{className:"animate-spin",size:14}),"Creating..."]}):"Create"})})]})]})})]})}function vJ(){var I,C;const t=Pr(_=>_.isBlind()),{user:e}=Lr(),[n,r]=N.useState([]),[s,i]=N.useState(0),o=N.useRef([]),[l,a]=N.useState(!0),[u,d]=N.useState({}),[h,f]=N.useState({}),[g,w]=N.useState(null),[E,b]=N.useState({}),[v,x]=N.useState({}),[T,D]=N.useState(!0);N.useEffect(()=>{const _=new IntersectionObserver(k=>{k.forEach(P=>{if(P.isIntersecting){const O=Number(P.target.getAttribute("data-idx"));i(O)}})},{threshold:.6});return o.current.forEach(k=>k&&_.observe(k)),()=>_.disconnect()},[]),N.useEffect(()=>{if(!g)return;const _=Qs(Qt(He,"transmissions",g,"comments"),Xs("createdAt","desc"),XR(50)),k=Ln(_,P=>{b(O=>({...O,[g]:P.docs.map(S=>({id:S.id,...S.data()}))}))});return()=>k()},[g]);const L=async _=>{if(!e)return;const k=(v[_]||"").trim();if(k){x(P=>({...P,[_]:""})),f(P=>({...P,[_]:(P[_]||0)+1}));try{await Yv(_,e.uid,k)}catch{f(P=>({...P,[_]:Math.max(0,(P[_]||1)-1)}))}}};if(N.useEffect(()=>{const _=Qs(Qt(He,"transmissions"),Xs("createdAt","desc")),k=Ln(_,P=>{const S=P.docs.map(Z=>({id:Z.id,...Z.data()})).filter(Z=>Z.type==="sample"&&Z.sampleUrl);r(S),d(Z=>{const ie={...Z};return S.forEach(je=>{var et;ie[je.id]={count:je.likes||0,liked:((et=Z[je.id])==null?void 0:et.liked)||!1}}),ie}),f(Z=>{const ie={...Z};return S.forEach(je=>{ie[je.id]=je.comments||0}),ie}),a(!1)},()=>a(!1));return()=>k()},[]),N.useEffect(()=>{if(!e){d(k=>Object.fromEntries(Object.entries(k).map(([P,O])=>[P,{...O,liked:!1}])));return}if(n.length===0)return;let _=!1;return(async()=>{try{const k=await Promise.all(n.map(async P=>{const O=nr(He,"transmissions",P.id,"likes",e.uid),S=await yp(O);return{id:P.id,liked:S.exists()}}));if(_)return;d(P=>{const O={...P};return k.forEach(({id:S,liked:Z})=>{var ie;O[S]={count:((ie=P[S])==null?void 0:ie.count)??0,liked:Z}}),O})}catch{}})(),()=>{_=!0}},[e,n]),l)return p.jsx("div",{className:"h-dvh flex items-center justify-center text-pandora-muted",children:p.jsx(Xt,{className:"animate-spin",size:20})});if(!l&&n.length===0)return p.jsx("div",{className:"h-dvh flex items-center justify-center text-pandora-muted px-4 text-center",children:"No samples yet. Upload one from the write modal."});const V=async _=>{if(!e)return;const k=u[_]||{count:0,liked:!1},P={...k};d(O=>({...O,[_]:{count:k.count+(k.liked?-1:1),liked:!k.liked}}));try{const O=await Xv(_,e.uid);d(S=>{const Z=P.count+(O.liked?1:-1);return{...S,[_]:{count:Math.max(0,Z),liked:O.liked}}})}catch{d(S=>({...S,[_]:k}))}};return p.jsxs("div",{className:"h-dvh overflow-y-auto snap-y snap-mandatory no-scrollbar pb-16",children:[n.filter(_=>_.sampleUrl).map((_,k)=>{var P,O;return p.jsx("div",{"data-idx":k,ref:S=>o.current[k]=S,className:"snap-start h-dvh flex justify-center items-center",children:p.jsxs("div",{className:"relative h-full w-full max-w-[520px] aspect-[9/16] border border-pandora-border rounded-sm overflow-hidden bg-pandora-bg",children:[p.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[p.jsx("video",{className:"w-full h-full object-cover",autoPlay:!0,muted:T,loop:!0,playsInline:!0,src:_.sampleUrl,poster:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="},_.sampleUrl),p.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(167,199,255,0.12),transparent_40%),radial-gradient(circle_at_80%_30%,rgba(110,200,255,0.12),transparent_35%)]"}),p.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-t from-pandora-bg/55 via-transparent to-transparent"})]}),p.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-3 text-xs font-mono uppercase z-10",children:[p.jsxs("div",{className:"flex items-center gap-1 text-pandora-pink",children:[p.jsx("span",{className:"w-2 h-2 bg-pandora-pink animate-pulseDot inline-block"}),"REC"]}),p.jsx("div",{className:"px-2 py-1 border border-pandora-border rounded-sm bg-pandora-surface text-pandora-text",children:_.uid?t?"Subject-****":_.uid:"Unknown"})]}),p.jsxs("div",{className:"absolute bottom-4 left-4 text-pandora-text space-y-2",children:[p.jsxs("a",{href:_.uid?`/u/${_.uid}`:"#",className:"flex items-center gap-2 text-sm font-semibold",children:[p.jsx("span",{children:t?"Subject-****":_.uid||_.id}),p.jsx(kO,{size:16,className:"text-pandora-neon"})]}),p.jsxs("div",{className:"text-xs font-mono text-pandora-muted uppercase",children:[((P=u[_.id])==null?void 0:P.count)??0," Likes  ",h[_.id]??0," Comments"]})]}),p.jsxs("div",{className:"absolute bottom-10 right-4 flex flex-col items-center gap-4 text-pandora-text z-20",children:[p.jsx("button",{onClick:()=>D(S=>!S),className:"w-11 h-11 border border-pandora-border/70 rounded-xl flex items-center justify-center transition bg-pandora-surface/90 text-white backdrop-blur hover:border-pandora-accent-to hover:shadow-[0_10px_30px_-12px_rgba(165,180,252,0.8)]",title:T?"Unmute":"Mute",children:T?p.jsx(ww,{size:18}):p.jsx(yw,{size:18})}),p.jsx("button",{onClick:()=>V(_.id),className:on("w-11 h-11 border border-pandora-border/70 rounded-xl flex items-center justify-center transition bg-pandora-surface/90 text-white backdrop-blur hover:border-pandora-accent-to hover:shadow-[0_10px_30px_-12px_rgba(165,180,252,0.8)]",((O=u[_.id])==null?void 0:O.liked)&&"border-green-400 text-green-400 shadow-[0_0_20px_rgba(74,222,128,0.35)]"),children:p.jsx(jh,{size:18})}),p.jsx("button",{onClick:()=>w(S=>S===_.id?null:_.id),className:"w-11 h-11 border border-pandora-border/70 rounded-xl flex items-center justify-center transition bg-pandora-surface/90 text-white backdrop-blur hover:border-pandora-accent-to hover:shadow-[0_10px_30px_-12px_rgba(165,180,252,0.8)]",children:p.jsx(rl,{size:18})}),p.jsx("button",{className:"w-11 h-11 border border-pandora-border/70 rounded-xl flex items-center justify-center transition bg-pandora-surface/90 text-white backdrop-blur hover:border-pandora-accent-to hover:shadow-[0_10px_30px_-12px_rgba(165,180,252,0.8)]",children:p.jsx(BO,{size:18})})]})]})},_.id)}),g&&p.jsxs("div",{className:"fixed top-0 right-0 h-full w-full lg:w-[360px] bg-pandora-bg border-l border-pandora-border z-50 p-4 flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("div",{className:"text-sm font-semibold uppercase text-pandora-text",children:"Comments"}),p.jsx("button",{onClick:()=>w(null),className:"text-pandora-muted hover:text-pandora-text text-lg",children:""})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1",children:[(I=E[g])==null?void 0:I.map(_=>{const k=_.createdAt&&"seconds"in _.createdAt?new Date(_.createdAt.seconds*1e3).toLocaleTimeString():"Just now";return p.jsxs("div",{className:"border border-pandora-border rounded-2xl p-2 bg-pandora-bg",children:[p.jsxs("div",{className:"flex items-center justify-between text-[11px] text-pandora-muted",children:[p.jsx("span",{className:"truncate",children:t?"Subject-****":_.uid||"Unknown"}),p.jsx("span",{children:k})]}),p.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:_.text})]},_.id)}),(E[g]||[]).length===0&&p.jsx("p",{className:"text-[11px] text-pandora-muted",children:"No comments yet."})]}),p.jsx("div",{className:"pt-3 border-t border-pandora-border/70 mt-3",children:p.jsxs("div",{className:"flex gap-2 items-end",children:[p.jsx("textarea",{value:v[g]||"",onChange:_=>x(k=>({...k,[g]:_.target.value})),placeholder:"Leave a comment...",className:"flex-1 h-16 bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-2 rounded-2xl font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to"}),p.jsx("button",{onClick:()=>L(g),disabled:!((C=v[g])!=null&&C.trim()),className:"px-3.5 py-2 text-[11px] font-semibold uppercase rounded-lg bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-white shadow-[0_12px_30px_-10px_rgba(165,180,252,0.8)] hover:shadow-[0_14px_34px_-8px_rgba(165,180,252,0.95)] transition disabled:opacity-50 self-stretch border border-white/20",children:"Post"})]})})]})]})}async function Mp(t){return(await e2(Qt(He,"profiles",t,"links"))).docs.map(n=>n.data())}async function n_(t,e){const n=nr(He,"profiles",t,"links",e);await wp(n,{targetUid:e,createdAt:bs()})}async function r_(t,e){const n=nr(He,"profiles",t,"links",e);await t2(n)}async function _J(t,e){const n=nr(He,"profiles",t,"links",e);return(await yp(n)).exists()}const xJ=n_,EJ=r_;function SJ(){const t=Pr(o=>o.userStats),e=Lr(o=>o.user),[n,r]=N.useState([]),[s,i]=N.useState([]);return N.useEffect(()=>{e&&Mp(e.uid).then(o=>r(o.map(l=>l.targetUid))).catch(()=>{})},[e]),N.useEffect(()=>{const o=Ln(Qt(He,"profiles"),l=>{const a=l.docs.map(u=>u.data());i(a)});return()=>o()},[]),p.jsxs("div",{className:"space-y-6",children:[p.jsx(uN,{}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-lg font-semibold text-pandora-text",children:(e==null?void 0:e.displayName)||(e==null?void 0:e.email)||"Subject-9218"}),p.jsx("div",{className:"text-xs text-pandora-neon font-mono uppercase",children:e?"Authenticated":"Guest"})]}),p.jsx(Go,{username:(e==null?void 0:e.displayName)||(e==null?void 0:e.email)||"Subject-9218",size:"md"})]}),p.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm space-y-3",children:[p.jsx(Xy,{stats:[t.logic,t.altruism,t.aggression,t.credit,54,32]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm font-mono uppercase",children:[p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-sm text-pandora-text",children:[p.jsx("span",{className:"text-pandora-muted",children:"LOGIC"}),p.jsx("span",{children:t.logic})]}),p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-sm text-pandora-text",children:[p.jsx("span",{className:"text-pandora-muted",children:"ALTRUISM"}),p.jsx("span",{children:t.altruism})]}),p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-sm text-pandora-text",children:[p.jsx("span",{className:"text-pandora-muted",children:"AGGRESSION"}),p.jsx("span",{children:t.aggression})]}),p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-sm text-pandora-text",children:[p.jsx("span",{className:"text-pandora-muted",children:"CREDIT"}),p.jsxs("span",{children:[t.credit,"%"]})]})]})]}),p.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm space-y-3",children:[p.jsx("div",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Linked Users"}),p.jsxs("div",{className:"space-y-2",children:[n.length===0&&p.jsx("p",{className:"text-sm text-pandora-muted",children:"No links yet."}),n.map(o=>{const l=s.find(a=>a.uid===o);return p.jsx("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-sm",children:p.jsxs("div",{className:"min-w-0",children:[p.jsx("p",{className:"text-sm text-pandora-text truncate",children:(l==null?void 0:l.displayName)||o}),p.jsx("p",{className:"text-[11px] text-pandora-muted truncate",children:(l==null?void 0:l.email)||o})]})},o)})]})]})]})}const s_=xl(t=>({toasts:[],pushToast:e=>t(n=>({toasts:[...n.toasts,{id:crypto.randomUUID(),timeout:3500,...e}]})),removeToast:e=>t(n=>({toasts:n.toasts.filter(r=>r.id!==e)}))})),bJ=(t,e)=>[t,e].sort().join("_"),wN=(t,e)=>`pandora_dm_cache_${t}_${e}`,lr=t=>t?typeof t.createdAtMs=="number"&&!Number.isNaN(t.createdAtMs)?t.createdAtMs:t.createdAt&&typeof t.createdAt.seconds=="number"?t.createdAt.seconds*1e3+(t.createdAt.nanoseconds||0)/1e6:0:0,_T=(t,e)=>{if(!t||!e)return[];try{const n=localStorage.getItem(wN(t,e));if(!n)return[];const r=JSON.parse(n);return Array.isArray(r)?r.map(s=>{const i=lr(s);return{...s,createdAtMs:i}}):[]}catch{return[]}},TJ=(t,e,n=[])=>{if(!t||!e)return;const r=n.slice(-200);localStorage.setItem(wN(t,e),JSON.stringify(r))},xT=t=>{const e=t.content,n=typeof t.create_time=="string"&&Date.parse(t.create_time)||Date.now();return{id:t.message_id,text:typeof(e==null?void 0:e.text)=="string"?e.text:"",fromUid:(e==null?void 0:e.fromUid)||t.sender_id,toUid:(e==null?void 0:e.toUid)||(e==null?void 0:e.targetUid)||null,createdAt:{seconds:Math.floor(n/1e3),nanoseconds:Math.floor(n%1e3*1e6)},createdAtMs:n}};function ET(){const{user:t}=Lr(),{uid:e}=mw(),n=Mc(),r=s_(Q=>Q.pushToast),[s,i]=N.useState([]),[o,l]=N.useState([]),[a,u]=N.useState(null),[d,h]=N.useState([]),[f,g]=N.useState(""),[w,E]=N.useState(!1),[b,v]=N.useState(!0),[x,T]=N.useState(!1),[D,L]=N.useState([]),[V,I]=N.useState(null),[C,_]=N.useState([]);N.useRef([]);const[k,P]=N.useState(null),O=N.useRef(null),[S,Z]=N.useState(null),[ie,je]=N.useState(0),et=N.useRef(new Set),te=N.useRef(null),me=N.useRef(null),Ee=N.useRef(null),[Ie,We]=N.useState({}),pt=N.useRef(new Map),St=N.useRef(new Map),ut=N.useRef(new Map),Ge=N.useRef(!1),nt=Q=>{const ae=Q?lr(Q):0;return ae?new Date(ae).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""},ir=()=>{var ae;const Q=(ae=O.current)==null?void 0:ae.adapter;if(Q&&typeof Q.isOpen=="function")try{return!!Q.isOpen()}catch{return!1}return!!O.current};N.useEffect(()=>{if(!t)return;(async()=>{await Qv({uid:t.uid,displayName:t.displayName,email:t.email,photoURL:t.photoURL});const ae=await Mp(t.uid);L(ae.map(de=>de.targetUid))})().catch(()=>{})},[t]),N.useEffect(()=>{const Q=Ln(Qt(He,"profiles"),ae=>{const de=ae.docs.map(ge=>ge.data());l(de)});return()=>Q()},[]),N.useEffect(()=>{const Q=Ee.current;Q&&(Q.scrollTop=Q.scrollHeight)},[s,a]),N.useEffect(()=>{if(!t)return;const Q=`pandora_dm_seen_${t.uid}`,ae=localStorage.getItem(Q);if(ae)try{We(JSON.parse(ae))}catch{We({})}},[t]);const or=Q=>{if(!t||!Q)return;const ae=`pandora_dm_seen_${t.uid}`;We(de=>{const ge={...de,[Q]:Date.now()};return localStorage.setItem(ae,JSON.stringify(ge)),ge})};N.useEffect(()=>{if(!t||!a)return;let Q=null,ae=null;v(!0),Z(null),P(null);const de=_T(t.uid,a);return de.length&&(et.current=new Set(de.map(ge=>ge.id)),i(de)),uh(t.uid,a).then(({channelId:ge,messages:Ne,socket:Qe})=>{P(ge),O.current=Qe,pt.current.set(ge,a),St.current.set(a,ge);const Ae=Ne.map(Xe=>xT(Xe)),bt=new Map;[...de,...Ae].forEach(Xe=>{Xe!=null&&Xe.id&&bt.set(Xe.id,Xe)});const Sr=Array.from(bt.values()).sort((Xe,vn)=>lr(Xe)-lr(vn));et.current=new Set(Sr.map(Xe=>Xe.id)),i(Sr),v(!1),or(a),ae=wf(Xe=>{if(Xe.channel_id!==ge)return;const vn=Xe.message_id;if(et.current.has(vn))return;const en=xT(Xe),As=lr(en)||Date.now(),es=te.current;es&&es.fromUid===en.fromUid&&es.text===en.text&&Math.abs(As-es.ts)<1e3||(te.current={fromUid:en.fromUid,text:en.text,ts:As},i(oa=>{const Nl=en.fromUid===(t==null?void 0:t.uid)?oa.filter(si=>!si.id.startsWith("local-")):oa;return et.current.add(vn),[...Nl,en].sort((si,aa)=>lr(si)-lr(aa))}))}),Q=()=>{ae==null||ae()}}).catch(ge=>{const Ne=ge instanceof Error?ge.message:"Failed to connect to chat.";Z(Ne),v(!1)}),()=>{Q&&Q(),ae&&ae(),O.current=null}},[t,a,ie]),N.useEffect(()=>{g(""),I(null)},[a]),N.useEffect(()=>{if(!t)return;const ae=(x?o.filter(de=>D.includes(de.uid)):o.filter(de=>de.uid!==t.uid)).map(de=>{const ge=_T(t.uid,de.uid),Ne=ge[ge.length-1];return{id:bJ(t.uid,de.uid),otherUid:de.uid,lastText:Ne==null?void 0:Ne.text,lastAt:lr(Ne)}}).sort((de,ge)=>(ge.lastAt||0)-(de.lastAt||0));h(ae)},[o,D,x,t]),N.useEffect(()=>{if(!t)return;const Q=new Set;(async()=>{for(const de of d.slice(0,10))if(Q.add(de.otherUid),!St.current.has(de.otherUid))try{const{channelId:ge,socket:Ne}=await uh(t.uid,de.otherUid);pt.current.set(ge,de.otherUid),St.current.set(de.otherUid,ge),ut.current.set(de.otherUid,{channelId:ge,leave:()=>{Ne.leaveChat(ge),pt.current.delete(ge),St.current.delete(de.otherUid)}})}catch{}ut.current.forEach((de,ge)=>{Q.has(ge)||(de.leave(),ut.current.delete(ge))})})()},[d,t]),N.useEffect(()=>{if(!t||Ge.current||d.length===0)return;let Q=!1;return(async()=>{for(const de of d.slice(0,10))if(!St.current.has(de.otherUid))try{const{channelId:ge,messages:Ne,socket:Qe}=await uh(t.uid,de.otherUid);if(Q){Qe.leaveChat(ge);continue}const Ae=Ne[Ne.length-1];if(Ae){const bt=Ae.content,Sr=typeof(bt==null?void 0:bt.text)=="string"?bt.text:"",ri=Ae.create_time?Date.parse(Ae.create_time):Date.now();h(Xe=>[...Xe.map(en=>en.otherUid===de.otherUid?{...en,lastText:Sr,lastAt:ri}:en)].sort((en,As)=>(As.lastAt||0)-(en.lastAt||0)))}Qe.leaveChat(ge)}catch{}Ge.current=!0})(),()=>{Q=!0}},[d,t]),N.useEffect(()=>{t&&Dp(t.uid).catch(()=>{})},[t]),N.useEffect(()=>{if(!t||!a)return;const Q=window.setInterval(()=>{ir()||je(ae=>ae+1)},1e4);return()=>window.clearInterval(Q)},[t,a]);const Zr=async()=>{if(!f.trim()||!t||!a||w)return;if(!k||!O.current||!ir()){I("Chat is reconnecting. Please try again in a moment."),je(Ne=>Ne+1);return}E(!0),I(null);const Q=f.trim(),ae=Date.now();if(me.current&&me.current.text===Q&&ae-me.current.ts<800){E(!1);return}me.current={text:Q,ts:ae};const de=`local-${Date.now()}`,ge={id:de,text:Q,fromUid:t.uid,createdAt:{seconds:Math.floor(ae/1e3),nanoseconds:Math.floor(ae%1e3*1e6)},createdAtMs:ae};i(Ne=>{const Qe=[...Ne,ge].sort((Ae,bt)=>lr(Ae)-lr(bt));return et.current.add(de),Qe});try{if(!k||!O.current)throw new Error("Not connected to chat channel yet.");await O.current.writeChatMessage(k,{text:Q,fromUid:t.uid,toUid:a})}catch(Ne){const Qe=Ne instanceof Error?Ne.message:"Failed to send message.";I(Qe),je(Ae=>Ae+1),i(Ae=>Ae.filter(bt=>bt.id!==de)),et.current.delete(de)}finally{E(!1),g("")}},Ht=N.useMemo(()=>o.find(Q=>Q.uid===a),[o,a]),Fr=N.useMemo(()=>{const Q=new Map;return o.forEach(ae=>Q.set(ae.uid,ae)),Q},[o]);N.useEffect(()=>{if(!a||s.length===0)return;const Q=s[s.length-1];h(ae=>[...ae.map(ge=>ge.otherUid===a?{...ge,lastText:Q.text,lastAt:lr(Q)||Date.now()}:ge)].sort((ge,Ne)=>(Ne.lastAt||0)-(ge.lastAt||0)))},[s,a]),N.useEffect(()=>{if(!t)return;const Q=wf(ae=>{const de=ae.content,ge=typeof(de==null?void 0:de.text)=="string"?de.text:"",Ne=(de==null?void 0:de.fromUid)||ae.sender_id,Qe=(de==null?void 0:de.toUid)||(de==null?void 0:de.targetUid)||"",Ae=pt.current.get(ae.channel_id)||(Ne===t.uid?Qe:Ne);if(!Ae)return;const bt=ae.create_time?Date.parse(ae.create_time):Date.now();if(h(Sr=>[...Sr.map(Xe=>Xe.otherUid===Ae?{...Xe,lastText:ge,lastAt:bt}:Xe)].sort((Xe,vn)=>(vn.lastAt||0)-(Xe.lastAt||0))),a!==Ae){const Sr=ae.sender_id===t.uid?"You":Ae;r({title:"New message",description:`${Sr}: ${ge.slice(0,80)}`})}});return()=>Q()},[t,a,r]),N.useEffect(()=>{!t||!a||TJ(t.uid,a,s)},[s,a,t]),N.useEffect(()=>{e&&u(e),e&&or(e)},[e]);const Er=()=>t?d.length===0?p.jsx("div",{className:"text-sm text-pandora-muted",children:"No conversations yet. Start one from contacts."}):p.jsx("div",{className:"space-y-2 w-full",children:d.map(Q=>{const ae=Fr.get(Q.otherUid),de=(ae==null?void 0:ae.displayName)||(ae==null?void 0:ae.email)||Q.otherUid.slice(0,8),ge=Q.lastAt?new Date(Q.lastAt).toLocaleTimeString():"",Ne=Ie[Q.otherUid]?(Q.lastAt||0)>Ie[Q.otherUid]:!!Q.lastAt;return p.jsxs("button",{onClick:()=>{u(Q.otherUid),n(`/messages/${Q.otherUid}`),or(Q.otherUid)},className:`w-full text-left border px-3 py-3 rounded-2xl flex items-center justify-between transition ${a===Q.otherUid?"text-pandora-text border-white/30 bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to shadow-[0_12px_32px_-10px_rgba(165,180,252,0.75)]":"border-pandora-border text-pandora-text hover:border-pandora-accent-to hover:bg-white/5"}`,children:[p.jsxs("div",{className:"min-w-0",children:[p.jsx("div",{className:"text-sm font-semibold truncate",children:de}),p.jsxs("div",{className:"text-xs text-pandora-muted truncate flex items-center gap-2",children:[Q.lastText||"No message",Ne&&p.jsx("span",{className:"w-2 h-2 rounded-full bg-pandora-accent-to/80 inline-block"})]})]}),ge&&p.jsx("span",{className:"text-[10px] text-pandora-muted",children:ge})]},Q.id)})}):null;return p.jsxs("div",{className:"w-full flex-1 min-h-[calc(100vh-60px)] h-[calc(100vh-60px)] flex flex-col gap-0 overscroll-contain overflow-hidden",children:[!a&&p.jsxs("div",{className:"border border-pandora-border bg-pandora-surface/90 rounded-2xl p-4 space-y-3 backdrop-blur flex-1 overflow-y-auto w-full mt-0",children:[p.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase text-pandora-muted",children:[p.jsx(tI,{size:14})," Conversations"]}),p.jsx("div",{className:"flex items-center gap-3 text-xs text-pandora-text",children:p.jsxs("label",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"checkbox",checked:x,onChange:Q=>T(Q.target.checked)}),"Linked only"]})}),Er()]}),a&&p.jsxs("div",{className:"w-full border border-pandora-border bg-pandora-surface/90 rounded-3xl p-3 lg:p-4 flex flex-col backdrop-blur flex-1 min-h-0 overscroll-contain overflow-hidden",children:[p.jsxs("div",{className:"flex items-center gap-3 text-sm text-pandora-text mb-2 pl-2 md:pl-0 pr-1 justify-start",children:[p.jsx("button",{onClick:()=>{u(null),n("/messages")},className:"p-1.5 border border-pandora-border/60 rounded-full text-pandora-text hover:border-pandora-accent-to hover:bg-white/5",children:p.jsx(CO,{size:16})}),p.jsx(Go,{username:(Ht==null?void 0:Ht.displayName)||a||"User",size:"sm"}),p.jsx("span",{className:"font-semibold truncate text-base md:text-sm",children:(Ht==null?void 0:Ht.displayName)||a})]}),p.jsxs("div",{className:"flex-1 min-h-0 grid grid-rows-[1fr_auto] gap-2",children:[p.jsxs("div",{ref:Ee,className:"overflow-y-auto space-y-3 border border-pandora-border p-3 lg:p-4 bg-pandora-bg/80 rounded-2xl [scrollbar-width:none] [-ms-overflow-style:none] [&::-webkit-scrollbar]:hidden",children:[b&&p.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted text-sm",children:[p.jsx(Xt,{size:16,className:"animate-spin"})," Loading messages..."]}),S&&p.jsxs("div",{className:"text-sm text-pandora-pink flex items-center justify-between gap-3",children:[p.jsxs("span",{children:["Chat  : ",S]}),p.jsx("button",{className:"text-xs px-3 py-1 rounded-full border border-pandora-border hover:border-pandora-accent-to",onClick:()=>{P(null),Z(null),v(!0),fJ(t==null?void 0:t.uid),je(Q=>Q+1)},children:"Retry"})]}),!b&&s.length===0&&p.jsx("p",{className:"text-sm text-pandora-muted",children:"No messages here yet."}),s.map(Q=>{const ae=Q.fromUid===(t==null?void 0:t.uid),de=Q.id.startsWith("local-"),ge=nt(Q),Ne=ae&&a&&Ie[a]&&lr(Q)>0&&Ie[a]>=lr(Q);return p.jsx("div",{className:`flex ${ae?"justify-end":"justify-start"}`,children:p.jsxs("div",{className:`max-w-[80%] px-3 py-2 rounded-2xl text-sm shadow-sm ${ae?"bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg":"border border-pandora-border text-pandora-text bg-pandora-surface/80"}`,children:[p.jsx("p",{className:"whitespace-pre-line break-words",children:Q.text}),p.jsxs("div",{className:`flex items-center justify-end gap-1 text-[10px] mt-1 ${ae?"text-white/70":"text-pandora-muted"}`,children:[ge&&p.jsx("span",{children:ge}),ae&&(de?p.jsx(lE,{size:12}):Ne?p.jsx(IO,{size:12}):p.jsx(lE,{size:12}))]})]})},Q.id)})]}),p.jsxs("div",{className:"border border-pandora-border/60 bg-pandora-surface/95 rounded-2xl z-10 shadow-[0_-8px_24px_-18px_rgba(0,0,0,0.6)] p-2 mb-1",children:[p.jsxs("div",{className:"relative flex items-center gap-2",children:[p.jsx("textarea",{value:f,onChange:Q=>g(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&!Q.shiftKey&&!/Mobi|Android/i.test(navigator.userAgent)&&(Q.preventDefault(),Zr())},className:"flex-1 h-14 bg-pandora-bg/85 border border-pandora-border/80 text-pandora-text text-sm pr-14 pl-3 py-3 rounded-2xl font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to",placeholder:"Type a direct message..."}),p.jsx("button",{onClick:Zr,disabled:!f.trim()||w,className:"absolute right-2 top-1/2 -translate-y-1/2 h-10 w-10 border border-white/10 bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg font-semibold rounded-full hover:shadow-lg transition disabled:opacity-50 flex items-center justify-center",children:w?p.jsx(Xt,{className:"animate-spin",size:16}):p.jsx(YC,{size:16})})]}),V&&p.jsx("p",{className:"text-xs text-pandora-pink mt-1",children:V})]})]})]})]})}function AJ(){const{user:t}=Lr(),e=Pr(v=>v.userStats),n=Pr(v=>v.setUserStats),[r,s]=N.useState(""),[i,o]=N.useState(!1),[l,a]=N.useState(!1),[u,d]=N.useState(null),[h,f]=N.useState([]),[g,w]=N.useState([]);N.useEffect(()=>{(async()=>{if(!t)return;const x=await Qv({uid:t.uid,displayName:t.displayName,email:t.email,photoURL:t.photoURL});s(x.displayName),n(x.stats),a(!0);const T=await Mp(t.uid);f(T.map(D=>D.targetUid))})().catch(()=>a(!0))},[t,n]),N.useEffect(()=>{const v=Ln(Qt(He,"profiles"),x=>{const T=x.docs.map(D=>D.data());w(T)});return()=>v()},[]);const E=async()=>{if(t){o(!0),d(null);try{await EK(t.uid,{displayName:r}),d("Saved.")}catch(v){const x=v instanceof Error?v.message:"Failed to save profile.";d(x)}finally{o(!1)}}},b=async v=>{!t||v===t.uid||(h.includes(v)?(await r_(t.uid,v),f(x=>x.filter(T=>T!==v))):(await n_(t.uid,v),f(x=>[...x,v])))};return l?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2 text-pandora-text",children:[p.jsx(ZC,{size:18,className:"text-pandora-text"}),p.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:"Settings"})]}),p.jsx("span",{className:"text-xs text-pandora-muted font-mono uppercase",children:"Profile"})]}),p.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-2xl space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Display name"}),p.jsx("input",{value:r,onChange:v=>s(v.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-2xl font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to",placeholder:"Your alias"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("div",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Traits"}),p.jsx("p",{className:"text-xs text-pandora-muted",children:"System-assigned from experiments. Read-only."}),p.jsx("div",{className:"grid grid-cols-2 gap-3",children:["logic","altruism","aggression","credit"].map(v=>p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-2xl text-pandora-text text-sm",children:[p.jsx("span",{className:"uppercase text-pandora-muted",children:v}),p.jsx("span",{className:"font-mono",children:e[v]})]},v))})]}),u&&p.jsx("p",{className:"text-xs text-pandora-accent-from",children:u}),p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{onClick:E,disabled:i,className:"px-4 py-2 border border-transparent bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-white font-semibold uppercase text-xs rounded-full hover:shadow-[0_12px_32px_-8px_rgba(110,200,255,0.8)] transition disabled:opacity-50",children:i?p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(Xt,{size:14,className:"animate-spin"})," Saving..."]}):p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(QC,{size:14})," Save"]})})})]}),p.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-2xl space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:"flex items-center gap-2 text-pandora-text",children:p.jsx("span",{className:"text-sm font-semibold",children:"Links"})}),p.jsx("span",{className:"text-[11px] text-pandora-muted uppercase",children:"Follow users"})]}),p.jsxs("div",{className:"space-y-2",children:[g.filter(v=>v.uid!==(t==null?void 0:t.uid)).map(v=>{const x=h.includes(v.uid);return p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-sm",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-pandora-text",children:v.displayName||v.uid.slice(0,6)}),p.jsx("p",{className:"text-[11px] text-pandora-muted",children:v.uid})]}),p.jsx("button",{onClick:()=>b(v.uid),className:`px-3 py-2 text-xs uppercase border rounded-sm ${x?"border-pandora-pink text-pandora-pink":"border-pandora-neon text-pandora-neon"}`,children:x?"Unlink":"Link"})]},v.uid)}),g.filter(v=>v.uid!==(t==null?void 0:t.uid)).length===0&&p.jsx("p",{className:"text-sm text-pandora-muted",children:"No other profiles yet."})]})]})]}):p.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted text-sm",children:[p.jsx(Xt,{size:16,className:"animate-spin"})," Loading profile..."]})}function CJ(){const{user:t}=Lr(),e=Mc(),[n,r]=N.useState(""),[s,i]=N.useState([]),[o,l]=N.useState(!1),[a,u]=N.useState([]);N.useEffect(()=>{(async()=>{if(!t)return;const w=await Mp(t.uid);u(w.map(E=>E.targetUid))})().catch(()=>{})},[t]);const d=async()=>{if(!n.trim()){i([]);return}l(!0);const g=n.trim().toLowerCase();try{const w=g,E=g+"",b=Qs(Qt(He,"profiles"),Jy("displayNameLower",">=",w),Jy("displayNameLower","<=",E),Xs("displayNameLower","asc"),XR(20)),x=(await e2(b)).docs.map(T=>T.data()).filter(T=>T.uid!==(t==null?void 0:t.uid));i(x)}finally{l(!1)}},h=async g=>{t&&(a.includes(g)?(await r_(t.uid,g),u(w=>w.filter(E=>E!==g))):(await n_(t.uid,g),u(w=>[...w,g])))},f=N.useMemo(()=>!o&&n&&s.length===0,[o,n,s.length]);return p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{className:"flex items-center justify-between",children:p.jsxs("div",{className:"flex items-center gap-2 text-pandora-text",children:[p.jsx(XC,{size:18,className:"text-pandora-text"}),p.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:"Search Users"})]})}),p.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-2xl space-y-3",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{value:n,onChange:g=>r(g.target.value),onKeyDown:g=>g.key==="Enter"&&d(),className:"flex-1 bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-2xl font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to",placeholder:"Search by display name"}),p.jsx("button",{onClick:d,className:"px-4 py-2 border border-transparent bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg font-semibold uppercase text-xs rounded-full hover:shadow-lg transition",children:"Go"})]}),o&&p.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted text-sm",children:[p.jsx(Xt,{size:16,className:"animate-spin"})," Searching..."]}),f&&p.jsx("p",{className:"text-sm text-pandora-muted",children:"No users found."}),p.jsx("div",{className:"space-y-2",children:s.map(g=>{const w=a.includes(g.uid);return p.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-2xl hover:bg-white/5 cursor-pointer transition",onClick:()=>e(`/u/${g.uid}`),children:[p.jsxs("div",{className:"min-w-0",children:[p.jsx("p",{className:"text-sm text-pandora-text truncate",children:g.displayName||g.uid}),p.jsx("p",{className:"text-[11px] text-pandora-muted truncate",children:g.email||g.uid})]}),p.jsxs("button",{onClick:E=>{E.stopPropagation(),h(g.uid)},className:`px-3 py-2 text-xs uppercase border rounded-full flex items-center gap-2 ${w?"border-transparent bg-gradient-to-r from-pandora-accent-from/70 to-pandora-accent-to/70 text-pandora-bg":"border-pandora-border text-pandora-text hover:border-pandora-accent-to hover:text-pandora-text"}`,children:[w?p.jsx(HO,{size:14}):p.jsx(qO,{size:14}),w?"Unlink":"Link"]})]},g.uid)})})]})]})}function IJ(){const t=r2(w=>w.profile),[e,n]=N.useState(""),[r,s]=N.useState(""),[i,o]=N.useState(!1),[l,a]=N.useState(""),[u,d]=N.useState(!1),h=(t==null?void 0:t.role)==="admin";N.useEffect(()=>{n("[ NEW DATA + ]"),s("[SYSTEM: Experimental overlay active]")},[]);const f=async()=>{o(!0);try{await bK({primaryButtonLabel:e.trim()||void 0,tickerMessage:r.trim()||void 0})}finally{o(!1)}},g=async()=>{if(l.trim()){d(!0);try{await xc(Qt(He,"events"),{type:"broadcast",message:l.trim(),createdAt:bs(),createdBy:(t==null?void 0:t.uid)||"admin"}),a("")}finally{d(!1)}}};return h?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2 text-pandora-text",children:[p.jsx(eI,{size:18,className:"text-pandora-neon"}),p.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:"Admin Console"})]}),p.jsx("span",{className:"text-xs text-pandora-muted font-mono uppercase",children:"Experiments"})]}),p.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm space-y-3",children:[p.jsx("div",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"UI Overrides"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-[11px] uppercase text-pandora-muted",children:"Primary Button Label"}),p.jsx("input",{value:e,onChange:w=>n(w.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon",placeholder:"[ NEW DATA + ]"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-[11px] uppercase text-pandora-muted",children:"Ticker Message"}),p.jsx("input",{value:r,onChange:w=>s(w.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon",placeholder:"[SYSTEM: Experimental overlay active]"})]}),p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{onClick:f,disabled:i,className:"px-4 py-2 border border-pandora-neon text-pandora-neon bg-transparent font-semibold uppercase text-xs rounded-sm hover:bg-pandora-neon hover:text-pandora-bg transition disabled:opacity-50",children:i?p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(Xt,{size:14,className:"animate-spin"})," Saving..."]}):p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(QC,{size:14})," Save"]})})})]}),p.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm space-y-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-pandora-text",children:[p.jsx(UO,{size:16,className:"text-pandora-neon"}),p.jsx("div",{className:"text-sm font-semibold",children:"Broadcast Event"})]}),p.jsx("textarea",{value:l,onChange:w=>a(w.target.value),className:"w-full h-24 bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon",placeholder:"Message to all users"}),p.jsx("div",{className:"flex justify-end",children:p.jsx("button",{onClick:g,disabled:u||!l.trim(),className:"px-4 py-2 border border-pandora-neon text-pandora-neon bg-transparent font-semibold uppercase text-xs rounded-sm hover:bg-pandora-neon hover:text-pandora-bg transition disabled:opacity-50",children:u?p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(Xt,{size:14,className:"animate-spin"})," Sending..."]}):"Broadcast"})})]})]}):p.jsx("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm text-sm text-pandora-muted",children:"Admin access only."})}function kJ(){const{uid:t}=mw(),e=Mc(),{user:n}=Lr(),[r,s]=N.useState(null),[i,o]=N.useState([]),[l,a]=N.useState(!0),[u,d]=N.useState(!1),[h,f]=N.useState(null);N.useEffect(()=>{if(!t)return;const w=Ln(nr(He,"profiles",t),E=>{E.exists()?s(E.data()):s(null)});return()=>w()},[t]),N.useEffect(()=>{if(!t)return;const w=Qs(Qt(He,"transmissions"),Jy("uid","==",t),Xs("createdAt","desc")),E=Ln(w,b=>{o(b.docs.map(v=>({id:v.id,...v.data()}))),a(!1)},()=>a(!1));return()=>E()},[t]),N.useEffect(()=>{(async()=>{if(!n||!t)return;const E=await _J(n.uid,t);f(E)})().catch(()=>f(null))},[n,t]);const g=async()=>{if(!(!n||!t||u)){d(!0);try{h?(await EJ(n.uid,t),f(!1)):(await xJ(n.uid,t),f(!0))}finally{d(!1)}}};return t?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx(Go,{username:(r==null?void 0:r.displayName)||"Subject",size:"md"}),p.jsxs("div",{className:"flex-1 space-y-2",children:[p.jsx("div",{className:"text-lg font-semibold text-pandora-text",children:(r==null?void 0:r.displayName)||"Subject"}),n&&n.uid!==t&&p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("button",{onClick:()=>e(`/messages/${t}`),className:"px-3 py-2 border border-pandora-border text-pandora-text text-xs uppercase rounded-sm hover:border-pandora-neon flex items-center gap-2",children:[p.jsx(rl,{size:14}),"Message"]}),p.jsxs("button",{onClick:g,disabled:u||h===null,className:`px-3 py-2 text-xs uppercase rounded-sm flex items-center gap-2 ${h?"border border-pandora-neon text-pandora-neon":"border border-pandora-border text-pandora-text hover:border-pandora-neon"} disabled:opacity-50`,children:[p.jsx(NO,{size:14}),h?"Unlink":"Link"]})]})]})]}),l&&p.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted text-sm",children:[p.jsx(Xt,{size:16,className:"animate-spin"})," Loading..."]}),!l&&i.length===0&&p.jsx("div",{className:"text-sm text-pandora-muted",children:"No posts yet."}),p.jsx("div",{className:"space-y-4",children:i.map(w=>p.jsxs("article",{className:"space-y-2 border border-pandora-border p-4 bg-pandora-surface rounded-sm",children:[p.jsx("div",{className:"text-[11px] text-pandora-muted",children:w.createdAt&&"seconds"in w.createdAt?new Date(w.createdAt.seconds*1e3).toLocaleString():"Just now"}),w.type==="text"&&w.content&&p.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:w.content}),w.type==="sample"&&w.sampleUrl&&p.jsx("div",{className:"border border-pandora-border rounded-sm overflow-hidden bg-pandora-bg",children:p.jsx("video",{src:w.sampleUrl,className:"w-full h-64 object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0},w.sampleUrl)}),w.type==="sample"&&p.jsxs("span",{className:"text-[11px] uppercase text-pandora-neon font-semibold flex items-center gap-1",children:[p.jsx(Vf,{size:14})," Sample"]})]},w.id))})]}):p.jsx("div",{className:"text-pandora-muted text-sm",children:"No user specified."})}function RJ(){const{id:t}=mw(),{user:e}=Lr(),n=Pr(D=>D.isBlind()),[r,s]=N.useState(null),[i,o]=N.useState(!0),[l,a]=N.useState({count:0,liked:!1}),[u,d]=N.useState(""),[h,f]=N.useState([]),[g,w]=N.useState(!0);N.useEffect(()=>{if(!t)return;const D=Ln(nr(He,"transmissions",t),L=>{if(L.exists()){const V=L.data();s({id:t,...V}),a(I=>({count:V.likes||0,liked:I.liked}))}else s(null);o(!1)});return()=>D()},[t]),N.useEffect(()=>{if(!t)return;const D=Qs(Qt(He,"transmissions",t,"comments"),Xs("createdAt","desc")),L=Ln(D,V=>{f(V.docs.map(I=>({id:I.id,...I.data()})))});return()=>L()},[t]);const E=async()=>{if(!e||!t)return;const D=l;a({count:D.count+(D.liked?-1:1),liked:!D.liked});try{await Xv(t,e.uid)}catch{a(D)}},b=async()=>{if(!e||!t)return;const D=u.trim();if(D){d(""),f(L=>[{id:`temp-${Date.now()}`,uid:e.uid,text:D,createdAt:{seconds:Date.now()/1e3,nanoseconds:0}},...L]);try{await Yv(t,e.uid,D)}catch{}}},v=D=>{if(!D||!("seconds"in D))return"Just now";const L=Date.now()-D.seconds*1e3,V=Math.floor(L/6e4);if(V<1)return"Just now";if(V<60)return`${V}m ago`;const I=Math.floor(V/60);return I<24?`${I}h ago`:`${Math.floor(I/24)}d ago`};if(i)return p.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted text-sm",children:[p.jsx(Xt,{size:16,className:"animate-spin"})," Loading..."]});if(!r)return p.jsx("div",{className:"text-sm text-pandora-muted",children:"Transmission not found."});const x=r.uid?n?"Subject-****":r.uid:"Unknown",T=r.type==="sample";return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs(gw,{to:r.uid?`/u/${r.uid}`:"#",className:"flex items-center gap-3",children:[p.jsx(Go,{username:x,size:"sm"}),p.jsxs("div",{className:"min-w-0",children:[p.jsx("div",{className:"text-sm font-semibold text-pandora-text truncate",children:x}),p.jsx("div",{className:"text-[11px] text-pandora-muted",children:v(r.createdAt)})]})]}),r.type==="sample"&&p.jsxs("span",{className:"text-[11px] uppercase text-pandora-neon font-semibold flex items-center gap-1",children:[p.jsx(Vf,{size:14})," Sample"]})]}),T?p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-4",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center gap-4 text-xs uppercase font-semibold tracking-wide",children:[p.jsxs("button",{onClick:E,className:on("flex items-center gap-2",l.liked?"text-pandora-neon":"text-pandora-muted hover:text-pandora-text"),children:[p.jsx(jh,{size:14}),p.jsxs("span",{children:[l.count," Likes"]})]}),p.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted",children:[p.jsx(rl,{size:14}),p.jsxs("span",{children:[r.comments??h.length," Comments"]})]})]}),p.jsx("div",{className:"border border-pandora-border rounded-sm overflow-hidden bg-black relative",children:p.jsxs("div",{className:"relative w-full max-h-[80vh] aspect-[9/16]",children:[p.jsx("video",{src:r.sampleUrl,className:"w-full h-full object-contain bg-black",autoPlay:!0,muted:g,loop:!0,playsInline:!0,controls:!0},r.sampleUrl),p.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/35 to-transparent"}),p.jsx("button",{onClick:()=>w(D=>!D),className:"absolute top-3 left-3 z-10 w-10 h-10 flex items-center justify-center border border-pandora-border bg-pandora-bg/80 text-pandora-text hover:border-pandora-neon rounded-sm",title:g?"Unmute":"Mute",children:g?p.jsx(ww,{size:18}):p.jsx(yw,{size:18})})]})})]}),p.jsxs("div",{className:"space-y-3 border border-pandora-border rounded-sm p-3 bg-pandora-bg/60",children:[p.jsxs("div",{className:"flex gap-2 items-end",children:[p.jsx("textarea",{value:u,onChange:D=>d(D.target.value),placeholder:"Leave a comment...",className:"flex-1 h-20 bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-2 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon"}),p.jsx("button",{onClick:b,disabled:!u.trim(),className:"px-4 py-2 border border-pandora-neon text-pandora-neon text-[11px] uppercase rounded-sm hover:bg-pandora-neon hover:text-pandora-bg transition disabled:opacity-50 self-stretch",children:"Post"})]}),p.jsxs("div",{className:"space-y-2 max-h-[520px] overflow-y-auto",children:[h.map(D=>{const L=n?"Subject-****":D.uid||"Unknown",V=D.createdAt&&"seconds"in D.createdAt?new Date(D.createdAt.seconds*1e3).toLocaleTimeString():"Just now";return p.jsxs("div",{className:"border border-pandora-border rounded-sm p-2 bg-pandora-bg",children:[p.jsxs("div",{className:"flex items-center justify-between text-[11px] text-pandora-muted",children:[p.jsx("span",{className:"truncate",children:L}),p.jsx("span",{children:V})]}),p.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:D.text})]},D.id)}),h.length===0&&p.jsx("p",{className:"text-[11px] text-pandora-muted",children:"No comments yet."})]})]})]}):p.jsxs(p.Fragment,{children:[r.content&&p.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:r.content}),p.jsxs("div",{className:"flex items-center gap-4 text-xs uppercase font-semibold tracking-wide",children:[p.jsxs("button",{onClick:E,className:on("flex items-center gap-2",l.liked?"text-pandora-neon":"text-pandora-muted hover:text-pandora-text"),children:[p.jsx(jh,{size:14}),p.jsxs("span",{children:[l.count," Likes"]})]}),p.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted",children:[p.jsx(rl,{size:14}),p.jsxs("span",{children:[r.comments??h.length," Comments"]})]})]}),p.jsxs("div",{className:"space-y-2 border border-pandora-border rounded-sm p-3 bg-pandora-bg/60",children:[p.jsxs("div",{className:"flex gap-2 items-end",children:[p.jsx("textarea",{value:u,onChange:D=>d(D.target.value),placeholder:"Leave a comment...",className:"flex-1 h-16 bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-2 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon"}),p.jsx("button",{onClick:b,disabled:!u.trim(),className:"px-4 py-2 border border-pandora-neon text-pandora-neon text-[11px] uppercase rounded-sm hover:bg-pandora-neon hover:text-pandora-bg transition disabled:opacity-50 self-stretch",children:"Post"})]}),p.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[h.map(D=>{const L=n?"Subject-****":D.uid||"Unknown",V=D.createdAt&&"seconds"in D.createdAt?new Date(D.createdAt.seconds*1e3).toLocaleTimeString():"Just now";return p.jsxs("div",{className:"border border-pandora-border rounded-sm p-2 bg-pandora-bg",children:[p.jsxs("div",{className:"flex items-center justify-between text-[11px] text-pandora-muted",children:[p.jsx("span",{className:"truncate",children:L}),p.jsx("span",{children:V})]}),p.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:D.text})]},D.id)}),h.length===0&&p.jsx("p",{className:"text-[11px] text-pandora-muted",children:"No comments yet."})]})]})]})]})}function PJ(){const{toasts:t,removeToast:e}=s_(),n=Mc();return N.useEffect(()=>{t.forEach(r=>{if(!r.timeout)return;const s=window.setTimeout(()=>e(r.id),r.timeout);return()=>window.clearTimeout(s)})},[t,e]),t.length?p.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-3 w-[280px]",children:t.map(r=>p.jsx("div",{onClick:()=>{r.href&&n(r.href)},className:`border border-white/15 bg-pandora-surface/90 backdrop-blur-md rounded-2xl shadow-lg p-3 text-pandora-text animate-slideDown ${r.href?"cursor-pointer hover:border-white/30":""}`,children:p.jsxs("div",{className:"flex items-start gap-2",children:[p.jsxs("div",{className:"flex-1",children:[r.title&&p.jsx("div",{className:"text-sm font-semibold",children:r.title}),r.description&&p.jsx("div",{className:"text-xs text-pandora-muted mt-1",children:r.description})]}),p.jsx("button",{onClick:()=>e(r.id),className:"text-pandora-muted hover:text-pandora-text","aria-label":"Dismiss",children:p.jsx(WO,{size:14})})]})},r.id))}):null}function NJ(){const{user:t}=Lr(),{setSocketStatus:e}=yN(),n=ea(),r=s_(i=>i.pushToast),s=N.useRef(new Set);return N.useEffect(()=>{t&&Dp(t.uid).then(()=>e(!0)).catch(()=>e(!1))},[t,e]),N.useEffect(()=>{if(!t)return;const i=wf(o=>{if(n.pathname.startsWith("/messages"))return;const l=o.content,a=typeof(l==null?void 0:l.text)=="string"?l.text:"",u=(l==null?void 0:l.fromUid)||o.sender_id,d=(l==null?void 0:l.toUid)||(l==null?void 0:l.targetUid)||"",h=u===t.uid,f=h?d:u;if(!f)return;const g=(l==null?void 0:l.displayName)||(l==null?void 0:l.nickname)||(l==null?void 0:l.username)||(h?"You":f)||"Someone",w=`/messages/${f}`;r({title:"New message",description:`${g}: ${a.slice(0,80)||"Sent a message"}`,href:w})});return()=>i()},[n.pathname,r,t]),N.useEffect(()=>{if(!t)return;const i=`pandora_dm_cache_${t.uid}_`,o=[];for(let u=0;u<localStorage.length;u+=1){const d=localStorage.key(u);if(d&&d.startsWith(i)){const h=d.slice(i.length);h&&o.push(h)}}const l=o.slice(0,10);(async()=>{for(const u of l)if(!s.current.has(u))try{await uh(t.uid,u),s.current.add(u)}catch{}})()},[t,n.pathname]),p.jsxs(p.Fragment,{children:[p.jsx(uO,{children:p.jsxs(zn,{element:p.jsx(TK,{}),children:[p.jsx(zn,{path:"/",element:p.jsx(iT,{})}),p.jsx(zn,{path:"/sectors",element:p.jsx(wJ,{})}),p.jsx(zn,{path:"/samples",element:p.jsx(vJ,{})}),p.jsx(zn,{path:"/profile",element:p.jsx(SJ,{})}),p.jsx(zn,{path:"/u/:uid",element:p.jsx(kJ,{})}),p.jsx(zn,{path:"/messages",element:p.jsx(ET,{})}),p.jsx(zn,{path:"/messages/:uid",element:p.jsx(ET,{})}),p.jsx(zn,{path:"/t/:id",element:p.jsx(RJ,{})}),p.jsx(zn,{path:"/settings",element:p.jsx(AJ,{})}),p.jsx(zn,{path:"/search",element:p.jsx(CJ,{})}),p.jsx(zn,{path:"/admin",element:p.jsx(IJ,{})}),p.jsx(zn,{path:"*",element:p.jsx(iT,{})})]})}),p.jsx(PJ,{})]})}Tg.createRoot(document.getElementById("root")).render(p.jsx(S0.StrictMode,{children:p.jsx(yO,{children:p.jsx(NJ,{})})}));export{to as f,Rl as t};
