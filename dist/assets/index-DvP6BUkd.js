var zN=Object.defineProperty;var qN=(t,e,n)=>e in t?zN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var j=(t,e,n)=>qN(t,typeof e!="symbol"?e+"":e,n);function HN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function IT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var RT={exports:{}},Af={},PT={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pc=Symbol.for("react.element"),WN=Symbol.for("react.portal"),GN=Symbol.for("react.fragment"),KN=Symbol.for("react.strict_mode"),JN=Symbol.for("react.profiler"),QN=Symbol.for("react.provider"),XN=Symbol.for("react.context"),YN=Symbol.for("react.forward_ref"),ZN=Symbol.for("react.suspense"),eD=Symbol.for("react.memo"),tD=Symbol.for("react.lazy"),J_=Symbol.iterator;function nD(t){return t===null||typeof t!="object"?null:(t=J_&&t[J_]||t["@@iterator"],typeof t=="function"?t:null)}var NT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DT=Object.assign,MT={};function El(t,e,n){this.props=t,this.context=e,this.refs=MT,this.updater=n||NT}El.prototype.isReactComponent={};El.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};El.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function OT(){}OT.prototype=El.prototype;function x0(t,e,n){this.props=t,this.context=e,this.refs=MT,this.updater=n||NT}var E0=x0.prototype=new OT;E0.constructor=x0;DT(E0,El.prototype);E0.isPureReactComponent=!0;var Q_=Array.isArray,jT=Object.prototype.hasOwnProperty,b0={current:null},LT={key:!0,ref:!0,__self:!0,__source:!0};function UT(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jT.call(e,r)&&!LT.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Pc,type:t,key:i,ref:o,props:s,_owner:b0.current}}function rD(t,e){return{$$typeof:Pc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function S0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pc}function sD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var X_=/\/+/g;function Xp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?sD(""+t.key):e.toString(36)}function zd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pc:case WN:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Xp(o,0):r,Q_(s)?(n="",t!=null&&(n=t.replace(X_,"$&/")+"/"),zd(s,e,n,"",function(u){return u})):s!=null&&(S0(s)&&(s=rD(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(X_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Q_(t))for(var l=0;l<t.length;l++){i=t[l];var a=r+Xp(i,l);o+=zd(i,e,n,a,s)}else if(a=nD(t),typeof a=="function")for(t=a.call(t),l=0;!(i=t.next()).done;)i=i.value,a=r+Xp(i,l++),o+=zd(i,e,n,a,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function hd(t,e,n){if(t==null)return t;var r=[],s=0;return zd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function iD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qn={current:null},qd={transition:null},oD={ReactCurrentDispatcher:qn,ReactCurrentBatchConfig:qd,ReactCurrentOwner:b0};function FT(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:hd,forEach:function(t,e,n){hd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hd(t,function(){e++}),e},toArray:function(t){return hd(t,function(e){return e})||[]},only:function(t){if(!S0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=El;Ve.Fragment=GN;Ve.Profiler=JN;Ve.PureComponent=x0;Ve.StrictMode=KN;Ve.Suspense=ZN;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oD;Ve.act=FT;Ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=DT({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=b0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)jT.call(e,a)&&!LT.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Pc,type:t.type,key:s,ref:i,props:r,_owner:o}};Ve.createContext=function(t){return t={$$typeof:XN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QN,_context:t},t.Consumer=t};Ve.createElement=UT;Ve.createFactory=function(t){var e=UT.bind(null,t);return e.type=t,e};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:YN,render:t}};Ve.isValidElement=S0;Ve.lazy=function(t){return{$$typeof:tD,_payload:{_status:-1,_result:t},_init:iD}};Ve.memo=function(t,e){return{$$typeof:eD,type:t,compare:e===void 0?null:e}};Ve.startTransition=function(t){var e=qd.transition;qd.transition={};try{t()}finally{qd.transition=e}};Ve.unstable_act=FT;Ve.useCallback=function(t,e){return qn.current.useCallback(t,e)};Ve.useContext=function(t){return qn.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return qn.current.useDeferredValue(t)};Ve.useEffect=function(t,e){return qn.current.useEffect(t,e)};Ve.useId=function(){return qn.current.useId()};Ve.useImperativeHandle=function(t,e,n){return qn.current.useImperativeHandle(t,e,n)};Ve.useInsertionEffect=function(t,e){return qn.current.useInsertionEffect(t,e)};Ve.useLayoutEffect=function(t,e){return qn.current.useLayoutEffect(t,e)};Ve.useMemo=function(t,e){return qn.current.useMemo(t,e)};Ve.useReducer=function(t,e,n){return qn.current.useReducer(t,e,n)};Ve.useRef=function(t){return qn.current.useRef(t)};Ve.useState=function(t){return qn.current.useState(t)};Ve.useSyncExternalStore=function(t,e,n){return qn.current.useSyncExternalStore(t,e,n)};Ve.useTransition=function(){return qn.current.useTransition()};Ve.version="18.3.1";PT.exports=Ve;var I=PT.exports;const T0=IT(I),aD=HN({__proto__:null,default:T0},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lD=I,uD=Symbol.for("react.element"),cD=Symbol.for("react.fragment"),dD=Object.prototype.hasOwnProperty,hD=lD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fD={key:!0,ref:!0,__self:!0,__source:!0};function BT(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)dD.call(e,r)&&!fD.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:uD,type:t,key:i,ref:o,props:s,_owner:hD.current}}Af.Fragment=cD;Af.jsx=BT;Af.jsxs=BT;RT.exports=Af;var f=RT.exports,Cg={},VT={exports:{}},xr={},$T={exports:{}},zT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var Z=B.length;B.push(Q);e:for(;0<Z;){var he=Z-1>>>1,Te=B[he];if(0<s(Te,Q))B[he]=Q,B[Z]=Te,Z=he;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],Z=B.pop();if(Z!==Q){B[0]=Z;e:for(var he=0,Te=B.length,fe=Te>>>1;he<fe;){var Pe=2*(he+1)-1,Xe=B[Pe],at=Pe+1,et=B[at];if(0>s(Xe,Z))at<Te&&0>s(et,Xe)?(B[he]=et,B[at]=Z,he=at):(B[he]=Xe,B[Pe]=Z,he=Pe);else if(at<Te&&0>s(et,Z))B[he]=et,B[at]=Z,he=at;else break e}}return Q}function s(B,Q){var Z=B.sortIndex-Q.sortIndex;return Z!==0?Z:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],d=1,h=null,p=3,g=!1,w=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var Q=n(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=B)r(u),Q.sortIndex=Q.expirationTime,e(a,Q);else break;Q=n(u)}}function O(B){if(x=!1,b(B),!w)if(n(a)!==null)w=!0,de(V);else{var Q=n(u);Q!==null&&q(O,Q.startTime-B)}}function V(B,Q){w=!1,x&&(x=!1,v(T),T=-1),g=!0;var Z=p;try{for(b(Q),h=n(a);h!==null&&(!(h.expirationTime>Q)||B&&!N());){var he=h.callback;if(typeof he=="function"){h.callback=null,p=h.priorityLevel;var Te=he(h.expirationTime<=Q);Q=t.unstable_now(),typeof Te=="function"?h.callback=Te:h===n(a)&&r(a),b(Q)}else r(a);h=n(a)}if(h!==null)var fe=!0;else{var Pe=n(u);Pe!==null&&q(O,Pe.startTime-Q),fe=!1}return fe}finally{h=null,p=Z,g=!1}}var $=!1,C=null,T=-1,R=5,A=-1;function N(){return!(t.unstable_now()-A<R)}function M(){if(C!==null){var B=t.unstable_now();A=B;var Q=!0;try{Q=C(!0,B)}finally{Q?P():($=!1,C=null)}}else $=!1}var P;if(typeof _=="function")P=function(){_(M)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,H=K.port2;K.port1.onmessage=M,P=function(){H.postMessage(null)}}else P=function(){E(M,0)};function de(B){C=B,$||($=!0,P())}function q(B,Q){T=E(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,de(V))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var Z=p;p=Q;try{return B()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=p;p=B;try{return Q()}finally{p=Z}},t.unstable_scheduleCallback=function(B,Q,Z){var he=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?he+Z:he):Z=he,B){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=Z+Te,B={id:d++,callback:Q,priorityLevel:B,startTime:Z,expirationTime:Te,sortIndex:-1},Z>he?(B.sortIndex=Z,e(u,B),n(a)===null&&B===n(u)&&(x?(v(T),T=-1):x=!0,q(O,Z-he))):(B.sortIndex=Te,e(a,B),w||g||(w=!0,de(V))),B},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(B){var Q=p;return function(){var Z=p;p=Q;try{return B.apply(this,arguments)}finally{p=Z}}}})(zT);$T.exports=zT;var pD=$T.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mD=I,vr=pD;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qT=new Set,Wu={};function ta(t,e){Za(t,e),Za(t+"Capture",e)}function Za(t,e){for(Wu[t]=e,t=0;t<e.length;t++)qT.add(e[t])}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kg=Object.prototype.hasOwnProperty,gD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y_={},Z_={};function yD(t){return kg.call(Z_,t)?!0:kg.call(Y_,t)?!1:gD.test(t)?Z_[t]=!0:(Y_[t]=!0,!1)}function wD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vD(t,e,n,r){if(e===null||typeof e>"u"||wD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var En={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){En[t]=new Hn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];En[e]=new Hn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){En[t]=new Hn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){En[t]=new Hn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){En[t]=new Hn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){En[t]=new Hn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){En[t]=new Hn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){En[t]=new Hn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){En[t]=new Hn(t,5,!1,t.toLowerCase(),null,!1,!1)});var A0=/[\-:]([a-z])/g;function C0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(A0,C0);En[e]=new Hn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(A0,C0);En[e]=new Hn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(A0,C0);En[e]=new Hn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){En[t]=new Hn(t,1,!1,t.toLowerCase(),null,!1,!1)});En.xlinkHref=new Hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){En[t]=new Hn(t,1,!1,t.toLowerCase(),null,!0,!0)});function k0(t,e,n,r){var s=En.hasOwnProperty(e)?En[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vD(e,n,s,r)&&(n=null),r||s===null?yD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zs=mD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fd=Symbol.for("react.element"),ba=Symbol.for("react.portal"),Sa=Symbol.for("react.fragment"),I0=Symbol.for("react.strict_mode"),Ig=Symbol.for("react.profiler"),HT=Symbol.for("react.provider"),WT=Symbol.for("react.context"),R0=Symbol.for("react.forward_ref"),Rg=Symbol.for("react.suspense"),Pg=Symbol.for("react.suspense_list"),P0=Symbol.for("react.memo"),vi=Symbol.for("react.lazy"),GT=Symbol.for("react.offscreen"),ex=Symbol.iterator;function Xl(t){return t===null||typeof t!="object"?null:(t=ex&&t[ex]||t["@@iterator"],typeof t=="function"?t:null)}var xt=Object.assign,Yp;function uu(t){if(Yp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yp=e&&e[1]||""}return`
`+Yp+t}var Zp=!1;function em(t,e){if(!t||Zp)return"";Zp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var a=`
`+s[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Zp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?uu(t):""}function _D(t){switch(t.tag){case 5:return uu(t.type);case 16:return uu("Lazy");case 13:return uu("Suspense");case 19:return uu("SuspenseList");case 0:case 2:case 15:return t=em(t.type,!1),t;case 11:return t=em(t.type.render,!1),t;case 1:return t=em(t.type,!0),t;default:return""}}function Ng(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sa:return"Fragment";case ba:return"Portal";case Ig:return"Profiler";case I0:return"StrictMode";case Rg:return"Suspense";case Pg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case WT:return(t.displayName||"Context")+".Consumer";case HT:return(t._context.displayName||"Context")+".Provider";case R0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P0:return e=t.displayName||null,e!==null?e:Ng(t.type)||"Memo";case vi:e=t._payload,t=t._init;try{return Ng(t(e))}catch{}}return null}function xD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ng(e);case 8:return e===I0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ki(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function KT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ED(t){var e=KT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pd(t){t._valueTracker||(t._valueTracker=ED(t))}function JT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=KT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dg(t,e){var n=e.checked;return xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ki(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function QT(t,e){e=e.checked,e!=null&&k0(t,"checked",e,!1)}function Mg(t,e){QT(t,e);var n=Ki(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Og(t,e.type,n):e.hasOwnProperty("defaultValue")&&Og(t,e.type,Ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Og(t,e,n){(e!=="number"||gh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var cu=Array.isArray;function Ba(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ki(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function jg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return xt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(cu(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ki(n)}}function XT(t,e){var n=Ki(e.value),r=Ki(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var md,ZT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(md=md||document.createElement("div"),md.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=md.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Eu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bD=["Webkit","ms","Moz","O"];Object.keys(Eu).forEach(function(t){bD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Eu[e]=Eu[t]})});function eA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Eu.hasOwnProperty(t)&&Eu[t]?(""+e).trim():e+"px"}function tA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=eA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var SD=xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ug(t,e){if(e){if(SD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function Fg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bg=null;function N0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vg=null,Va=null,$a=null;function ix(t){if(t=Mc(t)){if(typeof Vg!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=Pf(e),Vg(t.stateNode,t.type,e))}}function nA(t){Va?$a?$a.push(t):$a=[t]:Va=t}function rA(){if(Va){var t=Va,e=$a;if($a=Va=null,ix(t),e)for(t=0;t<e.length;t++)ix(e[t])}}function sA(t,e){return t(e)}function iA(){}var tm=!1;function oA(t,e,n){if(tm)return t(e,n);tm=!0;try{return sA(t,e,n)}finally{tm=!1,(Va!==null||$a!==null)&&(iA(),rA())}}function Ku(t,e){var n=t.stateNode;if(n===null)return null;var r=Pf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var $g=!1;if(Vs)try{var Yl={};Object.defineProperty(Yl,"passive",{get:function(){$g=!0}}),window.addEventListener("test",Yl,Yl),window.removeEventListener("test",Yl,Yl)}catch{$g=!1}function TD(t,e,n,r,s,i,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var bu=!1,yh=null,wh=!1,zg=null,AD={onError:function(t){bu=!0,yh=t}};function CD(t,e,n,r,s,i,o,l,a){bu=!1,yh=null,TD.apply(AD,arguments)}function kD(t,e,n,r,s,i,o,l,a){if(CD.apply(this,arguments),bu){if(bu){var u=yh;bu=!1,yh=null}else throw Error(ne(198));wh||(wh=!0,zg=u)}}function na(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function aA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ox(t){if(na(t)!==t)throw Error(ne(188))}function ID(t){var e=t.alternate;if(!e){if(e=na(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ox(s),t;if(i===r)return ox(s),e;i=i.sibling}throw Error(ne(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function lA(t){return t=ID(t),t!==null?uA(t):null}function uA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=uA(t);if(e!==null)return e;t=t.sibling}return null}var cA=vr.unstable_scheduleCallback,ax=vr.unstable_cancelCallback,RD=vr.unstable_shouldYield,PD=vr.unstable_requestPaint,Lt=vr.unstable_now,ND=vr.unstable_getCurrentPriorityLevel,D0=vr.unstable_ImmediatePriority,dA=vr.unstable_UserBlockingPriority,vh=vr.unstable_NormalPriority,DD=vr.unstable_LowPriority,hA=vr.unstable_IdlePriority,Cf=null,gs=null;function MD(t){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot(Cf,t,void 0,(t.current.flags&128)===128)}catch{}}var Wr=Math.clz32?Math.clz32:LD,OD=Math.log,jD=Math.LN2;function LD(t){return t>>>=0,t===0?32:31-(OD(t)/jD|0)|0}var gd=64,yd=4194304;function du(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _h(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=du(l):(i&=o,i!==0&&(r=du(i)))}else o=n&~s,o!==0?r=du(o):i!==0&&(r=du(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wr(e),s=1<<n,r|=t[n],e&=~s;return r}function UD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Wr(i),l=1<<o,a=s[o];a===-1?(!(l&n)||l&r)&&(s[o]=UD(l,e)):a<=e&&(t.expiredLanes|=l),i&=~l}}function qg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fA(){var t=gd;return gd<<=1,!(gd&4194240)&&(gd=64),t}function nm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Nc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wr(e),t[e]=n}function BD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Wr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function M0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var nt=0;function pA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mA,O0,gA,yA,wA,Hg=!1,wd=[],Mi=null,Oi=null,ji=null,Ju=new Map,Qu=new Map,Ei=[],VD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lx(t,e){switch(t){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":Oi=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":Ju.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qu.delete(e.pointerId)}}function Zl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Mc(e),e!==null&&O0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function $D(t,e,n,r,s){switch(e){case"focusin":return Mi=Zl(Mi,t,e,n,r,s),!0;case"dragenter":return Oi=Zl(Oi,t,e,n,r,s),!0;case"mouseover":return ji=Zl(ji,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ju.set(i,Zl(Ju.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Qu.set(i,Zl(Qu.get(i)||null,t,e,n,r,s)),!0}return!1}function vA(t){var e=Co(t.target);if(e!==null){var n=na(e);if(n!==null){if(e=n.tag,e===13){if(e=aA(n),e!==null){t.blockedOn=e,wA(t.priority,function(){gA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bg=r,n.target.dispatchEvent(r),Bg=null}else return e=Mc(n),e!==null&&O0(e),t.blockedOn=n,!1;e.shift()}return!0}function ux(t,e,n){Hd(t)&&n.delete(e)}function zD(){Hg=!1,Mi!==null&&Hd(Mi)&&(Mi=null),Oi!==null&&Hd(Oi)&&(Oi=null),ji!==null&&Hd(ji)&&(ji=null),Ju.forEach(ux),Qu.forEach(ux)}function eu(t,e){t.blockedOn===e&&(t.blockedOn=null,Hg||(Hg=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,zD)))}function Xu(t){function e(s){return eu(s,t)}if(0<wd.length){eu(wd[0],t);for(var n=1;n<wd.length;n++){var r=wd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Mi!==null&&eu(Mi,t),Oi!==null&&eu(Oi,t),ji!==null&&eu(ji,t),Ju.forEach(e),Qu.forEach(e),n=0;n<Ei.length;n++)r=Ei[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ei.length&&(n=Ei[0],n.blockedOn===null);)vA(n),n.blockedOn===null&&Ei.shift()}var za=Zs.ReactCurrentBatchConfig,xh=!0;function qD(t,e,n,r){var s=nt,i=za.transition;za.transition=null;try{nt=1,j0(t,e,n,r)}finally{nt=s,za.transition=i}}function HD(t,e,n,r){var s=nt,i=za.transition;za.transition=null;try{nt=4,j0(t,e,n,r)}finally{nt=s,za.transition=i}}function j0(t,e,n,r){if(xh){var s=Wg(t,e,n,r);if(s===null)hm(t,e,r,Eh,n),lx(t,r);else if($D(s,t,e,n,r))r.stopPropagation();else if(lx(t,r),e&4&&-1<VD.indexOf(t)){for(;s!==null;){var i=Mc(s);if(i!==null&&mA(i),i=Wg(t,e,n,r),i===null&&hm(t,e,r,Eh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else hm(t,e,r,null,n)}}var Eh=null;function Wg(t,e,n,r){if(Eh=null,t=N0(r),t=Co(t),t!==null)if(e=na(t),e===null)t=null;else if(n=e.tag,n===13){if(t=aA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Eh=t,null}function _A(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ND()){case D0:return 1;case dA:return 4;case vh:case DD:return 16;case hA:return 536870912;default:return 16}default:return 16}}var ki=null,L0=null,Wd=null;function xA(){if(Wd)return Wd;var t,e=L0,n=e.length,r,s="value"in ki?ki.value:ki.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Wd=s.slice(t,1<r?1-r:void 0)}function Gd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vd(){return!0}function cx(){return!1}function Er(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?vd:cx,this.isPropagationStopped=cx,this}return xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vd)},persist:function(){},isPersistent:vd}),e}var bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},U0=Er(bl),Dc=xt({},bl,{view:0,detail:0}),WD=Er(Dc),rm,sm,tu,kf=xt({},Dc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==tu&&(tu&&t.type==="mousemove"?(rm=t.screenX-tu.screenX,sm=t.screenY-tu.screenY):sm=rm=0,tu=t),rm)},movementY:function(t){return"movementY"in t?t.movementY:sm}}),dx=Er(kf),GD=xt({},kf,{dataTransfer:0}),KD=Er(GD),JD=xt({},Dc,{relatedTarget:0}),im=Er(JD),QD=xt({},bl,{animationName:0,elapsedTime:0,pseudoElement:0}),XD=Er(QD),YD=xt({},bl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZD=Er(YD),e3=xt({},bl,{data:0}),hx=Er(e3),t3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=r3[t])?!!e[t]:!1}function F0(){return s3}var i3=xt({},Dc,{key:function(t){if(t.key){var e=t3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?n3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F0,charCode:function(t){return t.type==="keypress"?Gd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),o3=Er(i3),a3=xt({},kf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fx=Er(a3),l3=xt({},Dc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F0}),u3=Er(l3),c3=xt({},bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),d3=Er(c3),h3=xt({},kf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),f3=Er(h3),p3=[9,13,27,32],B0=Vs&&"CompositionEvent"in window,Su=null;Vs&&"documentMode"in document&&(Su=document.documentMode);var m3=Vs&&"TextEvent"in window&&!Su,EA=Vs&&(!B0||Su&&8<Su&&11>=Su),px=" ",mx=!1;function bA(t,e){switch(t){case"keyup":return p3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ta=!1;function g3(t,e){switch(t){case"compositionend":return SA(e);case"keypress":return e.which!==32?null:(mx=!0,px);case"textInput":return t=e.data,t===px&&mx?null:t;default:return null}}function y3(t,e){if(Ta)return t==="compositionend"||!B0&&bA(t,e)?(t=xA(),Wd=L0=ki=null,Ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return EA&&e.locale!=="ko"?null:e.data;default:return null}}var w3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!w3[t.type]:e==="textarea"}function TA(t,e,n,r){nA(r),e=bh(e,"onChange"),0<e.length&&(n=new U0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Tu=null,Yu=null;function v3(t){jA(t,0)}function If(t){var e=ka(t);if(JT(e))return t}function _3(t,e){if(t==="change")return e}var AA=!1;if(Vs){var om;if(Vs){var am="oninput"in document;if(!am){var yx=document.createElement("div");yx.setAttribute("oninput","return;"),am=typeof yx.oninput=="function"}om=am}else om=!1;AA=om&&(!document.documentMode||9<document.documentMode)}function wx(){Tu&&(Tu.detachEvent("onpropertychange",CA),Yu=Tu=null)}function CA(t){if(t.propertyName==="value"&&If(Yu)){var e=[];TA(e,Yu,t,N0(t)),oA(v3,e)}}function x3(t,e,n){t==="focusin"?(wx(),Tu=e,Yu=n,Tu.attachEvent("onpropertychange",CA)):t==="focusout"&&wx()}function E3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return If(Yu)}function b3(t,e){if(t==="click")return If(e)}function S3(t,e){if(t==="input"||t==="change")return If(e)}function T3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qr=typeof Object.is=="function"?Object.is:T3;function Zu(t,e){if(Qr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!kg.call(e,s)||!Qr(t[s],e[s]))return!1}return!0}function vx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _x(t,e){var n=vx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vx(n)}}function kA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function IA(){for(var t=window,e=gh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gh(t.document)}return e}function V0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function A3(t){var e=IA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kA(n.ownerDocument.documentElement,n)){if(r!==null&&V0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=_x(n,i);var o=_x(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var C3=Vs&&"documentMode"in document&&11>=document.documentMode,Aa=null,Gg=null,Au=null,Kg=!1;function xx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kg||Aa==null||Aa!==gh(r)||(r=Aa,"selectionStart"in r&&V0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Au&&Zu(Au,r)||(Au=r,r=bh(Gg,"onSelect"),0<r.length&&(e=new U0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Aa)))}function _d(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ca={animationend:_d("Animation","AnimationEnd"),animationiteration:_d("Animation","AnimationIteration"),animationstart:_d("Animation","AnimationStart"),transitionend:_d("Transition","TransitionEnd")},lm={},RA={};Vs&&(RA=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function Rf(t){if(lm[t])return lm[t];if(!Ca[t])return t;var e=Ca[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in RA)return lm[t]=e[n];return t}var PA=Rf("animationend"),NA=Rf("animationiteration"),DA=Rf("animationstart"),MA=Rf("transitionend"),OA=new Map,Ex="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ao(t,e){OA.set(t,e),ta(e,[t])}for(var um=0;um<Ex.length;um++){var cm=Ex[um],k3=cm.toLowerCase(),I3=cm[0].toUpperCase()+cm.slice(1);ao(k3,"on"+I3)}ao(PA,"onAnimationEnd");ao(NA,"onAnimationIteration");ao(DA,"onAnimationStart");ao("dblclick","onDoubleClick");ao("focusin","onFocus");ao("focusout","onBlur");ao(MA,"onTransitionEnd");Za("onMouseEnter",["mouseout","mouseover"]);Za("onMouseLeave",["mouseout","mouseover"]);Za("onPointerEnter",["pointerout","pointerover"]);Za("onPointerLeave",["pointerout","pointerover"]);ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R3=new Set("cancel close invalid load scroll toggle".split(" ").concat(hu));function bx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,kD(r,e,void 0,t),t.currentTarget=null}function jA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==i&&s.isPropagationStopped())break e;bx(s,l,u),i=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==i&&s.isPropagationStopped())break e;bx(s,l,u),i=a}}}if(wh)throw t=zg,wh=!1,zg=null,t}function ht(t,e){var n=e[Zg];n===void 0&&(n=e[Zg]=new Set);var r=t+"__bubble";n.has(r)||(LA(e,t,2,!1),n.add(r))}function dm(t,e,n){var r=0;e&&(r|=4),LA(n,t,r,e)}var xd="_reactListening"+Math.random().toString(36).slice(2);function ec(t){if(!t[xd]){t[xd]=!0,qT.forEach(function(n){n!=="selectionchange"&&(R3.has(n)||dm(n,!1,t),dm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xd]||(e[xd]=!0,dm("selectionchange",!1,e))}}function LA(t,e,n,r){switch(_A(e)){case 1:var s=qD;break;case 4:s=HD;break;default:s=j0}n=s.bind(null,e,n,t),s=void 0,!$g||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function hm(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===s||a.nodeType===8&&a.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Co(l),o===null)return;if(a=o.tag,a===5||a===6){r=i=o;continue e}l=l.parentNode}}r=r.return}oA(function(){var u=i,d=N0(n),h=[];e:{var p=OA.get(t);if(p!==void 0){var g=U0,w=t;switch(t){case"keypress":if(Gd(n)===0)break e;case"keydown":case"keyup":g=o3;break;case"focusin":w="focus",g=im;break;case"focusout":w="blur",g=im;break;case"beforeblur":case"afterblur":g=im;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=dx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=KD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=u3;break;case PA:case NA:case DA:g=XD;break;case MA:g=d3;break;case"scroll":g=WD;break;case"wheel":g=f3;break;case"copy":case"cut":case"paste":g=ZD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=fx}var x=(e&4)!==0,E=!x&&t==="scroll",v=x?p!==null?p+"Capture":null:p;x=[];for(var _=u,b;_!==null;){b=_;var O=b.stateNode;if(b.tag===5&&O!==null&&(b=O,v!==null&&(O=Ku(_,v),O!=null&&x.push(tc(_,O,b)))),E)break;_=_.return}0<x.length&&(p=new g(p,w,null,n,d),h.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Bg&&(w=n.relatedTarget||n.fromElement)&&(Co(w)||w[$s]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=u,w=w?Co(w):null,w!==null&&(E=na(w),w!==E||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(x=dx,O="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(x=fx,O="onPointerLeave",v="onPointerEnter",_="pointer"),E=g==null?p:ka(g),b=w==null?p:ka(w),p=new x(O,_+"leave",g,n,d),p.target=E,p.relatedTarget=b,O=null,Co(d)===u&&(x=new x(v,_+"enter",w,n,d),x.target=b,x.relatedTarget=E,O=x),E=O,g&&w)t:{for(x=g,v=w,_=0,b=x;b;b=ma(b))_++;for(b=0,O=v;O;O=ma(O))b++;for(;0<_-b;)x=ma(x),_--;for(;0<b-_;)v=ma(v),b--;for(;_--;){if(x===v||v!==null&&x===v.alternate)break t;x=ma(x),v=ma(v)}x=null}else x=null;g!==null&&Sx(h,p,g,x,!1),w!==null&&E!==null&&Sx(h,E,w,x,!0)}}e:{if(p=u?ka(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var V=_3;else if(gx(p))if(AA)V=S3;else{V=E3;var $=x3}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=b3);if(V&&(V=V(t,u))){TA(h,V,n,d);break e}$&&$(t,p,u),t==="focusout"&&($=p._wrapperState)&&$.controlled&&p.type==="number"&&Og(p,"number",p.value)}switch($=u?ka(u):window,t){case"focusin":(gx($)||$.contentEditable==="true")&&(Aa=$,Gg=u,Au=null);break;case"focusout":Au=Gg=Aa=null;break;case"mousedown":Kg=!0;break;case"contextmenu":case"mouseup":case"dragend":Kg=!1,xx(h,n,d);break;case"selectionchange":if(C3)break;case"keydown":case"keyup":xx(h,n,d)}var C;if(B0)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ta?bA(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(EA&&n.locale!=="ko"&&(Ta||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ta&&(C=xA()):(ki=d,L0="value"in ki?ki.value:ki.textContent,Ta=!0)),$=bh(u,T),0<$.length&&(T=new hx(T,t,null,n,d),h.push({event:T,listeners:$}),C?T.data=C:(C=SA(n),C!==null&&(T.data=C)))),(C=m3?g3(t,n):y3(t,n))&&(u=bh(u,"onBeforeInput"),0<u.length&&(d=new hx("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=C))}jA(h,e)})}function tc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ku(t,n),i!=null&&r.unshift(tc(t,i,s)),i=Ku(t,e),i!=null&&r.push(tc(t,i,s))),t=t.return}return r}function ma(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Sx(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,s?(a=Ku(n,i),a!=null&&o.unshift(tc(n,a,l))):s||(a=Ku(n,i),a!=null&&o.push(tc(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var P3=/\r\n?/g,N3=/\u0000|\uFFFD/g;function Tx(t){return(typeof t=="string"?t:""+t).replace(P3,`
`).replace(N3,"")}function Ed(t,e,n){if(e=Tx(e),Tx(t)!==e&&n)throw Error(ne(425))}function Sh(){}var Jg=null,Qg=null;function Xg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yg=typeof setTimeout=="function"?setTimeout:void 0,D3=typeof clearTimeout=="function"?clearTimeout:void 0,Ax=typeof Promise=="function"?Promise:void 0,M3=typeof queueMicrotask=="function"?queueMicrotask:typeof Ax<"u"?function(t){return Ax.resolve(null).then(t).catch(O3)}:Yg;function O3(t){setTimeout(function(){throw t})}function fm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Xu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Xu(e)}function Li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sl=Math.random().toString(36).slice(2),ms="__reactFiber$"+Sl,nc="__reactProps$"+Sl,$s="__reactContainer$"+Sl,Zg="__reactEvents$"+Sl,j3="__reactListeners$"+Sl,L3="__reactHandles$"+Sl;function Co(t){var e=t[ms];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$s]||n[ms]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cx(t);t!==null;){if(n=t[ms])return n;t=Cx(t)}return e}t=n,n=t.parentNode}return null}function Mc(t){return t=t[ms]||t[$s],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ka(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function Pf(t){return t[nc]||null}var ey=[],Ia=-1;function lo(t){return{current:t}}function pt(t){0>Ia||(t.current=ey[Ia],ey[Ia]=null,Ia--)}function ct(t,e){Ia++,ey[Ia]=t.current,t.current=e}var Ji={},Ln=lo(Ji),nr=lo(!1),Bo=Ji;function el(t,e){var n=t.type.contextTypes;if(!n)return Ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rr(t){return t=t.childContextTypes,t!=null}function Th(){pt(nr),pt(Ln)}function kx(t,e,n){if(Ln.current!==Ji)throw Error(ne(168));ct(Ln,e),ct(nr,n)}function UA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ne(108,xD(t)||"Unknown",s));return xt({},n,r)}function Ah(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ji,Bo=Ln.current,ct(Ln,t),ct(nr,nr.current),!0}function Ix(t,e,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=UA(t,e,Bo),r.__reactInternalMemoizedMergedChildContext=t,pt(nr),pt(Ln),ct(Ln,t)):pt(nr),ct(nr,n)}var Rs=null,Nf=!1,pm=!1;function FA(t){Rs===null?Rs=[t]:Rs.push(t)}function U3(t){Nf=!0,FA(t)}function uo(){if(!pm&&Rs!==null){pm=!0;var t=0,e=nt;try{var n=Rs;for(nt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rs=null,Nf=!1}catch(s){throw Rs!==null&&(Rs=Rs.slice(t+1)),cA(D0,uo),s}finally{nt=e,pm=!1}}return null}var Ra=[],Pa=0,Ch=null,kh=0,kr=[],Ir=0,Vo=null,Ms=1,Os="";function Eo(t,e){Ra[Pa++]=kh,Ra[Pa++]=Ch,Ch=t,kh=e}function BA(t,e,n){kr[Ir++]=Ms,kr[Ir++]=Os,kr[Ir++]=Vo,Vo=t;var r=Ms;t=Os;var s=32-Wr(r)-1;r&=~(1<<s),n+=1;var i=32-Wr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ms=1<<32-Wr(e)+s|n<<s|r,Os=i+t}else Ms=1<<i|n<<s|r,Os=t}function $0(t){t.return!==null&&(Eo(t,1),BA(t,1,0))}function z0(t){for(;t===Ch;)Ch=Ra[--Pa],Ra[Pa]=null,kh=Ra[--Pa],Ra[Pa]=null;for(;t===Vo;)Vo=kr[--Ir],kr[Ir]=null,Os=kr[--Ir],kr[Ir]=null,Ms=kr[--Ir],kr[Ir]=null}var yr=null,mr=null,mt=!1,qr=null;function VA(t,e){var n=Pr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Rx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yr=t,mr=Li(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yr=t,mr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vo!==null?{id:Ms,overflow:Os}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yr=t,mr=null,!0):!1;default:return!1}}function ty(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ny(t){if(mt){var e=mr;if(e){var n=e;if(!Rx(t,e)){if(ty(t))throw Error(ne(418));e=Li(n.nextSibling);var r=yr;e&&Rx(t,e)?VA(r,n):(t.flags=t.flags&-4097|2,mt=!1,yr=t)}}else{if(ty(t))throw Error(ne(418));t.flags=t.flags&-4097|2,mt=!1,yr=t}}}function Px(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yr=t}function bd(t){if(t!==yr)return!1;if(!mt)return Px(t),mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xg(t.type,t.memoizedProps)),e&&(e=mr)){if(ty(t))throw $A(),Error(ne(418));for(;e;)VA(t,e),e=Li(e.nextSibling)}if(Px(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mr=Li(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mr=null}}else mr=yr?Li(t.stateNode.nextSibling):null;return!0}function $A(){for(var t=mr;t;)t=Li(t.nextSibling)}function tl(){mr=yr=null,mt=!1}function q0(t){qr===null?qr=[t]:qr.push(t)}var F3=Zs.ReactCurrentBatchConfig;function nu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function Sd(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Nx(t){var e=t._init;return e(t._payload)}function zA(t){function e(v,_){if(t){var b=v.deletions;b===null?(v.deletions=[_],v.flags|=16):b.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function s(v,_){return v=Vi(v,_),v.index=0,v.sibling=null,v}function i(v,_,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<_?(v.flags|=2,_):b):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,_,b,O){return _===null||_.tag!==6?(_=xm(b,v.mode,O),_.return=v,_):(_=s(_,b),_.return=v,_)}function a(v,_,b,O){var V=b.type;return V===Sa?d(v,_,b.props.children,O,b.key):_!==null&&(_.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===vi&&Nx(V)===_.type)?(O=s(_,b.props),O.ref=nu(v,_,b),O.return=v,O):(O=eh(b.type,b.key,b.props,null,v.mode,O),O.ref=nu(v,_,b),O.return=v,O)}function u(v,_,b,O){return _===null||_.tag!==4||_.stateNode.containerInfo!==b.containerInfo||_.stateNode.implementation!==b.implementation?(_=Em(b,v.mode,O),_.return=v,_):(_=s(_,b.children||[]),_.return=v,_)}function d(v,_,b,O,V){return _===null||_.tag!==7?(_=Mo(b,v.mode,O,V),_.return=v,_):(_=s(_,b),_.return=v,_)}function h(v,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return _=xm(""+_,v.mode,b),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case fd:return b=eh(_.type,_.key,_.props,null,v.mode,b),b.ref=nu(v,null,_),b.return=v,b;case ba:return _=Em(_,v.mode,b),_.return=v,_;case vi:var O=_._init;return h(v,O(_._payload),b)}if(cu(_)||Xl(_))return _=Mo(_,v.mode,b,null),_.return=v,_;Sd(v,_)}return null}function p(v,_,b,O){var V=_!==null?_.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return V!==null?null:l(v,_,""+b,O);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fd:return b.key===V?a(v,_,b,O):null;case ba:return b.key===V?u(v,_,b,O):null;case vi:return V=b._init,p(v,_,V(b._payload),O)}if(cu(b)||Xl(b))return V!==null?null:d(v,_,b,O,null);Sd(v,b)}return null}function g(v,_,b,O,V){if(typeof O=="string"&&O!==""||typeof O=="number")return v=v.get(b)||null,l(_,v,""+O,V);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case fd:return v=v.get(O.key===null?b:O.key)||null,a(_,v,O,V);case ba:return v=v.get(O.key===null?b:O.key)||null,u(_,v,O,V);case vi:var $=O._init;return g(v,_,b,$(O._payload),V)}if(cu(O)||Xl(O))return v=v.get(b)||null,d(_,v,O,V,null);Sd(_,O)}return null}function w(v,_,b,O){for(var V=null,$=null,C=_,T=_=0,R=null;C!==null&&T<b.length;T++){C.index>T?(R=C,C=null):R=C.sibling;var A=p(v,C,b[T],O);if(A===null){C===null&&(C=R);break}t&&C&&A.alternate===null&&e(v,C),_=i(A,_,T),$===null?V=A:$.sibling=A,$=A,C=R}if(T===b.length)return n(v,C),mt&&Eo(v,T),V;if(C===null){for(;T<b.length;T++)C=h(v,b[T],O),C!==null&&(_=i(C,_,T),$===null?V=C:$.sibling=C,$=C);return mt&&Eo(v,T),V}for(C=r(v,C);T<b.length;T++)R=g(C,v,T,b[T],O),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?T:R.key),_=i(R,_,T),$===null?V=R:$.sibling=R,$=R);return t&&C.forEach(function(N){return e(v,N)}),mt&&Eo(v,T),V}function x(v,_,b,O){var V=Xl(b);if(typeof V!="function")throw Error(ne(150));if(b=V.call(b),b==null)throw Error(ne(151));for(var $=V=null,C=_,T=_=0,R=null,A=b.next();C!==null&&!A.done;T++,A=b.next()){C.index>T?(R=C,C=null):R=C.sibling;var N=p(v,C,A.value,O);if(N===null){C===null&&(C=R);break}t&&C&&N.alternate===null&&e(v,C),_=i(N,_,T),$===null?V=N:$.sibling=N,$=N,C=R}if(A.done)return n(v,C),mt&&Eo(v,T),V;if(C===null){for(;!A.done;T++,A=b.next())A=h(v,A.value,O),A!==null&&(_=i(A,_,T),$===null?V=A:$.sibling=A,$=A);return mt&&Eo(v,T),V}for(C=r(v,C);!A.done;T++,A=b.next())A=g(C,v,T,A.value,O),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?T:A.key),_=i(A,_,T),$===null?V=A:$.sibling=A,$=A);return t&&C.forEach(function(M){return e(v,M)}),mt&&Eo(v,T),V}function E(v,_,b,O){if(typeof b=="object"&&b!==null&&b.type===Sa&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case fd:e:{for(var V=b.key,$=_;$!==null;){if($.key===V){if(V=b.type,V===Sa){if($.tag===7){n(v,$.sibling),_=s($,b.props.children),_.return=v,v=_;break e}}else if($.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===vi&&Nx(V)===$.type){n(v,$.sibling),_=s($,b.props),_.ref=nu(v,$,b),_.return=v,v=_;break e}n(v,$);break}else e(v,$);$=$.sibling}b.type===Sa?(_=Mo(b.props.children,v.mode,O,b.key),_.return=v,v=_):(O=eh(b.type,b.key,b.props,null,v.mode,O),O.ref=nu(v,_,b),O.return=v,v=O)}return o(v);case ba:e:{for($=b.key;_!==null;){if(_.key===$)if(_.tag===4&&_.stateNode.containerInfo===b.containerInfo&&_.stateNode.implementation===b.implementation){n(v,_.sibling),_=s(_,b.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=Em(b,v.mode,O),_.return=v,v=_}return o(v);case vi:return $=b._init,E(v,_,$(b._payload),O)}if(cu(b))return w(v,_,b,O);if(Xl(b))return x(v,_,b,O);Sd(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,_!==null&&_.tag===6?(n(v,_.sibling),_=s(_,b),_.return=v,v=_):(n(v,_),_=xm(b,v.mode,O),_.return=v,v=_),o(v)):n(v,_)}return E}var nl=zA(!0),qA=zA(!1),Ih=lo(null),Rh=null,Na=null,H0=null;function W0(){H0=Na=Rh=null}function G0(t){var e=Ih.current;pt(Ih),t._currentValue=e}function ry(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qa(t,e){Rh=t,H0=Na=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(er=!0),t.firstContext=null)}function jr(t){var e=t._currentValue;if(H0!==t)if(t={context:t,memoizedValue:e,next:null},Na===null){if(Rh===null)throw Error(ne(308));Na=t,Rh.dependencies={lanes:0,firstContext:t}}else Na=Na.next=t;return e}var ko=null;function K0(t){ko===null?ko=[t]:ko.push(t)}function HA(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,K0(e)):(n.next=s.next,s.next=n),e.interleaved=n,zs(t,r)}function zs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _i=!1;function J0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ui(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Qe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zs(t,n)}return s=r.interleaved,s===null?(e.next=e,K0(r)):(e.next=s.next,s.next=e),r.interleaved=e,zs(t,n)}function Kd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,M0(t,n)}}function Dx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ph(t,e,n,r){var s=t.updateQueue;_i=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?i=u:o.next=u,o=a;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=a))}if(i!==null){var h=s.baseState;o=0,d=u=a=null,l=i;do{var p=l.lane,g=l.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,x=l;switch(p=e,g=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){h=w.call(g,h,p);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,p=typeof w=="function"?w.call(g,h,p):w,p==null)break e;h=xt({},h,p);break e;case 2:_i=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,a=h):d=d.next=g,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(a=h),s.baseState=a,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);zo|=o,t.lanes=o,t.memoizedState=h}}function Mx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ne(191,s));s.call(r)}}}var Oc={},ys=lo(Oc),rc=lo(Oc),sc=lo(Oc);function Io(t){if(t===Oc)throw Error(ne(174));return t}function Q0(t,e){switch(ct(sc,e),ct(rc,t),ct(ys,Oc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lg(e,t)}pt(ys),ct(ys,e)}function rl(){pt(ys),pt(rc),pt(sc)}function GA(t){Io(sc.current);var e=Io(ys.current),n=Lg(e,t.type);e!==n&&(ct(rc,t),ct(ys,n))}function X0(t){rc.current===t&&(pt(ys),pt(rc))}var yt=lo(0);function Nh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mm=[];function Y0(){for(var t=0;t<mm.length;t++)mm[t]._workInProgressVersionPrimary=null;mm.length=0}var Jd=Zs.ReactCurrentDispatcher,gm=Zs.ReactCurrentBatchConfig,$o=0,_t=null,tn=null,hn=null,Dh=!1,Cu=!1,ic=0,B3=0;function Tn(){throw Error(ne(321))}function Z0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qr(t[n],e[n]))return!1;return!0}function ew(t,e,n,r,s,i){if($o=i,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jd.current=t===null||t.memoizedState===null?q3:H3,t=n(r,s),Cu){i=0;do{if(Cu=!1,ic=0,25<=i)throw Error(ne(301));i+=1,hn=tn=null,e.updateQueue=null,Jd.current=W3,t=n(r,s)}while(Cu)}if(Jd.current=Mh,e=tn!==null&&tn.next!==null,$o=0,hn=tn=_t=null,Dh=!1,e)throw Error(ne(300));return t}function tw(){var t=ic!==0;return ic=0,t}function hs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?_t.memoizedState=hn=t:hn=hn.next=t,hn}function Lr(){if(tn===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=tn.next;var e=hn===null?_t.memoizedState:hn.next;if(e!==null)hn=e,tn=t;else{if(t===null)throw Error(ne(310));tn=t,t={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},hn===null?_t.memoizedState=hn=t:hn=hn.next=t}return hn}function oc(t,e){return typeof e=="function"?e(t):e}function ym(t){var e=Lr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=tn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,a=null,u=i;do{var d=u.lane;if(($o&d)===d)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=h,o=r):a=a.next=h,_t.lanes|=d,zo|=d}u=u.next}while(u!==null&&u!==i);a===null?o=r:a.next=l,Qr(r,e.memoizedState)||(er=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_t.lanes|=i,zo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wm(t){var e=Lr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Qr(i,e.memoizedState)||(er=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function KA(){}function JA(t,e){var n=_t,r=Lr(),s=e(),i=!Qr(r.memoizedState,s);if(i&&(r.memoizedState=s,er=!0),r=r.queue,nw(YA.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||hn!==null&&hn.memoizedState.tag&1){if(n.flags|=2048,ac(9,XA.bind(null,n,r,s,e),void 0,null),pn===null)throw Error(ne(349));$o&30||QA(n,e,s)}return s}function QA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XA(t,e,n,r){e.value=n,e.getSnapshot=r,ZA(e)&&eC(t)}function YA(t,e,n){return n(function(){ZA(e)&&eC(t)})}function ZA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qr(t,n)}catch{return!0}}function eC(t){var e=zs(t,1);e!==null&&Gr(e,t,1,-1)}function Ox(t){var e=hs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oc,lastRenderedState:t},e.queue=t,t=t.dispatch=z3.bind(null,_t,t),[e.memoizedState,t]}function ac(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tC(){return Lr().memoizedState}function Qd(t,e,n,r){var s=hs();_t.flags|=t,s.memoizedState=ac(1|e,n,void 0,r===void 0?null:r)}function Df(t,e,n,r){var s=Lr();r=r===void 0?null:r;var i=void 0;if(tn!==null){var o=tn.memoizedState;if(i=o.destroy,r!==null&&Z0(r,o.deps)){s.memoizedState=ac(e,n,i,r);return}}_t.flags|=t,s.memoizedState=ac(1|e,n,i,r)}function jx(t,e){return Qd(8390656,8,t,e)}function nw(t,e){return Df(2048,8,t,e)}function nC(t,e){return Df(4,2,t,e)}function rC(t,e){return Df(4,4,t,e)}function sC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iC(t,e,n){return n=n!=null?n.concat([t]):null,Df(4,4,sC.bind(null,e,t),n)}function rw(){}function oC(t,e){var n=Lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Z0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function aC(t,e){var n=Lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Z0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function lC(t,e,n){return $o&21?(Qr(n,e)||(n=fA(),_t.lanes|=n,zo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,er=!0),t.memoizedState=n)}function V3(t,e){var n=nt;nt=n!==0&&4>n?n:4,t(!0);var r=gm.transition;gm.transition={};try{t(!1),e()}finally{nt=n,gm.transition=r}}function uC(){return Lr().memoizedState}function $3(t,e,n){var r=Bi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cC(t))dC(e,n);else if(n=HA(t,e,n,r),n!==null){var s=$n();Gr(n,t,r,s),hC(n,e,r)}}function z3(t,e,n){var r=Bi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cC(t))dC(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Qr(l,o)){var a=e.interleaved;a===null?(s.next=s,K0(e)):(s.next=a.next,a.next=s),e.interleaved=s;return}}catch{}finally{}n=HA(t,e,s,r),n!==null&&(s=$n(),Gr(n,t,r,s),hC(n,e,r))}}function cC(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function dC(t,e){Cu=Dh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,M0(t,n)}}var Mh={readContext:jr,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useInsertionEffect:Tn,useLayoutEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useMutableSource:Tn,useSyncExternalStore:Tn,useId:Tn,unstable_isNewReconciler:!1},q3={readContext:jr,useCallback:function(t,e){return hs().memoizedState=[t,e===void 0?null:e],t},useContext:jr,useEffect:jx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qd(4194308,4,sC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qd(4,2,t,e)},useMemo:function(t,e){var n=hs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=$3.bind(null,_t,t),[r.memoizedState,t]},useRef:function(t){var e=hs();return t={current:t},e.memoizedState=t},useState:Ox,useDebugValue:rw,useDeferredValue:function(t){return hs().memoizedState=t},useTransition:function(){var t=Ox(!1),e=t[0];return t=V3.bind(null,t[1]),hs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_t,s=hs();if(mt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),pn===null)throw Error(ne(349));$o&30||QA(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,jx(YA.bind(null,r,i,t),[t]),r.flags|=2048,ac(9,XA.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hs(),e=pn.identifierPrefix;if(mt){var n=Os,r=Ms;n=(r&~(1<<32-Wr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ic++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=B3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},H3={readContext:jr,useCallback:oC,useContext:jr,useEffect:nw,useImperativeHandle:iC,useInsertionEffect:nC,useLayoutEffect:rC,useMemo:aC,useReducer:ym,useRef:tC,useState:function(){return ym(oc)},useDebugValue:rw,useDeferredValue:function(t){var e=Lr();return lC(e,tn.memoizedState,t)},useTransition:function(){var t=ym(oc)[0],e=Lr().memoizedState;return[t,e]},useMutableSource:KA,useSyncExternalStore:JA,useId:uC,unstable_isNewReconciler:!1},W3={readContext:jr,useCallback:oC,useContext:jr,useEffect:nw,useImperativeHandle:iC,useInsertionEffect:nC,useLayoutEffect:rC,useMemo:aC,useReducer:wm,useRef:tC,useState:function(){return wm(oc)},useDebugValue:rw,useDeferredValue:function(t){var e=Lr();return tn===null?e.memoizedState=t:lC(e,tn.memoizedState,t)},useTransition:function(){var t=wm(oc)[0],e=Lr().memoizedState;return[t,e]},useMutableSource:KA,useSyncExternalStore:JA,useId:uC,unstable_isNewReconciler:!1};function $r(t,e){if(t&&t.defaultProps){e=xt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Mf={isMounted:function(t){return(t=t._reactInternals)?na(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$n(),s=Bi(t),i=Fs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ui(t,i,s),e!==null&&(Gr(e,t,s,r),Kd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$n(),s=Bi(t),i=Fs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ui(t,i,s),e!==null&&(Gr(e,t,s,r),Kd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$n(),r=Bi(t),s=Fs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ui(t,s,r),e!==null&&(Gr(e,t,r,n),Kd(e,t,r))}};function Lx(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Zu(n,r)||!Zu(s,i):!0}function fC(t,e,n){var r=!1,s=Ji,i=e.contextType;return typeof i=="object"&&i!==null?i=jr(i):(s=rr(e)?Bo:Ln.current,r=e.contextTypes,i=(r=r!=null)?el(t,s):Ji),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ux(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Mf.enqueueReplaceState(e,e.state,null)}function iy(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},J0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=jr(i):(i=rr(e)?Bo:Ln.current,s.context=el(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(sy(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Mf.enqueueReplaceState(s,s.state,null),Ph(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function sl(t,e){try{var n="",r=e;do n+=_D(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function vm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function oy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var G3=typeof WeakMap=="function"?WeakMap:Map;function pC(t,e,n){n=Fs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jh||(jh=!0,gy=r),oy(t,e)},n}function mC(t,e,n){n=Fs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){oy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){oy(t,e),typeof r!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new G3;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=aM.bind(null,t,e,n),e.then(t,t))}function Bx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fs(-1,1),e.tag=2,Ui(n,e,1))),n.lanes|=1),t)}var K3=Zs.ReactCurrentOwner,er=!1;function Vn(t,e,n,r){e.child=t===null?qA(e,null,n,r):nl(e,t.child,n,r)}function $x(t,e,n,r,s){n=n.render;var i=e.ref;return qa(e,s),r=ew(t,e,n,r,i,s),n=tw(),t!==null&&!er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qs(t,e,s)):(mt&&n&&$0(e),e.flags|=1,Vn(t,e,r,s),e.child)}function zx(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!dw(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,gC(t,e,i,r,s)):(t=eh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Zu,n(o,r)&&t.ref===e.ref)return qs(t,e,s)}return e.flags|=1,t=Vi(i,r),t.ref=e.ref,t.return=e,e.child=t}function gC(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Zu(i,r)&&t.ref===e.ref)if(er=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(er=!0);else return e.lanes=t.lanes,qs(t,e,s)}return ay(t,e,n,r,s)}function yC(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(Ma,fr),fr|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ct(Ma,fr),fr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ct(Ma,fr),fr|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ct(Ma,fr),fr|=r;return Vn(t,e,s,n),e.child}function wC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ay(t,e,n,r,s){var i=rr(n)?Bo:Ln.current;return i=el(e,i),qa(e,s),n=ew(t,e,n,r,i,s),r=tw(),t!==null&&!er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qs(t,e,s)):(mt&&r&&$0(e),e.flags|=1,Vn(t,e,n,s),e.child)}function qx(t,e,n,r,s){if(rr(n)){var i=!0;Ah(e)}else i=!1;if(qa(e,s),e.stateNode===null)Xd(t,e),fC(e,n,r),iy(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=jr(u):(u=rr(n)?Bo:Ln.current,u=el(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Ux(e,o,r,u),_i=!1;var p=e.memoizedState;o.state=p,Ph(e,r,o,s),a=e.memoizedState,l!==r||p!==a||nr.current||_i?(typeof d=="function"&&(sy(e,n,d,r),a=e.memoizedState),(l=_i||Lx(e,n,l,r,p,a,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,WA(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:$r(e.type,l),o.props=u,h=e.pendingProps,p=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=jr(a):(a=rr(n)?Bo:Ln.current,a=el(e,a));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==a)&&Ux(e,o,r,a),_i=!1,p=e.memoizedState,o.state=p,Ph(e,r,o,s);var w=e.memoizedState;l!==h||p!==w||nr.current||_i?(typeof g=="function"&&(sy(e,n,g,r),w=e.memoizedState),(u=_i||Lx(e,n,u,r,p,w,a)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return ly(t,e,n,r,i,s)}function ly(t,e,n,r,s,i){wC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ix(e,n,!1),qs(t,e,i);r=e.stateNode,K3.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=nl(e,t.child,null,i),e.child=nl(e,null,l,i)):Vn(t,e,l,i),e.memoizedState=r.state,s&&Ix(e,n,!0),e.child}function vC(t){var e=t.stateNode;e.pendingContext?kx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kx(t,e.context,!1),Q0(t,e.containerInfo)}function Hx(t,e,n,r,s){return tl(),q0(s),e.flags|=256,Vn(t,e,n,r),e.child}var uy={dehydrated:null,treeContext:null,retryLane:0};function cy(t){return{baseLanes:t,cachePool:null,transitions:null}}function _C(t,e,n){var r=e.pendingProps,s=yt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ct(yt,s&1),t===null)return ny(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Lf(o,r,0,null),t=Mo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=cy(n),e.memoizedState=uy,t):sw(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return J3(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Vi(s,a),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Vi(l,i):(i=Mo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?cy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=uy,r}return i=t.child,t=i.sibling,r=Vi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sw(t,e){return e=Lf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Td(t,e,n,r){return r!==null&&q0(r),nl(e,t.child,null,n),t=sw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function J3(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=vm(Error(ne(422))),Td(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Lf({mode:"visible",children:r.children},s,0,null),i=Mo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&nl(e,t.child,null,o),e.child.memoizedState=cy(o),e.memoizedState=uy,i);if(!(e.mode&1))return Td(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ne(419)),r=vm(i,r,void 0),Td(t,e,o,r)}if(l=(o&t.childLanes)!==0,er||l){if(r=pn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zs(t,s),Gr(r,t,s,-1))}return cw(),r=vm(Error(ne(421))),Td(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=lM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,mr=Li(s.nextSibling),yr=e,mt=!0,qr=null,t!==null&&(kr[Ir++]=Ms,kr[Ir++]=Os,kr[Ir++]=Vo,Ms=t.id,Os=t.overflow,Vo=e),e=sw(e,r.children),e.flags|=4096,e)}function Wx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ry(t.return,e,n)}function _m(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function xC(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Vn(t,e,r.children,n),r=yt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wx(t,n,e);else if(t.tag===19)Wx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ct(yt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Nh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),_m(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Nh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}_m(e,!0,n,null,i);break;case"together":_m(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=Vi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Q3(t,e,n){switch(e.tag){case 3:vC(e),tl();break;case 5:GA(e);break;case 1:rr(e.type)&&Ah(e);break;case 4:Q0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ct(Ih,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ct(yt,yt.current&1),e.flags|=128,null):n&e.child.childLanes?_C(t,e,n):(ct(yt,yt.current&1),t=qs(t,e,n),t!==null?t.sibling:null);ct(yt,yt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xC(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ct(yt,yt.current),r)break;return null;case 22:case 23:return e.lanes=0,yC(t,e,n)}return qs(t,e,n)}var EC,dy,bC,SC;EC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dy=function(){};bC=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Io(ys.current);var i=null;switch(n){case"input":s=Dg(t,s),r=Dg(t,r),i=[];break;case"select":s=xt({},s,{value:void 0}),r=xt({},r,{value:void 0}),i=[];break;case"textarea":s=jg(t,s),r=jg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sh)}Ug(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var a=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(i||(i=[]),i.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(i=i||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(i=i||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wu.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&ht("scroll",t),i||l===a||(i=[])):(i=i||[]).push(u,a))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};SC=function(t,e,n,r){n!==r&&(e.flags|=4)};function ru(t,e){if(!mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function An(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function X3(t,e,n){var r=e.pendingProps;switch(z0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(e),null;case 1:return rr(e.type)&&Th(),An(e),null;case 3:return r=e.stateNode,rl(),pt(nr),pt(Ln),Y0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qr!==null&&(vy(qr),qr=null))),dy(t,e),An(e),null;case 5:X0(e);var s=Io(sc.current);if(n=e.type,t!==null&&e.stateNode!=null)bC(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ne(166));return An(e),null}if(t=Io(ys.current),bd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ms]=e,r[nc]=i,t=(e.mode&1)!==0,n){case"dialog":ht("cancel",r),ht("close",r);break;case"iframe":case"object":case"embed":ht("load",r);break;case"video":case"audio":for(s=0;s<hu.length;s++)ht(hu[s],r);break;case"source":ht("error",r);break;case"img":case"image":case"link":ht("error",r),ht("load",r);break;case"details":ht("toggle",r);break;case"input":tx(r,i),ht("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ht("invalid",r);break;case"textarea":rx(r,i),ht("invalid",r)}Ug(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ed(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ed(r.textContent,l,t),s=["children",""+l]):Wu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ht("scroll",r)}switch(n){case"input":pd(r),nx(r,i,!0);break;case"textarea":pd(r),sx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ms]=e,t[nc]=r,EC(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fg(n,r),n){case"dialog":ht("cancel",t),ht("close",t),s=r;break;case"iframe":case"object":case"embed":ht("load",t),s=r;break;case"video":case"audio":for(s=0;s<hu.length;s++)ht(hu[s],t);s=r;break;case"source":ht("error",t),s=r;break;case"img":case"image":case"link":ht("error",t),ht("load",t),s=r;break;case"details":ht("toggle",t),s=r;break;case"input":tx(t,r),s=Dg(t,r),ht("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=xt({},r,{value:void 0}),ht("invalid",t);break;case"textarea":rx(t,r),s=jg(t,r),ht("invalid",t);break;default:s=r}Ug(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="style"?tA(t,a):i==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&ZT(t,a)):i==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Gu(t,a):typeof a=="number"&&Gu(t,""+a):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Wu.hasOwnProperty(i)?a!=null&&i==="onScroll"&&ht("scroll",t):a!=null&&k0(t,i,a,o))}switch(n){case"input":pd(t),nx(t,r,!1);break;case"textarea":pd(t),sx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ki(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ba(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ba(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Sh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return An(e),null;case 6:if(t&&e.stateNode!=null)SC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ne(166));if(n=Io(sc.current),Io(ys.current),bd(e)){if(r=e.stateNode,n=e.memoizedProps,r[ms]=e,(i=r.nodeValue!==n)&&(t=yr,t!==null))switch(t.tag){case 3:Ed(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ed(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ms]=e,e.stateNode=r}return An(e),null;case 13:if(pt(yt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mt&&mr!==null&&e.mode&1&&!(e.flags&128))$A(),tl(),e.flags|=98560,i=!1;else if(i=bd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ne(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ne(317));i[ms]=e}else tl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;An(e),i=!1}else qr!==null&&(vy(qr),qr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||yt.current&1?nn===0&&(nn=3):cw())),e.updateQueue!==null&&(e.flags|=4),An(e),null);case 4:return rl(),dy(t,e),t===null&&ec(e.stateNode.containerInfo),An(e),null;case 10:return G0(e.type._context),An(e),null;case 17:return rr(e.type)&&Th(),An(e),null;case 19:if(pt(yt),i=e.memoizedState,i===null)return An(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ru(i,!1);else{if(nn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nh(t),o!==null){for(e.flags|=128,ru(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ct(yt,yt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Lt()>il&&(e.flags|=128,r=!0,ru(i,!1),e.lanes=4194304)}else{if(!r)if(t=Nh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ru(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!mt)return An(e),null}else 2*Lt()-i.renderingStartTime>il&&n!==1073741824&&(e.flags|=128,r=!0,ru(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Lt(),e.sibling=null,n=yt.current,ct(yt,r?n&1|2:n&1),e):(An(e),null);case 22:case 23:return uw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fr&1073741824&&(An(e),e.subtreeFlags&6&&(e.flags|=8192)):An(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function Y3(t,e){switch(z0(e),e.tag){case 1:return rr(e.type)&&Th(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rl(),pt(nr),pt(Ln),Y0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return X0(e),null;case 13:if(pt(yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));tl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pt(yt),null;case 4:return rl(),null;case 10:return G0(e.type._context),null;case 22:case 23:return uw(),null;case 24:return null;default:return null}}var Ad=!1,Mn=!1,Z3=typeof WeakSet=="function"?WeakSet:Set,ye=null;function Da(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(t,e,r)}else n.current=null}function hy(t,e,n){try{n()}catch(r){It(t,e,r)}}var Gx=!1;function eM(t,e){if(Jg=xh,t=IA(),V0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,d=0,h=t,p=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==i||r!==0&&h.nodeType!==3||(a=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===t)break t;if(p===n&&++u===s&&(l=o),p===i&&++d===r&&(a=o),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qg={focusedElem:t,selectionRange:n},xh=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,E=w.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?x:$r(e.type,x),E);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(O){It(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return w=Gx,Gx=!1,w}function ku(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hy(e,n,i)}s=s.next}while(s!==r)}}function Of(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function TC(t){var e=t.alternate;e!==null&&(t.alternate=null,TC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ms],delete e[nc],delete e[Zg],delete e[j3],delete e[L3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function AC(t){return t.tag===5||t.tag===3||t.tag===4}function Kx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||AC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function py(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sh));else if(r!==4&&(t=t.child,t!==null))for(py(t,e,n),t=t.sibling;t!==null;)py(t,e,n),t=t.sibling}function my(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(my(t,e,n),t=t.sibling;t!==null;)my(t,e,n),t=t.sibling}var mn=null,zr=!1;function hi(t,e,n){for(n=n.child;n!==null;)CC(t,e,n),n=n.sibling}function CC(t,e,n){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount(Cf,n)}catch{}switch(n.tag){case 5:Mn||Da(n,e);case 6:var r=mn,s=zr;mn=null,hi(t,e,n),mn=r,zr=s,mn!==null&&(zr?(t=mn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mn.removeChild(n.stateNode));break;case 18:mn!==null&&(zr?(t=mn,n=n.stateNode,t.nodeType===8?fm(t.parentNode,n):t.nodeType===1&&fm(t,n),Xu(t)):fm(mn,n.stateNode));break;case 4:r=mn,s=zr,mn=n.stateNode.containerInfo,zr=!0,hi(t,e,n),mn=r,zr=s;break;case 0:case 11:case 14:case 15:if(!Mn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hy(n,e,o),s=s.next}while(s!==r)}hi(t,e,n);break;case 1:if(!Mn&&(Da(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){It(n,e,l)}hi(t,e,n);break;case 21:hi(t,e,n);break;case 22:n.mode&1?(Mn=(r=Mn)||n.memoizedState!==null,hi(t,e,n),Mn=r):hi(t,e,n);break;default:hi(t,e,n)}}function Jx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Z3),e.forEach(function(r){var s=uM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Vr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:mn=l.stateNode,zr=!1;break e;case 3:mn=l.stateNode.containerInfo,zr=!0;break e;case 4:mn=l.stateNode.containerInfo,zr=!0;break e}l=l.return}if(mn===null)throw Error(ne(160));CC(i,o,s),mn=null,zr=!1;var a=s.alternate;a!==null&&(a.return=null),s.return=null}catch(u){It(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kC(e,t),e=e.sibling}function kC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vr(e,t),os(t),r&4){try{ku(3,t,t.return),Of(3,t)}catch(x){It(t,t.return,x)}try{ku(5,t,t.return)}catch(x){It(t,t.return,x)}}break;case 1:Vr(e,t),os(t),r&512&&n!==null&&Da(n,n.return);break;case 5:if(Vr(e,t),os(t),r&512&&n!==null&&Da(n,n.return),t.flags&32){var s=t.stateNode;try{Gu(s,"")}catch(x){It(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&QT(s,i),Fg(l,o);var u=Fg(l,i);for(o=0;o<a.length;o+=2){var d=a[o],h=a[o+1];d==="style"?tA(s,h):d==="dangerouslySetInnerHTML"?ZT(s,h):d==="children"?Gu(s,h):k0(s,d,h,u)}switch(l){case"input":Mg(s,i);break;case"textarea":XT(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Ba(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ba(s,!!i.multiple,i.defaultValue,!0):Ba(s,!!i.multiple,i.multiple?[]:"",!1))}s[nc]=i}catch(x){It(t,t.return,x)}}break;case 6:if(Vr(e,t),os(t),r&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){It(t,t.return,x)}}break;case 3:if(Vr(e,t),os(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xu(e.containerInfo)}catch(x){It(t,t.return,x)}break;case 4:Vr(e,t),os(t);break;case 13:Vr(e,t),os(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(aw=Lt())),r&4&&Jx(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Mn=(u=Mn)||d,Vr(e,t),Mn=u):Vr(e,t),os(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ye=t,d=t.child;d!==null;){for(h=ye=d;ye!==null;){switch(p=ye,g=p.child,p.tag){case 0:case 11:case 14:case 15:ku(4,p,p.return);break;case 1:Da(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){It(r,n,x)}}break;case 5:Da(p,p.return);break;case 22:if(p.memoizedState!==null){Xx(h);continue}}g!==null?(g.return=p,ye=g):Xx(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=eA("display",o))}catch(x){It(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){It(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Vr(e,t),os(t),r&4&&Jx(t);break;case 21:break;default:Vr(e,t),os(t)}}function os(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(AC(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Gu(s,""),r.flags&=-33);var i=Kx(t);my(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Kx(t);py(t,l,o);break;default:throw Error(ne(161))}}catch(a){It(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tM(t,e,n){ye=t,IC(t)}function IC(t,e,n){for(var r=(t.mode&1)!==0;ye!==null;){var s=ye,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ad;if(!o){var l=s.alternate,a=l!==null&&l.memoizedState!==null||Mn;l=Ad;var u=Mn;if(Ad=o,(Mn=a)&&!u)for(ye=s;ye!==null;)o=ye,a=o.child,o.tag===22&&o.memoizedState!==null?Yx(s):a!==null?(a.return=o,ye=a):Yx(s);for(;i!==null;)ye=i,IC(i),i=i.sibling;ye=s,Ad=l,Mn=u}Qx(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ye=i):Qx(t)}}function Qx(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mn||Of(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:$r(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Mx(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mx(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Xu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Mn||e.flags&512&&fy(e)}catch(p){It(e,e.return,p)}}if(e===t){ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}}function Xx(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ye=n;break}ye=e.return}}function Yx(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Of(4,e)}catch(a){It(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(a){It(e,s,a)}}var i=e.return;try{fy(e)}catch(a){It(e,i,a)}break;case 5:var o=e.return;try{fy(e)}catch(a){It(e,o,a)}}}catch(a){It(e,e.return,a)}if(e===t){ye=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ye=l;break}ye=e.return}}var nM=Math.ceil,Oh=Zs.ReactCurrentDispatcher,iw=Zs.ReactCurrentOwner,Dr=Zs.ReactCurrentBatchConfig,Qe=0,pn=null,qt=null,_n=0,fr=0,Ma=lo(0),nn=0,lc=null,zo=0,jf=0,ow=0,Iu=null,Qn=null,aw=0,il=1/0,Is=null,jh=!1,gy=null,Fi=null,Cd=!1,Ii=null,Lh=0,Ru=0,yy=null,Yd=-1,Zd=0;function $n(){return Qe&6?Lt():Yd!==-1?Yd:Yd=Lt()}function Bi(t){return t.mode&1?Qe&2&&_n!==0?_n&-_n:F3.transition!==null?(Zd===0&&(Zd=fA()),Zd):(t=nt,t!==0||(t=window.event,t=t===void 0?16:_A(t.type)),t):1}function Gr(t,e,n,r){if(50<Ru)throw Ru=0,yy=null,Error(ne(185));Nc(t,n,r),(!(Qe&2)||t!==pn)&&(t===pn&&(!(Qe&2)&&(jf|=n),nn===4&&bi(t,_n)),sr(t,r),n===1&&Qe===0&&!(e.mode&1)&&(il=Lt()+500,Nf&&uo()))}function sr(t,e){var n=t.callbackNode;FD(t,e);var r=_h(t,t===pn?_n:0);if(r===0)n!==null&&ax(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ax(n),e===1)t.tag===0?U3(Zx.bind(null,t)):FA(Zx.bind(null,t)),M3(function(){!(Qe&6)&&uo()}),n=null;else{switch(pA(r)){case 1:n=D0;break;case 4:n=dA;break;case 16:n=vh;break;case 536870912:n=hA;break;default:n=vh}n=LC(n,RC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function RC(t,e){if(Yd=-1,Zd=0,Qe&6)throw Error(ne(327));var n=t.callbackNode;if(Ha()&&t.callbackNode!==n)return null;var r=_h(t,t===pn?_n:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Uh(t,r);else{e=r;var s=Qe;Qe|=2;var i=NC();(pn!==t||_n!==e)&&(Is=null,il=Lt()+500,Do(t,e));do try{iM();break}catch(l){PC(t,l)}while(!0);W0(),Oh.current=i,Qe=s,qt!==null?e=0:(pn=null,_n=0,e=nn)}if(e!==0){if(e===2&&(s=qg(t),s!==0&&(r=s,e=wy(t,s))),e===1)throw n=lc,Do(t,0),bi(t,r),sr(t,Lt()),n;if(e===6)bi(t,r);else{if(s=t.current.alternate,!(r&30)&&!rM(s)&&(e=Uh(t,r),e===2&&(i=qg(t),i!==0&&(r=i,e=wy(t,i))),e===1))throw n=lc,Do(t,0),bi(t,r),sr(t,Lt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ne(345));case 2:bo(t,Qn,Is);break;case 3:if(bi(t,r),(r&130023424)===r&&(e=aw+500-Lt(),10<e)){if(_h(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$n(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yg(bo.bind(null,t,Qn,Is),e);break}bo(t,Qn,Is);break;case 4:if(bi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Wr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nM(r/1960))-r,10<r){t.timeoutHandle=Yg(bo.bind(null,t,Qn,Is),r);break}bo(t,Qn,Is);break;case 5:bo(t,Qn,Is);break;default:throw Error(ne(329))}}}return sr(t,Lt()),t.callbackNode===n?RC.bind(null,t):null}function wy(t,e){var n=Iu;return t.current.memoizedState.isDehydrated&&(Do(t,e).flags|=256),t=Uh(t,e),t!==2&&(e=Qn,Qn=n,e!==null&&vy(e)),t}function vy(t){Qn===null?Qn=t:Qn.push.apply(Qn,t)}function rM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Qr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bi(t,e){for(e&=~ow,e&=~jf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wr(e),r=1<<n;t[n]=-1,e&=~r}}function Zx(t){if(Qe&6)throw Error(ne(327));Ha();var e=_h(t,0);if(!(e&1))return sr(t,Lt()),null;var n=Uh(t,e);if(t.tag!==0&&n===2){var r=qg(t);r!==0&&(e=r,n=wy(t,r))}if(n===1)throw n=lc,Do(t,0),bi(t,e),sr(t,Lt()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bo(t,Qn,Is),sr(t,Lt()),null}function lw(t,e){var n=Qe;Qe|=1;try{return t(e)}finally{Qe=n,Qe===0&&(il=Lt()+500,Nf&&uo())}}function qo(t){Ii!==null&&Ii.tag===0&&!(Qe&6)&&Ha();var e=Qe;Qe|=1;var n=Dr.transition,r=nt;try{if(Dr.transition=null,nt=1,t)return t()}finally{nt=r,Dr.transition=n,Qe=e,!(Qe&6)&&uo()}}function uw(){fr=Ma.current,pt(Ma)}function Do(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,D3(n)),qt!==null)for(n=qt.return;n!==null;){var r=n;switch(z0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Th();break;case 3:rl(),pt(nr),pt(Ln),Y0();break;case 5:X0(r);break;case 4:rl();break;case 13:pt(yt);break;case 19:pt(yt);break;case 10:G0(r.type._context);break;case 22:case 23:uw()}n=n.return}if(pn=t,qt=t=Vi(t.current,null),_n=fr=e,nn=0,lc=null,ow=jf=zo=0,Qn=Iu=null,ko!==null){for(e=0;e<ko.length;e++)if(n=ko[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ko=null}return t}function PC(t,e){do{var n=qt;try{if(W0(),Jd.current=Mh,Dh){for(var r=_t.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dh=!1}if($o=0,hn=tn=_t=null,Cu=!1,ic=0,iw.current=null,n===null||n.return===null){nn=1,lc=e,qt=null;break}e:{var i=t,o=n.return,l=n,a=e;if(e=_n,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Bx(o);if(g!==null){g.flags&=-257,Vx(g,o,l,i,e),g.mode&1&&Fx(i,u,e),e=g,a=u;var w=e.updateQueue;if(w===null){var x=new Set;x.add(a),e.updateQueue=x}else w.add(a);break e}else{if(!(e&1)){Fx(i,u,e),cw();break e}a=Error(ne(426))}}else if(mt&&l.mode&1){var E=Bx(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Vx(E,o,l,i,e),q0(sl(a,l));break e}}i=a=sl(a,l),nn!==4&&(nn=2),Iu===null?Iu=[i]:Iu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=pC(i,a,e);Dx(i,v);break e;case 1:l=a;var _=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Fi===null||!Fi.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=mC(i,l,e);Dx(i,O);break e}}i=i.return}while(i!==null)}MC(n)}catch(V){e=V,qt===n&&n!==null&&(qt=n=n.return);continue}break}while(!0)}function NC(){var t=Oh.current;return Oh.current=Mh,t===null?Mh:t}function cw(){(nn===0||nn===3||nn===2)&&(nn=4),pn===null||!(zo&268435455)&&!(jf&268435455)||bi(pn,_n)}function Uh(t,e){var n=Qe;Qe|=2;var r=NC();(pn!==t||_n!==e)&&(Is=null,Do(t,e));do try{sM();break}catch(s){PC(t,s)}while(!0);if(W0(),Qe=n,Oh.current=r,qt!==null)throw Error(ne(261));return pn=null,_n=0,nn}function sM(){for(;qt!==null;)DC(qt)}function iM(){for(;qt!==null&&!RD();)DC(qt)}function DC(t){var e=jC(t.alternate,t,fr);t.memoizedProps=t.pendingProps,e===null?MC(t):qt=e,iw.current=null}function MC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Y3(n,e),n!==null){n.flags&=32767,qt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nn=6,qt=null;return}}else if(n=X3(n,e,fr),n!==null){qt=n;return}if(e=e.sibling,e!==null){qt=e;return}qt=e=t}while(e!==null);nn===0&&(nn=5)}function bo(t,e,n){var r=nt,s=Dr.transition;try{Dr.transition=null,nt=1,oM(t,e,n,r)}finally{Dr.transition=s,nt=r}return null}function oM(t,e,n,r){do Ha();while(Ii!==null);if(Qe&6)throw Error(ne(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(BD(t,i),t===pn&&(qt=pn=null,_n=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cd||(Cd=!0,LC(vh,function(){return Ha(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Dr.transition,Dr.transition=null;var o=nt;nt=1;var l=Qe;Qe|=4,iw.current=null,eM(t,n),kC(n,t),A3(Qg),xh=!!Jg,Qg=Jg=null,t.current=n,tM(n),PD(),Qe=l,nt=o,Dr.transition=i}else t.current=n;if(Cd&&(Cd=!1,Ii=t,Lh=s),i=t.pendingLanes,i===0&&(Fi=null),MD(n.stateNode),sr(t,Lt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jh)throw jh=!1,t=gy,gy=null,t;return Lh&1&&t.tag!==0&&Ha(),i=t.pendingLanes,i&1?t===yy?Ru++:(Ru=0,yy=t):Ru=0,uo(),null}function Ha(){if(Ii!==null){var t=pA(Lh),e=Dr.transition,n=nt;try{if(Dr.transition=null,nt=16>t?16:t,Ii===null)var r=!1;else{if(t=Ii,Ii=null,Lh=0,Qe&6)throw Error(ne(331));var s=Qe;for(Qe|=4,ye=t.current;ye!==null;){var i=ye,o=i.child;if(ye.flags&16){var l=i.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(ye=u;ye!==null;){var d=ye;switch(d.tag){case 0:case 11:case 15:ku(8,d,i)}var h=d.child;if(h!==null)h.return=d,ye=h;else for(;ye!==null;){d=ye;var p=d.sibling,g=d.return;if(TC(d),d===u){ye=null;break}if(p!==null){p.return=g,ye=p;break}ye=g}}}var w=i.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var E=x.sibling;x.sibling=null,x=E}while(x!==null)}}ye=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ye=o;else e:for(;ye!==null;){if(i=ye,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ku(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ye=v;break e}ye=i.return}}var _=t.current;for(ye=_;ye!==null;){o=ye;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ye=b;else e:for(o=_;ye!==null;){if(l=ye,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Of(9,l)}}catch(V){It(l,l.return,V)}if(l===o){ye=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,ye=O;break e}ye=l.return}}if(Qe=s,uo(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot(Cf,t)}catch{}r=!0}return r}finally{nt=n,Dr.transition=e}}return!1}function eE(t,e,n){e=sl(n,e),e=pC(t,e,1),t=Ui(t,e,1),e=$n(),t!==null&&(Nc(t,1,e),sr(t,e))}function It(t,e,n){if(t.tag===3)eE(t,t,n);else for(;e!==null;){if(e.tag===3){eE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fi===null||!Fi.has(r))){t=sl(n,t),t=mC(e,t,1),e=Ui(e,t,1),t=$n(),e!==null&&(Nc(e,1,t),sr(e,t));break}}e=e.return}}function aM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$n(),t.pingedLanes|=t.suspendedLanes&n,pn===t&&(_n&n)===n&&(nn===4||nn===3&&(_n&130023424)===_n&&500>Lt()-aw?Do(t,0):ow|=n),sr(t,e)}function OC(t,e){e===0&&(t.mode&1?(e=yd,yd<<=1,!(yd&130023424)&&(yd=4194304)):e=1);var n=$n();t=zs(t,e),t!==null&&(Nc(t,e,n),sr(t,n))}function lM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OC(t,n)}function uM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(e),OC(t,n)}var jC;jC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nr.current)er=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return er=!1,Q3(t,e,n);er=!!(t.flags&131072)}else er=!1,mt&&e.flags&1048576&&BA(e,kh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xd(t,e),t=e.pendingProps;var s=el(e,Ln.current);qa(e,n),s=ew(null,e,r,t,s,n);var i=tw();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rr(r)?(i=!0,Ah(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,J0(e),s.updater=Mf,e.stateNode=s,s._reactInternals=e,iy(e,r,t,n),e=ly(null,e,r,!0,i,n)):(e.tag=0,mt&&i&&$0(e),Vn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=dM(r),t=$r(r,t),s){case 0:e=ay(null,e,r,t,n);break e;case 1:e=qx(null,e,r,t,n);break e;case 11:e=$x(null,e,r,t,n);break e;case 14:e=zx(null,e,r,$r(r.type,t),n);break e}throw Error(ne(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),ay(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),qx(t,e,r,s,n);case 3:e:{if(vC(e),t===null)throw Error(ne(387));r=e.pendingProps,i=e.memoizedState,s=i.element,WA(t,e),Ph(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=sl(Error(ne(423)),e),e=Hx(t,e,r,n,s);break e}else if(r!==s){s=sl(Error(ne(424)),e),e=Hx(t,e,r,n,s);break e}else for(mr=Li(e.stateNode.containerInfo.firstChild),yr=e,mt=!0,qr=null,n=qA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tl(),r===s){e=qs(t,e,n);break e}Vn(t,e,r,n)}e=e.child}return e;case 5:return GA(e),t===null&&ny(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Xg(r,s)?o=null:i!==null&&Xg(r,i)&&(e.flags|=32),wC(t,e),Vn(t,e,o,n),e.child;case 6:return t===null&&ny(e),null;case 13:return _C(t,e,n);case 4:return Q0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=nl(e,null,r,n):Vn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),$x(t,e,r,s,n);case 7:return Vn(t,e,e.pendingProps,n),e.child;case 8:return Vn(t,e,e.pendingProps.children,n),e.child;case 12:return Vn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ct(Ih,r._currentValue),r._currentValue=o,i!==null)if(Qr(i.value,o)){if(i.children===s.children&&!nr.current){e=qs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(i.tag===1){a=Fs(-1,n&-n),a.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?a.next=a:(a.next=d.next,d.next=a),u.pending=a}}i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),ry(i.return,n,e),l.lanes|=n;break}a=a.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ne(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ry(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Vn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,qa(e,n),s=jr(s),r=r(s),e.flags|=1,Vn(t,e,r,n),e.child;case 14:return r=e.type,s=$r(r,e.pendingProps),s=$r(r.type,s),zx(t,e,r,s,n);case 15:return gC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),Xd(t,e),e.tag=1,rr(r)?(t=!0,Ah(e)):t=!1,qa(e,n),fC(e,r,s),iy(e,r,s,n),ly(null,e,r,!0,t,n);case 19:return xC(t,e,n);case 22:return yC(t,e,n)}throw Error(ne(156,e.tag))};function LC(t,e){return cA(t,e)}function cM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(t,e,n,r){return new cM(t,e,n,r)}function dw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dM(t){if(typeof t=="function")return dw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===R0)return 11;if(t===P0)return 14}return 2}function Vi(t,e){var n=t.alternate;return n===null?(n=Pr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function eh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")dw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Sa:return Mo(n.children,s,i,e);case I0:o=8,s|=8;break;case Ig:return t=Pr(12,n,e,s|2),t.elementType=Ig,t.lanes=i,t;case Rg:return t=Pr(13,n,e,s),t.elementType=Rg,t.lanes=i,t;case Pg:return t=Pr(19,n,e,s),t.elementType=Pg,t.lanes=i,t;case GT:return Lf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HT:o=10;break e;case WT:o=9;break e;case R0:o=11;break e;case P0:o=14;break e;case vi:o=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Pr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Mo(t,e,n,r){return t=Pr(7,t,r,e),t.lanes=n,t}function Lf(t,e,n,r){return t=Pr(22,t,r,e),t.elementType=GT,t.lanes=n,t.stateNode={isHidden:!1},t}function xm(t,e,n){return t=Pr(6,t,null,e),t.lanes=n,t}function Em(t,e,n){return e=Pr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nm(0),this.expirationTimes=nm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hw(t,e,n,r,s,i,o,l,a){return t=new hM(t,e,n,l,a),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},J0(i),t}function fM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ba,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function UC(t){if(!t)return Ji;t=t._reactInternals;e:{if(na(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(rr(n))return UA(t,n,e)}return e}function FC(t,e,n,r,s,i,o,l,a){return t=hw(n,r,!0,t,s,i,o,l,a),t.context=UC(null),n=t.current,r=$n(),s=Bi(n),i=Fs(r,s),i.callback=e??null,Ui(n,i,s),t.current.lanes=s,Nc(t,s,r),sr(t,r),t}function Uf(t,e,n,r){var s=e.current,i=$n(),o=Bi(s);return n=UC(n),e.context===null?e.context=n:e.pendingContext=n,e=Fs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ui(s,e,o),t!==null&&(Gr(t,s,o,i),Kd(t,s,o)),o}function Fh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fw(t,e){tE(t,e),(t=t.alternate)&&tE(t,e)}function pM(){return null}var BC=typeof reportError=="function"?reportError:function(t){console.error(t)};function pw(t){this._internalRoot=t}Ff.prototype.render=pw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));Uf(t,e,null,null)};Ff.prototype.unmount=pw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qo(function(){Uf(null,t,null,null)}),e[$s]=null}};function Ff(t){this._internalRoot=t}Ff.prototype.unstable_scheduleHydration=function(t){if(t){var e=yA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ei.length&&e!==0&&e<Ei[n].priority;n++);Ei.splice(n,0,t),n===0&&vA(t)}};function mw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nE(){}function mM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Fh(o);i.call(u)}}var o=FC(e,r,t,0,null,!1,!1,"",nE);return t._reactRootContainer=o,t[$s]=o.current,ec(t.nodeType===8?t.parentNode:t),qo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Fh(a);l.call(u)}}var a=hw(t,0,!1,null,null,!1,!1,"",nE);return t._reactRootContainer=a,t[$s]=a.current,ec(t.nodeType===8?t.parentNode:t),qo(function(){Uf(e,a,n,r)}),a}function Vf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var a=Fh(o);l.call(a)}}Uf(e,o,t,s)}else o=mM(n,e,t,s,r);return Fh(o)}mA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=du(e.pendingLanes);n!==0&&(M0(e,n|1),sr(e,Lt()),!(Qe&6)&&(il=Lt()+500,uo()))}break;case 13:qo(function(){var r=zs(t,1);if(r!==null){var s=$n();Gr(r,t,1,s)}}),fw(t,1)}};O0=function(t){if(t.tag===13){var e=zs(t,134217728);if(e!==null){var n=$n();Gr(e,t,134217728,n)}fw(t,134217728)}};gA=function(t){if(t.tag===13){var e=Bi(t),n=zs(t,e);if(n!==null){var r=$n();Gr(n,t,e,r)}fw(t,e)}};yA=function(){return nt};wA=function(t,e){var n=nt;try{return nt=t,e()}finally{nt=n}};Vg=function(t,e,n){switch(e){case"input":if(Mg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Pf(r);if(!s)throw Error(ne(90));JT(r),Mg(r,s)}}}break;case"textarea":XT(t,n);break;case"select":e=n.value,e!=null&&Ba(t,!!n.multiple,e,!1)}};sA=lw;iA=qo;var gM={usingClientEntryPoint:!1,Events:[Mc,ka,Pf,nA,rA,lw]},su={findFiberByHostInstance:Co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yM={bundleType:su.bundleType,version:su.version,rendererPackageName:su.rendererPackageName,rendererConfig:su.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lA(t),t===null?null:t.stateNode},findFiberByHostInstance:su.findFiberByHostInstance||pM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kd.isDisabled&&kd.supportsFiber)try{Cf=kd.inject(yM),gs=kd}catch{}}xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gM;xr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mw(e))throw Error(ne(200));return fM(t,e,null,n)};xr.createRoot=function(t,e){if(!mw(t))throw Error(ne(299));var n=!1,r="",s=BC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=hw(t,1,!1,null,null,n,!1,r,s),t[$s]=e.current,ec(t.nodeType===8?t.parentNode:t),new pw(e)};xr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=lA(e),t=t===null?null:t.stateNode,t};xr.flushSync=function(t){return qo(t)};xr.hydrate=function(t,e,n){if(!Bf(e))throw Error(ne(200));return Vf(null,t,e,!0,n)};xr.hydrateRoot=function(t,e,n){if(!mw(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=BC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=FC(e,null,t,1,n??null,s,!1,i,o),t[$s]=e.current,ec(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ff(e)};xr.render=function(t,e,n){if(!Bf(e))throw Error(ne(200));return Vf(null,t,e,!1,n)};xr.unmountComponentAtNode=function(t){if(!Bf(t))throw Error(ne(40));return t._reactRootContainer?(qo(function(){Vf(null,null,t,!1,function(){t._reactRootContainer=null,t[$s]=null})}),!0):!1};xr.unstable_batchedUpdates=lw;xr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bf(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return Vf(t,e,n,!1,r)};xr.version="18.3.1-next-f1338f8080-20240426";function VC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VC)}catch(t){console.error(t)}}VC(),VT.exports=xr;var wM=VT.exports,rE=wM;Cg.createRoot=rE.createRoot,Cg.hydrateRoot=rE.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uc(){return uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uc.apply(this,arguments)}var Ri;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ri||(Ri={}));const sE="popstate";function vM(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return _y("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Bh(s)}return xM(e,n,null,t)}function Pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _M(){return Math.random().toString(36).substr(2,8)}function iE(t,e){return{usr:t.state,key:t.key,idx:e}}function _y(t,e,n,r){return n===void 0&&(n=null),uc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Tl(e):e,{state:n,key:e&&e.key||r||_M()})}function Bh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Tl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function xM(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Ri.Pop,a=null,u=d();u==null&&(u=0,o.replaceState(uc({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Ri.Pop;let E=d(),v=E==null?null:E-u;u=E,a&&a({action:l,location:x.location,delta:v})}function p(E,v){l=Ri.Push;let _=_y(x.location,E,v);u=d()+1;let b=iE(_,u),O=x.createHref(_);try{o.pushState(b,"",O)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(O)}i&&a&&a({action:l,location:x.location,delta:1})}function g(E,v){l=Ri.Replace;let _=_y(x.location,E,v);u=d();let b=iE(_,u),O=x.createHref(_);o.replaceState(b,"",O),i&&a&&a({action:l,location:x.location,delta:0})}function w(E){let v=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof E=="string"?E:Bh(E);return _=_.replace(/ $/,"%20"),Pt(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let x={get action(){return l},get location(){return t(s,o)},listen(E){if(a)throw new Error("A history only accepts one active listener");return s.addEventListener(sE,h),a=E,()=>{s.removeEventListener(sE,h),a=null}},createHref(E){return e(s,E)},createURL:w,encodeLocation(E){let v=w(E);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:g,go(E){return o.go(E)}};return x}var oE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(oE||(oE={}));function EM(t,e,n){return n===void 0&&(n="/"),bM(t,e,n)}function bM(t,e,n,r){let s=typeof e=="string"?Tl(e):e,i=ol(s.pathname||"/",n);if(i==null)return null;let o=$C(t);SM(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=OM(i);l=DM(o[a],u)}return l}function $C(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let a={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};a.relativePath.startsWith("/")&&(Pt(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=$i([r,a.relativePath]),d=n.concat(a);i.children&&i.children.length>0&&(Pt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),$C(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:PM(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let a of zC(i.path))s(i,o,a)}),e}function zC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=zC(r.join("/")),l=[];return l.push(...o.map(a=>a===""?i:[i,a].join("/"))),s&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function SM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:NM(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const TM=/^:[\w-]+$/,AM=3,CM=2,kM=1,IM=10,RM=-2,aE=t=>t==="*";function PM(t,e){let n=t.split("/"),r=n.length;return n.some(aE)&&(r+=RM),e&&(r+=CM),n.filter(s=>!aE(s)).reduce((s,i)=>s+(TM.test(i)?AM:i===""?kM:IM),r)}function NM(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function DM(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=xy({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},d),p=a.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:$i([i,h.pathname]),pathnameBase:BM($i([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=$i([i,h.pathnameBase]))}return o}function xy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=MM(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:p,isOptional:g}=d;if(p==="*"){let x=l[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const w=l[h];return g&&!w?u[p]=void 0:u[p]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function MM(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),gw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function OM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ol(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const jM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,LM=t=>jM.test(t);function UM(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Tl(t):t,i;if(n)if(LM(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),gw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=lE(n.substring(1),"/"):i=lE(n,e)}else i=e;return{pathname:i,search:VM(r),hash:$M(s)}}function lE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function bm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FM(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qC(t,e){let n=FM(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function HC(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Tl(t):(s=uc({},t),Pt(!s.pathname||!s.pathname.includes("?"),bm("?","pathname","search",s)),Pt(!s.pathname||!s.pathname.includes("#"),bm("#","pathname","hash",s)),Pt(!s.search||!s.search.includes("#"),bm("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}l=h>=0?e[h]:"/"}let a=UM(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||d)&&(a.pathname+="/"),a}const $i=t=>t.join("/").replace(/\/\/+/g,"/"),BM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$M=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const WC=["post","put","patch","delete"];new Set(WC);const qM=["get",...WC];new Set(qM);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cc(){return cc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cc.apply(this,arguments)}const $f=I.createContext(null),GC=I.createContext(null),co=I.createContext(null),zf=I.createContext(null),ei=I.createContext({outlet:null,matches:[],isDataRoute:!1}),KC=I.createContext(null);function HM(t,e){let{relative:n}=e===void 0?{}:e;jc()||Pt(!1);let{basename:r,navigator:s}=I.useContext(co),{hash:i,pathname:o,search:l}=qf(t,{relative:n}),a=o;return r!=="/"&&(a=o==="/"?r:$i([r,o])),s.createHref({pathname:a,search:l,hash:i})}function jc(){return I.useContext(zf)!=null}function ra(){return jc()||Pt(!1),I.useContext(zf).location}function JC(t){I.useContext(co).static||I.useLayoutEffect(t)}function Lc(){let{isDataRoute:t}=I.useContext(ei);return t?oO():WM()}function WM(){jc()||Pt(!1);let t=I.useContext($f),{basename:e,future:n,navigator:r}=I.useContext(co),{matches:s}=I.useContext(ei),{pathname:i}=ra(),o=JSON.stringify(qC(s,n.v7_relativeSplatPath)),l=I.useRef(!1);return JC(()=>{l.current=!0}),I.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=HC(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:$i([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}const GM=I.createContext(null);function KM(t){let e=I.useContext(ei).outlet;return e&&I.createElement(GM.Provider,{value:t},e)}function yw(){let{matches:t}=I.useContext(ei),e=t[t.length-1];return e?e.params:{}}function qf(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=I.useContext(co),{matches:s}=I.useContext(ei),{pathname:i}=ra(),o=JSON.stringify(qC(s,r.v7_relativeSplatPath));return I.useMemo(()=>HC(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function JM(t,e){return QM(t,e)}function QM(t,e,n,r){jc()||Pt(!1);let{navigator:s}=I.useContext(co),{matches:i}=I.useContext(ei),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let u=ra(),d;if(e){var h;let E=typeof e=="string"?Tl(e):e;a==="/"||(h=E.pathname)!=null&&h.startsWith(a)||Pt(!1),d=E}else d=u;let p=d.pathname||"/",g=p;if(a!=="/"){let E=a.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(E.length).join("/")}let w=EM(t,{pathname:g}),x=tO(w&&w.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:$i([a,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?a:$i([a,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n,r);return e&&x?I.createElement(zf.Provider,{value:{location:cc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ri.Pop}},x):x}function XM(){let t=iO(),e=zM(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:s},n):null,null)}const YM=I.createElement(XM,null);class ZM extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(ei.Provider,{value:this.props.routeContext},I.createElement(KC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eO(t){let{routeContext:e,match:n,children:r}=t,s=I.useContext($f);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(ei.Provider,{value:e},r)}function tO(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Pt(!1),o=o.slice(0,Math.min(o.length,d+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:g}=n,w=h.route.loader&&p[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||w){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let g,w=!1,x=null,E=null;n&&(g=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||YM,a&&(u<0&&p===0?(aO("route-fallback"),w=!0,E=null):u===p&&(w=!0,E=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),_=()=>{let b;return g?b=x:w?b=E:h.route.Component?b=I.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,I.createElement(eO,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?I.createElement(ZM,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var QC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(QC||{}),XC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(XC||{});function nO(t){let e=I.useContext($f);return e||Pt(!1),e}function rO(t){let e=I.useContext(GC);return e||Pt(!1),e}function sO(t){let e=I.useContext(ei);return e||Pt(!1),e}function YC(t){let e=sO(),n=e.matches[e.matches.length-1];return n.route.id||Pt(!1),n.route.id}function iO(){var t;let e=I.useContext(KC),n=rO(),r=YC();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function oO(){let{router:t}=nO(QC.UseNavigateStable),e=YC(XC.UseNavigateStable),n=I.useRef(!1);return JC(()=>{n.current=!0}),I.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,cc({fromRouteId:e},i)))},[t,e])}const uE={};function aO(t,e,n){uE[t]||(uE[t]=!0)}function lO(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function uO(t){return KM(t.context)}function Gn(t){Pt(!1)}function cO(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ri.Pop,navigator:i,static:o=!1,future:l}=t;jc()&&Pt(!1);let a=e.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:a,navigator:i,static:o,future:cc({v7_relativeSplatPath:!1},l)}),[a,l,i,o]);typeof r=="string"&&(r=Tl(r));let{pathname:d="/",search:h="",hash:p="",state:g=null,key:w="default"}=r,x=I.useMemo(()=>{let E=ol(d,a);return E==null?null:{location:{pathname:E,search:h,hash:p,state:g,key:w},navigationType:s}},[a,d,h,p,g,w,s]);return x==null?null:I.createElement(co.Provider,{value:u},I.createElement(zf.Provider,{children:n,value:x}))}function dO(t){let{children:e,location:n}=t;return JM(Ey(e),n)}new Promise(()=>{});function Ey(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(r,s)=>{if(!I.isValidElement(r))return;let i=[...e,s];if(r.type===I.Fragment){n.push.apply(n,Ey(r.props.children,i));return}r.type!==Gn&&Pt(!1),!r.props.index||!r.props.children||Pt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ey(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vh(){return Vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vh.apply(this,arguments)}function ZC(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function hO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fO(t,e){return t.button===0&&(!e||e==="_self")&&!hO(t)}const pO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mO=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],gO="6";try{window.__reactRouterVersion=gO}catch{}const yO=I.createContext({isTransitioning:!1}),wO="startTransition",cE=aD[wO];function vO(t){let{basename:e,children:n,future:r,window:s}=t,i=I.useRef();i.current==null&&(i.current=vM({window:s,v5Compat:!0}));let o=i.current,[l,a]=I.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=I.useCallback(h=>{u&&cE?cE(()=>a(h)):a(h)},[a,u]);return I.useLayoutEffect(()=>o.listen(d),[o,d]),I.useEffect(()=>lO(r),[r]),I.createElement(cO,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const _O=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ww=I.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:a,to:u,preventScrollReset:d,viewTransition:h}=e,p=ZC(e,pO),{basename:g}=I.useContext(co),w,x=!1;if(typeof u=="string"&&xO.test(u)&&(w=u,_O))try{let b=new URL(window.location.href),O=u.startsWith("//")?new URL(b.protocol+u):new URL(u),V=ol(O.pathname,g);O.origin===b.origin&&V!=null?u=V+O.search+O.hash:x=!0}catch{}let E=HM(u,{relative:s}),v=bO(u,{replace:o,state:l,target:a,preventScrollReset:d,relative:s,viewTransition:h});function _(b){r&&r(b),b.defaultPrevented||v(b)}return I.createElement("a",Vh({},p,{href:w||E,onClick:x||i?r:_,ref:n,target:a}))}),dE=I.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:a,viewTransition:u,children:d}=e,h=ZC(e,mO),p=qf(a,{relative:h.relative}),g=ra(),w=I.useContext(GC),{navigator:x,basename:E}=I.useContext(co),v=w!=null&&SO(p)&&u===!0,_=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,b=g.pathname,O=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(b=b.toLowerCase(),O=O?O.toLowerCase():null,_=_.toLowerCase()),O&&E&&(O=ol(O,E)||O);const V=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let $=b===_||!o&&b.startsWith(_)&&b.charAt(V)==="/",C=O!=null&&(O===_||!o&&O.startsWith(_)&&O.charAt(_.length)==="/"),T={isActive:$,isPending:C,isTransitioning:v},R=$?r:void 0,A;typeof i=="function"?A=i(T):A=[i,$?"active":null,C?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let N=typeof l=="function"?l(T):l;return I.createElement(ww,Vh({},h,{"aria-current":R,className:A,ref:n,style:N,to:a,viewTransition:u}),typeof d=="function"?d(T):d)});var by;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(by||(by={}));var hE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hE||(hE={}));function EO(t){let e=I.useContext($f);return e||Pt(!1),e}function bO(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,a=Lc(),u=ra(),d=qf(t,{relative:o});return I.useCallback(h=>{if(fO(h,n)){h.preventDefault();let p=r!==void 0?r:Bh(u)===Bh(d);a(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,a,d,r,s,n,t,i,o,l])}function SO(t,e){e===void 0&&(e={});let n=I.useContext(yO);n==null&&Pt(!1);let{basename:r}=EO(by.useViewTransitionState),s=qf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=ol(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ol(n.nextLocation.pathname,r)||n.nextLocation.pathname;return xy(s.pathname,o)!=null||xy(s.pathname,i)!=null}/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Fe=(t,e)=>{const n=I.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:a,...u},d)=>I.createElement("svg",{ref:d,...TO,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${AO(t)}`,l].join(" "),...u},[...e.map(([h,p])=>I.createElement(h,p)),...Array.isArray(a)?a:[a]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=Fe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=Fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=Fe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=Fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=Fe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=Fe("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=Fe("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=Fe("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=Fe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=Fe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Fe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=Fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=Fe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=Fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=Fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=Fe("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=Fe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=Fe("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=Fe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=Fe("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=Fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=Fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=Fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=Fe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=Fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=Fe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=Fe("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=Fe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=Fe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=Fe("TerminalSquare",[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=Fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=Fe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=Fe("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=Fe("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=Fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=Fe("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=Fe("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.322.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=Fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),KO={},gE=t=>{let e;const n=new Set,r=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const g=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(w=>w(e,g))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(KO?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,s,a);return a},JO=t=>t?gE(t):gE;var ok={exports:{}},ak={},lk={exports:{}},uk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ll=I;function QO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var XO=typeof Object.is=="function"?Object.is:QO,YO=ll.useState,ZO=ll.useEffect,e4=ll.useLayoutEffect,t4=ll.useDebugValue;function n4(t,e){var n=e(),r=YO({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return e4(function(){s.value=n,s.getSnapshot=e,Sm(s)&&i({inst:s})},[t,n,e]),ZO(function(){return Sm(s)&&i({inst:s}),t(function(){Sm(s)&&i({inst:s})})},[t]),t4(n),n}function Sm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!XO(t,n)}catch{return!0}}function r4(t,e){return e()}var s4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?r4:n4;uk.useSyncExternalStore=ll.useSyncExternalStore!==void 0?ll.useSyncExternalStore:s4;lk.exports=uk;var i4=lk.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf=I,o4=i4;function a4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var l4=typeof Object.is=="function"?Object.is:a4,u4=o4.useSyncExternalStore,c4=Wf.useRef,d4=Wf.useEffect,h4=Wf.useMemo,f4=Wf.useDebugValue;ak.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=c4(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=h4(function(){function a(g){if(!u){if(u=!0,d=g,g=r(g),s!==void 0&&o.hasValue){var w=o.value;if(s(w,g))return h=w}return h=g}if(w=h,l4(d,g))return w;var x=r(g);return s!==void 0&&s(w,x)?(d=g,w):(d=g,h=x)}var u=!1,d,h,p=n===void 0?null:n;return[function(){return a(e())},p===null?void 0:function(){return a(p())}]},[e,n,r,s]);var l=u4(t,i[0],i[1]);return d4(function(){o.hasValue=!0,o.value=l},[l]),f4(l),l};ok.exports=ak;var p4=ok.exports;const m4=IT(p4),ck={},{useDebugValue:g4}=T0,{useSyncExternalStoreWithSelector:y4}=m4;let yE=!1;const w4=t=>t;function v4(t,e=w4,n){(ck?"production":void 0)!=="production"&&n&&!yE&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),yE=!0);const r=y4(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return g4(r),r}const wE=t=>{(ck?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?JO(t):t,n=(r,s)=>v4(e,r,s);return Object.assign(n,e),n},Al=t=>t?wE(t):wE,Nr=Al((t,e)=>({experimentMode:"NORMAL",userStats:{logic:88,altruism:12,aggression:82,credit:99},setExperimentMode:n=>t({experimentMode:n}),setUserStats:n=>t(r=>({userStats:{...r.userStats,...n}})),isBlind:()=>e().experimentMode==="BLIND",isSilenced:()=>e().experimentMode==="SILENCE"})),_4=()=>{};var vE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},x4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],a=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},hk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,a=s+2<t.length,u=a?t[s+2]:0,d=i>>2,h=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;a||(g=64,o||(p=64)),r.push(n[d],n[h],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):x4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||h==null)throw new E4;const p=i<<2|l>>4;if(r.push(p),u!==64){const g=l<<4&240|u>>2;if(r.push(g),h!==64){const w=u<<6&192|h;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class E4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b4=function(t){const e=dk(t);return hk.encodeByteArray(e,!0)},$h=function(t){return b4(t).replace(/\./g,"")},fk=function(t){try{return hk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=()=>S4().__FIREBASE_DEFAULTS__,A4=()=>{if(typeof process>"u"||typeof vE>"u")return;const t=vE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},C4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fk(t[1]);return e&&JSON.parse(e)},Gf=()=>{try{return _4()||T4()||A4()||C4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pk=t=>{var e,n;return(n=(e=Gf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},k4=t=>{const e=pk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mk=()=>{var t;return(t=Gf())==null?void 0:t.config},gk=t=>{var e;return(e=Gf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yk(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[$h(JSON.stringify(n)),$h(JSON.stringify(o)),""].join(".")}const Pu={};function P4(){const t={prod:[],emulator:[]};for(const e of Object.keys(Pu))Pu[e]?t.emulator.push(e):t.prod.push(e);return t}function N4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let _E=!1;function wk(t,e){if(typeof window>"u"||typeof document>"u"||!Cl(window.location.host)||Pu[t]===e||Pu[t]||_E)return;Pu[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=P4().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function a(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{_E=!0,o()},p}function d(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=N4(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),x=n("learnmore"),E=document.getElementById(x)||document.createElement("a"),v=n("preprendIcon"),_=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const b=p.element;l(b),d(E,x);const O=u();a(_,v),b.append(_,w,E,O),document.body.appendChild(b)}i?(w.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function D4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function M4(){var e;const t=(e=Gf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function O4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ew(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function j4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function L4(){const t=Un();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function U4(){return!M4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bw(){try{return typeof indexedDB=="object"}catch{return!1}}function Sw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function vk(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4="FirebaseError";class es extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=F4,Object.setPrototypeOf(this,es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sa.prototype.create)}}class sa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?B4(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new es(s,l,r)}}function B4(t,e){return t.replace(V4,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const V4=/\{\$([^}]+)}/g;function $4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(xE(i)&&xE(o)){if(!Qi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function xE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function pu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function z4(t,e){const n=new q4(t,e);return n.subscribe.bind(n)}class q4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");H4(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Tm),s.error===void 0&&(s.error=Tm),s.complete===void 0&&(s.complete=Tm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=1e3,G4=2,K4=4*60*60*1e3,J4=.5;function EE(t,e=W4,n=G4){const r=e*Math.pow(n,t),s=Math.round(J4*r*(Math.random()-.5)*2);return Math.min(K4,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t){return t&&t._delegate?t._delegate:t}class Xr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new I4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y4(e))try{this.getOrInitializeService({instanceIdentifier:So})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=So){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=So){return this.instances.has(e)}getOptions(e=So){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:X4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=So){return this.component?this.component.multipleInstances?e:So:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function X4(t){return t===So?void 0:t}function Y4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Q4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ze||(ze={}));const ej={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},tj=ze.INFO,nj={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},rj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=nj[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kf{constructor(e){this.name=e,this._logLevel=tj,this._logHandler=rj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ej[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const sj=(t,e)=>e.some(n=>t instanceof n);let bE,SE;function ij(){return bE||(bE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oj(){return SE||(SE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _k=new WeakMap,Ty=new WeakMap,xk=new WeakMap,Am=new WeakMap,Tw=new WeakMap;function aj(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(zi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_k.set(n,t)}).catch(()=>{}),Tw.set(e,t),e}function lj(t){if(Ty.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ty.set(t,e)}let Ay={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ty.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uj(t){Ay=t(Ay)}function cj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cm(this),e,...n);return xk.set(r,e.sort?e.sort():[e]),zi(r)}:oj().includes(t)?function(...e){return t.apply(Cm(this),e),zi(_k.get(this))}:function(...e){return zi(t.apply(Cm(this),e))}}function dj(t){return typeof t=="function"?cj(t):(t instanceof IDBTransaction&&lj(t),sj(t,ij())?new Proxy(t,Ay):t)}function zi(t){if(t instanceof IDBRequest)return aj(t);if(Am.has(t))return Am.get(t);const e=dj(t);return e!==t&&(Am.set(t,e),Tw.set(e,t)),e}const Cm=t=>Tw.get(t);function Ek(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=zi(o);return r&&o.addEventListener("upgradeneeded",a=>{r(zi(o.result),a.oldVersion,a.newVersion,zi(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{i&&a.addEventListener("close",()=>i()),s&&a.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const hj=["get","getKey","getAll","getAllKeys","count"],fj=["put","add","delete","clear"],km=new Map;function TE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(km.get(e))return km.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=fj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hj.includes(n)))return;const i=async function(o,...l){const a=this.transaction(o,s?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&a.done]))[0]};return km.set(e,i),i}uj(t=>({...t,get:(e,n,r)=>TE(e,n)||t.get(e,n,r),has:(e,n)=>!!TE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cy="@firebase/app",AE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new Kf("@firebase/app"),gj="@firebase/app-compat",yj="@firebase/analytics-compat",wj="@firebase/analytics",vj="@firebase/app-check-compat",_j="@firebase/app-check",xj="@firebase/auth",Ej="@firebase/auth-compat",bj="@firebase/database",Sj="@firebase/data-connect",Tj="@firebase/database-compat",Aj="@firebase/functions",Cj="@firebase/functions-compat",kj="@firebase/installations",Ij="@firebase/installations-compat",Rj="@firebase/messaging",Pj="@firebase/messaging-compat",Nj="@firebase/performance",Dj="@firebase/performance-compat",Mj="@firebase/remote-config",Oj="@firebase/remote-config-compat",jj="@firebase/storage",Lj="@firebase/storage-compat",Uj="@firebase/firestore",Fj="@firebase/ai",Bj="@firebase/firestore-compat",Vj="firebase",$j="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="[DEFAULT]",zj={[Cy]:"fire-core",[gj]:"fire-core-compat",[wj]:"fire-analytics",[yj]:"fire-analytics-compat",[_j]:"fire-app-check",[vj]:"fire-app-check-compat",[xj]:"fire-auth",[Ej]:"fire-auth-compat",[bj]:"fire-rtdb",[Sj]:"fire-data-connect",[Tj]:"fire-rtdb-compat",[Aj]:"fire-fn",[Cj]:"fire-fn-compat",[kj]:"fire-iid",[Ij]:"fire-iid-compat",[Rj]:"fire-fcm",[Pj]:"fire-fcm-compat",[Nj]:"fire-perf",[Dj]:"fire-perf-compat",[Mj]:"fire-rc",[Oj]:"fire-rc-compat",[jj]:"fire-gcs",[Lj]:"fire-gcs-compat",[Uj]:"fire-fst",[Bj]:"fire-fst-compat",[Fj]:"fire-vertex","fire-js":"fire-js",[Vj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Map,qj=new Map,Iy=new Map;function CE(t,e){try{t.container.addComponent(e)}catch(n){Hs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ts(t){const e=t.name;if(Iy.has(e))return Hs.debug(`There were multiple attempts to register component ${e}.`),!1;Iy.set(e,t);for(const n of dc.values())CE(n,t);for(const n of qj.values())CE(n,t);return!0}function ia(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qi=new sa("app","Firebase",Hj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=$j;function bk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ky,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw qi.create("bad-app-name",{appName:String(s)});if(n||(n=mk()),!n)throw qi.create("no-options");const i=dc.get(s);if(i){if(Qi(n,i.options)&&Qi(r,i.config))return i;throw qi.create("duplicate-app",{appName:s})}const o=new Z4(s);for(const a of Iy.values())o.addComponent(a);const l=new Wj(n,r,o);return dc.set(s,l),l}function Jf(t=ky){const e=dc.get(t);if(!e&&t===ky&&mk())return bk();if(!e)throw qi.create("no-app",{appName:t});return e}function Gj(){return Array.from(dc.values())}function Mr(t,e,n){let r=zj[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hs.warn(o.join(" "));return}Ts(new Xr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj="firebase-heartbeat-database",Jj=1,hc="firebase-heartbeat-store";let Im=null;function Sk(){return Im||(Im=Ek(Kj,Jj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hc)}catch(n){console.warn(n)}}}}).catch(t=>{throw qi.create("idb-open",{originalErrorMessage:t.message})})),Im}async function Qj(t){try{const n=(await Sk()).transaction(hc),r=await n.objectStore(hc).get(Tk(t));return await n.done,r}catch(e){if(e instanceof es)Hs.warn(e.message);else{const n=qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hs.warn(n.message)}}}async function kE(t,e){try{const r=(await Sk()).transaction(hc,"readwrite");await r.objectStore(hc).put(e,Tk(t)),await r.done}catch(n){if(n instanceof es)Hs.warn(n.message);else{const r=qi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hs.warn(r.message)}}}function Tk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=1024,Yj=30;class Zj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=IE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Yj){const o=nL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Hs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=IE(),{heartbeatsToSend:r,unsentEntries:s}=eL(this._heartbeatsCache.heartbeats),i=$h(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hs.warn(n),""}}}function IE(){return new Date().toISOString().substring(0,10)}function eL(t,e=Xj){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),RE(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),RE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bw()?Sw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Qj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return kE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function RE(t){return $h(JSON.stringify({version:2,heartbeats:t})).length}function nL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(t){Ts(new Xr("platform-logger",e=>new pj(e),"PRIVATE")),Ts(new Xr("heartbeat",e=>new Zj(e),"PRIVATE")),Mr(Cy,AE,t),Mr(Cy,AE,"esm2020"),Mr("fire-js","")}rL("");function Ak(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sL=Ak,Ck=new sa("auth","Firebase",Ak());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Kf("@firebase/auth");function iL(t,...e){zh.logLevel<=ze.WARN&&zh.warn(`Auth (${kl}): ${t}`,...e)}function th(t,...e){zh.logLevel<=ze.ERROR&&zh.error(`Auth (${kl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t,...e){throw Cw(t,...e)}function Kr(t,...e){return Cw(t,...e)}function Aw(t,e,n){const r={...sL(),[e]:n};return new sa("auth","Firebase",r).create(e,{appName:t.name})}function ws(t){return Aw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oL(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ur(t,"argument-error"),Aw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ck.create(t,...e)}function Ae(t,e,...n){if(!t)throw Cw(e,...n)}function js(t){const e="INTERNAL ASSERTION FAILED: "+t;throw th(e),new Error(e)}function Ws(t,e){t||js(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function aL(){return PE()==="http:"||PE()==="https:"}function PE(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aL()||Ew()||"connection"in navigator)?navigator.onLine:!0}function uL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ws(n>e,"Short delay should be less than long delay!"),this.isMobile=D4()||j4()}get(){return lL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t,e){Ws(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;js("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;js("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;js("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hL=new Fc(3e4,6e4);function ho(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ti(t,e,n,r,s={}){return Ik(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Uc({key:t.config.apiKey,...o}).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:a,...i};return O4()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Cl(t.emulatorConfig.host)&&(u.credentials="include"),kk.fetch()(await Rk(t,t.config.apiHost,n,l),u)})}async function Ik(t,e,n){t._canInitEmulator=!1;const r={...cL,...e};try{const s=new pL(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Id(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[a,u]=l.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Id(t,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw Id(t,"email-already-in-use",o);if(a==="USER_DISABLED")throw Id(t,"user-disabled",o);const d=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Aw(t,d,u);Ur(t,d)}}catch(s){if(s instanceof es)throw s;Ur(t,"network-request-failed",{message:String(s)})}}async function Bc(t,e,n,r,s={}){const i=await ti(t,e,n,r,s);return"mfaPendingCredential"in i&&Ur(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Rk(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?kw(t.config,s):`${t.config.apiScheme}://${s}`;return dL.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function fL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kr(this.auth,"network-request-failed")),hL.get())})}}function Id(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Kr(t,e,r);return s.customData._tokenResponse=n,s}function NE(t){return t!==void 0&&t.enterprise!==void 0}class mL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return fL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gL(t,e){return ti(t,"GET","/v2/recaptchaConfig",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yL(t,e){return ti(t,"POST","/v1/accounts:delete",e)}async function qh(t,e){return ti(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wL(t,e=!1){const n=Et(t),r=await n.getIdToken(e),s=Iw(r);Ae(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Nu(Rm(s.auth_time)),issuedAtTime:Nu(Rm(s.iat)),expirationTime:Nu(Rm(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Rm(t){return Number(t)*1e3}function Iw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return th("JWT malformed, contained fewer than 3 sections"),null;try{const s=fk(n);return s?JSON.parse(s):(th("Failed to decode base64 JWT payload"),null)}catch(s){return th("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function DE(t){const e=Iw(t);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof es&&vL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function vL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nu(this.lastLoginAt),this.creationTime=Nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hh(t){var h;const e=t.auth,n=await t.getIdToken(),r=await ul(t,qh(e,{idToken:n}));Ae(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(h=s.providerUserInfo)!=null&&h.length?Pk(s.providerUserInfo):[],o=EL(t.providerData,i),l=t.isAnonymous,a=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?a:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Py(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function xL(t){const e=Et(t);await Hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EL(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Pk(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bL(t,e){const n=await Ik(t,{},async()=>{const r=Uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Rk(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:l,body:r};return t.emulatorConfig&&Cl(t.emulatorConfig.host)&&(a.credentials="include"),kk.fetch()(o,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SL(t,e){return ti(t,"POST","/v2/accounts:revokeToken",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):DE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=DE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await bL(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Wa;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ae(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ae(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return js("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t,e){Ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new _L(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Py(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ul(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wL(this,e)}reload(){return xL(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(ws(this.auth));const e=await this.getIdToken();return await ul(this,yL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,a=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:g,providerData:w,stsTokenManager:x}=n;Ae(h&&x,e,"internal-error");const E=Wa.fromJSON(this.name,x);Ae(typeof h=="string",e,"internal-error"),fi(r,e.name),fi(s,e.name),Ae(typeof p=="boolean",e,"internal-error"),Ae(typeof g=="boolean",e,"internal-error"),fi(i,e.name),fi(o,e.name),fi(l,e.name),fi(a,e.name),fi(u,e.name),fi(d,e.name);const v=new Hr({uid:h,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:E,createdAt:u,lastLoginAt:d});return w&&Array.isArray(w)&&(v.providerData=w.map(_=>({..._}))),a&&(v._redirectEventId=a),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new Wa;s.updateFromServerResponse(n);const i=new Hr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ae(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Pk(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Wa;l.updateFromIdToken(r);const a=new Hr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Py(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(a,u),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=new Map;function Ls(t){Ws(t instanceof Function,"Expected a class definition");let e=ME.get(t);return e?(Ws(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ME.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Nk.type="NONE";const OE=Nk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ga{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=nh(this.userKey,s.apiKey,i),this.fullPersistenceKey=nh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qh(this.auth,{idToken:e}).catch(()=>{});return n?Hr._fromGetAccountInfoResponse(this.auth,n,e):null}return Hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ga(Ls(OE),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Ls(OE);const o=nh(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const p=await qh(e,{idToken:d}).catch(()=>{});if(!p)break;h=await Hr._fromGetAccountInfoResponse(e,p,d)}else h=Hr._fromJSON(e,d);u!==i&&(l=h),i=u;break}}catch{}const a=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!a.length?new Ga(i,e,r):(i=a[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ga(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Dk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Uk(e))return"Blackberry";if(Fk(e))return"Webos";if(Mk(e))return"Safari";if((e.includes("chrome/")||Ok(e))&&!e.includes("edge/"))return"Chrome";if(Lk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Dk(t=Un()){return/firefox\//i.test(t)}function Mk(t=Un()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ok(t=Un()){return/crios\//i.test(t)}function jk(t=Un()){return/iemobile/i.test(t)}function Lk(t=Un()){return/android/i.test(t)}function Uk(t=Un()){return/blackberry/i.test(t)}function Fk(t=Un()){return/webos/i.test(t)}function Rw(t=Un()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TL(t=Un()){var e;return Rw(t)&&!!((e=window.navigator)!=null&&e.standalone)}function AL(){return L4()&&document.documentMode===10}function Bk(t=Un()){return Rw(t)||Lk(t)||Fk(t)||Uk(t)||/windows phone/i.test(t)||jk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(t,e=[]){let n;switch(t){case"Browser":n=jE(Un());break;case"Worker":n=`${jE(Un())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${kl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const a=e(i);o(a)}catch(a){l(a)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL(t,e={}){return ti(t,"GET","/v2/passwordPolicy",ho(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=6;class RL{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??IL,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LE(this),this.idTokenSubscription=new LE(this),this.beforeStateQueue=new CL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ck,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ls(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ga.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qh(this,{idToken:e}),r=await Hr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===l)&&(a!=null&&a.user)&&(r=a.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(ws(this));const n=e?Et(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ls(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kL(this),n=new RL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await SL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ls(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await Ga.create(this,[Ls(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,s);return()=>{o=!0,a()}}else{const a=e.addObserver(n);return()=>{o=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&iL(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ni(t){return Et(t)}class LE{constructor(e){this.auth=e,this.observer=null,this.addObserver=z4(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NL(t){Qf=t}function $k(t){return Qf.loadJS(t)}function DL(){return Qf.recaptchaEnterpriseScript}function ML(){return Qf.gapiScript}function OL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class jL{constructor(){this.enterprise=new LL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class LL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const UL="recaptcha-enterprise",zk="NO_RECAPTCHA";class FL{constructor(e){this.type=UL,this.auth=ni(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{gL(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new mL(a);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(a=>{l(a)})})}function s(i,o,l){const a=window.grecaptcha;NE(a)?a.enterprise.ready(()=>{a.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(zk)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jL().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&NE(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let a=DL();a.length!==0&&(a+=l),$k(a).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function UE(t,e,n,r=!1,s=!1){const i=new FL(t);let o;if(s)o=zk;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const a=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const a=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:a,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Ny(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await UE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await UE(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t,e){const n=ia(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Qi(i,e??{}))return s;Ur(s,"already-initialized")}return n.initialize({options:e})}function VL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ls);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $L(t,e,n){const r=ni(t);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=qk(e),{host:o,port:l}=zL(e),a=l===null?"":`:${l}`,u={url:`${i}//${o}${a}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(Qi(u,r.config.emulator)&&Qi(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Cl(o)?(yk(`${i}//${o}${a}`),wk("Auth",!0)):qL()}function qk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zL(t){const e=qk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:FE(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:FE(o)}}}function FE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return js("not implemented")}_getIdTokenResponse(e){return js("not implemented")}_linkToIdToken(e,n){return js("not implemented")}_getReauthenticationResolver(e){return js("not implemented")}}async function HL(t,e){return ti(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(t,e){return Bc(t,"POST","/v1/accounts:signInWithPassword",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(t,e){return Bc(t,"POST","/v1/accounts:signInWithEmailLink",ho(t,e))}async function KL(t,e){return Bc(t,"POST","/v1/accounts:signInWithEmailLink",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends Pw{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new fc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new fc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ny(e,n,"signInWithPassword",WL);case"emailLink":return GL(e,{email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ny(e,r,"signUpPassword",HL);case"emailLink":return KL(e,{idToken:n,email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(t,e){return Bc(t,"POST","/v1/accounts:signInWithIdp",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL="http://localhost";class Ho extends Pw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Ho(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ka(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ka(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ka(e,n)}buildRequest(){const e={requestUri:JL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Uc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XL(t){const e=fu(pu(t)).link,n=e?fu(pu(e)).deep_link_id:null,r=fu(pu(t)).deep_link_id;return(r?fu(pu(r)).link:null)||r||n||e||t}class Nw{constructor(e){const n=fu(pu(e)),r=n.apiKey??null,s=n.oobCode??null,i=QL(n.mode??null);Ae(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=XL(e);try{return new Nw(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.providerId=Il.PROVIDER_ID}static credential(e,n){return fc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Nw.parseLink(n);return Ae(r,"argument-error"),fc._fromEmailAndCode(e,r.code,r.tenantId)}}Il.PROVIDER_ID="password";Il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends Dw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Vc{constructor(){super("facebook.com")}static credential(e){return Ho._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.FACEBOOK_SIGN_IN_METHOD="facebook.com";Si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ho._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ps.credential(n,r)}catch{return null}}}Ps.GOOGLE_SIGN_IN_METHOD="google.com";Ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Vc{constructor(){super("github.com")}static credential(e){return Ho._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ti.credential(e.oauthAccessToken)}catch{return null}}}Ti.GITHUB_SIGN_IN_METHOD="github.com";Ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends Vc{constructor(){super("twitter.com")}static credential(e,n){return Ho._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ai.credential(n,r)}catch{return null}}}Ai.TWITTER_SIGN_IN_METHOD="twitter.com";Ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(t,e){return Bc(t,"POST","/v1/accounts:signUp",ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Hr._fromIdTokenResponse(e,r,s),o=BE(r);return new Gs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=BE(r);return new Gs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function BE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(t){var s;if(Xn(t.app))return Promise.reject(ws(t));const e=ni(t);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new Gs({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await Hk(e,{returnSecureToken:!0}),r=await Gs._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends es{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Wh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Wh(e,n,r,s)}}function Wk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Wh._fromErrorAndOperation(t,i,e,r):i})}async function ZL(t,e,n=!1){const r=await ul(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Gs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eU(t,e,n=!1){const{auth:r}=t;if(Xn(r.app))return Promise.reject(ws(r));const s="reauthenticate";try{const i=await ul(t,Wk(r,s,e,t),n);Ae(i.idToken,r,"internal-error");const o=Iw(i.idToken);Ae(o,r,"internal-error");const{sub:l}=o;return Ae(t.uid===l,r,"user-mismatch"),Gs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ur(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(t,e,n=!1){if(Xn(t.app))return Promise.reject(ws(t));const r="signIn",s=await Wk(t,r,e),i=await Gs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function tU(t,e){return Gk(ni(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kk(t){const e=ni(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nU(t,e,n){if(Xn(t.app))return Promise.reject(ws(t));const r=ni(t),o=await Ny(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hk).catch(a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Kk(t),a}),l=await Gs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function rU(t,e,n){return Xn(t.app)?Promise.reject(ws(t)):tU(Et(t),Il.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Kk(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sU(t,e){return ti(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iU(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Et(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ul(r,sU(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:a})=>a==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function oU(t,e,n,r){return Et(t).onIdTokenChanged(e,n,r)}function aU(t,e,n){return Et(t).beforeAuthStateChanged(e,n)}function lU(t,e,n,r){return Et(t).onAuthStateChanged(e,n,r)}function uU(t){return Et(t).signOut()}const Gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=1e3,dU=10;class Qk extends Jk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,a)=>{this.notifyListeners(o,a)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);AL()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},cU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qk.type="LOCAL";const hU=Qk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk extends Jk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Xk.type="SESSION";const Yk=Xk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Xf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),a=await fU(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,a)=>{const u=Mw("",20);s.port1.start();const d=setTimeout(()=>{a(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(d),clearTimeout(i),a(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(){return window}function mU(t){vs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(){return typeof vs().WorkerGlobalScope<"u"&&typeof vs().importScripts=="function"}async function gU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function wU(){return Zk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="firebaseLocalStorageDb",vU=1,Kh="firebaseLocalStorage",tI="fbase_key";class $c{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yf(t,e){return t.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function _U(){const t=indexedDB.deleteDatabase(eI);return new $c(t).toPromise()}function Dy(){const t=indexedDB.open(eI,vU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kh,{keyPath:tI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kh)?e(r):(r.close(),await _U(),e(await Dy()))})})}async function VE(t,e,n){const r=Yf(t,!0).put({[tI]:e,value:n});return new $c(r).toPromise()}async function xU(t,e){const n=Yf(t,!1).get(e),r=await new $c(n).toPromise();return r===void 0?null:r.value}function $E(t,e){const n=Yf(t,!0).delete(e);return new $c(n).toPromise()}const EU=800,bU=3;class nI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>bU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xf._getInstance(wU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await gU(),!this.activeServiceWorker)return;this.sender=new pU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dy();return await VE(e,Gh,"1"),await $E(e,Gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>VE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>xU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$E(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Yf(s,!1).getAll();return new $c(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nI.type="LOCAL";const SU=nI;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t,e){return e?Ls(e):(Ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow extends Pw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ka(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ka(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function TU(t){return Gk(t.auth,new Ow(t),t.bypassAuthState)}function AU(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),eU(n,new Ow(t),t.bypassAuthState)}async function CU(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),ZL(n,new Ow(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(a))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TU;case"linkViaPopup":case"linkViaRedirect":return CU;case"reauthViaPopup":case"reauthViaRedirect":return AU;default:Ur(this.auth,"internal-error")}}resolve(e){Ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU=new Fc(2e3,1e4);async function IU(t,e,n){if(Xn(t.app))return Promise.reject(Kr(t,"operation-not-supported-in-this-environment"));const r=ni(t);oL(t,e,Dw);const s=rI(r,n);return new Ro(r,"signInViaPopup",e,s).executeNotNull()}class Ro extends sI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ro.currentPopupAction&&Ro.currentPopupAction.cancel(),Ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Ws(this.filter.length===1,"Popup operations only handle one event");const e=Mw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kU.get())};e()}}Ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU="pendingRedirect",rh=new Map;class PU extends sI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=rh.get(this.auth._key());if(!e){try{const r=await NU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rh.set(this.auth._key(),e)}return this.bypassAuthState||rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NU(t,e){const n=OU(e),r=MU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function DU(t,e){rh.set(t._key(),e)}function MU(t){return Ls(t._redirectPersistence)}function OU(t){return nh(RU,t.config.apiKey,t.name)}async function jU(t,e,n=!1){if(Xn(t.app))return Promise.reject(ws(t));const r=ni(t),s=rI(r,e),o=await new PU(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=10*60*1e3;class UU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iI(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Kr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LU&&this.cachedEventUids.clear(),this.cachedEventUids.has(zE(e))}saveEventToCache(e){this.cachedEventUids.add(zE(e)),this.lastProcessedEventTime=Date.now()}}function zE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(t,e={}){return ti(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$U=/^https?/;async function zU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await BU(t);for(const n of e)try{if(qU(n))return}catch{}Ur(t,"unauthorized-domain")}function qU(t){const e=Ry(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!$U.test(n))return!1;if(VU.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=new Fc(3e4,6e4);function qE(){const t=vs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function WU(t){return new Promise((e,n)=>{var s,i,o;function r(){qE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qE(),n(Kr(t,"network-request-failed"))},timeout:HU.get()})}if((i=(s=vs().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=vs().gapi)!=null&&o.load)r();else{const l=OL("iframefcb");return vs()[l]=()=>{gapi.load?r():n(Kr(t,"network-request-failed"))},$k(`${ML()}?onload=${l}`).catch(a=>n(a))}}).catch(e=>{throw sh=null,e})}let sh=null;function GU(t){return sh=sh||WU(t),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=new Fc(5e3,15e3),JU="__/auth/iframe",QU="emulator/auth/iframe",XU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZU(t){const e=t.config;Ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?kw(e,QU):`https://${t.config.authDomain}/${JU}`,r={apiKey:e.apiKey,appName:t.name,v:kl},s=YU.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Uc(r).slice(1)}`}async function e6(t){const e=await GU(t),n=vs().gapi;return Ae(n,t,"internal-error"),e.open({where:document.body,url:ZU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XU,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Kr(t,"network-request-failed"),l=vs().setTimeout(()=>{i(o)},KU.get());function a(){vs().clearTimeout(l),s(r)}r.ping(a).then(a,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},n6=500,r6=600,s6="_blank",i6="http://localhost";class HE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function o6(t,e,n,r=n6,s=r6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const a={...t6,width:r.toString(),height:s.toString(),top:i,left:o},u=Un().toLowerCase();n&&(l=Ok(u)?s6:n),Dk(u)&&(e=e||i6,a.scrollbars="yes");const d=Object.entries(a).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(TL(u)&&l!=="_self")return a6(e||"",l),new HE(null);const h=window.open(e||"",l,d);Ae(h,t,"popup-blocked");try{h.focus()}catch{}return new HE(h)}function a6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6="__/auth/handler",u6="emulator/auth/handler",c6=encodeURIComponent("fac");async function WE(t,e,n,r,s,i){Ae(t.config.authDomain,t,"auth-domain-config-required"),Ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:kl,eventId:s};if(e instanceof Dw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Vc){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const a=await t._getAppCheckToken(),u=a?`#${c6}=${encodeURIComponent(a)}`:"";return`${d6(t)}?${Uc(l).slice(1)}${u}`}function d6({config:t}){return t.emulator?kw(t,u6):`https://${t.authDomain}/${l6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="webStorageSupport";class h6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yk,this._completeRedirectFn=jU,this._overrideRedirectResult=DU}async _openPopup(e,n,r,s){var o;Ws((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await WE(e,n,r,Ry(),s);return o6(e,i,Mw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await WE(e,n,r,Ry(),s);return mU(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ws(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await e6(e),r=new UU(e);return n.register("authEvent",s=>(Ae(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Pm,{type:Pm},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Pm];i!==void 0&&n(!!i),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Bk()||Mk()||Rw()}}const f6=h6;var GE="@firebase/auth",KE="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function g6(t){Ts(new Xr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vk(t)},u=new PL(r,s,i,a);return VL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ts(new Xr("auth-internal",e=>{const n=ni(e.getProvider("auth").getImmediate());return(r=>new p6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mr(GE,KE,m6(t)),Mr(GE,KE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=5*60,w6=gk("authIdTokenMaxAge")||y6;let JE=null;const v6=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>w6)return;const s=n==null?void 0:n.token;JE!==s&&(JE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function _6(t=Jf()){const e=ia(t,"auth");if(e.isInitialized())return e.getImmediate();const n=BL(t,{popupRedirectResolver:f6,persistence:[SU,hU,Yk]}),r=gk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=v6(i.toString());aU(n,o,()=>o(n.currentUser)),oU(n,l=>o(l))}}const s=pk("auth");return s&&$L(n,`http://${s}`),n}function x6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}NL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Kr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",x6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});g6("Browser");var E6="firebase",b6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr(E6,b6,"app");const oI="@firebase/installations",jw="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=1e4,lI=`w:${jw}`,uI="FIS_v2",S6="https://firebaseinstallations.googleapis.com/v1",T6=60*60*1e3,A6="installations",C6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Wo=new sa(A6,C6,k6);function cI(t){return t instanceof es&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI({projectId:t}){return`${S6}/projects/${t}/installations`}function hI(t){return{token:t.token,requestStatus:2,expiresIn:R6(t.expiresIn),creationTime:Date.now()}}async function fI(t,e){const r=(await e.json()).error;return Wo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function pI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function I6(t,{refreshToken:e}){const n=pI(t);return n.append("Authorization",P6(e)),n}async function mI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function R6(t){return Number(t.replace("s","000"))}function P6(t){return`${uI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N6({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=dI(t),s=pI(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:uI,appId:t.appId,sdkVersion:lI},l={method:"POST",headers:s,body:JSON.stringify(o)},a=await mI(()=>fetch(r,l));if(a.ok){const u=await a.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:hI(u.authToken)}}else throw await fI("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D6(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=/^[cdef][\w-]{21}$/,My="";function O6(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=j6(t);return M6.test(n)?n:My}catch{return My}}function j6(t){return D6(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=new Map;function wI(t,e){const n=Zf(t);vI(n,e),L6(n,e)}function vI(t,e){const n=yI.get(t);if(n)for(const r of n)r(e)}function L6(t,e){const n=U6();n&&n.postMessage({key:t,fid:e}),F6()}let Po=null;function U6(){return!Po&&"BroadcastChannel"in self&&(Po=new BroadcastChannel("[Firebase] FID Change"),Po.onmessage=t=>{vI(t.data.key,t.data.fid)}),Po}function F6(){yI.size===0&&Po&&(Po.close(),Po=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="firebase-installations-database",V6=1,Go="firebase-installations-store";let Nm=null;function Lw(){return Nm||(Nm=Ek(B6,V6,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Go)}}})),Nm}async function Jh(t,e){const n=Zf(t),s=(await Lw()).transaction(Go,"readwrite"),i=s.objectStore(Go),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&wI(t,e.fid),e}async function _I(t){const e=Zf(t),r=(await Lw()).transaction(Go,"readwrite");await r.objectStore(Go).delete(e),await r.done}async function ep(t,e){const n=Zf(t),s=(await Lw()).transaction(Go,"readwrite"),i=s.objectStore(Go),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&wI(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uw(t){let e;const n=await ep(t.appConfig,r=>{const s=$6(r),i=z6(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===My?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function $6(t){const e=t||{fid:O6(),registrationStatus:0};return xI(e)}function z6(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Wo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=q6(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:H6(t)}:{installationEntry:e}}async function q6(t,e){try{const n=await N6(t,e);return Jh(t.appConfig,n)}catch(n){throw cI(n)&&n.customData.serverCode===409?await _I(t.appConfig):await Jh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function H6(t){let e=await QE(t.appConfig);for(;e.registrationStatus===1;)await gI(100),e=await QE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Uw(t);return r||n}return e}function QE(t){return ep(t,e=>{if(!e)throw Wo.create("installation-not-found");return xI(e)})}function xI(t){return W6(t)?{fid:t.fid,registrationStatus:0}:t}function W6(t){return t.registrationStatus===1&&t.registrationTime+aI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6({appConfig:t,heartbeatServiceProvider:e},n){const r=K6(t,n),s=I6(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:lI,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},a=await mI(()=>fetch(r,l));if(a.ok){const u=await a.json();return hI(u)}else throw await fI("Generate Auth Token",a)}function K6(t,{fid:e}){return`${dI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fw(t,e=!1){let n;const r=await ep(t.appConfig,i=>{if(!EI(i))throw Wo.create("not-registered");const o=i.authToken;if(!e&&X6(o))return i;if(o.requestStatus===1)return n=J6(t,e),i;{if(!navigator.onLine)throw Wo.create("app-offline");const l=Z6(i);return n=Q6(t,l),l}});return n?await n:r.authToken}async function J6(t,e){let n=await XE(t.appConfig);for(;n.authToken.requestStatus===1;)await gI(100),n=await XE(t.appConfig);const r=n.authToken;return r.requestStatus===0?Fw(t,e):r}function XE(t){return ep(t,e=>{if(!EI(e))throw Wo.create("not-registered");const n=e.authToken;return eF(n)?{...e,authToken:{requestStatus:0}}:e})}async function Q6(t,e){try{const n=await G6(t,e),r={...e,authToken:n};return await Jh(t.appConfig,r),n}catch(n){if(cI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await _I(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Jh(t.appConfig,r)}throw n}}function EI(t){return t!==void 0&&t.registrationStatus===2}function X6(t){return t.requestStatus===2&&!Y6(t)}function Y6(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+T6}function Z6(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function eF(t){return t.requestStatus===1&&t.requestTime+aI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tF(t){const e=t,{installationEntry:n,registrationPromise:r}=await Uw(e);return r?r.catch(console.error):Fw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nF(t,e=!1){const n=t;return await rF(n),(await Fw(n,e)).token}async function rF(t){const{registrationPromise:e}=await Uw(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(t){if(!t||!t.options)throw Dm("App Configuration");if(!t.name)throw Dm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Dm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Dm(t){return Wo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="installations",iF="installations-internal",oF=t=>{const e=t.getProvider("app").getImmediate(),n=sF(e),r=ia(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},aF=t=>{const e=t.getProvider("app").getImmediate(),n=ia(e,bI).getImmediate();return{getId:()=>tF(n),getToken:s=>nF(n,s)}};function lF(){Ts(new Xr(bI,oF,"PUBLIC")),Ts(new Xr(iF,aF,"PRIVATE"))}lF();Mr(oI,jw);Mr(oI,jw,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="analytics",uF="firebase_id",cF="origin",dF=60*1e3,hF="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bw="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new Kf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},wr=new sa("analytics","Analytics",fF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t){if(!t.startsWith(Bw)){const e=wr.create("invalid-gtag-resource",{gtagURL:t});return zn.warn(e.message),""}return t}function SI(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function mF(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function gF(t,e){const n=mF("firebase-js-sdk-policy",{createScriptURL:pF}),r=document.createElement("script"),s=`${Bw}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function yF(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function wF(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const a=(await SI(n)).find(u=>u.measurementId===s);a&&await e[a.appId]}}catch(l){zn.error(l)}t("config",s,i)}async function vF(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await SI(n);for(const a of o){const u=l.find(h=>h.measurementId===a),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){zn.error(i)}}function _F(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[l,a]=o;await vF(t,e,n,l,a)}else if(i==="config"){const[l,a]=o;await wF(t,e,n,r,l,a)}else if(i==="consent"){const[l,a]=o;t("consent",l,a)}else if(i==="get"){const[l,a,u]=o;t("get",l,a,u)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){zn.error(l)}}return s}function xF(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=_F(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function EF(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Bw)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=30,SF=1e3;class TF{constructor(e={},n=SF){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const TI=new TF;function AF(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function CF(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:AF(n)},s=hF.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const a=await i.json();(o=a.error)!=null&&o.message&&(l=a.error.message)}catch{}throw wr.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function kF(t,e=TI,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw wr.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw wr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new PF;return setTimeout(async()=>{l.abort()},dF),AI({appId:r,apiKey:s,measurementId:i},o,l,e)}async function AI(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=TI){var l;const{appId:i,measurementId:o}=t;try{await IF(r,e)}catch(a){if(o)return zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${a==null?void 0:a.message}]`),{appId:i,measurementId:o};throw a}try{const a=await CF(t);return s.deleteThrottleMetadata(i),a}catch(a){const u=a;if(!RF(u)){if(s.deleteThrottleMetadata(i),o)return zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw a}const d=Number((l=u==null?void 0:u.customData)==null?void 0:l.httpStatus)===503?EE(n,s.intervalMillis,bF):EE(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(i,h),zn.debug(`Calling attemptFetch again in ${d} millis`),AI(t,h,r,s)}}function IF(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(wr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function RF(t){if(!(t instanceof es)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class PF{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function NF(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}async function DF(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MF(){if(bw())try{await Sw()}catch(t){return zn.warn(wr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return zn.warn(wr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function OF(t,e,n,r,s,i,o){const l=kF(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&zn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>zn.error(p)),e.push(l);const a=MF().then(p=>{if(p)return r.getId()}),[u,d]=await Promise.all([l,a]);EF(i)||gF(i,u.measurementId),s("js",new Date);const h=(o==null?void 0:o.config)??{};return h[cF]="firebase",h.update=!0,d!=null&&(h[uF]=d),s("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.app=e}_delete(){return delete Ja[this.app.options.appId],Promise.resolve()}}let Ja={},YE=[];const ZE={};let Mm="dataLayer",LF="gtag",eb,Vw,tb=!1;function UF(){const t=[];if(Ew()&&t.push("This is a browser extension environment."),vk()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=wr.create("invalid-analytics-context",{errorInfo:e});zn.warn(n.message)}}function FF(t,e,n){UF();const r=t.options.appId;if(!r)throw wr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw wr.create("no-api-key");if(Ja[r]!=null)throw wr.create("already-exists",{id:r});if(!tb){yF(Mm);const{wrappedGtag:i,gtagCore:o}=xF(Ja,YE,ZE,Mm,LF);Vw=i,eb=o,tb=!0}return Ja[r]=OF(t,YE,ZE,e,eb,Mm,n),new jF(t)}function BF(t=Jf()){t=Et(t);const e=ia(t,Qh);return e.isInitialized()?e.getImmediate():VF(t)}function VF(t,e={}){const n=ia(t,Qh);if(n.isInitialized()){const s=n.getImmediate();if(Qi(e,n.getOptions()))return s;throw wr.create("already-initialized")}return n.initialize({options:e})}async function $F(){if(Ew()||!vk()||!bw())return!1;try{return await Sw()}catch{return!1}}function zF(t,e,n){t=Et(t),DF(Vw,Ja[t.app.options.appId],e,n).catch(r=>zn.error(r))}function qF(t,e,n,r){t=Et(t),NF(Vw,Ja[t.app.options.appId],e,n,r).catch(s=>zn.error(s))}const nb="@firebase/analytics",rb="0.10.19";function HF(){Ts(new Xr(Qh,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return FF(r,s,n)},"PUBLIC")),Ts(new Xr("analytics-internal",t,"PRIVATE")),Mr(nb,rb),Mr(nb,rb,"esm2020");function t(e){try{const n=e.getProvider(Qh).getImmediate();return{logEvent:(r,s,i)=>qF(n,r,s,i),setUserProperties:(r,s)=>zF(n,r,s)}}catch(n){throw wr.create("interop-component-reg-failed",{reason:n})}}}HF();var sb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hi,CI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function R(){}R.prototype=T.prototype,C.F=T.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(A,N,M){for(var P=Array(arguments.length-2),K=2;K<arguments.length;K++)P[K-2]=arguments[K];return T.prototype[N].apply(A,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,T,R){R||(R=0);const A=Array(16);if(typeof T=="string")for(var N=0;N<16;++N)A[N]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for(N=0;N<16;++N)A[N]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=C.g[0],R=C.g[1],N=C.g[2];let M=C.g[3],P;P=T+(M^R&(N^M))+A[0]+3614090360&4294967295,T=R+(P<<7&4294967295|P>>>25),P=M+(N^T&(R^N))+A[1]+3905402710&4294967295,M=T+(P<<12&4294967295|P>>>20),P=N+(R^M&(T^R))+A[2]+606105819&4294967295,N=M+(P<<17&4294967295|P>>>15),P=R+(T^N&(M^T))+A[3]+3250441966&4294967295,R=N+(P<<22&4294967295|P>>>10),P=T+(M^R&(N^M))+A[4]+4118548399&4294967295,T=R+(P<<7&4294967295|P>>>25),P=M+(N^T&(R^N))+A[5]+1200080426&4294967295,M=T+(P<<12&4294967295|P>>>20),P=N+(R^M&(T^R))+A[6]+2821735955&4294967295,N=M+(P<<17&4294967295|P>>>15),P=R+(T^N&(M^T))+A[7]+4249261313&4294967295,R=N+(P<<22&4294967295|P>>>10),P=T+(M^R&(N^M))+A[8]+1770035416&4294967295,T=R+(P<<7&4294967295|P>>>25),P=M+(N^T&(R^N))+A[9]+2336552879&4294967295,M=T+(P<<12&4294967295|P>>>20),P=N+(R^M&(T^R))+A[10]+4294925233&4294967295,N=M+(P<<17&4294967295|P>>>15),P=R+(T^N&(M^T))+A[11]+2304563134&4294967295,R=N+(P<<22&4294967295|P>>>10),P=T+(M^R&(N^M))+A[12]+1804603682&4294967295,T=R+(P<<7&4294967295|P>>>25),P=M+(N^T&(R^N))+A[13]+4254626195&4294967295,M=T+(P<<12&4294967295|P>>>20),P=N+(R^M&(T^R))+A[14]+2792965006&4294967295,N=M+(P<<17&4294967295|P>>>15),P=R+(T^N&(M^T))+A[15]+1236535329&4294967295,R=N+(P<<22&4294967295|P>>>10),P=T+(N^M&(R^N))+A[1]+4129170786&4294967295,T=R+(P<<5&4294967295|P>>>27),P=M+(R^N&(T^R))+A[6]+3225465664&4294967295,M=T+(P<<9&4294967295|P>>>23),P=N+(T^R&(M^T))+A[11]+643717713&4294967295,N=M+(P<<14&4294967295|P>>>18),P=R+(M^T&(N^M))+A[0]+3921069994&4294967295,R=N+(P<<20&4294967295|P>>>12),P=T+(N^M&(R^N))+A[5]+3593408605&4294967295,T=R+(P<<5&4294967295|P>>>27),P=M+(R^N&(T^R))+A[10]+38016083&4294967295,M=T+(P<<9&4294967295|P>>>23),P=N+(T^R&(M^T))+A[15]+3634488961&4294967295,N=M+(P<<14&4294967295|P>>>18),P=R+(M^T&(N^M))+A[4]+3889429448&4294967295,R=N+(P<<20&4294967295|P>>>12),P=T+(N^M&(R^N))+A[9]+568446438&4294967295,T=R+(P<<5&4294967295|P>>>27),P=M+(R^N&(T^R))+A[14]+3275163606&4294967295,M=T+(P<<9&4294967295|P>>>23),P=N+(T^R&(M^T))+A[3]+4107603335&4294967295,N=M+(P<<14&4294967295|P>>>18),P=R+(M^T&(N^M))+A[8]+1163531501&4294967295,R=N+(P<<20&4294967295|P>>>12),P=T+(N^M&(R^N))+A[13]+2850285829&4294967295,T=R+(P<<5&4294967295|P>>>27),P=M+(R^N&(T^R))+A[2]+4243563512&4294967295,M=T+(P<<9&4294967295|P>>>23),P=N+(T^R&(M^T))+A[7]+1735328473&4294967295,N=M+(P<<14&4294967295|P>>>18),P=R+(M^T&(N^M))+A[12]+2368359562&4294967295,R=N+(P<<20&4294967295|P>>>12),P=T+(R^N^M)+A[5]+4294588738&4294967295,T=R+(P<<4&4294967295|P>>>28),P=M+(T^R^N)+A[8]+2272392833&4294967295,M=T+(P<<11&4294967295|P>>>21),P=N+(M^T^R)+A[11]+1839030562&4294967295,N=M+(P<<16&4294967295|P>>>16),P=R+(N^M^T)+A[14]+4259657740&4294967295,R=N+(P<<23&4294967295|P>>>9),P=T+(R^N^M)+A[1]+2763975236&4294967295,T=R+(P<<4&4294967295|P>>>28),P=M+(T^R^N)+A[4]+1272893353&4294967295,M=T+(P<<11&4294967295|P>>>21),P=N+(M^T^R)+A[7]+4139469664&4294967295,N=M+(P<<16&4294967295|P>>>16),P=R+(N^M^T)+A[10]+3200236656&4294967295,R=N+(P<<23&4294967295|P>>>9),P=T+(R^N^M)+A[13]+681279174&4294967295,T=R+(P<<4&4294967295|P>>>28),P=M+(T^R^N)+A[0]+3936430074&4294967295,M=T+(P<<11&4294967295|P>>>21),P=N+(M^T^R)+A[3]+3572445317&4294967295,N=M+(P<<16&4294967295|P>>>16),P=R+(N^M^T)+A[6]+76029189&4294967295,R=N+(P<<23&4294967295|P>>>9),P=T+(R^N^M)+A[9]+3654602809&4294967295,T=R+(P<<4&4294967295|P>>>28),P=M+(T^R^N)+A[12]+3873151461&4294967295,M=T+(P<<11&4294967295|P>>>21),P=N+(M^T^R)+A[15]+530742520&4294967295,N=M+(P<<16&4294967295|P>>>16),P=R+(N^M^T)+A[2]+3299628645&4294967295,R=N+(P<<23&4294967295|P>>>9),P=T+(N^(R|~M))+A[0]+4096336452&4294967295,T=R+(P<<6&4294967295|P>>>26),P=M+(R^(T|~N))+A[7]+1126891415&4294967295,M=T+(P<<10&4294967295|P>>>22),P=N+(T^(M|~R))+A[14]+2878612391&4294967295,N=M+(P<<15&4294967295|P>>>17),P=R+(M^(N|~T))+A[5]+4237533241&4294967295,R=N+(P<<21&4294967295|P>>>11),P=T+(N^(R|~M))+A[12]+1700485571&4294967295,T=R+(P<<6&4294967295|P>>>26),P=M+(R^(T|~N))+A[3]+2399980690&4294967295,M=T+(P<<10&4294967295|P>>>22),P=N+(T^(M|~R))+A[10]+4293915773&4294967295,N=M+(P<<15&4294967295|P>>>17),P=R+(M^(N|~T))+A[1]+2240044497&4294967295,R=N+(P<<21&4294967295|P>>>11),P=T+(N^(R|~M))+A[8]+1873313359&4294967295,T=R+(P<<6&4294967295|P>>>26),P=M+(R^(T|~N))+A[15]+4264355552&4294967295,M=T+(P<<10&4294967295|P>>>22),P=N+(T^(M|~R))+A[6]+2734768916&4294967295,N=M+(P<<15&4294967295|P>>>17),P=R+(M^(N|~T))+A[13]+1309151649&4294967295,R=N+(P<<21&4294967295|P>>>11),P=T+(N^(R|~M))+A[4]+4149444226&4294967295,T=R+(P<<6&4294967295|P>>>26),P=M+(R^(T|~N))+A[11]+3174756917&4294967295,M=T+(P<<10&4294967295|P>>>22),P=N+(T^(M|~R))+A[2]+718787259&4294967295,N=M+(P<<15&4294967295|P>>>17),P=R+(M^(N|~T))+A[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+M&4294967295}r.prototype.v=function(C,T){T===void 0&&(T=C.length);const R=T-this.blockSize,A=this.C;let N=this.h,M=0;for(;M<T;){if(N==0)for(;M<=R;)s(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<T;)if(A[N++]=C.charCodeAt(M++),N==this.blockSize){s(this,A),N=0;break}}else for(;M<T;)if(A[N++]=C[M++],N==this.blockSize){s(this,A),N=0;break}}this.h=N,this.o+=T},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;T=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=T&255,T/=256;for(this.v(C),C=Array(16),T=0,R=0;R<4;++R)for(let A=0;A<32;A+=8)C[T++]=this.g[R]>>>A&255;return C};function i(C,T){var R=l;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=T(C)}function o(C,T){this.h=T;const R=[];let A=!0;for(let N=C.length-1;N>=0;N--){const M=C[N]|0;A&&M==T||(R[N]=M,A=!1)}this.g=R}var l={};function a(C){return-128<=C&&C<128?i(C,function(T){return new o([T|0],T<0?-1:0)}):new o([C|0],C<0?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(C<0)return E(u(-C));const T=[];let R=1;for(let A=0;C>=R;A++)T[A]=C/R|0,R*=4294967296;return new o(T,0)}function d(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return E(d(C.substring(1),T));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=u(Math.pow(T,8));let A=h;for(let M=0;M<C.length;M+=8){var N=Math.min(8,C.length-M);const P=parseInt(C.substring(M,M+N),T);N<8?(N=u(Math.pow(T,N)),A=A.j(N).add(u(P))):(A=A.j(R),A=A.add(u(P)))}return A}var h=a(0),p=a(1),g=a(16777216);t=o.prototype,t.m=function(){if(x(this))return-E(this).m();let C=0,T=1;for(let R=0;R<this.g.length;R++){const A=this.i(R);C+=(A>=0?A:4294967296+A)*T,T*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(w(this))return"0";if(x(this))return"-"+E(this).toString(C);const T=u(Math.pow(C,6));var R=this;let A="";for(;;){const N=O(R,T).g;R=v(R,N.j(T));let M=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=N,w(R))return M+A;for(;M.length<6;)M="0"+M;A=M+A}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function w(C){if(C.h!=0)return!1;for(let T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function x(C){return C.h==-1}t.l=function(C){return C=v(this,C),x(C)?-1:w(C)?0:1};function E(C){const T=C.g.length,R=[];for(let A=0;A<T;A++)R[A]=~C.g[A];return new o(R,~C.h).add(p)}t.abs=function(){return x(this)?E(this):this},t.add=function(C){const T=Math.max(this.g.length,C.g.length),R=[];let A=0;for(let N=0;N<=T;N++){let M=A+(this.i(N)&65535)+(C.i(N)&65535),P=(M>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);A=P>>>16,M&=65535,P&=65535,R[N]=P<<16|M}return new o(R,R[R.length-1]&-2147483648?-1:0)};function v(C,T){return C.add(E(T))}t.j=function(C){if(w(this)||w(C))return h;if(x(this))return x(C)?E(this).j(E(C)):E(E(this).j(C));if(x(C))return E(this.j(E(C)));if(this.l(g)<0&&C.l(g)<0)return u(this.m()*C.m());const T=this.g.length+C.g.length,R=[];for(var A=0;A<2*T;A++)R[A]=0;for(A=0;A<this.g.length;A++)for(let N=0;N<C.g.length;N++){const M=this.i(A)>>>16,P=this.i(A)&65535,K=C.i(N)>>>16,H=C.i(N)&65535;R[2*A+2*N]+=P*H,_(R,2*A+2*N),R[2*A+2*N+1]+=M*H,_(R,2*A+2*N+1),R[2*A+2*N+1]+=P*K,_(R,2*A+2*N+1),R[2*A+2*N+2]+=M*K,_(R,2*A+2*N+2)}for(C=0;C<T;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=T;C<2*T;C++)R[C]=0;return new o(R,0)};function _(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function b(C,T){this.g=C,this.h=T}function O(C,T){if(w(T))throw Error("division by zero");if(w(C))return new b(h,h);if(x(C))return T=O(E(C),T),new b(E(T.g),E(T.h));if(x(T))return T=O(C,E(T)),new b(E(T.g),T.h);if(C.g.length>30){if(x(C)||x(T))throw Error("slowDivide_ only works with positive integers.");for(var R=p,A=T;A.l(C)<=0;)R=V(R),A=V(A);var N=$(R,1),M=$(A,1);for(A=$(A,2),R=$(R,2);!w(A);){var P=M.add(A);P.l(C)<=0&&(N=N.add(R),M=P),A=$(A,1),R=$(R,1)}return T=v(C,N.j(T)),new b(N,T)}for(N=h;C.l(T)>=0;){for(R=Math.max(1,Math.floor(C.m()/T.m())),A=Math.ceil(Math.log(R)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),M=u(R),P=M.j(T);x(P)||P.l(C)>0;)R-=A,M=u(R),P=M.j(T);w(M)&&(M=p),N=N.add(M),C=v(C,P)}return new b(N,C)}t.B=function(C){return O(this,C).h},t.and=function(C){const T=Math.max(this.g.length,C.g.length),R=[];for(let A=0;A<T;A++)R[A]=this.i(A)&C.i(A);return new o(R,this.h&C.h)},t.or=function(C){const T=Math.max(this.g.length,C.g.length),R=[];for(let A=0;A<T;A++)R[A]=this.i(A)|C.i(A);return new o(R,this.h|C.h)},t.xor=function(C){const T=Math.max(this.g.length,C.g.length),R=[];for(let A=0;A<T;A++)R[A]=this.i(A)^C.i(A);return new o(R,this.h^C.h)};function V(C){const T=C.g.length+1,R=[];for(let A=0;A<T;A++)R[A]=C.i(A)<<1|C.i(A-1)>>>31;return new o(R,C.h)}function $(C,T){const R=T>>5;T%=32;const A=C.g.length-R,N=[];for(let M=0;M<A;M++)N[M]=T>0?C.i(M+R)>>>T|C.i(M+R+1)<<32-T:C.i(M+R);return new o(N,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,CI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Hi=o}).apply(typeof sb<"u"?sb:typeof self<"u"?self:typeof window<"u"?window:{});var Rd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kI,mu,II,ih,Oy,RI,PI,NI;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rd=="object"&&Rd];for(var m=0;m<c.length;++m){var y=c[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function s(c,m){if(m)e:{var y=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var L=c[S];if(!(L in y))break e;y=y[L]}c=c[c.length-1],S=y[c],m=m(S),m!=S&&m!=null&&e(y,c,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(m){var y=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&y.push([S,m[S]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function a(c,m,y){return c.call.apply(c.bind,arguments)}function u(c,m,y){return u=a,u.apply(null,arguments)}function d(c,m){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function h(c,m){function y(){}y.prototype=m.prototype,c.Z=m.prototype,c.prototype=new y,c.prototype.constructor=c,c.Ob=function(S,L,z){for(var ie=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)ie[Oe-2]=arguments[Oe];return m.prototype[L].apply(S,ie)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function g(c){const m=c.length;if(m>0){const y=Array(m);for(let S=0;S<m;S++)y[S]=c[S];return y}return[]}function w(c,m){for(let S=1;S<arguments.length;S++){const L=arguments[S];var y=typeof L;if(y=y!="object"?y:L?Array.isArray(L)?"array":y:"null",y=="array"||y=="object"&&typeof L.length=="number"){y=c.length||0;const z=L.length||0;c.length=y+z;for(let ie=0;ie<z;ie++)c[y+ie]=L[ie]}else c.push(L)}}class x{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function E(c){o.setTimeout(()=>{throw c},0)}function v(){var c=C;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class _{constructor(){this.h=this.g=null}add(m,y){const S=b.get();S.set(m,y),this.h?this.h.next=S:this.g=S,this.h=S}}var b=new x(()=>new O,c=>c.reset());class O{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let V,$=!1,C=new _,T=()=>{const c=Promise.resolve(void 0);V=()=>{c.then(R)}};function R(){for(var c;c=v();){try{c.h.call(c.g)}catch(y){E(y)}var m=b;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}$=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};o.addEventListener("test",y,m),o.removeEventListener("test",y,m)}catch{}return c}();function P(c){return/^[\s\xa0]*$/.test(c)}function K(c,m){N.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}h(K,N),K.prototype.init=function(c,m){const y=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(y=="mouseover"?m=c.fromElement:y=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&K.Z.h.call(this)},K.prototype.h=function(){K.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var H="closure_listenable_"+(Math.random()*1e6|0),de=0;function q(c,m,y,S,L){this.listener=c,this.proxy=null,this.src=m,this.type=y,this.capture=!!S,this.ha=L,this.key=++de,this.da=this.fa=!1}function B(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Q(c,m,y){for(const S in c)m.call(y,c[S],S,c)}function Z(c,m){for(const y in c)m.call(void 0,c[y],y,c)}function he(c){const m={};for(const y in c)m[y]=c[y];return m}const Te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(c,m){let y,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(y in S)c[y]=S[y];for(let z=0;z<Te.length;z++)y=Te[z],Object.prototype.hasOwnProperty.call(S,y)&&(c[y]=S[y])}}function Pe(c){this.src=c,this.g={},this.h=0}Pe.prototype.add=function(c,m,y,S,L){const z=c.toString();c=this.g[z],c||(c=this.g[z]=[],this.h++);const ie=at(c,m,S,L);return ie>-1?(m=c[ie],y||(m.fa=!1)):(m=new q(m,this.src,z,!!S,L),m.fa=y,c.push(m)),m};function Xe(c,m){const y=m.type;if(y in c.g){var S=c.g[y],L=Array.prototype.indexOf.call(S,m,void 0),z;(z=L>=0)&&Array.prototype.splice.call(S,L,1),z&&(B(m),c.g[y].length==0&&(delete c.g[y],c.h--))}}function at(c,m,y,S){for(let L=0;L<c.length;++L){const z=c[L];if(!z.da&&z.listener==m&&z.capture==!!y&&z.ha==S)return L}return-1}var et="closure_lm_"+(Math.random()*1e6|0),St={};function gt(c,m,y,S,L){if(Array.isArray(m)){for(let z=0;z<m.length;z++)gt(c,m[z],y,S,L);return null}return y=Ye(y),c&&c[H]?c.J(m,y,l(S)?!!S.capture:!1,L):Br(c,m,y,!1,S,L)}function Br(c,m,y,S,L,z){if(!m)throw Error("Invalid event type");const ie=l(L)?!!L.capture:!!L;let Oe=xe(c);if(Oe||(c[et]=Oe=new Pe(c)),y=Oe.add(m,y,S,ie,z),y.proxy)return y;if(S=Fn(),y.proxy=S,S.src=c,S.listener=y,c.addEventListener)M||(L=ie),L===void 0&&(L=!1),c.addEventListener(m.toString(),S,L);else if(c.attachEvent)c.attachEvent(ee(m.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Fn(){function c(y){return m.call(c.src,c.listener,y)}const m=me;return c}function ts(c,m,y,S,L){if(Array.isArray(m))for(var z=0;z<m.length;z++)ts(c,m[z],y,S,L);else S=l(S)?!!S.capture:!!S,y=Ye(y),c&&c[H]?(c=c.i,z=String(m).toString(),z in c.g&&(m=c.g[z],y=at(m,y,S,L),y>-1&&(B(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete c.g[z],c.h--)))):c&&(c=xe(c))&&(m=c.g[m.toString()],c=-1,m&&(c=at(m,y,S,L)),(y=c>-1?m[c]:null)&&Sn(y))}function Sn(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[H])Xe(m.i,c);else{var y=c.type,S=c.proxy;m.removeEventListener?m.removeEventListener(y,S,c.capture):m.detachEvent?m.detachEvent(ee(y),S):m.addListener&&m.removeListener&&m.removeListener(S),(y=xe(m))?(Xe(y,c),y.h==0&&(y.src=null,m[et]=null)):B(c)}}}function ee(c){return c in St?St[c]:St[c]="on"+c}function me(c,m){if(c.da)c=!0;else{m=new K(m,this);const y=c.listener,S=c.ha||c.src;c.fa&&Sn(c),c=y.call(S,m)}return c}function xe(c){return c=c[et],c instanceof Pe?c:null}var we="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ye(c){return typeof c=="function"?c:(c[we]||(c[we]=function(m){return c.handleEvent(m)}),c[we])}function Se(){A.call(this),this.i=new Pe(this),this.M=this,this.G=null}h(Se,A),Se.prototype[H]=!0,Se.prototype.removeEventListener=function(c,m,y,S){ts(this,c,m,y,S)};function Ee(c,m){var y,S=c.G;if(S)for(y=[];S;S=S.G)y.push(S);if(c=c.M,S=m.type||m,typeof m=="string")m=new N(m,c);else if(m instanceof N)m.target=m.target||c;else{var L=m;m=new N(S,c),fe(m,L)}L=!0;let z,ie;if(y)for(ie=y.length-1;ie>=0;ie--)z=m.g=y[ie],L=tt(z,S,!0,m)&&L;if(z=m.g=c,L=tt(z,S,!0,m)&&L,L=tt(z,S,!1,m)&&L,y)for(ie=0;ie<y.length;ie++)z=m.g=y[ie],L=tt(z,S,!1,m)&&L}Se.prototype.N=function(){if(Se.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const y=c.g[m];for(let S=0;S<y.length;S++)B(y[S]);delete c.g[m],c.h--}}this.G=null},Se.prototype.J=function(c,m,y,S){return this.i.add(String(c),m,!1,y,S)},Se.prototype.K=function(c,m,y,S){return this.i.add(String(c),m,!0,y,S)};function tt(c,m,y,S){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let L=!0;for(let z=0;z<m.length;++z){const ie=m[z];if(ie&&!ie.da&&ie.capture==y){const Oe=ie.listener,Zt=ie.ha||ie.src;ie.fa&&Xe(c.i,ie),L=Oe.call(Zt,S)!==!1&&L}}return L&&!S.defaultPrevented}function Dt(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(c,m||0)}function ns(c){c.g=Dt(()=>{c.g=null,c.i&&(c.i=!1,ns(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Tt extends A{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ns(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mt(c){A.call(this),this.h=c,this.g={}}h(Mt,A);var At=[];function rs(c){Q(c.g,function(m,y){this.g.hasOwnProperty(y)&&Sn(m)},c),c.g={}}Mt.prototype.N=function(){Mt.Z.N.call(this),rs(this)},Mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sr=o.JSON.stringify,ua=o.JSON.parse,Ll=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function si(){}function ca(){}var go={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ul(){N.call(this,"d")}h(Ul,N);function Fl(){N.call(this,"c")}h(Fl,N);var ks={},ed=null;function da(){return ed=ed||new Se}ks.Ia="serverreachability";function td(c){N.call(this,ks.Ia,c)}h(td,N);function ii(c){const m=da();Ee(m,new td(m))}ks.STAT_EVENT="statevent";function re(c,m){N.call(this,ks.STAT_EVENT,c),this.stat=m}h(re,N);function oe(c){const m=da();Ee(m,new re(m,c))}ks.Ja="timingevent";function Ie(c,m){N.call(this,ks.Ja,c),this.size=m}h(Ie,N);function Je(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},m)}function Bt(){this.g=!0}Bt.prototype.ua=function(){this.g=!1};function lr(c,m,y,S,L,z){c.info(function(){if(c.g)if(z){var ie="",Oe=z.split("&");for(let st=0;st<Oe.length;st++){var Zt=Oe[st].split("=");if(Zt.length>1){const an=Zt[0];Zt=Zt[1];const is=an.split("_");ie=is.length>=2&&is[1]=="type"?ie+(an+"="+Zt+"&"):ie+(an+"=redacted&")}}}else ie=null;else ie=z;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+m+`
`+y+`
`+ie})}function EN(c,m,y,S,L,z,ie){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+m+`
`+y+`
`+z+" "+ie})}function ha(c,m,y,S){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+SN(c,y)+(S?" "+S:"")})}function bN(c,m){c.info(function(){return"TIMEOUT: "+m})}Bt.prototype.info=function(){};function SN(c,m){if(!c.g)return m;if(!m)return null;try{const z=JSON.parse(m);if(z){for(c=0;c<z.length;c++)if(Array.isArray(z[c])){var y=z[c];if(!(y.length<2)){var S=y[1];if(Array.isArray(S)&&!(S.length<1)){var L=S[0];if(L!="noop"&&L!="stop"&&L!="close")for(let ie=1;ie<S.length;ie++)S[ie]=""}}}}return Sr(z)}catch{return m}}var nd={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},c_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},d_;function Lp(){}h(Lp,si),Lp.prototype.g=function(){return new XMLHttpRequest},d_=new Lp;function Bl(c){return encodeURIComponent(String(c))}function TN(c){var m=1;c=c.split(":");const y=[];for(;m>0&&c.length;)y.push(c.shift()),m--;return c.length&&y.push(c.join(":")),y}function oi(c,m,y,S){this.j=c,this.i=m,this.l=y,this.S=S||1,this.V=new Mt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new h_}function h_(){this.i=null,this.g="",this.h=!1}var f_={},Up={};function Fp(c,m,y){c.M=1,c.A=sd(ss(m)),c.u=y,c.R=!0,p_(c,null)}function p_(c,m){c.F=Date.now(),rd(c),c.B=ss(c.A);var y=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),C_(y.i,"t",S),c.C=0,y=c.j.L,c.h=new h_,c.g=H_(c.j,y?m:null,!c.u),c.P>0&&(c.O=new Tt(u(c.Y,c,c.g),c.P)),m=c.V,y=c.g,S=c.ba;var L="readystatechange";Array.isArray(L)||(L&&(At[0]=L.toString()),L=At);for(let z=0;z<L.length;z++){const ie=gt(y,L[z],S||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=c.J?he(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),ii(),lr(c.i,c.v,c.B,c.l,c.S,c.u)}oi.prototype.ba=function(c){c=c.target;const m=this.O;m&&ui(c)==3?m.j():this.Y(c)},oi.prototype.Y=function(c){try{if(c==this.g)e:{const Oe=ui(this.g),Zt=this.g.ya(),st=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||M_(this.g)))){this.K||Oe!=4||Zt==7||(Zt==8||st<=0?ii(3):ii(2)),Bp(this);var m=this.g.ca();this.X=m;var y=AN(this);if(this.o=m==200,EN(this.i,this.v,this.B,this.l,this.S,Oe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var S,L=this.g;if((S=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(S)){var z=S;break t}}z=null}if(c=z)ha(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vp(this,c);else{this.o=!1,this.m=3,oe(12),yo(this),Vl(this);break e}}if(this.R){c=!0;let an;for(;!this.K&&this.C<y.length;)if(an=CN(this,y),an==Up){Oe==4&&(this.m=4,oe(14),c=!1),ha(this.i,this.l,null,"[Incomplete Response]");break}else if(an==f_){this.m=4,oe(15),ha(this.i,this.l,y,"[Invalid Chunk]"),c=!1;break}else ha(this.i,this.l,an,null),Vp(this,an);if(m_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||y.length!=0||this.h.h||(this.m=1,oe(16),c=!1),this.o=this.o&&c,!c)ha(this.i,this.l,y,"[Invalid Chunked Response]"),yo(this),Vl(this);else if(y.length>0&&!this.W){this.W=!0;var ie=this.j;ie.g==this&&ie.aa&&!ie.P&&(ie.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),Jp(ie),ie.P=!0,oe(11))}}else ha(this.i,this.l,y,null),Vp(this,y);Oe==4&&yo(this),this.o&&!this.K&&(Oe==4?V_(this.j,this):(this.o=!1,rd(this)))}else VN(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,oe(12)):(this.m=0,oe(13)),yo(this),Vl(this)}}}catch{}finally{}};function AN(c){if(!m_(c))return c.g.la();const m=M_(c.g);if(m==="")return"";let y="";const S=m.length,L=ui(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return yo(c),Vl(c),"";c.h.i=new o.TextDecoder}for(let z=0;z<S;z++)c.h.h=!0,y+=c.h.i.decode(m[z],{stream:!(L&&z==S-1)});return m.length=0,c.h.g+=y,c.C=0,c.h.g}function m_(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function CN(c,m){var y=c.C,S=m.indexOf(`
`,y);return S==-1?Up:(y=Number(m.substring(y,S)),isNaN(y)?f_:(S+=1,S+y>m.length?Up:(m=m.slice(S,S+y),c.C=S+y,m)))}oi.prototype.cancel=function(){this.K=!0,yo(this)};function rd(c){c.T=Date.now()+c.H,g_(c,c.H)}function g_(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Je(u(c.aa,c),m)}function Bp(c){c.D&&(o.clearTimeout(c.D),c.D=null)}oi.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(bN(this.i,this.B),this.M!=2&&(ii(),oe(17)),yo(this),this.m=2,Vl(this)):g_(this,this.T-c)};function Vl(c){c.j.I==0||c.K||V_(c.j,c)}function yo(c){Bp(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,rs(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function Vp(c,m){try{var y=c.j;if(y.I!=0&&(y.g==c||$p(y.h,c))){if(!c.L&&$p(y.h,c)&&y.I==3){try{var S=y.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<c.F)ud(y),ad(y);else break e;Kp(y),oe(18)}}else y.xa=L[1],0<y.xa-y.K&&L[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Je(u(y.Va,y),6e3));v_(y.h)<=1&&y.ta&&(y.ta=void 0)}else vo(y,11)}else if((c.L||y.g==c)&&ud(y),!P(m))for(L=y.Ba.g.parse(m),m=0;m<L.length;m++){let st=L[m];const an=st[0];if(!(an<=y.K))if(y.K=an,st=st[1],y.I==2)if(st[0]=="c"){y.M=st[1],y.ba=st[2];const is=st[3];is!=null&&(y.ka=is,y.j.info("VER="+y.ka));const _o=st[4];_o!=null&&(y.za=_o,y.j.info("SVER="+y.za));const ci=st[5];ci!=null&&typeof ci=="number"&&ci>0&&(S=1.5*ci,y.O=S,y.j.info("backChannelRequestTimeoutMs_="+S)),S=y;const di=c.g;if(di){const dd=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dd){var z=S.h;z.g||dd.indexOf("spdy")==-1&&dd.indexOf("quic")==-1&&dd.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(zp(z,z.h),z.h=null))}if(S.G){const Qp=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;Qp&&(S.wa=Qp,dt(S.J,S.G,Qp))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-c.F,y.j.info("Handshake RTT: "+y.T+"ms")),S=y;var ie=c;if(S.na=q_(S,S.L?S.ba:null,S.W),ie.L){__(S.h,ie);var Oe=ie,Zt=S.O;Zt&&(Oe.H=Zt),Oe.D&&(Bp(Oe),rd(Oe)),S.g=ie}else F_(S);y.i.length>0&&ld(y)}else st[0]!="stop"&&st[0]!="close"||vo(y,7);else y.I==3&&(st[0]=="stop"||st[0]=="close"?st[0]=="stop"?vo(y,7):Gp(y):st[0]!="noop"&&y.l&&y.l.qa(st),y.A=0)}}ii(4)}catch{}}var kN=class{constructor(c,m){this.g=c,this.map=m}};function y_(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function w_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function v_(c){return c.h?1:c.g?c.g.size:0}function $p(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function zp(c,m){c.g?c.g.add(m):c.h=m}function __(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}y_.prototype.cancel=function(){if(this.i=x_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function x_(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const y of c.g.values())m=m.concat(y.G);return m}return g(c.i)}var E_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function IN(c,m){if(c){c=c.split("&");for(let y=0;y<c.length;y++){const S=c[y].indexOf("=");let L,z=null;S>=0?(L=c[y].substring(0,S),z=c[y].substring(S+1)):L=c[y],m(L,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function ai(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof ai?(this.l=c.l,$l(this,c.j),this.o=c.o,this.g=c.g,zl(this,c.u),this.h=c.h,qp(this,k_(c.i)),this.m=c.m):c&&(m=String(c).match(E_))?(this.l=!1,$l(this,m[1]||"",!0),this.o=ql(m[2]||""),this.g=ql(m[3]||"",!0),zl(this,m[4]),this.h=ql(m[5]||"",!0),qp(this,m[6]||"",!0),this.m=ql(m[7]||"")):(this.l=!1,this.i=new Wl(null,this.l))}ai.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(Hl(m,b_,!0),":");var y=this.g;return(y||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Hl(m,b_,!0),"@"),c.push(Bl(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&c.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Hl(y,y.charAt(0)=="/"?NN:PN,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Hl(y,MN)),c.join("")},ai.prototype.resolve=function(c){const m=ss(this);let y=!!c.j;y?$l(m,c.j):y=!!c.o,y?m.o=c.o:y=!!c.g,y?m.g=c.g:y=c.u!=null;var S=c.h;if(y)zl(m,c.u);else if(y=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var L=m.h.lastIndexOf("/");L!=-1&&(S=m.h.slice(0,L+1)+S)}if(L=S,L==".."||L==".")S="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){S=L.lastIndexOf("/",0)==0,L=L.split("/");const z=[];for(let ie=0;ie<L.length;){const Oe=L[ie++];Oe=="."?S&&ie==L.length&&z.push(""):Oe==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),S&&ie==L.length&&z.push("")):(z.push(Oe),S=!0)}S=z.join("/")}else S=L}return y?m.h=S:y=c.i.toString()!=="",y?qp(m,k_(c.i)):y=!!c.m,y&&(m.m=c.m),m};function ss(c){return new ai(c)}function $l(c,m,y){c.j=y?ql(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function zl(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function qp(c,m,y){m instanceof Wl?(c.i=m,ON(c.i,c.l)):(y||(m=Hl(m,DN)),c.i=new Wl(m,c.l))}function dt(c,m,y){c.i.set(m,y)}function sd(c){return dt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function ql(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Hl(c,m,y){return typeof c=="string"?(c=encodeURI(c).replace(m,RN),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function RN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var b_=/[#\/\?@]/g,PN=/[#\?:]/g,NN=/[#\?]/g,DN=/[#\?@]/g,MN=/#/g;function Wl(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function wo(c){c.g||(c.g=new Map,c.h=0,c.i&&IN(c.i,function(m,y){c.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=Wl.prototype,t.add=function(c,m){wo(this),this.i=null,c=fa(this,c);let y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(m),this.h+=1,this};function S_(c,m){wo(c),m=fa(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function T_(c,m){return wo(c),m=fa(c,m),c.g.has(m)}t.forEach=function(c,m){wo(this),this.g.forEach(function(y,S){y.forEach(function(L){c.call(m,L,S,this)},this)},this)};function A_(c,m){wo(c);let y=[];if(typeof m=="string")T_(c,m)&&(y=y.concat(c.g.get(fa(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)y=y.concat(c[m]);return y}t.set=function(c,m){return wo(this),this.i=null,c=fa(this,c),T_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=A_(this,c),c.length>0?String(c[0]):m):m};function C_(c,m,y){S_(c,m),y.length>0&&(c.i=null,c.g.set(fa(c,m),g(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var y=m[S];const L=Bl(y);y=A_(this,y);for(let z=0;z<y.length;z++){let ie=L;y[z]!==""&&(ie+="="+Bl(y[z])),c.push(ie)}}return this.i=c.join("&")};function k_(c){const m=new Wl;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function fa(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function ON(c,m){m&&!c.j&&(wo(c),c.i=null,c.g.forEach(function(y,S){const L=S.toLowerCase();S!=L&&(S_(this,S),C_(this,L,y))},c)),c.j=m}function jN(c,m){const y=new Bt;if(o.Image){const S=new Image;S.onload=d(li,y,"TestLoadImage: loaded",!0,m,S),S.onerror=d(li,y,"TestLoadImage: error",!1,m,S),S.onabort=d(li,y,"TestLoadImage: abort",!1,m,S),S.ontimeout=d(li,y,"TestLoadImage: timeout",!1,m,S),o.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else m(!1)}function LN(c,m){const y=new Bt,S=new AbortController,L=setTimeout(()=>{S.abort(),li(y,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:S.signal}).then(z=>{clearTimeout(L),z.ok?li(y,"TestPingServer: ok",!0,m):li(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),li(y,"TestPingServer: error",!1,m)})}function li(c,m,y,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(y)}catch{}}function UN(){this.g=new Ll}function Hp(c){this.i=c.Sb||null,this.h=c.ab||!1}h(Hp,si),Hp.prototype.g=function(){return new id(this.i,this.h)};function id(c,m){Se.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(id,Se),t=id.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,Kl(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Gl(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Kl(this)),this.g&&(this.readyState=3,Kl(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;I_(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function I_(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Gl(this):Kl(this),this.readyState==3&&I_(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Gl(this))},t.Na=function(c){this.g&&(this.response=c,Gl(this))},t.ga=function(){this.g&&Gl(this)};function Gl(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Kl(c)}t.setRequestHeader=function(c,m){this.A.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=m.next();return c.join(`\r
`)};function Kl(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(id.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function R_(c){let m="";return Q(c,function(y,S){m+=S,m+=":",m+=y,m+=`\r
`}),m}function Wp(c,m,y){e:{for(S in y){var S=!1;break e}S=!0}S||(y=R_(y),typeof c=="string"?y!=null&&Bl(y):dt(c,m,y))}function Ct(c){Se.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Ct,Se);var FN=/^https?$/i,BN=["POST","PUT"];t=Ct.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,m,y,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():d_.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(z){P_(this,z);return}if(c=y||"",y=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)y.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const z of S.keys())y.set(z,S.get(z));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),L=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(BN,m,void 0)>=0)||S||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ie]of y)this.g.setRequestHeader(z,ie);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(z){P_(this,z)}};function P_(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,N_(c),od(c)}function N_(c){c.A||(c.A=!0,Ee(c,"complete"),Ee(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Ee(this,"complete"),Ee(this,"abort"),od(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),od(this,!0)),Ct.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?D_(this):this.Xa())},t.Xa=function(){D_(this)};function D_(c){if(c.h&&typeof i<"u"){if(c.v&&ui(c)==4)setTimeout(c.Ca.bind(c),0);else if(Ee(c,"readystatechange"),ui(c)==4){c.h=!1;try{const z=c.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var S;if(S=z===0){let ie=String(c.D).match(E_)[1]||null;!ie&&o.self&&o.self.location&&(ie=o.self.location.protocol.slice(0,-1)),S=!FN.test(ie?ie.toLowerCase():"")}y=S}if(y)Ee(c,"complete"),Ee(c,"success");else{c.o=6;try{var L=ui(c)>2?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.ca()+"]",N_(c)}}finally{od(c)}}}}function od(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const y=c.g;c.g=null,m||Ee(c,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ui(c){return c.g?c.g.readyState:0}t.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),ua(m)}};function M_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function VN(c){const m={};c=(c.g&&ui(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(P(c[S]))continue;var y=TN(c[S]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const z=m[L]||[];m[L]=z,z.push(y)}Z(m,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jl(c,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||m}function O_(c){this.za=0,this.i=[],this.j=new Bt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jl("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jl("baseRetryDelayMs",5e3,c),this.Za=Jl("retryDelaySeedMs",1e4,c),this.Ta=Jl("forwardChannelMaxRetries",2,c),this.va=Jl("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new y_(c&&c.concurrentRequestLimit),this.Ba=new UN,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=O_.prototype,t.ka=8,t.I=1,t.connect=function(c,m,y,S){oe(0),this.W=c,this.H=m||{},y&&S!==void 0&&(this.H.OSID=y,this.H.OAID=S),this.F=this.X,this.J=q_(this,null,this.W),ld(this)};function Gp(c){if(j_(c),c.I==3){var m=c.V++,y=ss(c.J);if(dt(y,"SID",c.M),dt(y,"RID",m),dt(y,"TYPE","terminate"),Ql(c,y),m=new oi(c,c.j,m),m.M=2,m.A=sd(ss(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=m.A,y=!0),y||(m.g=H_(m.j,null),m.g.ea(m.A)),m.F=Date.now(),rd(m)}z_(c)}function ad(c){c.g&&(Jp(c),c.g.cancel(),c.g=null)}function j_(c){ad(c),c.v&&(o.clearTimeout(c.v),c.v=null),ud(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function ld(c){if(!w_(c.h)&&!c.m){c.m=!0;var m=c.Ea;V||T(),$||(V(),$=!0),C.add(m,c),c.D=0}}function $N(c,m){return v_(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Je(u(c.Ea,c,m),$_(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const L=new oi(this,this.j,c);let z=this.o;if(this.U&&(z?(z=he(z),fe(z,this.U)):z=this.U),this.u!==null||this.R||(L.J=z,z=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var S=this.i[y];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=U_(this,L,m),y=ss(this.J),dt(y,"RID",c),dt(y,"CVER",22),this.G&&dt(y,"X-HTTP-Session-Id",this.G),Ql(this,y),z&&(this.R?m="headers="+Bl(R_(z))+"&"+m:this.u&&Wp(y,this.u,z)),zp(this.h,L),this.Ra&&dt(y,"TYPE","init"),this.S?(dt(y,"$req",m),dt(y,"SID","null"),L.U=!0,Fp(L,y,null)):Fp(L,y,m),this.I=2}}else this.I==3&&(c?L_(this,c):this.i.length==0||w_(this.h)||L_(this))};function L_(c,m){var y;m?y=m.l:y=c.V++;const S=ss(c.J);dt(S,"SID",c.M),dt(S,"RID",y),dt(S,"AID",c.K),Ql(c,S),c.u&&c.o&&Wp(S,c.u,c.o),y=new oi(c,c.j,y,c.D+1),c.u===null&&(y.J=c.o),m&&(c.i=m.G.concat(c.i)),m=U_(c,y,1e3),y.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),zp(c.h,y),Fp(y,S,m)}function Ql(c,m){c.H&&Q(c.H,function(y,S){dt(m,S,y)}),c.l&&Q({},function(y,S){dt(m,S,y)})}function U_(c,m,y){y=Math.min(c.i.length,y);const S=c.l?u(c.l.Ka,c.l,c):null;e:{var L=c.i;let Oe=-1;for(;;){const Zt=["count="+y];Oe==-1?y>0?(Oe=L[0].g,Zt.push("ofs="+Oe)):Oe=0:Zt.push("ofs="+Oe);let st=!0;for(let an=0;an<y;an++){var z=L[an].g;const is=L[an].map;if(z-=Oe,z<0)Oe=Math.max(0,L[an].g-100),st=!1;else try{z="req"+z+"_"||"";try{var ie=is instanceof Map?is:Object.entries(is);for(const[_o,ci]of ie){let di=ci;l(ci)&&(di=Sr(ci)),Zt.push(z+_o+"="+encodeURIComponent(di))}}catch(_o){throw Zt.push(z+"type="+encodeURIComponent("_badmap")),_o}}catch{S&&S(is)}}if(st){ie=Zt.join("&");break e}}ie=void 0}return c=c.i.splice(0,y),m.G=c,ie}function F_(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;V||T(),$||(V(),$=!0),C.add(m,c),c.A=0}}function Kp(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Je(u(c.Da,c),$_(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,B_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Je(u(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,oe(10),ad(this),B_(this))};function Jp(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function B_(c){c.g=new oi(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=ss(c.na);dt(m,"RID","rpc"),dt(m,"SID",c.M),dt(m,"AID",c.K),dt(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&dt(m,"TO",c.ia),dt(m,"TYPE","xmlhttp"),Ql(c,m),c.u&&c.o&&Wp(m,c.u,c.o),c.O&&(c.g.H=c.O);var y=c.g;c=c.ba,y.M=1,y.A=sd(ss(m)),y.u=null,y.R=!0,p_(y,c)}t.Va=function(){this.C!=null&&(this.C=null,ad(this),Kp(this),oe(19))};function ud(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function V_(c,m){var y=null;if(c.g==m){ud(c),Jp(c),c.g=null;var S=2}else if($p(c.h,m))y=m.G,__(c.h,m),S=1;else return;if(c.I!=0){if(m.o)if(S==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var L=c.D;S=da(),Ee(S,new Ie(S,y)),ld(c)}else F_(c);else if(L=m.m,L==3||L==0&&m.X>0||!(S==1&&$N(c,m)||S==2&&Kp(c)))switch(y&&y.length>0&&(m=c.h,m.i=m.i.concat(y)),L){case 1:vo(c,5);break;case 4:vo(c,10);break;case 3:vo(c,6);break;default:vo(c,2)}}}function $_(c,m){let y=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(y*=2),y*m}function vo(c,m){if(c.j.info("Error code "+m),m==2){var y=u(c.bb,c),S=c.Ua;const L=!S;S=new ai(S||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||$l(S,"https"),sd(S),L?jN(S.toString(),y):LN(S.toString(),y)}else oe(2);c.I=0,c.l&&c.l.pa(m),z_(c),j_(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function z_(c){if(c.I=0,c.ja=[],c.l){const m=x_(c.h);(m.length!=0||c.i.length!=0)&&(w(c.ja,m),w(c.ja,c.i),c.h.i.length=0,g(c.i),c.i.length=0),c.l.oa()}}function q_(c,m,y){var S=y instanceof ai?ss(y):new ai(y);if(S.g!="")m&&(S.g=m+"."+S.g),zl(S,S.u);else{var L=o.location;S=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;const z=new ai(null);S&&$l(z,S),m&&(z.g=m),L&&zl(z,L),y&&(z.h=y),S=z}return y=c.G,m=c.wa,y&&m&&dt(S,y,m),dt(S,"VER",c.ka),Ql(c,S),S}function H_(c,m,y){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new Ct(new Hp({ab:y})):new Ct(c.ma),m.Fa(c.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function W_(){}t=W_.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function cd(){}cd.prototype.g=function(c,m){return new ur(c,m)};function ur(c,m){Se.call(this),this.g=new O_(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!P(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!P(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new pa(this)}h(ur,Se),ur.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ur.prototype.close=function(){Gp(this.g)},ur.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.v&&(y={},y.__data__=Sr(c),c=y);m.i.push(new kN(m.Ya++,c)),m.I==3&&ld(m)},ur.prototype.N=function(){this.g.l=null,delete this.j,Gp(this.g),delete this.g,ur.Z.N.call(this)};function G_(c){Ul.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const y in m){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}h(G_,Ul);function K_(){Fl.call(this),this.status=1}h(K_,Fl);function pa(c){this.g=c}h(pa,W_),pa.prototype.ra=function(){Ee(this.g,"a")},pa.prototype.qa=function(c){Ee(this.g,new G_(c))},pa.prototype.pa=function(c){Ee(this.g,new K_)},pa.prototype.oa=function(){Ee(this.g,"b")},cd.prototype.createWebChannel=cd.prototype.g,ur.prototype.send=ur.prototype.o,ur.prototype.open=ur.prototype.m,ur.prototype.close=ur.prototype.close,NI=function(){return new cd},PI=function(){return da()},RI=ks,Oy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},nd.NO_ERROR=0,nd.TIMEOUT=8,nd.HTTP_ERROR=6,ih=nd,c_.COMPLETE="complete",II=c_,ca.EventType=go,go.OPEN="a",go.CLOSE="b",go.ERROR="c",go.MESSAGE="d",Se.prototype.listen=Se.prototype.J,mu=ca,Ct.prototype.listenOnce=Ct.prototype.K,Ct.prototype.getLastError=Ct.prototype.Ha,Ct.prototype.getLastErrorCode=Ct.prototype.ya,Ct.prototype.getStatus=Ct.prototype.ca,Ct.prototype.getResponseJson=Ct.prototype.La,Ct.prototype.getResponseText=Ct.prototype.la,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Fa,kI=Ct}).apply(typeof Rd<"u"?Rd:typeof self<"u"?self:typeof window<"u"?window:{});const ib="@firebase/firestore",ob="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=new Kf("@firebase/firestore");function va(){return Ko.logLevel}function ge(t,...e){if(Ko.logLevel<=ze.DEBUG){const n=e.map($w);Ko.debug(`Firestore (${Rl}): ${t}`,...n)}}function Ks(t,...e){if(Ko.logLevel<=ze.ERROR){const n=e.map($w);Ko.error(`Firestore (${Rl}): ${t}`,...n)}}function cl(t,...e){if(Ko.logLevel<=ze.WARN){const n=e.map($w);Ko.warn(`Firestore (${Rl}): ${t}`,...n)}}function $w(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,DI(t,r,n)}function DI(t,e,n){let r=`FIRESTORE (${Rl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ks(r),new Error(r)}function Ze(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||DI(e,s,r)}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends es{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dn.UNAUTHENTICATED))}shutdown(){}}class GF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class KF{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0,42304);let r=this.i;const s=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let i=new Bs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const a=i;e.enqueueRetryable(async()=>{await a.promise,await s(this.currentUser)})},l=a=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(a=>l(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?l(a):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ze(typeof r.accessToken=="string",31837,{l:r}),new MI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new Dn(e)}}class JF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class QF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new JF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ab{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ze(this.o===void 0,3512);const r=i=>{i.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ge("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ab(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ab(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=YF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function qe(t,e){return t<e?-1:t>e?1:0}function jy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Om(s)===Om(i)?qe(s,i):Om(s)?1:-1}return qe(t.length,e.length)}const ZF=55296,e5=57343;function Om(t){const e=t.charCodeAt(0);return e>=ZF&&e<=e5}function dl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="__name__";class ps{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ce(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ps.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ps?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=ps.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return qe(e.length,n.length)}static compareSegments(e,n){const r=ps.isNumericId(e),s=ps.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ps.extractNumericId(e).compare(ps.extractNumericId(n)):jy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hi.fromString(e.substring(4,e.length-2))}}class ut extends ps{construct(e,n,r){return new ut(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ut(n)}static emptyPath(){return new ut([])}}const t5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends ps{construct(e,n,r){return new wn(e,n,r)}static isValidIdentifier(e){return t5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lb}static keyField(){return new wn([lb])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[s+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(n)}static emptyPath(){return new wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(ut.fromString(e))}static fromName(e){return new be(ut.fromString(e).popFirst(5))}static empty(){return new be(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(t,e,n){if(!n)throw new ce(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function n5(t,e,n,r){if(e===!0&&r===!0)throw new ce(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ub(t){if(!be.isDocumentKey(t))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cb(t){if(be.isDocumentKey(t))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function tp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce(12329,{type:typeof t})}function ir(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tp(t);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function r5(t,e){if(e<=0)throw new ce(J.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t,e){const n={typeString:t};return e&&(n.value=e),n}function zc(t,e){if(!jI(t))throw new ce(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ce(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=-62135596800,hb=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hb);return new ft(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<db)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hb}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zc(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-db;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Wt("string",ft._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ft(0,0))}static max(){return new Re(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=-1;function s5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Re.fromTimestamp(r===1e9?new ft(n+1,0):new ft(n,r));return new Xi(s,be.empty(),e)}function i5(t){return new Xi(t.readTime,t.key,pc)}class Xi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xi(Re.min(),be.empty(),pc)}static max(){return new Xi(Re.max(),be.empty(),pc)}}function o5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(t.documentKey,e.documentKey),n!==0?n:qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==a5)throw t;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,r)=>{n(e)})}static reject(e){return new Y((n,r)=>{r(e)})}static waitFor(e){return new Y((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},a=>r(a))}),o=!0,i===s&&n()})}static or(e){let n=Y.resolve(!1);for(const r of e)n=n.next(s=>s?Y.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new Y((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let a=0;a<i;a++){const u=a;n(e[u]).next(d=>{o[u]=d,++l,l===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new Y((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function u5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Nl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}np.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=-1;function rp(t){return t==null}function Xh(t){return t===0&&1/t==-1/0}function c5(t){return typeof t=="number"&&Number.isInteger(t)&&!Xh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="";function d5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fb(e)),e=h5(t.get(n),e);return fb(e)}function h5(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case LI:n+="";break;default:n+=i}}return n}function fb(t){return t+LI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function UI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pd(this.root,e,this.comparator,!0)}}class Pd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??yn.RED,this.left=s??yn.EMPTY,this.right=i??yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new yn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return yn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mb(this.data.getIterator())}getIteratorFrom(e){return new mb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rn(this.comparator);return n.data=e,n}}class mb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new gr([])}unionWith(e){let n=new rn(wn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new FI("Invalid base64 string: "+i):i}}(e);return new bn(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new bn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const f5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(t){if(Ze(!!t,39018),typeof t=="string"){let e=0;const n=f5.exec(t);if(Ze(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jt(t.seconds),nanos:jt(t.nanos)}}function jt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zi(t){return typeof t=="string"?bn.fromBase64String(t):bn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="server_timestamp",VI="__type__",$I="__previous_value__",zI="__local_write_time__";function Hw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[VI])==null?void 0:r.stringValue)===BI}function sp(t){const e=t.mapValue.fields[$I];return Hw(e)?sp(e):e}function mc(t){const e=Yi(t.mapValue.fields[zI].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,n,r,s,i,o,l,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=a,this.useFetchStreams=u,this.isUsingEmulator=d}}const Yh="(default)";class gc{constructor(e,n){this.projectId=e,this.database=n||Yh}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database===Yh}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="__type__",m5="__max__",Nd={mapValue:{}},HI="__vector__",Zh="value";function eo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hw(t)?4:y5(t)?9007199254740991:g5(t)?10:11:Ce(28295,{value:t})}function As(t,e){if(t===e)return!0;const n=eo(t);if(n!==eo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mc(t).isEqual(mc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Yi(s.timestampValue),l=Yi(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Zi(s.bytesValue).isEqual(Zi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return jt(s.geoPointValue.latitude)===jt(i.geoPointValue.latitude)&&jt(s.geoPointValue.longitude)===jt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return jt(s.integerValue)===jt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=jt(s.doubleValue),l=jt(i.doubleValue);return o===l?Xh(o)===Xh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return dl(t.arrayValue.values||[],e.arrayValue.values||[],As);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(pb(o)!==pb(l))return!1;for(const a in o)if(o.hasOwnProperty(a)&&(l[a]===void 0||!As(o[a],l[a])))return!1;return!0}(t,e);default:return Ce(52216,{left:t})}}function yc(t,e){return(t.values||[]).find(n=>As(n,e))!==void 0}function hl(t,e){if(t===e)return 0;const n=eo(t),r=eo(e);if(n!==r)return qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=jt(i.integerValue||i.doubleValue),a=jt(o.integerValue||o.doubleValue);return l<a?-1:l>a?1:l===a?0:isNaN(l)?isNaN(a)?0:-1:1}(t,e);case 3:return gb(t.timestampValue,e.timestampValue);case 4:return gb(mc(t),mc(e));case 5:return jy(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Zi(i),a=Zi(o);return l.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),a=o.split("/");for(let u=0;u<l.length&&u<a.length;u++){const d=qe(l[u],a[u]);if(d!==0)return d}return qe(l.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=qe(jt(i.latitude),jt(o.latitude));return l!==0?l:qe(jt(i.longitude),jt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yb(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,g,w,x;const l=i.fields||{},a=o.fields||{},u=(p=l[Zh])==null?void 0:p.arrayValue,d=(g=a[Zh])==null?void 0:g.arrayValue,h=qe(((w=u==null?void 0:u.values)==null?void 0:w.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return h!==0?h:yb(u,d)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Nd.mapValue&&o===Nd.mapValue)return 0;if(i===Nd.mapValue)return 1;if(o===Nd.mapValue)return-1;const l=i.fields||{},a=Object.keys(l),u=o.fields||{},d=Object.keys(u);a.sort(),d.sort();for(let h=0;h<a.length&&h<d.length;++h){const p=jy(a[h],d[h]);if(p!==0)return p;const g=hl(l[a[h]],u[d[h]]);if(g!==0)return g}return qe(a.length,d.length)}(t.mapValue,e.mapValue);default:throw Ce(23264,{he:n})}}function gb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qe(t,e);const n=Yi(t),r=Yi(e),s=qe(n.seconds,r.seconds);return s!==0?s:qe(n.nanos,r.nanos)}function yb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=hl(n[s],r[s]);if(i)return i}return qe(n.length,r.length)}function fl(t){return Ly(t)}function Ly(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return be.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ly(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ly(n.fields[o])}`;return s+"}"}(t.mapValue):Ce(61005,{value:t})}function oh(t){switch(eo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sp(t);return e?16+oh(e):16;case 5:return 2*t.stringValue.length;case 6:return Zi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+oh(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return fo(r.fields,(i,o)=>{s+=i.length+oh(o)}),s}(t.mapValue);default:throw Ce(13486,{value:t})}}function wb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Uy(t){return!!t&&"integerValue"in t}function Ww(t){return!!t&&"arrayValue"in t}function vb(t){return!!t&&"nullValue"in t}function _b(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ah(t){return!!t&&"mapValue"in t}function g5(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[qI])==null?void 0:r.stringValue)===HI}function Du(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return fo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Du(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Du(t.arrayValue.values[n]);return e}return{...t}}function y5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===m5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.value=e}static empty(){return new Yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ah(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Du(n)}setAll(e){let n=wn.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const a=this.getFieldsMap(n);this.applyChanges(a,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Du(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ah(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return As(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ah(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){fo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Yn(Du(this.value))}}function WI(t){const e=[];return fo(t.fields,(n,r)=>{const s=new wn([n]);if(ah(r)){const i=WI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new gr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new On(e,0,Re.min(),Re.min(),Re.min(),Yn.empty(),0)}static newFoundDocument(e,n,r,s){return new On(e,1,n,Re.min(),r,s,0)}static newNoDocument(e,n){return new On(e,2,n,Re.min(),Re.min(),Yn.empty(),0)}static newUnknownDocument(e,n){return new On(e,3,n,Re.min(),Re.min(),Yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){this.position=e,this.inclusive=n}}function xb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=be.comparator(be.fromName(o.referenceValue),n.key):r=hl(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Eb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!As(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n="asc"){this.field=e,this.dir=n}}function w5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{}class Ht extends GI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _5(e,n,r):n==="array-contains"?new b5(e,r):n==="in"?new S5(e,r):n==="not-in"?new T5(e,r):n==="array-contains-any"?new A5(e,r):new Ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new x5(e,r):new E5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(hl(n,this.value)):n!==null&&eo(this.value)===eo(n)&&this.matchesComparison(hl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yr extends GI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yr(e,n)}matches(e){return KI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function KI(t){return t.op==="and"}function JI(t){return v5(t)&&KI(t)}function v5(t){for(const e of t.filters)if(e instanceof Yr)return!1;return!0}function Fy(t){if(t instanceof Ht)return t.field.canonicalString()+t.op.toString()+fl(t.value);if(JI(t))return t.filters.map(e=>Fy(e)).join(",");{const e=t.filters.map(n=>Fy(n)).join(",");return`${t.op}(${e})`}}function QI(t,e){return t instanceof Ht?function(r,s){return s instanceof Ht&&r.op===s.op&&r.field.isEqual(s.field)&&As(r.value,s.value)}(t,e):t instanceof Yr?function(r,s){return s instanceof Yr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&QI(o,s.filters[l]),!0):!1}(t,e):void Ce(19439)}function XI(t){return t instanceof Ht?function(n){return`${n.field.canonicalString()} ${n.op} ${fl(n.value)}`}(t):t instanceof Yr?function(n){return n.op.toString()+" {"+n.getFilters().map(XI).join(" ,")+"}"}(t):"Filter"}class _5 extends Ht{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class x5 extends Ht{constructor(e,n){super(e,"in",n),this.keys=YI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class E5 extends Ht{constructor(e,n){super(e,"not-in",n),this.keys=YI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YI(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>be.fromName(r.referenceValue))}class b5 extends Ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ww(n)&&yc(n.arrayValue,this.value)}}class S5 extends Ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yc(this.value.arrayValue,n)}}class T5 extends Ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yc(this.value.arrayValue,n)}}class A5 extends Ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ww(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function bb(t,e=null,n=[],r=[],s=null,i=null,o=null){return new C5(t,e,n,r,s,i,o)}function Gw(t){const e=De(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),rp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fl(r)).join(",")),e.Te=n}return e.Te}function Kw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!w5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Eb(t.startAt,e.startAt)&&Eb(t.endAt,e.endAt)}function By(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function k5(t,e,n,r,s,i,o,l){return new Dl(t,e,n,r,s,i,o,l)}function ip(t){return new Dl(t)}function Sb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZI(t){return t.collectionGroup!==null}function Mu(t){const e=De(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new rn(wn.comparator);return o.filters.forEach(a=>{a.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new wc(i,r))}),n.has(wn.keyField().canonicalString())||e.Ie.push(new wc(wn.keyField(),r))}return e.Ie}function _s(t){const e=De(t);return e.Ee||(e.Ee=I5(e,Mu(t))),e.Ee}function I5(t,e){if(t.limitType==="F")return bb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new wc(s.field,i)});const n=t.endAt?new ef(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ef(t.startAt.position,t.startAt.inclusive):null;return bb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vy(t,e){const n=t.filters.concat([e]);return new Dl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tf(t,e,n){return new Dl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function op(t,e){return Kw(_s(t),_s(e))&&t.limitType===e.limitType}function eR(t){return`${Gw(_s(t))}|lt:${t.limitType}`}function _a(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>XI(s)).join(", ")}]`),rp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>fl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>fl(s)).join(",")),`Target(${r})`}(_s(t))}; limitType=${t.limitType})`}function ap(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):be.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Mu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,a){const u=xb(o,l,a);return o.inclusive?u<=0:u<0}(r.startAt,Mu(r),s)||r.endAt&&!function(o,l,a){const u=xb(o,l,a);return o.inclusive?u>=0:u>0}(r.endAt,Mu(r),s))}(t,e)}function R5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tR(t){return(e,n)=>{let r=!1;for(const s of Mu(t)){const i=P5(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function P5(t,e,n){const r=t.field.isKeyField()?be.comparator(e.key,n.key):function(i,o,l){const a=o.data.field(i),u=l.data.field(i);return a!==null&&u!==null?hl(a,u):Ce(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return UI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5=new bt(be.comparator);function Js(){return N5}const nR=new bt(be.comparator);function gu(...t){let e=nR;for(const n of t)e=e.insert(n.key,n);return e}function rR(t){let e=nR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function No(){return Ou()}function sR(){return Ou()}function Ou(){return new oa(t=>t.toString(),(t,e)=>t.isEqual(e))}const D5=new bt(be.comparator),M5=new rn(be.comparator);function He(...t){let e=M5;for(const n of t)e=e.add(n);return e}const O5=new rn(qe);function j5(){return O5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xh(e)?"-0":e}}function iR(t){return{integerValue:""+t}}function oR(t,e){return c5(e)?iR(e):Jw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(){this._=void 0}}function L5(t,e,n){return t instanceof vc?function(s,i){const o={fields:{[VI]:{stringValue:BI},[zI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Hw(i)&&(i=sp(i)),i&&(o.fields[$I]=i),{mapValue:o}}(n,e):t instanceof _c?lR(t,e):t instanceof xc?uR(t,e):function(s,i){const o=aR(s,i),l=Tb(o)+Tb(s.Ae);return Uy(o)&&Uy(s.Ae)?iR(l):Jw(s.serializer,l)}(t,e)}function U5(t,e,n){return t instanceof _c?lR(t,e):t instanceof xc?uR(t,e):n}function aR(t,e){return t instanceof Ec?function(r){return Uy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class vc extends lp{}class _c extends lp{constructor(e){super(),this.elements=e}}function lR(t,e){const n=cR(e);for(const r of t.elements)n.some(s=>As(s,r))||n.push(r);return{arrayValue:{values:n}}}class xc extends lp{constructor(e){super(),this.elements=e}}function uR(t,e){let n=cR(e);for(const r of t.elements)n=n.filter(s=>!As(s,r));return{arrayValue:{values:n}}}class Ec extends lp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Tb(t){return jt(t.integerValue||t.doubleValue)}function cR(t){return Ww(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n){this.field=e,this.transform=n}}function F5(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof _c&&s instanceof _c||r instanceof xc&&s instanceof xc?dl(r.elements,s.elements,As):r instanceof Ec&&s instanceof Ec?As(r.Ae,s.Ae):r instanceof vc&&s instanceof vc}(t.transform,e.transform)}class B5{constructor(e,n){this.version=e,this.transformResults=n}}class Or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class up{}function hR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qw(t.key,Or.none()):new qc(t.key,t.data,Or.none());{const n=t.data,r=Yn.empty();let s=new rn(wn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new po(t.key,r,new gr(s.toArray()),Or.none())}}function V5(t,e,n){t instanceof qc?function(s,i,o){const l=s.value.clone(),a=Cb(s.fieldTransforms,i,o.transformResults);l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof po?function(s,i,o){if(!lh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Cb(s.fieldTransforms,i,o.transformResults),a=i.data;a.setAll(fR(s)),a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ju(t,e,n,r){return t instanceof qc?function(i,o,l,a){if(!lh(i.precondition,o))return l;const u=i.value.clone(),d=kb(i.fieldTransforms,a,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof po?function(i,o,l,a){if(!lh(i.precondition,o))return l;const u=kb(i.fieldTransforms,a,o),d=o.data;return d.setAll(fR(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,l){return lh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function $5(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=aR(r.transform,s||null);i!=null&&(n===null&&(n=Yn.empty()),n.set(r.field,i))}return n||null}function Ab(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&dl(r,s,(i,o)=>F5(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qc extends up{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class po extends up{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function fR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Cb(t,e,n){const r=new Map;Ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,U5(o,l,n[s]))}return r}function kb(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,L5(i,o,e))}return r}class Qw extends up{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z5 extends up{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&V5(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ju(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ju(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=sR();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const a=hR(o,l);a!==null&&r.set(s.key,a),o.isValidDocument()||o.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),He())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,(n,r)=>Ab(n,r))&&dl(this.baseMutations,e.baseMutations,(n,r)=>Ab(n,r))}}class Xw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return D5}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Xw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,Ge;function G5(t){switch(t){case J.OK:return Ce(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ce(15467,{code:t})}}function pR(t){if(t===void 0)return Ks("GRPC error has no .code"),J.UNKNOWN;switch(t){case $t.OK:return J.OK;case $t.CANCELLED:return J.CANCELLED;case $t.UNKNOWN:return J.UNKNOWN;case $t.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case $t.INTERNAL:return J.INTERNAL;case $t.UNAVAILABLE:return J.UNAVAILABLE;case $t.UNAUTHENTICATED:return J.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case $t.NOT_FOUND:return J.NOT_FOUND;case $t.ALREADY_EXISTS:return J.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return J.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case $t.ABORTED:return J.ABORTED;case $t.OUT_OF_RANGE:return J.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return J.UNIMPLEMENTED;case $t.DATA_LOSS:return J.DATA_LOSS;default:return Ce(39323,{code:t})}}(Ge=$t||($t={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=new Hi([4294967295,4294967295],0);function Ib(t){const e=K5().encode(t),n=new CI;return n.update(e),new Uint8Array(n.digest())}function Rb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hi([n,r],0),new Hi([s,i],0)]}class Yw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yu(`Invalid padding: ${n}`);if(r<0)throw new yu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Hi.fromNumber(r)));return s.compare(J5)===1&&(s=new Hi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ib(e),[r,s]=Rb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Yw(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Ib(e),[r,s]=Rb(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Hc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cp(Re.min(),s,new bt(qe),Js(),He())}}class Hc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hc(r,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class mR{constructor(e,n){this.targetId=e,this.Ce=n}}class gR{constructor(e,n,r=bn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Pb{constructor(){this.ve=0,this.Fe=Nb(),this.Me=bn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),n=He(),r=He();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ce(38017,{changeType:i})}}),new Hc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Nb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Q5{constructor(e){this.Ge=e,this.ze=new Map,this.je=Js(),this.Je=Dd(),this.He=Dd(),this.Ye=new bt(qe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(By(i))if(r===0){const o=new be(i.path);this.et(n,o,On.newNoDocument(o,Re.min()))}else Ze(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),a=l?this.ct(l,e,o):1;if(a!==0){this.it(n);const u=a===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Zi(r).toUint8Array()}catch(a){if(a instanceof FI)return cl("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{l=new Yw(o,s,i)}catch(a){return cl(a instanceof yu?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&By(l.target)){const a=new be(l.target.path);this.It(a).has(o)||this.Et(o,a)||this.et(o,a,On.newNoDocument(a,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=He();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(a=>{const u=this.ot(a);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new cp(e,n,this.Ye,this.je,r);return this.je=Js(),this.Je=Dd(),this.He=Dd(),this.Ye=new bt(qe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Pb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new rn(qe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new rn(qe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Pb),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Dd(){return new bt(be.comparator)}function Nb(){return new bt(be.comparator)}const X5={asc:"ASCENDING",desc:"DESCENDING"},Y5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z5={and:"AND",or:"OR"};class eB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $y(t,e){return t.useProto3Json||rp(e)?e:{value:e}}function nf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tB(t,e){return nf(t,e.toTimestamp())}function xs(t){return Ze(!!t,49232),Re.fromTimestamp(function(n){const r=Yi(n);return new ft(r.seconds,r.nanos)}(t))}function Zw(t,e){return zy(t,e).canonicalString()}function zy(t,e){const n=function(s){return new ut(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function wR(t){const e=ut.fromString(t);return Ze(bR(e),10190,{key:e.toString()}),e}function qy(t,e){return Zw(t.databaseId,e.path)}function jm(t,e){const n=wR(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be(_R(n))}function vR(t,e){return Zw(t.databaseId,e)}function nB(t){const e=wR(t);return e.length===4?ut.emptyPath():_R(e)}function Hy(t){return new ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _R(t){return Ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Db(t,e,n){return{name:qy(t,e),fields:n.value.mapValue.fields}}function rB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ce(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(Ze(d===void 0||typeof d=="string",58123),bn.fromBase64String(d||"")):(Ze(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),bn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?J.UNKNOWN:pR(u.code);return new ce(d,u.message||"")}(o);n=new gR(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=jm(t,r.document.name),i=xs(r.document.updateTime),o=r.document.createTime?xs(r.document.createTime):Re.min(),l=new Yn({mapValue:{fields:r.document.fields}}),a=On.newFoundDocument(s,i,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new uh(u,d,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=jm(t,r.document),i=r.readTime?xs(r.readTime):Re.min(),o=On.newNoDocument(s,i),l=r.removedTargetIds||[];n=new uh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=jm(t,r.document),i=r.removedTargetIds||[];n=new uh([],i,s,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new W5(s,i),l=r.targetId;n=new mR(l,o)}}return n}function sB(t,e){let n;if(e instanceof qc)n={update:Db(t,e.key,e.value)};else if(e instanceof Qw)n={delete:qy(t,e.key)};else if(e instanceof po)n={update:Db(t,e.key,e.data),updateMask:fB(e.fieldMask)};else{if(!(e instanceof z5))return Ce(16599,{Vt:e.type});n={verify:qy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof vc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _c)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof xc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ec)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Ce(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:tB(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ce(27497)}(t,e.precondition)),n}function iB(t,e){return t&&t.length>0?(Ze(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?xs(s.updateTime):xs(i);return o.isEqual(Re.min())&&(o=xs(i)),new B5(o,s.transformResults||[])}(n,e))):[]}function oB(t,e){return{documents:[vR(t,e.path)]}}function aB(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vR(t,s);const i=function(u){if(u.length!==0)return ER(Yr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:xa(p.field),direction:cB(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=$y(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function lB(t){let e=nB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ze(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=xR(h);return p instanceof Yr&&JI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(w){return new wc(Ea(w.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(h){let p;return p=typeof h=="object"?h.value:h,rp(p)?null:p}(n.limit));let a=null;n.startAt&&(a=function(h){const p=!!h.before,g=h.values||[];return new ef(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const p=!h.before,g=h.values||[];return new ef(g,p)}(n.endAt)),k5(e,s,o,i,l,"F",a,u)}function uB(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ea(n.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ea(n.unaryFilter.field);return Ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ea(n.unaryFilter.field);return Ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ea(n.unaryFilter.field);return Ht.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ht.create(Ea(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yr.create(n.compositeFilter.filters.map(r=>xR(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(n.compositeFilter.op))}(t):Ce(30097,{filter:t})}function cB(t){return X5[t]}function dB(t){return Y5[t]}function hB(t){return Z5[t]}function xa(t){return{fieldPath:t.canonicalString()}}function Ea(t){return wn.fromServerFormat(t.fieldPath)}function ER(t){return t instanceof Ht?function(n){if(n.op==="=="){if(_b(n.value))return{unaryFilter:{field:xa(n.field),op:"IS_NAN"}};if(vb(n.value))return{unaryFilter:{field:xa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_b(n.value))return{unaryFilter:{field:xa(n.field),op:"IS_NOT_NAN"}};if(vb(n.value))return{unaryFilter:{field:xa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xa(n.field),op:dB(n.op),value:n.value}}}(t):t instanceof Yr?function(n){const r=n.getFilters().map(s=>ER(s));return r.length===1?r[0]:{compositeFilter:{op:hB(n.op),filters:r}}}(t):Ce(54877,{filter:t})}function fB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n,r,s,i=Re.min(),o=Re.min(),l=bn.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=a}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e){this.yt=e}}function mB(t){const e=lB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(){this.Cn=new yB}addToCollectionParentIndex(e,n){return this.Cn.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(Xi.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(Xi.min())}updateCollectionGroup(e,n,r){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class yB{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new rn(ut.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new rn(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SR=41943040;class Jn{static withCacheSize(e){return new Jn(e,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn.DEFAULT_COLLECTION_PERCENTILE=10,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jn.DEFAULT=new Jn(SR,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jn.DISABLED=new Jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pl(0)}static cr(){return new pl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="LruGarbageCollector",wB=1048576;function jb([t,e],[n,r]){const s=qe(t,n);return s===0?qe(e,r):s}class vB{constructor(e){this.Ir=e,this.buffer=new rn(jb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();jb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class _B{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(Ob,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nl(n)?ge(Ob,"Ignoring IndexedDB error during garbage collection: ",n):await Pl(n)}await this.Vr(3e5)})}}class xB{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Y.resolve(np.ce);const r=new vB(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(Mb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,a,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,l=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),va()<=ze.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(a-l)+`ms
	Removed ${h} documents in `+(u-a)+`ms
Total Duration: ${u-d}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function EB(t,e){return new xB(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(){this.changes=new oa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ju(r.mutation,s,gr.empty(),ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,He()).next(()=>r))}getLocalViewOfDocuments(e,n,r=He()){const s=No();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=gu();return i.forEach((l,a)=>{o=o.insert(l,a.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=No();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,He()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Js();const o=Ou(),l=function(){return Ou()}();return n.forEach((a,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof po)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),ju(d.mutation,u,d.mutation.getFieldMask(),ft.now())):o.set(u.key,gr.empty())}),this.recalculateAndSaveOverlays(e,i).next(a=>(a.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>l.set(u,new SB(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Ou();let s=new bt((o,l)=>o-l),i=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(a=>{const u=n.get(a);if(u===null)return;let d=r.get(a)||gr.empty();d=l.applyToLocalView(u,d),r.set(a,d);const h=(s.get(l.batchId)||He()).add(a);s=s.insert(l.batchId,h)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const a=l.getNext(),u=a.key,d=a.value,h=sR();d.forEach(p=>{if(!i.has(p)){const g=hR(n.get(p),r.get(p));g!==null&&h.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return be.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):Y.resolve(No());let l=pc,a=i;return o.next(u=>Y.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),i.get(d)?Y.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{a=a.insert(d,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,a,u,He())).next(d=>({batchId:l,changes:rR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(r=>{let s=gu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=gu();return this.indexManager.getCollectionParents(e,i).next(l=>Y.forEach(l,a=>{const u=function(h,p){return new Dl(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((a,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,On.newInvalidDocument(d)))});let l=gu();return o.forEach((a,u)=>{const d=i.get(a);d!==void 0&&ju(d.mutation,u,gr.empty(),ft.now()),ap(n,u)&&(l=l.insert(a,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Y.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:xs(s.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:mB(s.bundledQuery),readTime:xs(s.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(){this.overlays=new bt(be.comparator),this.qr=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const r=No();return Y.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),Y.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),Y.resolve()}getOverlaysForCollection(e,n,r){const s=No(),i=n.length+1,o=new be(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const a=l.getNext().value,u=a.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&a.largestBatchId>r&&s.set(a.getKey(),a)}return Y.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new bt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=No(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=No(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return Y.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new H5(n,r));let i=this.qr.get(n);i===void 0&&(i=He(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(){this.sessionToken=bn.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.Qr=new rn(dn.$r),this.Ur=new rn(dn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new dn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new dn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new be(new ut([])),r=new dn(n,e),s=new dn(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new be(new ut([])),r=new dn(n,e),s=new dn(n,e+1);let i=He();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new dn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return be.comparator(e.key,n.key)||qe(e.Yr,n.Yr)}static Kr(e,n){return qe(e.Yr,n.Yr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new rn(dn.$r)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new q5(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new dn(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Y.resolve(o)}lookupMutationBatch(e,n){return Y.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return Y.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?qw:this.tr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dn(n,0),s=new dn(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),Y.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rn(qe);return n.forEach(s=>{const i=new dn(s,0),o=new dn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),Y.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;be.isDocumentKey(i)||(i=i.child(""));const o=new dn(new be(i),0);let l=new rn(qe);return this.Zr.forEachWhile(a=>{const u=a.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(a.Yr)),!0)},o),Y.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Y.forEach(n.mutations,s=>{const i=new dn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new dn(n,0),s=this.Zr.firstAfterOrEqual(r);return Y.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.ri=e,this.docs=function(){return new bt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Y.resolve(r?r.document.mutableCopy():On.newInvalidDocument(n))}getEntries(e,n){let r=Js();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():On.newInvalidDocument(s))}),Y.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Js();const o=n.path,l=new be(o.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(l);for(;a.hasNext();){const{key:u,value:{document:d}}=a.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||o5(i5(d),r)<=0||(s.has(d.key)||ap(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return Y.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Ce(9500)}ii(e,n){return Y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new PB(this)}getSize(e){return Y.resolve(this.size)}}class PB extends bB{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),Y.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e){this.persistence=e,this.si=new oa(n=>Gw(n),Kw),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new ev,this.targetCount=0,this.ai=pl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Y.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new pl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.Pr(n),Y.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),Y.waitFor(i).next(()=>s)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Y.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Y.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Y.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Y.resolve(r)}containsKey(e,n){return Y.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n){this.ui={},this.overlays={},this.ci=new np(0),this.li=!1,this.li=!0,this.hi=new kB,this.referenceDelegate=e(this),this.Pi=new NB(this),this.indexManager=new gB,this.remoteDocumentCache=function(s){return new RB(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new pB(n),this.Ii=new AB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new IB(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ge("MemoryPersistence","Starting transaction:",e);const s=new DB(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return Y.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class DB extends l5{constructor(e){super(),this.currentSequenceNumber=e}}class tv{constructor(e){this.persistence=e,this.Ri=new ev,this.Vi=null}static mi(e){return new tv(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Y.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,r=>{const s=be.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Y.or([()=>Y.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class rf{constructor(e,n){this.persistence=e,this.pi=new oa(r=>d5(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=EB(this,n)}static mi(e,n){return new rf(e,n)}Ei(){}di(e){return Y.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Y.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?Y.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,Re.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Y.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Y.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Y.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=oh(e.data.value)),n}br(e,n,r){return Y.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Y.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=He(),s=He();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new nv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return U4()?8:u5(Un())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new MB;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(va()<=ze.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",_a(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(va()<=ze.DEBUG&&ge("QueryEngine","Query:",_a(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(va()<=ze.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",_a(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_s(n))):Y.resolve())}ys(e,n){if(Sb(n))return Y.resolve(null);let r=_s(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=tf(n,null,"F"),r=_s(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=He(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(a=>{const u=this.Ds(n,l);return this.Cs(n,u,o,a.readTime)?this.ys(e,tf(n,null,"F")):this.vs(e,u,n,a)}))})))}ws(e,n,r,s){return Sb(n)||s.isEqual(Re.min())?Y.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?Y.resolve(null):(va()<=ze.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_a(n)),this.vs(e,o,n,s5(s,pc)).next(l=>l))})}Ds(e,n){let r=new rn(tR(e));return n.forEach((s,i)=>{ap(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return va()<=ze.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",_a(n)),this.ps.getDocumentsMatchingQuery(e,n,Xi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="LocalStore",jB=3e8;class LB{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new bt(qe),this.xs=new oa(i=>Gw(i),Kw),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TB(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function UB(t,e,n,r){return new LB(t,e,n,r)}async function AR(t,e){const n=De(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let a=He();for(const u of s){o.push(u.batchId);for(const d of u.mutations)a=a.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)a=a.add(d.key)}return n.localDocuments.getDocuments(r,a).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function FB(t,e){const n=De(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,a,u,d){const h=u.batch,p=h.keys();let g=Y.resolve();return p.forEach(w=>{g=g.next(()=>d.getEntry(a,w)).next(x=>{const E=u.docVersions.get(w);Ze(E!==null,48541),x.version.compareTo(E)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(a,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let a=He();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(a=a.add(l.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function CR(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function BB(t,e){const n=De(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,h)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(bn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(h,g),function(x,E,v){return x.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=jB?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,g,d)&&l.push(n.Pi.updateTargetData(i,g))});let a=Js(),u=He();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(VB(i,o,e.documentUpdates).next(d=>{a=d.ks,u=d.qs})),!r.isEqual(Re.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return Y.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,a,u)).next(()=>a)}).then(i=>(n.Ms=s,i))}function VB(t,e,n){let r=He(),s=He();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Js();return n.forEach((l,a)=>{const u=i.get(l);a.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),a.isNoDocument()&&a.version.isEqual(Re.min())?(e.removeEntry(l,a.readTime),o=o.insert(l,a)):!u.isValidDocument()||a.version.compareTo(u.version)>0||a.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(a),o=o.insert(l,a)):ge(rv,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",a.version)}),{ks:o,qs:s}})}function $B(t,e){const n=De(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zB(t,e){const n=De(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,Y.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Ni(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Wy(t,e,n){const r=De(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Nl(o))throw o;ge(rv,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Lb(t,e,n){const r=De(t);let s=Re.min(),i=He();return r.persistence.runTransaction("Execute query","readwrite",o=>function(a,u,d){const h=De(a),p=h.xs.get(d);return p!==void 0?Y.resolve(h.Ms.get(p)):h.Pi.getTargetData(u,d)}(r,o,_s(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(a=>{i=a})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Re.min(),n?i:He())).next(l=>(qB(r,R5(e),l),{documents:l,Qs:i})))}function qB(t,e,n){let r=t.Os.get(e)||Re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Ub{constructor(){this.activeTargetIds=j5()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HB{constructor(){this.Mo=new Ub,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ub,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="ConnectivityMonitor";class Bb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(Fb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(Fb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Md=null;function Gy(){return Md===null?Md=function(){return 268435456+Math.round(2147483648*Math.random())}():Md++,"0x"+Md.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="RestConnection",GB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KB{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Yh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Gy(),l=this.zo(e,n.toUriEncodedString());ge(Lm,`Sending RPC '${e}' ${o}:`,l,r);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,s,i);const{host:u}=new URL(l),d=Cl(u);return this.Jo(e,l,a,r,d).then(h=>(ge(Lm,`Received RPC '${e}' ${o}: `,h),h),h=>{throw cl(Lm,`RPC '${e}' ${o} failed with error: `,h,"url: ",l,"request:",r),h})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=GB[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class QB extends KB{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Gy();return new Promise((l,a)=>{const u=new kI;u.setWithCredentials(!0),u.listenOnce(II.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ih.NO_ERROR:const h=u.getResponseJson();ge(Cn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),l(h);break;case ih.TIMEOUT:ge(Cn,`RPC '${e}' ${o} timed out`),a(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const p=u.getStatus();if(ge(Cn,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const x=function(v){const _=v.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(_)>=0?_:J.UNKNOWN}(w.status);a(new ce(x,w.message))}else a(new ce(J.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ce(J.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ge(Cn,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);ge(Cn,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Gy(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=NI(),l=PI(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(a.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const d=i.join("");ge(Cn,`Creating RPC '${e}' stream ${s}: ${d}`,a);const h=o.createWebChannel(d,a);this.I_(h);let p=!1,g=!1;const w=new JB({Yo:E=>{g?ge(Cn,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(p||(ge(Cn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),ge(Cn,`RPC '${e}' stream ${s} sending:`,E),h.send(E))},Zo:()=>h.close()}),x=(E,v,_)=>{E.listen(v,b=>{try{_(b)}catch(O){setTimeout(()=>{throw O},0)}})};return x(h,mu.EventType.OPEN,()=>{g||(ge(Cn,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),x(h,mu.EventType.CLOSE,()=>{g||(g=!0,ge(Cn,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(h))}),x(h,mu.EventType.ERROR,E=>{g||(g=!0,cl(Cn,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),w.a_(new ce(J.UNAVAILABLE,"The operation could not be completed")))}),x(h,mu.EventType.MESSAGE,E=>{var v;if(!g){const _=E.data[0];Ze(!!_,16349);const b=_,O=(b==null?void 0:b.error)||((v=b[0])==null?void 0:v.error);if(O){ge(Cn,`RPC '${e}' stream ${s} received error:`,O);const V=O.status;let $=function(R){const A=$t[R];if(A!==void 0)return pR(A)}(V),C=O.message;$===void 0&&($=J.INTERNAL,C="Unknown error status: "+V+" with message "+O.message),g=!0,w.a_(new ce($,C)),h.close()}else ge(Cn,`RPC '${e}' stream ${s} received:`,_),w.u_(_)}}),x(l,RI.STAT_EVENT,E=>{E.stat===Oy.PROXY?ge(Cn,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===Oy.NOPROXY&&ge(Cn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t){return new eB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="PersistentStream";class IR{constructor(e,n,r,s,i,o,l,a){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kR(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Ks(n.toString()),Ks("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ce(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ge(Vb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ge(Vb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XB extends IR{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=rB(this.serializer,e),r=function(i){if(!("targetChange"in i))return Re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?xs(o.readTime):Re.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Hy(this.serializer),n.addTarget=function(i,o){let l;const a=o.target;if(l=By(a)?{documents:oB(i,a)}:{query:aB(i,a).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=yR(i,o.resumeToken);const u=$y(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Re.min())>0){l.readTime=nf(i,o.snapshotVersion.toTimestamp());const u=$y(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=uB(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Hy(this.serializer),n.removeTarget=e,this.q_(n)}}class YB extends IR{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=iB(e.writeResults,e.commitTime),r=xs(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Hy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>sB(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{}class eV extends ZB{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,zy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ce(J.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,zy(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(J.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class tV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ks(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="RemoteStore";class nV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{aa(this)&&(ge(Jo,"Restarting streams for network reachability change."),await async function(a){const u=De(a);u.Ea.add(4),await Wc(u),u.Ra.set("Unknown"),u.Ea.delete(4),await hp(u)}(this))})}),this.Ra=new tV(r,s)}}async function hp(t){if(aa(t))for(const e of t.da)await e(!0)}async function Wc(t){for(const e of t.da)await e(!1)}function RR(t,e){const n=De(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),av(n)?ov(n):Ml(n).O_()&&iv(n,e))}function sv(t,e){const n=De(t),r=Ml(n);n.Ia.delete(e),r.O_()&&PR(n,e),n.Ia.size===0&&(r.O_()?r.L_():aa(n)&&n.Ra.set("Unknown"))}function iv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ml(t).Y_(e)}function PR(t,e){t.Va.Ue(e),Ml(t).Z_(e)}function ov(t){t.Va=new Q5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ml(t).start(),t.Ra.ua()}function av(t){return aa(t)&&!Ml(t).x_()&&t.Ia.size>0}function aa(t){return De(t).Ea.size===0}function NR(t){t.Va=void 0}async function rV(t){t.Ra.set("Online")}async function sV(t){t.Ia.forEach((e,n)=>{iv(t,e)})}async function iV(t,e){NR(t),av(t)?(t.Ra.ha(e),ov(t)):t.Ra.set("Unknown")}async function oV(t,e,n){if(t.Ra.set("Online"),e instanceof gR&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){ge(Jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sf(t,r)}else if(e instanceof uh?t.Va.Ze(e):e instanceof mR?t.Va.st(e):t.Va.tt(e),!n.isEqual(Re.min()))try{const r=await CR(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const d=i.Ia.get(u);d&&i.Ia.set(u,d.withResumeToken(a.resumeToken,o))}}),l.targetMismatches.forEach((a,u)=>{const d=i.Ia.get(a);if(!d)return;i.Ia.set(a,d.withResumeToken(bn.EMPTY_BYTE_STRING,d.snapshotVersion)),PR(i,a);const h=new Ni(d.target,a,u,d.sequenceNumber);iv(i,h)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ge(Jo,"Failed to raise snapshot:",r),await sf(t,r)}}async function sf(t,e,n){if(!Nl(e))throw e;t.Ea.add(1),await Wc(t),t.Ra.set("Offline"),n||(n=()=>CR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ge(Jo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await hp(t)})}function DR(t,e){return e().catch(n=>sf(t,n,e))}async function fp(t){const e=De(t),n=to(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qw;for(;aV(e);)try{const s=await $B(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,lV(e,s)}catch(s){await sf(e,s)}MR(e)&&OR(e)}function aV(t){return aa(t)&&t.Ta.length<10}function lV(t,e){t.Ta.push(e);const n=to(t);n.O_()&&n.X_&&n.ea(e.mutations)}function MR(t){return aa(t)&&!to(t).x_()&&t.Ta.length>0}function OR(t){to(t).start()}async function uV(t){to(t).ra()}async function cV(t){const e=to(t);for(const n of t.Ta)e.ea(n.mutations)}async function dV(t,e,n){const r=t.Ta.shift(),s=Xw.from(r,e,n);await DR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fp(t)}async function hV(t,e){e&&to(t).X_&&await async function(r,s){if(function(o){return G5(o)&&o!==J.ABORTED}(s.code)){const i=r.Ta.shift();to(r).B_(),await DR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await fp(r)}}(t,e),MR(t)&&OR(t)}async function $b(t,e){const n=De(t);n.asyncQueue.verifyOperationInProgress(),ge(Jo,"RemoteStore received new credentials");const r=aa(n);n.Ea.add(3),await Wc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await hp(n)}async function fV(t,e){const n=De(t);e?(n.Ea.delete(2),await hp(n)):e||(n.Ea.add(2),await Wc(n),n.Ra.set("Unknown"))}function Ml(t){return t.ma||(t.ma=function(n,r,s){const i=De(n);return i.sa(),new XB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:rV.bind(null,t),t_:sV.bind(null,t),r_:iV.bind(null,t),H_:oV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),av(t)?ov(t):t.Ra.set("Unknown")):(await t.ma.stop(),NR(t))})),t.ma}function to(t){return t.fa||(t.fa=function(n,r,s){const i=De(n);return i.sa(),new YB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:uV.bind(null,t),r_:hV.bind(null,t),ta:cV.bind(null,t),na:dV.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await fp(t)):(await t.fa.stop(),t.Ta.length>0&&(ge(Jo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new lv(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uv(t,e){if(Ks("AsyncQueue",`${e}: ${t}`),Nl(t))return new ce(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static emptySet(e){return new Qa(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=gu(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.ga=new bt(be.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ml{constructor(e,n,r,s,i,o,l,a,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=a,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ml(e,n,Qa.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&op(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class mV{constructor(){this.queries=qb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=De(n),i=s.queries;s.queries=qb(),i.forEach((o,l)=>{for(const a of l.Sa)a.onError(r)})})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function qb(){return new oa(t=>eR(t),op)}async function cv(t,e){const n=De(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new pV,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=uv(o,`Initialization of query '${_a(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&hv(n)}async function dv(t,e){const n=De(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gV(t,e){const n=De(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&hv(n)}function yV(t,e,n){const r=De(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function hv(t){t.Ca.forEach(e=>{e.next()})}var Ky,Hb;(Hb=Ky||(Ky={})).Ma="default",Hb.Cache="cache";class fv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ky.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.key=e}}class LR{constructor(e){this.key=e}}class wV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=tR(e),this.tu=new Qa(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new zb,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const a=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),g=ap(this.query,h)?h:null,w=!!p&&this.mutatedKeys.has(p.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let E=!1;p&&g?p.data.isEqual(g.data)?w!==x&&(r.track({type:3,doc:g}),E=!0):this.su(p,g)||(r.track({type:2,doc:g}),E=!0,(a&&this.eu(g,a)>0||u&&this.eu(g,u)<0)&&(l=!0)):!p&&g?(r.track({type:0,doc:g}),E=!0):p&&!g&&(r.track({type:1,doc:p}),E=!0,(a||u)&&(l=!0)),E&&(g?(o=o.add(g),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(g,w){const x=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:E})}};return x(g)-x(w)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],a=this.Xa.size===0&&this.current&&!s?1:0,u=a!==this.Za;return this.Za=a,o.length!==0||u?{snapshot:new ml(this.query,e.tu,i,o,e.mutatedKeys,a===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new LR(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new jR(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=He();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pv="SyncEngine";class vV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class _V{constructor(e){this.key=e,this.hu=!1}}class xV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new oa(l=>eR(l),op),this.Iu=new Map,this.Eu=new Set,this.du=new bt(be.comparator),this.Au=new Map,this.Ru=new ev,this.Vu={},this.mu=new Map,this.fu=pl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EV(t,e,n=!0){const r=zR(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await UR(r,e,n,!0),s}async function bV(t,e){const n=zR(t);await UR(n,e,!0,!1)}async function UR(t,e,n,r){const s=await zB(t.localStore,_s(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await SV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&RR(t.remoteStore,s),l}async function SV(t,e,n,r,s){t.pu=(h,p,g)=>async function(x,E,v,_){let b=E.view.ru(v);b.Cs&&(b=await Lb(x.localStore,E.query,!1).then(({documents:C})=>E.view.ru(C,b)));const O=_&&_.targetChanges.get(E.targetId),V=_&&_.targetMismatches.get(E.targetId)!=null,$=E.view.applyChanges(b,x.isPrimaryClient,O,V);return Gb(x,E.targetId,$.au),$.snapshot}(t,h,p,g);const i=await Lb(t.localStore,e,!0),o=new wV(e,i.Qs),l=o.ru(i.documents),a=Hc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,a);Gb(t,n,u.au);const d=new vV(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function TV(t,e,n){const r=De(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!op(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Wy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&sv(r.remoteStore,s.targetId),Jy(r,s.targetId)}).catch(Pl)):(Jy(r,s.targetId),await Wy(r.localStore,s.targetId,!0))}async function AV(t,e){const n=De(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sv(n.remoteStore,r.targetId))}async function CV(t,e,n){const r=MV(t);try{const s=await function(o,l){const a=De(o),u=ft.now(),d=l.reduce((g,w)=>g.add(w.key),He());let h,p;return a.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Js(),x=He();return a.Ns.getEntries(g,d).next(E=>{w=E,w.forEach((v,_)=>{_.isValidDocument()||(x=x.add(v))})}).next(()=>a.localDocuments.getOverlayedDocuments(g,w)).next(E=>{h=E;const v=[];for(const _ of l){const b=$5(_,h.get(_.key).overlayedDocument);b!=null&&v.push(new po(_.key,b,WI(b.value.mapValue),Or.exists(!0)))}return a.mutationQueue.addMutationBatch(g,u,v,l)}).next(E=>{p=E;const v=E.applyToLocalDocumentSet(h,x);return a.documentOverlayCache.saveOverlays(g,E.batchId,v)})}).then(()=>({batchId:p.batchId,changes:rR(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,a){let u=o.Vu[o.currentUser.toKey()];u||(u=new bt(qe)),u=u.insert(l,a),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await Gc(r,s.changes),await fp(r.remoteStore)}catch(s){const i=uv(s,"Failed to persist write");n.reject(i)}}async function FR(t,e){const n=De(t);try{const r=await BB(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ze(o.hu,14607):s.removedDocuments.size>0&&(Ze(o.hu,42227),o.hu=!1))}),await Gc(n,r,e)}catch(r){await Pl(r)}}function Wb(t,e,n){const r=De(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const a=De(o);a.onlineState=l;let u=!1;a.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(l)&&(u=!0)}),u&&hv(a)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kV(t,e,n){const r=De(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new bt(be.comparator);o=o.insert(i,On.newNoDocument(i,Re.min()));const l=He().add(i),a=new cp(Re.min(),new Map,new bt(qe),o,l);await FR(r,a),r.du=r.du.remove(i),r.Au.delete(e),mv(r)}else await Wy(r.localStore,e,!1).then(()=>Jy(r,e,n)).catch(Pl)}async function IV(t,e){const n=De(t),r=e.batch.batchId;try{const s=await FB(n.localStore,e);VR(n,r,null),BR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gc(n,s)}catch(s){await Pl(s)}}async function RV(t,e,n){const r=De(t);try{const s=await function(o,l){const a=De(o);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return a.mutationQueue.lookupMutationBatch(u,l).next(h=>(Ze(h!==null,37113),d=h.keys(),a.mutationQueue.removeMutationBatch(u,h))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>a.localDocuments.getDocuments(u,d))})}(r.localStore,e);VR(r,e,n),BR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gc(r,s)}catch(s){await Pl(s)}}function BR(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function VR(t,e,n){const r=De(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Jy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||$R(t,r)})}function $R(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(sv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),mv(t))}function Gb(t,e,n){for(const r of n)r instanceof jR?(t.Ru.addReference(r.key,e),PV(t,r)):r instanceof LR?(ge(pv,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||$R(t,r.key)):Ce(19791,{wu:r})}function PV(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ge(pv,"New document in limbo: "+n),t.Eu.add(r),mv(t))}function mv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new be(ut.fromString(e)),r=t.fu.next();t.Au.set(r,new _V(n)),t.du=t.du.insert(n,r),RR(t.remoteStore,new Ni(_s(ip(n.path)),r,"TargetPurposeLimboResolution",np.ce))}}async function Gc(t,e,n){const r=De(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,a)=>{o.push(r.pu(a,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(a.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(a.targetId,h?"current":"not-current")}if(u){s.push(u);const h=nv.As(a.targetId,u);i.push(h)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(a,u){const d=De(a);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Y.forEach(u,p=>Y.forEach(p.Es,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>Y.forEach(p.ds,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!Nl(h))throw h;ge(rv,"Failed to update sequence numbers: "+h)}for(const h of u){const p=h.targetId;if(!h.fromCache){const g=d.Ms.get(p),w=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(w);d.Ms=d.Ms.insert(p,x)}}}(r.localStore,i))}async function NV(t,e){const n=De(t);if(!n.currentUser.isEqual(e)){ge(pv,"User change. New user:",e.toKey());const r=await AR(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(a=>{a.reject(new ce(J.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gc(n,r.Ls)}}function DV(t,e){const n=De(t),r=n.Au.get(e);if(r&&r.hu)return He().add(r.key);{let s=He();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function zR(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kV.bind(null,e),e.Pu.H_=gV.bind(null,e.eventManager),e.Pu.yu=yV.bind(null,e.eventManager),e}function MV(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RV.bind(null,e),e}class of{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UB(this.persistence,new OB,e.initialUser,this.serializer)}Cu(e){return new TR(tv.mi,this.serializer)}Du(e){return new HB}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}of.provider={build:()=>new of};class OV extends of{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ze(this.persistence.referenceDelegate instanceof rf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new _B(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Jn.withCacheSize(this.cacheSizeBytes):Jn.DEFAULT;return new TR(r=>rf.mi(r,n),this.serializer)}}class Qy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NV.bind(null,this.syncEngine),await fV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mV}()}createDatastore(e){const n=dp(e.databaseInfo.databaseId),r=function(i){return new QB(i)}(e.databaseInfo);return function(i,o,l,a){return new eV(i,o,l,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new nV(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Wb(this.syncEngine,n,0),function(){return Bb.v()?new Bb:new WB}())}createSyncEngine(e,n){return function(s,i,o,l,a,u,d){const h=new xV(s,i,o,l,a,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=De(s);ge(Jo,"RemoteStore shutting down."),i.Ea.add(5),await Wc(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Qy.provider={build:()=>new Qy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ks("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="FirestoreClient";class jV{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Dn.UNAUTHENTICATED,this.clientId=zw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ge(no,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ge(no,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=uv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Fm(t,e){t.asyncQueue.verifyOperationInProgress(),ge(no,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await AR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await LV(t);ge(no,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$b(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>$b(e.remoteStore,s)),t._onlineComponents=e}async function LV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge(no,"Using user provided OfflineComponentProvider");try{await Fm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;cl("Error using user provided cache. Falling back to memory cache: "+n),await Fm(t,new of)}}else ge(no,"Using default OfflineComponentProvider"),await Fm(t,new OV(void 0));return t._offlineComponents}async function qR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge(no,"Using user provided OnlineComponentProvider"),await Kb(t,t._uninitializedComponentsProvider._online)):(ge(no,"Using default OnlineComponentProvider"),await Kb(t,new Qy))),t._onlineComponents}function UV(t){return qR(t).then(e=>e.syncEngine)}async function af(t){const e=await qR(t),n=e.eventManager;return n.onListen=EV.bind(null,e.syncEngine),n.onUnlisten=TV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AV.bind(null,e.syncEngine),n}function FV(t,e,n={}){const r=new Bs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,a,u){const d=new gv({next:p=>{d.Nu(),o.enqueueAndForget(()=>dv(i,h));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&a&&a.source==="server"?u.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new fv(ip(l.path),d,{includeMetadataChanges:!0,qa:!0});return cv(i,h)}(await af(t),t.asyncQueue,e,n,r)),r.promise}function BV(t,e,n={}){const r=new Bs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,a,u){const d=new gv({next:p=>{d.Nu(),o.enqueueAndForget(()=>dv(i,h)),p.fromCache&&a.source==="server"?u.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new fv(l,d,{includeMetadataChanges:!0,qa:!0});return cv(i,h)}(await af(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="firestore.googleapis.com",Qb=!0;class Xb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=WR,this.ssl=Qb}else this.host=e.host,this.ssl=e.ssl??Qb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=SR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wB)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HR(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WF;switch(r.type){case"firstParty":return new QF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Jb.get(n);r&&(ge("ComponentProvider","Removing Datastore"),Jb.delete(n),r.terminate())}(this),Promise.resolve()}}function VV(t,e,n,r={}){var u;t=ir(t,pp);const s=Cl(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(yk(`https://${l}`),wk("Firestore",!0)),i.host!==WR&&i.host!==l&&cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const a={...i,host:l,ssl:s,emulatorOptions:r};if(!Qi(a,o)&&(t._setSettings(a),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Dn.MOCK_USER;else{d=R4(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Dn(p)}t._authCredentials=new GF(new MI(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ri(this.firestore,e,this._query)}}class Rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}toJSON(){return{type:Rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(zc(n,Rt._jsonSchema))return new Rt(e,r||null,new be(ut.fromString(n.referencePath)))}}Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:Wt("string",Rt._jsonSchemaVersion),referencePath:Wt("string")};class Wi extends ri{constructor(e,n,r){super(e,n,ip(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new be(e))}withConverter(e){return new Wi(this.firestore,e,this._path)}}function Ut(t,e,...n){if(t=Et(t),OI("collection","path",e),t instanceof pp){const r=ut.fromString(e,...n);return cb(r),new Wi(t,null,r)}{if(!(t instanceof Rt||t instanceof Wi))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ut.fromString(e,...n));return cb(r),new Wi(t.firestore,null,r)}}function sn(t,e,...n){if(t=Et(t),arguments.length===1&&(e=zw.newId()),OI("doc","path",e),t instanceof pp){const r=ut.fromString(e,...n);return ub(r),new Rt(t,null,new be(r))}{if(!(t instanceof Rt||t instanceof Wi))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ut.fromString(e,...n));return ub(r),new Rt(t.firestore,t instanceof Wi?t.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="AsyncQueue";class Zb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kR(this,"async_queue_retry"),this._c=()=>{const r=Um();r&&ge(Yb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Bs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Nl(e))throw e;ge(Yb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ks("INTERNAL UNHANDLED ERROR: ",eS(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=lv.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Ce(47125,{Pc:eS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function eS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Qs extends pp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Zb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zb(e),this._firestoreClient=void 0,await e}}}function $V(t,e){const n=typeof t=="object"?t:Jf(),r=typeof t=="string"?t:Yh,s=ia(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=k4("firestore");i&&VV(s,...i)}return s}function mp(t){if(t._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zV(t),t._firestoreClient}function zV(t){var r,s,i;const e=t._freezeSettings(),n=function(l,a,u,d){return new p5(l,a,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,HR(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new jV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const a=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(a),_online:a}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rr(bn.fromBase64String(e))}catch(n){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rr(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zc(e,Rr._jsonSchema))return Rr.fromBase64String(e.bytes)}}Rr._jsonSchemaVersion="firestore/bytes/1.0",Rr._jsonSchema={type:Wt("string",Rr._jsonSchemaVersion),bytes:Wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Es._jsonSchemaVersion}}static fromJSON(e){if(zc(e,Es._jsonSchema))return new Es(e.latitude,e.longitude)}}Es._jsonSchemaVersion="firestore/geoPoint/1.0",Es._jsonSchema={type:Wt("string",Es._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:bs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zc(e,bs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new bs(e.vectorValues);throw new ce(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bs._jsonSchemaVersion="firestore/vectorValue/1.0",bs._jsonSchema={type:Wt("string",bs._jsonSchemaVersion),vectorValues:Wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=/^__.*__$/;class HV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new po(e,this.data,this.fieldMask,n,this.fieldTransforms):new qc(e,this.data,n,this.fieldTransforms)}}class GR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new po(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function KR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:t})}}class yv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new yv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return lf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(KR(this.Ac)&&qV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class WV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dp(e)}Cc(e,n,r,s=!1){return new yv({Ac:e,methodName:n,Dc:r,path:wn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yp(t){const e=t._freezeSettings(),n=dp(t._databaseId);return new WV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function JR(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);_v("Data must be an object, but it was:",o,r);const l=QR(r,o);let a,u;if(i.merge)a=new gr(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=Xy(e,h,n);if(!o.contains(p))throw new ce(J.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);YR(d,p)||d.push(p)}a=new gr(d),u=o.fieldTransforms.filter(h=>a.covers(h.field))}else a=null,u=o.fieldTransforms;return new HV(new Yn(l),a,u)}class wp extends Kc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wp}}class wv extends Kc{_toFieldTransform(e){return new dR(e.path,new vc)}isEqual(e){return e instanceof wv}}class vv extends Kc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Ec(e.serializer,oR(e.serializer,this.Fc));return new dR(e.path,n)}isEqual(e){return e instanceof vv&&this.Fc===e.Fc}}function GV(t,e,n,r){const s=t.Cc(1,e,n);_v("Data must be an object, but it was:",s,r);const i=[],o=Yn.empty();fo(r,(a,u)=>{const d=xv(e,a,n);u=Et(u);const h=s.yc(d);if(u instanceof wp)i.push(d);else{const p=Jc(u,h);p!=null&&(i.push(d),o.set(d,p))}});const l=new gr(i);return new GR(o,l,s.fieldTransforms)}function KV(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Xy(e,r,n)],a=[s];if(i.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(Xy(e,i[p])),a.push(i[p+1]);const u=[],d=Yn.empty();for(let p=l.length-1;p>=0;--p)if(!YR(u,l[p])){const g=l[p];let w=a[p];w=Et(w);const x=o.yc(g);if(w instanceof wp)u.push(g);else{const E=Jc(w,x);E!=null&&(u.push(g),d.set(g,E))}}const h=new gr(u);return new GR(d,h,o.fieldTransforms)}function JV(t,e,n,r=!1){return Jc(n,t.Cc(r?4:3,e))}function Jc(t,e){if(XR(t=Et(t)))return _v("Unsupported field value:",e,t),QR(t,e);if(t instanceof Kc)return function(r,s){if(!KR(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let a=Jc(l,s.wc(o));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ft.fromDate(r);return{timestampValue:nf(s.serializer,i)}}if(r instanceof ft){const i=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nf(s.serializer,i)}}if(r instanceof Es)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rr)return{bytesValue:yR(s.serializer,r._byteString)};if(r instanceof Rt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof bs)return function(o,l){return{mapValue:{fields:{[qI]:{stringValue:HI},[Zh]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Jw(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${tp(r)}`)}(t,e)}function QR(t,e){const n={};return UI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(t,(r,s)=>{const i=Jc(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function XR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof Es||t instanceof Rr||t instanceof Rt||t instanceof Kc||t instanceof bs)}function _v(t,e,n){if(!XR(n)||!jI(n)){const r=tp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Xy(t,e,n){if((e=Et(e))instanceof gp)return e._internalPath;if(typeof e=="string")return xv(t,e);throw lf("Field path arguments must be of type string or ",t,!1,void 0,n)}const QV=new RegExp("[~\\*/\\[\\]]");function xv(t,e,n){if(e.search(QV)>=0)throw lf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gp(...e.split("."))._internalPath}catch{throw lf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let a="";return(i||o)&&(a+=" (found",i&&(a+=` in field ${r}`),o&&(a+=` in document ${s}`),a+=")"),new ce(J.INVALID_ARGUMENT,l+t+a)}function YR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XV extends ZR{data(){return super.data()}}function vp(t,e){return typeof e=="string"?xv(t,e):e instanceof gp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ev{}class bv extends Ev{}function Xs(t,e,...n){let r=[];e instanceof Ev&&r.push(e),r=r.concat(n),function(i){const o=i.filter(a=>a instanceof Sv).length,l=i.filter(a=>a instanceof _p).length;if(o>1||o>0&&l>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class _p extends bv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _p(e,n,r)}_apply(e){const n=this._parse(e);return n2(e._query,n),new ri(e.firestore,e.converter,Vy(e._query,n))}_parse(e){const n=yp(e.firestore);return function(i,o,l,a,u,d,h){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){rS(h,d);const w=[];for(const x of h)w.push(nS(a,i,x));p={arrayValue:{values:w}}}else p=nS(a,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||rS(h,d),p=JV(l,o,h,d==="in"||d==="not-in");return Ht.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Yy(t,e,n){const r=e,s=vp("where",t);return _p._create(s,r,n)}class Sv extends Ev{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const a of l)n2(o,a),o=Vy(o,a)}(e._query,n),new ri(e.firestore,e.converter,Vy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tv extends bv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Tv(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wc(i,o)}(e._query,this._field,this._direction);return new ri(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Dl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ys(t,e="asc"){const n=e,r=vp("orderBy",t);return Tv._create(r,n)}class Av extends bv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Av(e,n,r)}_apply(e){return new ri(e.firestore,e.converter,tf(e._query,this._limit,this._limitType))}}function t2(t){return r5("limit",t),Av._create("limit",t,"F")}function nS(t,e,n){if(typeof(n=Et(n))=="string"){if(n==="")throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZI(e)&&n.indexOf("/")!==-1)throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ut.fromString(n));if(!be.isDocumentKey(r))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wb(t,new be(r))}if(n instanceof Rt)return wb(t,n._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tp(n)}.`)}function rS(t,e){if(!Array.isArray(t)||t.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function n2(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YV{convertValue(e,n="none"){switch(eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Zh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>jt(o.doubleValue));return new bs(n)}convertGeoPoint(e){return new Es(jt(e.latitude),jt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){const n=Yi(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ut.fromString(e);Ze(bR(r),9688,{name:e});const s=new gc(r.get(1),r.get(3)),i=new be(r.popFirst(5));return s.isEqual(n)||Ks(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class wu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oo extends ZR{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Oo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Oo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oo._jsonSchema={type:Wt("string",Oo._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class ch extends Oo{data(e={}){return super.data(e)}}class jo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new wu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ch(this._firestore,this._userDataWriter,r.key,r,new wu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const a=new ch(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wu(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const a=new ch(s._firestore,s._userDataWriter,l.doc.key,l.doc,new wu(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:ZV(l.type),doc:a,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t){t=ir(t,Rt);const e=ir(t.firestore,Qs);return FV(mp(e),t._key).then(n=>i2(e,t,n))}jo._jsonSchemaVersion="firestore/querySnapshot/1.0",jo._jsonSchema={type:Wt("string",jo._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class Cv extends YV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}}function s2(t){t=ir(t,ri);const e=ir(t.firestore,Qs),n=mp(e),r=new Cv(e);return e2(t._query),BV(n,t._query).then(s=>new jo(e,r,t,s))}function Qc(t,e,n){t=ir(t,Rt);const r=ir(t.firestore,Qs),s=r2(t.converter,e,n);return xp(r,[JR(yp(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Or.none())])}function gl(t,e,n,...r){t=ir(t,Rt);const s=ir(t.firestore,Qs),i=yp(s);let o;return o=typeof(e=Et(e))=="string"||e instanceof gp?KV(i,"updateDoc",t._key,e,n,r):GV(i,"updateDoc",t._key,e),xp(s,[o.toMutation(t._key,Or.exists(!0))])}function kv(t){return xp(ir(t.firestore,Qs),[new Qw(t._key,Or.none())])}function bc(t,e){const n=ir(t.firestore,Qs),r=sn(t),s=r2(t.converter,e);return xp(n,[JR(yp(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Or.exists(!1))]).then(()=>r)}function xn(t,...e){var a,u,d;t=Et(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||tS(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(tS(e[r])){const h=e[r];e[r]=(a=h.next)==null?void 0:a.bind(h),e[r+1]=(u=h.error)==null?void 0:u.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let i,o,l;if(t instanceof Rt)o=ir(t.firestore,Qs),l=ip(t._key.path),i={next:h=>{e[r]&&e[r](i2(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=ir(t,ri);o=ir(h.firestore,Qs),l=h._query;const p=new Cv(o);i={next:g=>{e[r]&&e[r](new jo(o,p,h,g))},error:e[r+1],complete:e[r+2]},e2(t._query)}return function(p,g,w,x){const E=new gv(x),v=new fv(g,E,w);return p.asyncQueue.enqueueAndForget(async()=>cv(await af(p),v)),()=>{E.Nu(),p.asyncQueue.enqueueAndForget(async()=>dv(await af(p),v))}}(mp(o),l,s,i)}function xp(t,e){return function(r,s){const i=new Bs;return r.asyncQueue.enqueueAndForget(async()=>CV(await UV(r),s,i)),i.promise}(mp(t),e)}function i2(t,e,n){const r=n.docs.get(e._key),s=new Cv(t);return new Oo(t,s,e._key,r,new wu(n.hasPendingWrites,n.fromCache),e.converter)}function Zr(){return new wv("serverTimestamp")}function Sc(t){return new vv("increment",t)}(function(e,n=!0){(function(s){Rl=s})(kl),Ts(new Xr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Qs(new KF(r.getProvider("auth-internal")),new XF(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(u.options.projectId,d)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Mr(ib,ob,e),Mr(ib,ob,"esm2020")})();const yi={apiKey:"AIzaSyAYoY9qJ8pylIVX8w0vpqtMeEOb0cZLB7k",authDomain:"pandora-96c06.firebaseapp.com",projectId:"pandora-96c06",storageBucket:"pandora-96c06.firebasestorage.app",messagingSenderId:"300656853622",appId:"1:300656853622:web:db583e3de86f53ad5d1557",measurementId:"G-YD2B1NSMMN"};function e8(){return yi.apiKey&&yi.authDomain&&yi.projectId&&yi.storageBucket&&yi.messagingSenderId&&yi.appId||console.warn("Firebase config is incomplete. Check your .env VITE_FIREBASE_* values."),Gj().length?Jf():bk(yi)}const Iv=e8(),Ns=_6(Iv),Ue=$V(Iv);typeof window<"u"&&yi.measurementId&&$F().then(t=>{t&&BF(Iv)}).catch(()=>{});const t8=new Ps;function n8(t){return t?{uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL}:null}let sS=!1;const Fr=Al(t=>(sS||(sS=!0,lU(Ns,e=>{t({user:n8(e),loading:!1,initialized:!0,error:null})})),{user:null,loading:!0,error:null,initialized:!1,async signInWithGoogle(){t({loading:!0,error:null});try{await IU(Ns,t8)}catch(e){const n=e instanceof Error?e.message:"Google sign-in failed.";t({error:n})}finally{t({loading:!1})}},async loginWithEmail(e,n){t({loading:!0,error:null});try{await rU(Ns,e,n)}catch(r){const s=r instanceof Error?r.message:"Email sign-in failed.";t({error:s})}finally{t({loading:!1})}},async registerWithEmail(e,n,r){t({loading:!0,error:null});try{const s=await nU(Ns,e,n);r&&await iU(s.user,{displayName:r})}catch(s){const i=s instanceof Error?s.message:"Signup failed.";t({error:i})}finally{t({loading:!1})}},async logout(){t({loading:!0,error:null});try{await uU(Ns)}catch(e){const n=e instanceof Error?e.message:"Logout failed.";t({error:n})}finally{t({loading:!1})}},setError(e){t({error:e})}})),o2=Al(t=>({profile:null,setProfile:e=>t({profile:e})}));function kt(...t){return t.filter(Boolean).join(" ")}const r8={sm:"h-8 w-8",md:"h-12 w-12"};function s8(t){return t.length<=2?"*".repeat(t.length):`${t.slice(0,2)}${"*".repeat(Math.max(3,t.length-2))}`}function Qo({username:t,src:e,size:n="md",className:r,showName:s=!1}){const i=Nr(a=>a.isBlind()),o=i?s8(t):t,l=r8[n];return f.jsxs("div",{className:kt("flex items-center gap-3",r),children:[f.jsx("div",{className:kt("overflow-hidden border border-pandora-border rounded-none bg-pandora-surface flex items-center justify-center",l),children:i?f.jsx("div",{className:"w-full h-full bg-gradient-to-br from-pandora-surface via-pandora-bg to-pandora-surface animate-pulse"}):e?f.jsx("img",{src:e,alt:t,className:"w-full h-full object-cover"}):f.jsx("div",{className:"flex flex-col items-center justify-center text-[10px] text-pandora-muted font-mono",children:f.jsx("span",{children:t[0]??"?"})})}),s&&f.jsx("span",{className:"text-sm font-medium text-pandora-text font-sans",children:o})]})}function Zy({stats:t}){const n=t.map(r=>Math.max(0,Math.min(100,r))).map((r,s)=>{const i=Math.PI*2/6*s-Math.PI/2,o=80*(r/100),l=100+o*Math.cos(i),a=100+o*Math.sin(i);return`${l},${a}`}).join(" ");return f.jsx("div",{className:"bg-[linear-gradient(#1a1a1a_1px,transparent_1px),linear-gradient(90deg,#1a1a1a_1px,transparent_1px)] bg-[length:18px_18px] p-4",children:f.jsxs("svg",{viewBox:"0 0 200 200",className:"w-full h-48",children:[f.jsx("polygon",{points:"100,20 166,60 166,140 100,180 34,140 34,60",fill:"none",stroke:"#39FF14",strokeWidth:"1.5"}),f.jsx("polygon",{points:"100,40 150,70 150,130 100,160 50,130 50,70",fill:"none",stroke:"#39FF14",strokeWidth:"1"}),f.jsx("polygon",{points:n,fill:"rgba(57,255,20,0.12)",stroke:"#39FF14",strokeWidth:"2"})]})})}function iS({label:t="Drop Sample Video Here",description:e,accept:n="video/*",onUpload:r,onUploaded:s,onFileSelected:i,deferUpload:o=!1,onFilesSelected:l,multiple:a=!1}){var M,P;const[u,d]=I.useState([]),[h,p]=I.useState(null),[g,w]=I.useState(!1),[x,E]=I.useState(!1),[v,_]=I.useState(null),[b,O]=I.useState(null),V=I.useRef(null),$=u[0]??null,C=I.useCallback(()=>{h&&URL.revokeObjectURL(h)},[h]);I.useEffect(()=>()=>C(),[C]);const T=I.useCallback(K=>{C(),_(null),O(null);const H=K?Array.from(K):[],de=H[0]??null;d(H),i==null||i(de),l==null||l(H),p(de?URL.createObjectURL(de):null)},[C,i,l]),R=K=>{var H;K.preventDefault(),w(!1),(H=K.dataTransfer.files)!=null&&H.length&&T(K.dataTransfer.files)},A=K=>{var H;(H=K.target.files)!=null&&H.length&&T(K.target.files)},N=async()=>{if($){E(!0),O(null);try{const K=await r($);_(K),s==null||s(K)}catch(K){const H=K instanceof Error?K.message:"Upload failed. Try again.";O(H)}finally{E(!1)}}};return f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{onClick:()=>{var K;return(K=V.current)==null?void 0:K.click()},onDragOver:K=>{K.preventDefault(),w(!0)},onDragLeave:()=>w(!1),onDrop:R,className:`cursor-pointer border-2 border-dashed rounded-sm p-6 text-center transition ${g?"border-pandora-neon bg-pandora-bg":"border-pandora-border hover:border-pandora-neon"}`,children:[f.jsx("input",{ref:V,type:"file",accept:n,className:"hidden",multiple:a,onChange:A}),f.jsxs("div",{className:"flex flex-col items-center gap-2 text-pandora-text",children:[f.jsx(qO,{className:"text-pandora-neon",size:24}),f.jsx("p",{className:"text-sm font-semibold uppercase",children:t}),f.jsxs("p",{className:"text-xs text-pandora-muted font-mono",children:["Click or drag ",a?"files":"a file"," to begin"]}),e&&f.jsx("p",{className:"text-[11px] text-pandora-muted",children:e})]})]}),$&&f.jsxs("div",{className:"border border-pandora-border bg-pandora-bg rounded-sm p-3 space-y-3",children:[f.jsxs("div",{className:"flex gap-3 items-center",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-semibold text-pandora-text",children:$.name}),f.jsxs("p",{className:"text-xs text-pandora-muted",children:[($.size/(1024*1024)).toFixed(1)," MB  ",$.type||"video"]}),a&&u.length>1&&f.jsxs("p",{className:"text-[11px] text-pandora-muted",children:[u.length-1," more file(s) selected"]})]}),!o&&f.jsx("button",{onClick:N,disabled:x,className:"px-4 py-2 border border-pandora-neon text-pandora-neon text-xs uppercase rounded-sm hover:bg-pandora-neon hover:text-pandora-bg transition disabled:opacity-60 disabled:cursor-not-allowed",children:x?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(Jt,{className:"animate-spin",size:14}),"Uploading..."]}):"Upload"})]}),h&&f.jsx("div",{className:"relative w-full overflow-hidden rounded-sm border border-pandora-border bg-pandora-surface",children:(M=$==null?void 0:$.type)!=null&&M.startsWith("image")?f.jsx("img",{src:h,alt:$.name,className:"w-full h-56 object-cover"}):(P=$==null?void 0:$.type)!=null&&P.startsWith("video")?f.jsx("video",{src:h,className:"w-full h-56 object-cover",controls:!0,muted:!0,playsInline:!0}):f.jsx("div",{className:"h-24 flex items-center justify-center text-sm text-pandora-muted",children:$==null?void 0:$.name})}),f.jsxs("div",{className:"min-h-[20px]",children:[o&&!v&&f.jsx("p",{className:"text-xs text-pandora-muted",children:"Will upload when you submit."}),x&&!o&&f.jsx("p",{className:"text-xs text-pandora-muted",children:"Uploading to MinIO..."}),v&&!o&&f.jsxs("p",{className:"flex items-center gap-2 text-xs text-pandora-neon",children:[f.jsx(ek,{size:14})," Ready to submit"]}),b&&f.jsxs("p",{className:"flex items-center gap-2 text-xs text-pandora-pink",children:[f.jsx(CO,{size:14})," ",b]})]})]})]})}const i8=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,n){var r;(r=t.httpHandler)==null||r.updateHttpClientConfig(e,n)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),o8=t=>({httpHandler:t.httpHandler()});var Tc;(function(t){t.HTTP="http",t.HTTPS="https"})(Tc||(Tc={}));var uf;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(uf||(uf={}));const e0="__smithy_context";class Xt{constructor(e){j(this,"method");j(this,"protocol");j(this,"hostname");j(this,"port");j(this,"path");j(this,"query");j(this,"headers");j(this,"username");j(this,"password");j(this,"fragment");j(this,"body");this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const n=new Xt({...e,headers:{...e.headers}});return n.query&&(n.query=a8(n.query)),n}static isInstance(e){if(!e)return!1;const n=e;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return Xt.clone(this)}}function a8(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return{...e,[n]:Array.isArray(r)?[...r]:r}},{})}class Xo{constructor(e){j(this,"statusCode");j(this,"reason");j(this,"headers");j(this,"body");this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const n=e;return typeof n.statusCode=="number"&&typeof n.headers=="object"}}function l8(t){return e=>async n=>{var s,i,o,l;const{request:r}=n;if(t.expectContinueHeader!==!1&&Xt.isInstance(r)&&r.body&&t.runtime==="node"&&((i=(s=t.requestHandler)==null?void 0:s.constructor)==null?void 0:i.name)!=="FetchHttpHandler"){let a=!0;if(typeof t.expectContinueHeader=="number")try{a=(Number((o=r.headers)==null?void 0:o["content-length"])??((l=t.bodyLengthChecker)==null?void 0:l.call(t,r.body))??1/0)>=t.expectContinueHeader}catch{}else a=!!t.expectContinueHeader;a&&(r.headers.Expect="100-continue")}return e({...n,request:r})}}const u8={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},c8=t=>({applyToStack:e=>{e.add(l8(t),u8)}}),yl={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},d8=yl.WHEN_SUPPORTED,Bm={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},h8=yl.WHEN_SUPPORTED;var ot;(function(t){t.MD5="MD5",t.CRC32="CRC32",t.CRC32C="CRC32C",t.CRC64NVME="CRC64NVME",t.SHA1="SHA1",t.SHA256="SHA256"})(ot||(ot={}));var oS;(function(t){t.HEADER="header",t.TRAILER="trailer"})(oS||(oS={}));const t0=ot.CRC32;function f8(t,e,n){return t.$source||(t.$source={}),t.$source[e]=n,t}function zt(t,e,n){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=n}const aS=t=>{var e,n;return Xo.isInstance(t)?((e=t.headers)==null?void 0:e.date)??((n=t.headers)==null?void 0:n.Date):void 0},Rv=t=>new Date(Date.now()+t),p8=(t,e)=>Math.abs(Rv(e).getTime()-t)>=3e5,lS=(t,e)=>{const n=Date.parse(t);return p8(n,e)?n-Date.now():e},Lu=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},a2=async t=>{var u,d,h;const e=Lu("context",t.context),n=Lu("config",t.config),r=(h=(d=(u=e.endpointV2)==null?void 0:u.properties)==null?void 0:d.authSchemes)==null?void 0:h[0],i=await Lu("signer",n.signer)(r),o=t==null?void 0:t.signingRegion,l=t==null?void 0:t.signingRegionSet,a=t==null?void 0:t.signingName;return{config:n,signer:i,signingRegion:o,signingRegionSet:l,signingName:a}};class l2{async sign(e,n,r){var h;if(!Xt.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await a2(r),{config:i,signer:o}=s;let{signingRegion:l,signingName:a}=s;const u=r.context;if(((h=u==null?void 0:u.authSchemes)==null?void 0:h.length)??!1){const[p,g]=u.authSchemes;(p==null?void 0:p.name)==="sigv4a"&&(g==null?void 0:g.name)==="sigv4"&&(l=(g==null?void 0:g.signingRegion)??l,a=(g==null?void 0:g.signingName)??a)}return await o.sign(e,{signingDate:Rv(i.systemClockOffset),signingRegion:l,signingService:a})}errorHandler(e){return n=>{const r=n.ServerTime??aS(n.$response);if(r){const s=Lu("config",e.config),i=s.systemClockOffset;s.systemClockOffset=lS(r,s.systemClockOffset),s.systemClockOffset!==i&&n.$metadata&&(n.$metadata.clockSkewCorrected=!0)}throw n}}successHandler(e,n){const r=aS(e);if(r){const s=Lu("config",n.config);s.systemClockOffset=lS(r,s.systemClockOffset)}}}class m8 extends l2{async sign(e,n,r){var p;if(!Xt.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:s,signer:i,signingRegion:o,signingRegionSet:l,signingName:a}=await a2(r),d=(await((p=s.sigv4aSigningRegionSet)==null?void 0:p.call(s))??l??[o]).join(",");return await i.sign(e,{signingDate:Rv(s.systemClockOffset),signingRegion:d,signingService:a})}}const mo=t=>t[e0]||(t[e0]={}),Jr=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},g8=(t,e)=>{if(!e||e.length===0)return t;const n=[];for(const r of e)for(const s of t)s.schemeId.split("#")[1]===r&&n.push(s);for(const r of t)n.find(({schemeId:s})=>s===r.schemeId)||n.push(r);return n};function y8(t){const e=new Map;for(const n of t)e.set(n.schemeId,n);return e}const w8=(t,e)=>(n,r)=>async s=>{var h;const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,r,s.input)),o=t.authSchemePreference?await t.authSchemePreference():[],l=g8(i,o),a=y8(t.httpAuthSchemes),u=mo(r),d=[];for(const p of l){const g=a.get(p.schemeId);if(!g){d.push(`HttpAuthScheme \`${p.schemeId}\` was not enabled for this service.`);continue}const w=g.identityProvider(await e.identityProviderConfigProvider(t));if(!w){d.push(`HttpAuthScheme \`${p.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:x={},signingProperties:E={}}=((h=p.propertiesExtractor)==null?void 0:h.call(p,t,r))||{};p.identityProperties=Object.assign(p.identityProperties||{},x),p.signingProperties=Object.assign(p.signingProperties||{},E),u.selectedHttpAuthScheme={httpAuthOption:p,identity:await w(p.identityProperties),signer:g.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(d.join(`
`));return n(s)},v8={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},_8=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n})=>({applyToStack:r=>{r.addRelativeTo(w8(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:n}),v8)}}),x8={name:"serializerMiddleware"},E8=t=>e=>{throw e},b8=(t,e)=>{},S8=t=>(e,n)=>async r=>{if(!Xt.isInstance(r.request))return e(r);const i=mo(n).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:l,signer:a}=i,u=await e({...r,request:await a.sign(r.request,l,o)}).catch((a.errorHandler||E8)(o));return(a.successHandler||b8)(u.response,o),u},u2={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},T8=t=>({applyToStack:e=>{e.addRelativeTo(S8(),u2)}}),Xa=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},c2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uS=Object.entries(c2).reduce((t,[e,n])=>(t[n]=Number(e),t),{}),A8=c2.split(""),Ya=6,Uu=8,C8=63,wl=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const n=new ArrayBuffer(e),r=new DataView(n);for(let s=0;s<t.length;s+=4){let i=0,o=0;for(let u=s,d=s+3;u<=d;u++)if(t[u]!=="="){if(!(t[u]in uS))throw new TypeError(`Invalid character ${t[u]} in base64 string.`);i|=uS[t[u]]<<(d-u)*Ya,o+=Ya}else i>>=Ya;const l=s/4*3;i>>=o%Uu;const a=Math.floor(o/Uu);for(let u=0;u<a;u++){const d=(a-u-1)*Uu;r.setUint8(l+u,(i&255<<d)>>d)}}return new Uint8Array(n)},so=t=>new TextEncoder().encode(t),vl=t=>typeof t=="string"?so(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),Ol=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function Yo(t){let e;typeof t=="string"?e=so(t):e=t;const n=typeof e=="object"&&typeof e.length=="number",r=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!n&&!r)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let i=0;i<e.length;i+=3){let o=0,l=0;for(let u=i,d=Math.min(i+3,e.length);u<d;u++)o|=e[u]<<(d-u-1)*Uu,l+=Uu;const a=Math.ceil(l/Ya);o<<=a*Ya-l;for(let u=1;u<=a;u++){const d=(a-u)*Ya;s+=A8[(o&C8<<d)>>d]}s+="==".slice(0,4-a)}return s}class Lo extends Uint8Array{static fromString(e,n="utf-8"){if(typeof e=="string")return n==="base64"?Lo.mutate(wl(e)):Lo.mutate(so(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,Lo.prototype),e}transformToString(e="utf-8"){return e==="base64"?Yo(this):Ol(this)}}const k8=typeof ReadableStream=="function"?ReadableStream:function(){};class I8 extends k8{}const n0=t=>{var e;return typeof ReadableStream=="function"&&(((e=t==null?void 0:t.constructor)==null?void 0:e.name)===ReadableStream.name||t instanceof ReadableStream)},R8=({expectedChecksum:t,checksum:e,source:n,checksumSourceLocation:r,base64Encoder:s})=>{var a;if(!n0(n))throw new Error(`@smithy/util-stream: unsupported source type ${((a=n==null?void 0:n.constructor)==null?void 0:a.name)??n} in ChecksumStream.`);const i=s??Yo;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const o=new TransformStream({start(){},async transform(u,d){e.update(u),d.enqueue(u)},async flush(u){const d=await e.digest(),h=i(d);if(t!==h){const p=new Error(`Checksum mismatch: expected "${t}" but received "${h}" in response header "${r}".`);u.error(p)}else u.terminate()}});n.pipeThrough(o);const l=o.readable;return Object.setPrototypeOf(l,I8.prototype),l};class P8{constructor(e){j(this,"allocByteArray");j(this,"byteLength",0);j(this,"byteArrays",[]);this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){const r=this.byteArrays[0];return this.reset(),r}const e=this.allocByteArray(this.byteLength);let n=0;for(let r=0;r<this.byteArrays.length;++r){const s=this.byteArrays[r];e.set(s,n),n+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}}function N8(t,e,n){const r=t.getReader();let s=!1,i=0;const o=["",new P8(u=>new Uint8Array(u))];let l=-1;const a=async u=>{const{value:d,done:h}=await r.read(),p=d;if(h){if(l!==-1){const g=Vm(o,l);Fu(g)>0&&u.enqueue(g)}u.close()}else{const g=O8(p,!1);if(l!==g&&(l>=0&&u.enqueue(Vm(o,l)),l=g),l===-1){u.enqueue(p);return}const w=Fu(p);i+=w;const x=Fu(o[l]);if(w>=e&&x===0)u.enqueue(p);else{const E=M8(o,l,p);!s&&i>e*2&&(s=!0,n==null||n.warn(`@smithy/util-stream - stream chunk size ${w} is below threshold of ${e}, automatically buffering.`)),E>=e?u.enqueue(Vm(o,l)):await a(u)}}};return new ReadableStream({pull:a})}const D8=N8;function M8(t,e,n){switch(e){case 0:return t[0]+=n,Fu(t[0]);case 1:case 2:return t[e].push(n),Fu(t[e])}}function Vm(t,e){switch(e){case 0:const n=t[0];return t[0]="",n;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function Fu(t){return(t==null?void 0:t.byteLength)??(t==null?void 0:t.length)??0}function O8(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}const j8=(t,e)=>{const{base64Encoder:n,bodyLengthChecker:r,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=e,l=n!==void 0&&r!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,a=l?o(s,t):void 0,u=t.getReader();return new ReadableStream({async pull(d){const{value:h,done:p}=await u.read();if(p){if(d.enqueue(`0\r
`),l){const g=n(await a);d.enqueue(`${i}:${g}\r
`),d.enqueue(`\r
`)}d.close()}else d.enqueue(`${(r(h)||0).toString(16)}\r
${h}\r
`)}})};async function L8(t,e){let n=0;const r=[],s=t.getReader();let i=!1;for(;!i;){const{done:a,value:u}=await s.read();if(u&&(r.push(u),n+=(u==null?void 0:u.byteLength)??0),n>=e)break;i=a}s.releaseLock();const o=new Uint8Array(Math.min(e,n));let l=0;for(const a of r){if(a.byteLength>o.byteLength-l){o.set(a.subarray(0,o.byteLength-l),l);break}else o.set(a,l);l+=a.length}return o}const Uo=t=>encodeURIComponent(t).replace(/[!'()*]/g,U8),U8=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function F8(t){const e=[];for(let n of Object.keys(t).sort()){const r=t[n];if(n=Uo(n),Array.isArray(r))for(let s=0,i=r.length;s<i;s++)e.push(`${n}=${Uo(r[s])}`);else{let s=n;(r||typeof r=="string")&&(s+=`=${Uo(r)}`),e.push(s)}}return e.join("&")}function cS(t,e){return new Request(t,e)}function B8(t=0){return new Promise((e,n)=>{t&&setTimeout(()=>{const r=new Error(`Request did not complete within ${t} ms`);r.name="TimeoutError",n(r)},t)})}const $m={supported:void 0};class Pv{constructor(e){j(this,"config");j(this,"configProvider");typeof e=="function"?this.configProvider=e().then(n=>n||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),$m.supported===void 0&&($m.supported=typeof Request<"u"&&"keepalive"in cS("https://[::1]"))}static create(e){return typeof(e==null?void 0:e.handle)=="function"?e:new Pv(e)}destroy(){}async handle(e,{abortSignal:n,requestTimeout:r}={}){var _;this.config||(this.config=await this.configProvider);const s=r??this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(n!=null&&n.aborted){const b=new Error("Request aborted");return b.name="AbortError",Promise.reject(b)}let l=e.path;const a=F8(e.query||{});a&&(l+=`?${a}`),e.fragment&&(l+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){const b=e.username??"",O=e.password??"";u=`${b}:${O}@`}const{port:d,method:h}=e,p=`${e.protocol}//${u}${e.hostname}${d?`:${d}`:""}${l}`,g=h==="GET"||h==="HEAD"?void 0:e.body,w={body:g,headers:new Headers(e.headers),method:h,credentials:o};(_=this.config)!=null&&_.cache&&(w.cache=this.config.cache),g&&(w.duplex="half"),typeof AbortController<"u"&&(w.signal=n),$m.supported&&(w.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(w,this.config.requestInit(e));let x=()=>{};const E=cS(p,w),v=[fetch(E).then(b=>{const O=b.headers,V={};for(const C of O.entries())V[C[0]]=C[1];return b.body!=null?{response:new Xo({headers:V,reason:b.statusText,statusCode:b.status,body:b.body})}:b.blob().then(C=>({response:new Xo({headers:V,reason:b.statusText,statusCode:b.status,body:C})}))}),B8(s)];return n&&v.push(new Promise((b,O)=>{const V=()=>{const $=new Error("Request aborted");$.name="AbortError",O($)};if(typeof n.addEventListener=="function"){const $=n;$.addEventListener("abort",V,{once:!0}),x=()=>$.removeEventListener("abort",V)}else n.onabort=V})),Promise.race(v).finally(x)}updateHttpClientConfig(e,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[e]=n,r))}httpHandlerConfigs(){return this.config??{}}}const d2=async t=>{var e;return typeof Blob=="function"&&t instanceof Blob||((e=t.constructor)==null?void 0:e.name)==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):V8(t):$8(t)};async function V8(t){const e=await z8(t),n=wl(e);return new Uint8Array(n)}async function $8(t){const e=[],n=t.getReader();let r=!1,s=0;for(;!r;){const{done:l,value:a}=await n.read();a&&(e.push(a),s+=a.length),r=l}const i=new Uint8Array(s);let o=0;for(const l of e)i.set(l,o),o+=l.length;return i}function z8(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(new Error("Reader aborted too early"));const s=r.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;e(s.substring(o))},r.onabort=()=>n(new Error("Read aborted")),r.onerror=()=>n(r.error),r.readAsDataURL(t)})}const h2={},r0={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),h2[t]=e,r0[e]=t}function f2(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2){const r=t.slice(n,n+2).toLowerCase();if(r in r0)e[n/2]=r0[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return e}function Zn(t){let e="";for(let n=0;n<t.byteLength;n++)e+=h2[t[n]];return e}const dS="The stream has already been transformed.",p2=t=>{var s,i;if(!hS(t)&&!n0(t)){const o=((i=(s=t==null?void 0:t.__proto__)==null?void 0:s.constructor)==null?void 0:i.name)||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let e=!1;const n=async()=>{if(e)throw new Error(dS);return e=!0,await d2(t)},r=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(t,{transformToByteArray:n,transformToString:async o=>{const l=await n();if(o==="base64")return Yo(l);if(o==="hex")return Zn(l);if(o===void 0||o==="utf8"||o==="utf-8")return Ol(l);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(l);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(dS);if(e=!0,hS(t))return r(t);if(n0(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})},hS=t=>typeof Blob=="function"&&t instanceof Blob;async function q8(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}const Od=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Lo.mutate(t);if(!t)return Lo.mutate(new Uint8Array);const n=e.streamCollector(t);return Lo.mutate(await n)};function fS(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}const zm=t=>typeof t=="function"?t():t,m2=(t,e,n,r,s)=>({name:e,namespace:t,traits:n,input:r,output:s}),H8=t=>(e,n)=>async r=>{var h,p,g,w;const{response:s}=await e(r),{operationSchema:i}=mo(n),[,o,l,a,u,d]=i??[];try{const x=await t.protocol.deserializeResponse(m2(o,l,a,u,d),{...t,...n},s);return{response:s,output:x}}catch(x){if(Object.defineProperty(x,"$response",{value:s,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in x)){const E="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{x.message+=`
  `+E}catch{!n.logger||((p=(h=n.logger)==null?void 0:h.constructor)==null?void 0:p.name)==="NoOpLogger"?console.warn(E):(w=(g=n.logger)==null?void 0:g.warn)==null||w.call(g,E)}typeof x.$responseBodyText<"u"&&x.$response&&(x.$response.body=x.$responseBodyText);try{if(Xo.isInstance(s)){const{headers:v={}}=s,_=Object.entries(v);x.$metadata={httpStatusCode:s.statusCode,requestId:qm(/^x-[\w-]+-request-?id$/,_),extendedRequestId:qm(/^x-[\w-]+-id-2$/,_),cfId:qm(/^x-[\w-]+-cf-id$/,_)}}}catch{}}throw x}},qm=(t,e)=>(e.find(([n])=>n.match(t))||[void 0,void 0])[1],W8=t=>(e,n)=>async r=>{var p;const{operationSchema:s}=mo(n),[,i,o,l,a,u]=s??[],d=(p=n.endpointV2)!=null&&p.url&&t.urlParser?async()=>t.urlParser(n.endpointV2.url):t.endpoint,h=await t.protocol.serializeRequest(m2(i,o,l,a,u),r.input,{...t,...n,endpoint:d});return e({...r,request:h})},G8={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},K8={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function J8(t){return{applyToStack:e=>{e.add(W8(t),K8),e.add(H8(t),G8),t.protocol.setSerdeContext(t)}}}function Oa(t){if(typeof t=="object")return t;t=t|0;const e={};let n=0;for(const r of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>n++&1)===1&&(e[r]=1);return e}const xi=class xi{constructor(e,n){j(this,"ref");j(this,"memberName");j(this,"symbol",xi.symbol);j(this,"name");j(this,"schema");j(this,"_isMemberSchema");j(this,"traits");j(this,"memberTraits");j(this,"normalizedTraits");this.ref=e,this.memberName=n;const r=[];let s=e,i=e;for(this._isMemberSchema=!1;Hm(s);)r.push(s[1]),s=s[0],i=zm(s),this._isMemberSchema=!0;if(r.length>0){this.memberTraits={};for(let o=r.length-1;o>=0;--o){const l=r[o];Object.assign(this.memberTraits,Oa(l))}}else this.memberTraits=0;if(i instanceof xi){const o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=n??i.memberName;return}if(this.schema=zm(i),Q8(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!n)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){const n=this.prototype.isPrototypeOf(e);return!n&&typeof e=="object"&&e!==null?e.symbol===this.symbol:n}static of(e){const n=zm(e);if(n instanceof xi)return n;if(Hm(n)){const[r,s]=n;if(r instanceof xi)return Object.assign(r.getMergedTraits(),Oa(s)),r;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new xi(n)}getSchema(){const e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){const{name:n}=this;return!e&&n&&n.includes("#")?n.split("#")[1]:n||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){const e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){const e=this.getSchema();return e[0]===3||e[0]===-3}isBlobSchema(){const e=this.getSchema();return e===21||e===42}isTimestampSchema(){const e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){const{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){const e=i=>(i&4)===4||!!(i!=null&&i.idempotencyToken),{normalizedTraits:n,traits:r,memberTraits:s}=this;return e(n)||e(r)||e(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Oa(this.memberTraits)}getOwnTraits(){return Oa(this.traits)}getKeySchema(){const[e,n]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!n)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const r=this.getSchema(),s=e?15:r[4]??0;return iu([s,0],"key")}getValueSchema(){const e=this.getSchema(),[n,r,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(r||s)?e[3+e[0]]:n?15:void 0;if(i!=null)return iu([i,0],r?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){const n=this.getSchema();if(this.isStructSchema()&&n[4].includes(e)){const r=n[4].indexOf(e),s=n[5][r];return iu(Hm(s)?s:[s,0],e)}if(this.isDocumentSchema())return iu([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){const e={};try{for(const[n,r]of this.structIterator())e[n]=r}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(const[e,n]of this.structIterator())if(n.isStreaming()&&n.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const e=this.getSchema();for(let n=0;n<e[4].length;++n)yield[e[4][n],iu([e[5][n],0],e[4][n])]}};j(xi,"symbol",Symbol.for("@smithy/nor"));let Nt=xi;function iu(t,e){if(t instanceof Nt)return Object.assign(t,{memberName:e,_isMemberSchema:!0});const n=Nt;return new n(t,e)}const Hm=t=>Array.isArray(t)&&t.length===2,Q8=t=>Array.isArray(t)&&t.length>=5,fs=class fs{constructor(e,n=new Map,r=new Map){j(this,"namespace");j(this,"schemas");j(this,"exceptions");this.namespace=e,this.schemas=n,this.exceptions=r}static for(e){return fs.registries.has(e)||fs.registries.set(e,new fs(e)),fs.registries.get(e)}register(e,n){const r=this.normalizeShapeId(e);fs.for(r.split("#")[0]).schemas.set(r,n)}getSchema(e){const n=this.normalizeShapeId(e);if(!this.schemas.has(n))throw new Error(`@smithy/core/schema - schema not found for ${n}`);return this.schemas.get(n)}registerError(e,n){const r=e,s=fs.for(r[1]);s.schemas.set(r[1]+"#"+r[2],r),s.exceptions.set(r,n)}getErrorCtor(e){const n=e;return fs.for(n[1]).exceptions.get(n)}getBaseException(){for(const e of this.exceptions.keys())if(Array.isArray(e)){const[,n,r]=e,s=n+"#"+r;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}};j(fs,"registries",new Map);let Yt=fs;const X8=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Y8=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function s0(t){const e=t.getUTCFullYear(),n=t.getUTCMonth(),r=t.getUTCDay(),s=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),l=t.getUTCSeconds(),a=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,d=o<10?`0${o}`:`${o}`,h=l<10?`0${l}`:`${l}`;return`${X8[r]}, ${a} ${Y8[n]} ${e} ${u}:${d}:${h} GMT`}const pS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),kn=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),Nv=()=>{if(pS)return pS();const t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,kn[t[0]]+kn[t[1]]+kn[t[2]]+kn[t[3]]+"-"+kn[t[4]]+kn[t[5]]+"-"+kn[t[6]]+kn[t[7]]+"-"+kn[t[8]]+kn[t[9]]+"-"+kn[t[10]]+kn[t[11]]+kn[t[12]]+kn[t[13]]+kn[t[14]]+kn[t[15]]},Di=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};Di.from=t=>t&&typeof t=="object"&&(t instanceof Di||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?Di(String(t)):Di(JSON.stringify(t));Di.fromObject=Di.from;function Z8(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}const Dv="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",Mv="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Ov="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",g2="(\\d?\\d)",y2="(\\d{4})",e9=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),t9=new RegExp(`^${Dv}, ${g2} ${Mv} ${y2} ${Ov} GMT$`),n9=new RegExp(`^${Dv}, ${g2}-${Mv}-(\\d\\d) ${Ov} GMT$`),r9=new RegExp(`^${Dv} ${Mv} ( [1-9]|\\d\\d) ${Ov} ${y2}$`),s9=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i9=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},o9=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");const e=e9.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);const[,n,r,s,i,o,l,,a,u]=e;Ds(r,1,12),Ds(s,1,31),Ds(i,0,23),Ds(o,0,59),Ds(l,0,60);const d=new Date(Date.UTC(Number(n),Number(r)-1,Number(s),Number(i),Number(o),Number(l),Number(a)?Math.round(parseFloat(`0.${a}`)*1e3):0));if(d.setUTCFullYear(Number(n)),u.toUpperCase()!="Z"){const[,h,p,g]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],w=h==="-"?1:-1;d.setTime(d.getTime()+w*(Number(p)*60*60*1e3+Number(g)*60*1e3))}return d},a9=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,n,r,s,i,o,l,a;if((a=t9.exec(t))?[,e,n,r,s,i,o,l]=a:(a=n9.exec(t))?([,e,n,r,s,i,o,l]=a,r=(Number(r)+1900).toString()):(a=r9.exec(t))&&([,n,e,s,i,o,l,r]=a),r&&o){const u=Date.UTC(Number(r),s9.indexOf(n),Number(e),Number(s),Number(i),Number(o),l?Math.round(parseFloat(`0.${l}`)*1e3):0);Ds(e,1,31),Ds(s,0,23),Ds(i,0,59),Ds(o,0,60);const d=new Date(u);return d.setUTCFullYear(Number(r)),d}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)};function Ds(t,e,n){const r=Number(t);if(r<e||r>n)throw new Error(`Value ${r} out of range [${e}, ${n}]`)}function l9(t,e,n){if(!Number.isInteger(n))throw new Error("Invalid number of delimiters ("+n+") for splitEvery.");const r=t.split(e),s=[];let i="";for(let o=0;o<r.length;o++)i===""?i=r[o]:i+=e+r[o],(o+1)%n===0&&(s.push(i),i="");return i!==""&&s.push(i),s}const w2=t=>{const e=t.length,n=[];let r=!1,s,i=0;for(let o=0;o<e;++o){const l=t[o];switch(l){case'"':s!=="\\"&&(r=!r);break;case",":r||(n.push(t.slice(i,o)),i=o+1);break}s=l}return n.push(t.slice(i)),n.map(o=>{o=o.trim();const l=o.length;return l<2?o:(o[0]==='"'&&o[l-1]==='"'&&(o=o.slice(1,l-1)),o.replace(/\\"/g,'"'))})},mS=/^-?\d*(\.\d+)?$/;class Ep{constructor(e,n){j(this,"string");j(this,"type");if(this.string=e,this.type=n,!mS.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;const n=e;return Ep.prototype.isPrototypeOf(e)||n.type==="bigDecimal"&&mS.test(n.string)}}const u9="modulepreload",c9=function(t){return"/"+t},gS={},d9=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(a=>{if(a=c9(a),a in gS)return;gS[a]=!0;const u=a.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":u9,u||(h.as="script"),h.crossOrigin="",h.href=a,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};class bp{constructor(){j(this,"serdeContext")}setSerdeContext(e){this.serdeContext=e}}class h9 extends bp{constructor(n){super();j(this,"options");this.options=n}getRequestType(){return Xt}getResponseType(){return Xo}setSerdeContext(n){this.serdeContext=n,this.serializer.setSerdeContext(n),this.deserializer.setSerdeContext(n),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(n)}updateServiceEndpoint(n,r){if("url"in r){n.protocol=r.url.protocol,n.hostname=r.url.hostname,n.port=r.url.port?Number(r.url.port):void 0,n.path=r.url.pathname,n.fragment=r.url.hash||void 0,n.username=r.url.username||void 0,n.password=r.url.password||void 0,n.query||(n.query={});for(const[s,i]of r.url.searchParams.entries())n.query[s]=i;return n}else return n.protocol=r.protocol,n.hostname=r.hostname,n.port=r.port?Number(r.port):void 0,n.path=r.path,n.query={...r.query},n}setHostPrefix(n,r,s){var l;const i=Nt.of(r.input),o=Oa(r.traits??{});if(o.endpoint){let a=(l=o.endpoint)==null?void 0:l[0];if(typeof a=="string"){const u=[...i.structIterator()].filter(([,d])=>d.getMergedTraits().hostLabel);for(const[d]of u){const h=s[d];if(typeof h!="string")throw new Error(`@smithy/core/schema - ${d} in input must be a string as hostLabel.`);a=a.replace(`{${d}}`,h)}n.hostname=a+n.hostname}}}deserializeMetadata(n){return{httpStatusCode:n.statusCode,requestId:n.headers["x-amzn-requestid"]??n.headers["x-amzn-request-id"]??n.headers["x-amz-request-id"],extendedRequestId:n.headers["x-amz-id-2"],cfId:n.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:n,requestSchema:r,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:n,requestSchema:r,initialRequest:s})}async deserializeEventStream({response:n,responseSchema:r,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:n,responseSchema:r,initialResponseContainer:s})}async loadEventStreamCapability(){const{EventStreamSerde:n}=await d9(async()=>{const{EventStreamSerde:r}=await import("./index-ClON5c1W.js");return{EventStreamSerde:r}},[]);return new n({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(n,r,s,i,o){return[]}getEventStreamMarshaller(){const n=this.serdeContext;if(!n.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return n.eventStreamMarshaller}}class f9 extends h9{async serializeRequest(e,n,r){const s={...n??{}},i=this.serializer,o={},l={},a=await r.endpoint(),u=Nt.of(e==null?void 0:e.input),d=u.getSchema();let h=!1,p;const g=new Xt({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:o,headers:l,body:void 0});if(a){this.updateServiceEndpoint(g,a),this.setHostPrefix(g,e,s);const w=Oa(e.traits);if(w.http){g.method=w.http[0];const[x,E]=w.http[1].split("?");g.path=="/"?g.path=x:g.path+=x;const v=new URLSearchParams(E??"");Object.assign(o,Object.fromEntries(v))}}for(const[w,x]of u.structIterator()){const E=x.getMergedTraits()??{},v=s[w];if(!(v==null&&!x.isIdempotencyToken()))if(E.httpPayload)x.isStreaming()?x.isStructSchema()?s[w]&&(p=await this.serializeEventStream({eventStream:s[w],requestSchema:u})):p=v:(i.write(x,v),p=i.flush()),delete s[w];else if(E.httpLabel){i.write(x,v);const _=i.flush();g.path.includes(`{${w}+}`)?g.path=g.path.replace(`{${w}+}`,_.split("/").map(fS).join("/")):g.path.includes(`{${w}}`)&&(g.path=g.path.replace(`{${w}}`,fS(_))),delete s[w]}else if(E.httpHeader)i.write(x,v),l[E.httpHeader.toLowerCase()]=String(i.flush()),delete s[w];else if(typeof E.httpPrefixHeaders=="string"){for(const[_,b]of Object.entries(v)){const O=E.httpPrefixHeaders+_;i.write([x.getValueSchema(),{httpHeader:O}],b),l[O.toLowerCase()]=i.flush()}delete s[w]}else E.httpQuery||E.httpQueryParams?(this.serializeQuery(x,v,o),delete s[w]):h=!0}return h&&s&&(i.write(d,s),p=i.flush()),g.headers=l,g.query=o,g.body=p,g}serializeQuery(e,n,r){const s=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(const[o,l]of Object.entries(n))if(!(o in r)){const a=e.getValueSchema();Object.assign(a.getMergedTraits(),{...i,httpQuery:o,httpQueryParams:void 0}),this.serializeQuery(a,l,r)}return}if(e.isListSchema()){const o=!!e.getMergedTraits().sparse,l=[];for(const a of n){s.write([e.getValueSchema(),i],a);const u=s.flush();(o||u!==void 0)&&l.push(u)}r[i.httpQuery]=l}else s.write([e,i],n),r[i.httpQuery]=s.flush()}async deserializeResponse(e,n,r){const s=this.deserializer,i=Nt.of(e.output),o={};if(r.statusCode>=300){const a=await Od(r.body,n);throw a.byteLength>0&&Object.assign(o,await s.read(15,a)),await this.handleError(e,n,r,o,this.deserializeMetadata(r)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(const a in r.headers){const u=r.headers[a];delete r.headers[a],r.headers[a.toLowerCase()]=u}const l=await this.deserializeHttpMessage(i,n,r,o);if(l.length){const a=await Od(r.body,n);if(a.byteLength>0){const u=await s.read(i,a);for(const d of l)o[d]=u[d]}}else l.discardResponseBody&&await Od(r.body,n);return o.$metadata=this.deserializeMetadata(r),o}async deserializeHttpMessage(e,n,r,s,i){let o;s instanceof Set?o=i:o=s;let l=!0;const a=this.deserializer,u=Nt.of(e),d=[];for(const[h,p]of u.structIterator()){const g=p.getMemberTraits();if(g.httpPayload){if(l=!1,p.isStreaming())p.isStructSchema()?o[h]=await this.deserializeEventStream({response:r,responseSchema:u}):o[h]=p2(r.body);else if(r.body){const x=await Od(r.body,n);x.byteLength>0&&(o[h]=await a.read(p,x))}}else if(g.httpHeader){const w=String(g.httpHeader).toLowerCase(),x=r.headers[w];if(x!=null)if(p.isListSchema()){const E=p.getValueSchema();E.getMergedTraits().httpHeader=w;let v;E.isTimestampSchema()&&E.getSchema()===4?v=l9(x,",",2):v=w2(x);const _=[];for(const b of v)_.push(await a.read(E,b.trim()));o[h]=_}else o[h]=await a.read(p,x)}else if(g.httpPrefixHeaders!==void 0){o[h]={};for(const[w,x]of Object.entries(r.headers))if(w.startsWith(g.httpPrefixHeaders)){const E=p.getValueSchema();E.getMergedTraits().httpHeader=w,o[h][w.slice(g.httpPrefixHeaders.length)]=await a.read(E,x)}}else g.httpResponseCode?o[h]=r.statusCode:d.push(h)}return d.discardResponseBody=l,d}}function jv(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();const{httpLabel:n,httpPrefixHeaders:r,httpHeader:s,httpQuery:i}=t.getMergedTraits();return(e.httpBindings?typeof r=="string"||s?6:i||n?5:void 0:void 0)??e.timestampFormat.default}class v2 extends bp{constructor(n){super();j(this,"settings");this.settings=n}read(n,r){var i;const s=Nt.of(n);if(s.isListSchema())return w2(r).map(o=>this.read(s.getValueSchema(),o));if(s.isBlobSchema())return(((i=this.serdeContext)==null?void 0:i.base64Decoder)??wl)(r);if(s.isTimestampSchema())switch(jv(s,this.settings)){case 5:return o9(r);case 6:return a9(r);case 7:return i9(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(s.isStringSchema()){const o=s.getMergedTraits().mediaType;let l=r;if(o)return s.getMergedTraits().httpHeader&&(l=this.base64ToUtf8(l)),(o==="application/json"||o.endsWith("+json"))&&(l=Di.from(l)),l}return s.isNumericSchema()?Number(r):s.isBigIntegerSchema()?BigInt(r):s.isBigDecimalSchema()?new Ep(r,"bigDecimal"):s.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(n){var r,s;return(((r=this.serdeContext)==null?void 0:r.utf8Encoder)??Ol)((((s=this.serdeContext)==null?void 0:s.base64Decoder)??wl)(n))}}class p9 extends bp{constructor(n,r){super();j(this,"codecDeserializer");j(this,"stringDeserializer");this.codecDeserializer=n,this.stringDeserializer=new v2(r)}setSerdeContext(n){this.stringDeserializer.setSerdeContext(n),this.codecDeserializer.setSerdeContext(n),this.serdeContext=n}read(n,r){var l,a;const s=Nt.of(n),i=s.getMergedTraits(),o=((l=this.serdeContext)==null?void 0:l.utf8Encoder)??Ol;if(i.httpHeader||i.httpResponseCode)return this.stringDeserializer.read(s,o(r));if(i.httpPayload){if(s.isBlobSchema()){const u=((a=this.serdeContext)==null?void 0:a.utf8Decoder)??so;return typeof r=="string"?u(r):r}else if(s.isStringSchema())return"byteLength"in r?o(r):r}return this.codecDeserializer.read(s,r)}}class m9 extends bp{constructor(n){super();j(this,"settings");j(this,"stringBuffer","");this.settings=n}write(n,r){var i,o;const s=Nt.of(n);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(s.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${s.getName(!0)}`);switch(jv(s,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=s0(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(s.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(((i=this.serdeContext)==null?void 0:i.base64Encoder)??Yo)(r);return}if(s.isListSchema()&&Array.isArray(r)){let u="";for(const d of r){this.write([s.getValueSchema(),s.getMergedTraits()],d);const h=this.flush(),p=s.getValueSchema().isTimestampSchema()?h:Z8(h);u!==""&&(u+=", "),u+=p}this.stringBuffer=u;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":const l=s.getMergedTraits().mediaType;let a=r;if(l&&((l==="application/json"||l.endsWith("+json"))&&(a=Di.from(a)),s.getMergedTraits().httpHeader)){this.stringBuffer=(((o=this.serdeContext)==null?void 0:o.base64Encoder)??Yo)(a.toString());return}this.stringBuffer=r;break;default:s.isIdempotencyToken()?this.stringBuffer=Nv():this.stringBuffer=String(r)}}flush(){const n=this.stringBuffer;return this.stringBuffer="",n}}class g9{constructor(e,n,r=new m9(n)){j(this,"codecSerializer");j(this,"stringSerializer");j(this,"buffer");this.codecSerializer=e,this.stringSerializer=r}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,n){const r=Nt.of(e),s=r.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(r,n),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(r,n)}flush(){if(this.buffer!==void 0){const e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}function y9(t,e,n){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=n}class w9{constructor(e){j(this,"authSchemes",new Map);for(const[n,r]of Object.entries(e))r!==void 0&&this.authSchemes.set(n,r)}getIdentityProvider(e){return this.authSchemes.get(e)}}const v9=t=>function(n){return _2(n)&&n.expiration.getTime()-Date.now()<t},_9=3e5,x9=v9(_9),_2=t=>t.expiration!==void 0,E9=(t,e,n)=>{if(t===void 0)return;const r=typeof t!="function"?async()=>Promise.resolve(t):t;let s,i,o,l=!1;const a=async u=>{i||(i=r(u));try{s=await i,o=!0,l=!1}finally{i=void 0}return s};return e===void 0?async u=>((!o||u!=null&&u.forceRefresh)&&(s=await a(u)),s):async u=>((!o||u!=null&&u.forceRefresh)&&(s=await a(u)),l?s:n(s)?(e(s)&&await a(u),s):(l=!0,s))},b9=(t,e,n)=>{let r,s,i,o=!1;const l=async()=>{s||(s=t());try{r=await s,i=!0,o=!1}finally{s=void 0}return r};return async a=>((!i||a!=null&&a.forceRefresh)&&(r=await l()),r)},S9=t=>(t.sigv4aSigningRegionSet=Xa(t.sigv4aSigningRegionSet),t),T9="X-Amz-Algorithm",A9="X-Amz-Credential",x2="X-Amz-Date",C9="X-Amz-SignedHeaders",k9="X-Amz-Expires",E2="X-Amz-Signature",b2="X-Amz-Security-Token",S2="authorization",T2=x2.toLowerCase(),I9="date",R9=[S2,T2,I9],P9=E2.toLowerCase(),i0="x-amz-content-sha256",N9=b2.toLowerCase(),D9={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},M9=/^proxy-/,O9=/^sec-/,Wm="AWS4-HMAC-SHA256",j9="AWS4-HMAC-SHA256-PAYLOAD",L9="UNSIGNED-PAYLOAD",U9=50,A2="aws4_request",F9=60*60*24*7,jd={},Gm=[],Km=(t,e,n)=>`${t}/${e}/${n}/${A2}`,B9=async(t,e,n,r,s)=>{const i=await yS(t,e.secretAccessKey,e.accessKeyId),o=`${n}:${r}:${s}:${Zn(i)}:${e.sessionToken}`;if(o in jd)return jd[o];for(Gm.push(o);Gm.length>U9;)delete jd[Gm.shift()];let l=`AWS4${e.secretAccessKey}`;for(const a of[n,r,s,A2])l=await yS(t,l,a);return jd[o]=l},yS=(t,e,n)=>{const r=new t(e);return r.update(vl(n)),r.digest()},wS=({headers:t},e,n)=>{const r={};for(const s of Object.keys(t).sort()){if(t[s]==null)continue;const i=s.toLowerCase();(i in D9||e!=null&&e.has(i)||M9.test(i)||O9.test(i))&&(!n||n&&!n.has(i))||(r[i]=t[s].trim().replace(/\s+/g," "))}return r},C2=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",Jm=async({headers:t,body:e},n)=>{for(const r of Object.keys(t))if(r.toLowerCase()===i0)return t[r];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||C2(e)){const r=new n;return r.update(vl(e)),Zn(await r.digest())}return L9};class V9{format(e){const n=[];for(const i of Object.keys(e)){const o=so(i);n.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const r=new Uint8Array(n.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const l=so(e.value),a=new DataView(new ArrayBuffer(3+l.byteLength));a.setUint8(0,7),a.setUint16(1,l.byteLength,!1);const u=new Uint8Array(a.buffer);return u.set(l,3),u;case"timestamp":const d=new Uint8Array(9);return d[0]=8,d.set(z9.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!$9.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const h=new Uint8Array(17);return h[0]=9,h.set(f2(e.value.replace(/\-/g,"")),1),h}}}var vS;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(vS||(vS={}));const $9=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let z9=class k2{constructor(e){j(this,"bytes");if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(e));r>-1&&s>0;r--,s/=256)n[r]=s;return e<0&&_S(n),new k2(n)}valueOf(){const e=this.bytes.slice(0),n=e[0]&128;return n&&_S(e),parseInt(Zn(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}};function _S(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const q9=(t,e)=>{t=t.toLowerCase();for(const n of Object.keys(e))if(t===n.toLowerCase())return!0;return!1},H9=(t,e={})=>{var s,i;const{headers:n,query:r={}}=Xt.clone(t);for(const o of Object.keys(n)){const l=o.toLowerCase();(l.slice(0,6)==="x-amz-"&&!((s=e.unhoistableHeaders)!=null&&s.has(l))||(i=e.hoistableHeaders)!=null&&i.has(l))&&(r[o]=n[o],delete n[o])}return{...t,headers:n,query:r}},xS=t=>{t=Xt.clone(t);for(const e of Object.keys(t.headers))R9.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},W9=({query:t={}})=>{const e=[],n={};for(const r of Object.keys(t)){if(r.toLowerCase()===P9)continue;const s=Uo(r);e.push(s);const i=t[r];typeof i=="string"?n[s]=`${s}=${Uo(i)}`:Array.isArray(i)&&(n[s]=i.slice(0).reduce((o,l)=>o.concat([`${s}=${Uo(l)}`]),[]).sort().join("&"))}return e.sort().map(r=>n[r]).filter(r=>r).join("&")},G9=t=>K9(t).toISOString().replace(/\.\d{3}Z$/,"Z"),K9=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class J9{constructor({applyChecksum:e,credentials:n,region:r,service:s,sha256:i,uriEscapePath:o=!0}){j(this,"service");j(this,"regionProvider");j(this,"credentialProvider");j(this,"sha256");j(this,"uriEscapePath");j(this,"applyChecksum");this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Jr(r),this.credentialProvider=Jr(n)}createCanonicalRequest(e,n,r){const s=Object.keys(n).sort();return`${e.method}
${this.getCanonicalPath(e)}
${W9(e)}
${s.map(i=>`${i}:${n[i]}`).join(`
`)}

${s.join(";")}
${r}`}async createStringToSign(e,n,r,s){const i=new this.sha256;i.update(vl(r));const o=await i.digest();return`${s}
${e}
${n}
${Zn(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const n=[];for(const i of e.split("/"))(i==null?void 0:i.length)!==0&&i!=="."&&(i===".."?n.pop():n.push(i));const r=`${e!=null&&e.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&(e!=null&&e.endsWith("/"))?"/":""}`;return Uo(r).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const n=G9(e).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class o0 extends J9{constructor({applyChecksum:n,credentials:r,region:s,service:i,sha256:o,uriEscapePath:l=!0}){super({applyChecksum:n,credentials:r,region:s,service:i,sha256:o,uriEscapePath:l});j(this,"headerFormatter",new V9)}async presign(n,r={}){const{signingDate:s=new Date,expiresIn:i=3600,unsignableHeaders:o,unhoistableHeaders:l,signableHeaders:a,hoistableHeaders:u,signingRegion:d,signingService:h}=r,p=await this.credentialProvider();this.validateResolvedCredentials(p);const g=d??await this.regionProvider(),{longDate:w,shortDate:x}=this.formatDate(s);if(i>F9)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const E=Km(x,g,h??this.service),v=H9(xS(n),{unhoistableHeaders:l,hoistableHeaders:u});p.sessionToken&&(v.query[b2]=p.sessionToken),v.query[T9]=Wm,v.query[A9]=`${p.accessKeyId}/${E}`,v.query[x2]=w,v.query[k9]=i.toString(10);const _=wS(v,o,a);return v.query[C9]=this.getCanonicalHeaderList(_),v.query[E2]=await this.getSignature(w,E,this.getSigningKey(p,g,x,h),this.createCanonicalRequest(v,_,await Jm(n,this.sha256))),v}async sign(n,r){return typeof n=="string"?this.signString(n,r):n.headers&&n.payload?this.signEvent(n,r):n.message?this.signMessage(n,r):this.signRequest(n,r)}async signEvent({headers:n,payload:r},{signingDate:s=new Date,priorSignature:i,signingRegion:o,signingService:l}){const a=o??await this.regionProvider(),{shortDate:u,longDate:d}=this.formatDate(s),h=Km(u,a,l??this.service),p=await Jm({headers:{},body:r},this.sha256),g=new this.sha256;g.update(n);const w=Zn(await g.digest()),x=[j9,d,h,i,w,p].join(`
`);return this.signString(x,{signingDate:s,signingRegion:a,signingService:l})}async signMessage(n,{signingDate:r=new Date,signingRegion:s,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(n.message.headers),payload:n.message.body},{signingDate:r,signingRegion:s,signingService:i,priorSignature:n.priorSignature}).then(l=>({message:n.message,signature:l}))}async signString(n,{signingDate:r=new Date,signingRegion:s,signingService:i}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const l=s??await this.regionProvider(),{shortDate:a}=this.formatDate(r),u=new this.sha256(await this.getSigningKey(o,l,a,i));return u.update(vl(n)),Zn(await u.digest())}async signRequest(n,{signingDate:r=new Date,signableHeaders:s,unsignableHeaders:i,signingRegion:o,signingService:l}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const u=o??await this.regionProvider(),d=xS(n),{longDate:h,shortDate:p}=this.formatDate(r),g=Km(p,u,l??this.service);d.headers[T2]=h,a.sessionToken&&(d.headers[N9]=a.sessionToken);const w=await Jm(d,this.sha256);!q9(i0,d.headers)&&this.applyChecksum&&(d.headers[i0]=w);const x=wS(d,i,s),E=await this.getSignature(h,g,this.getSigningKey(a,u,p,l),this.createCanonicalRequest(d,x,w));return d.headers[S2]=`${Wm} Credential=${a.accessKeyId}/${g}, SignedHeaders=${this.getCanonicalHeaderList(x)}, Signature=${E}`,d}async getSignature(n,r,s,i){const o=await this.createStringToSign(n,r,i,Wm),l=new this.sha256(await s);return l.update(vl(o)),Zn(await l.digest())}getSigningKey(n,r,s,i){return B9(this.sha256,n,s,r,i||this.service)}}const Q9=t=>{let e=t.credentials,n=!!t.credentials,r;Object.defineProperty(t,"credentials",{set(u){u&&u!==e&&u!==r&&(n=!0),e=u;const d=X9(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),h=Y9(t,d);n&&!h.attributed?(r=async p=>h(p).then(g=>f8(g,"CREDENTIALS_CODE","e")),r.memoized=h.memoized,r.configBound=h.configBound,r.attributed=!0):r=h},get(){return r},enumerable:!0,configurable:!0}),t.credentials=e;const{signingEscapePath:s=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t;let l;return t.signer?l=Xa(t.signer):t.regionInfoProvider?l=()=>Xa(t.region)().then(async u=>[await t.regionInfoProvider(u,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},u]).then(([u,d])=>{const{signingRegion:h,signingService:p}=u;t.signingRegion=t.signingRegion||h||d,t.signingName=t.signingName||p||t.serviceId;const g={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},w=t.signerConstructor||o0;return new w(g)}):l=async u=>{u=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Xa(t.region)(),properties:{}},u);const d=u.signingRegion,h=u.signingName;t.signingRegion=t.signingRegion||d,t.signingName=t.signingName||h||t.serviceId;const p={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},g=t.signerConstructor||o0;return new g(p)},Object.assign(t,{systemClockOffset:i,signingEscapePath:s,signer:l})};function X9(t,{credentials:e,credentialDefaultProvider:n}){let r;return e?e!=null&&e.memoized?r=e:r=E9(e,x9,_2):n?r=Xa(n(Object.assign({},t,{parentClientConfig:t}))):r=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},r.memoized=!0,r}function Y9(t,e){if(e.configBound)return e;const n=async r=>e({...r,callerClientConfig:t});return n.memoized=e.memoized,n.configBound=!0,n}const ES=typeof TextEncoder=="function"?new TextEncoder:null,Z9=t=>{if(typeof t=="string"){if(ES)return ES.encode(t).byteLength;let e=t.length;for(let n=e-1;n>=0;n--){const r=t.charCodeAt(n);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&n--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},xo=(t,e)=>{const n=[];if(t&&n.push(t),e)for(const r of e)n.push(r);return n},pi=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,cf=()=>{let t=[],e=[],n=!1;const r=new Set,s=h=>h.sort((p,g)=>bS[g.step]-bS[p.step]||SS[g.priority||"normal"]-SS[p.priority||"normal"]),i=h=>{let p=!1;const g=w=>{const x=xo(w.name,w.aliases);if(x.includes(h)){p=!0;for(const E of x)r.delete(E);return!1}return!0};return t=t.filter(g),e=e.filter(g),p},o=h=>{let p=!1;const g=w=>{if(w.middleware===h){p=!0;for(const x of xo(w.name,w.aliases))r.delete(x);return!1}return!0};return t=t.filter(g),e=e.filter(g),p},l=h=>{var p;return t.forEach(g=>{h.add(g.middleware,{...g})}),e.forEach(g=>{h.addRelativeTo(g.middleware,{...g})}),(p=h.identifyOnResolve)==null||p.call(h,d.identifyOnResolve()),h},a=h=>{const p=[];return h.before.forEach(g=>{g.before.length===0&&g.after.length===0?p.push(g):p.push(...a(g))}),p.push(h),h.after.reverse().forEach(g=>{g.before.length===0&&g.after.length===0?p.push(g):p.push(...a(g))}),p},u=(h=!1)=>{const p=[],g=[],w={};return t.forEach(E=>{const v={...E,before:[],after:[]};for(const _ of xo(v.name,v.aliases))w[_]=v;p.push(v)}),e.forEach(E=>{const v={...E,before:[],after:[]};for(const _ of xo(v.name,v.aliases))w[_]=v;g.push(v)}),g.forEach(E=>{if(E.toMiddleware){const v=w[E.toMiddleware];if(v===void 0){if(h)return;throw new Error(`${E.toMiddleware} is not found when adding ${pi(E.name,E.aliases)} middleware ${E.relation} ${E.toMiddleware}`)}E.relation==="after"&&v.after.push(E),E.relation==="before"&&v.before.push(E)}}),s(p).map(a).reduce((E,v)=>(E.push(...v),E),[])},d={add:(h,p={})=>{const{name:g,override:w,aliases:x}=p,E={step:"initialize",priority:"normal",middleware:h,...p},v=xo(g,x);if(v.length>0){if(v.some(_=>r.has(_))){if(!w)throw new Error(`Duplicate middleware name '${pi(g,x)}'`);for(const _ of v){const b=t.findIndex(V=>{var $;return V.name===_||(($=V.aliases)==null?void 0:$.some(C=>C===_))});if(b===-1)continue;const O=t[b];if(O.step!==E.step||E.priority!==O.priority)throw new Error(`"${pi(O.name,O.aliases)}" middleware with ${O.priority} priority in ${O.step} step cannot be overridden by "${pi(g,x)}" middleware with ${E.priority} priority in ${E.step} step.`);t.splice(b,1)}}for(const _ of v)r.add(_)}t.push(E)},addRelativeTo:(h,p)=>{const{name:g,override:w,aliases:x}=p,E={middleware:h,...p},v=xo(g,x);if(v.length>0){if(v.some(_=>r.has(_))){if(!w)throw new Error(`Duplicate middleware name '${pi(g,x)}'`);for(const _ of v){const b=e.findIndex(V=>{var $;return V.name===_||(($=V.aliases)==null?void 0:$.some(C=>C===_))});if(b===-1)continue;const O=e[b];if(O.toMiddleware!==E.toMiddleware||O.relation!==E.relation)throw new Error(`"${pi(O.name,O.aliases)}" middleware ${O.relation} "${O.toMiddleware}" middleware cannot be overridden by "${pi(g,x)}" middleware ${E.relation} "${E.toMiddleware}" middleware.`);e.splice(b,1)}}for(const _ of v)r.add(_)}e.push(E)},clone:()=>l(cf()),use:h=>{h.applyToStack(d)},remove:h=>typeof h=="string"?i(h):o(h),removeByTag:h=>{let p=!1;const g=w=>{const{tags:x,name:E,aliases:v}=w;if(x&&x.includes(h)){const _=xo(E,v);for(const b of _)r.delete(b);return p=!0,!1}return!0};return t=t.filter(g),e=e.filter(g),p},concat:h=>{var g;const p=l(cf());return p.use(h),p.identifyOnResolve(n||p.identifyOnResolve()||(((g=h.identifyOnResolve)==null?void 0:g.call(h))??!1)),p},applyToStack:l,identify:()=>u(!0).map(h=>{const p=h.step??h.relation+" "+h.toMiddleware;return pi(h.name,h.aliases)+" - "+p}),identifyOnResolve(h){return typeof h=="boolean"&&(n=h),n},resolve:(h,p)=>{for(const g of u().map(w=>w.middleware).reverse())h=g(h,p);return n&&console.log(d.identify()),h}};return d},bS={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},SS={high:3,normal:2,low:1};let e$=class{constructor(e){j(this,"config");j(this,"middlewareStack",cf());j(this,"initConfig");j(this,"handlers");this.config=e}send(e,n,r){const s=typeof n!="function"?n:void 0,i=typeof n=="function"?n:r,o=s===void 0&&this.config.cacheMiddleware===!0;let l;if(o){this.handlers||(this.handlers=new WeakMap);const a=this.handlers;a.has(e.constructor)?l=a.get(e.constructor):(l=e.resolveMiddleware(this.middlewareStack,this.config,s),a.set(e.constructor,l))}else delete this.handlers,l=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)l(e).then(a=>i(null,a.output),a=>i(a)).catch(()=>{});else return l(e).then(a=>a.output)}destroy(){var e,n,r;(r=(n=(e=this.config)==null?void 0:e.requestHandler)==null?void 0:n.destroy)==null||r.call(n),delete this.handlers}};const Qm="***SensitiveInformation***";function a0(t,e){if(e==null)return e;const n=Nt.of(t);if(n.getMergedTraits().sensitive)return Qm;if(n.isListSchema()){if(!!n.getValueSchema().getMergedTraits().sensitive)return Qm}else if(n.isMapSchema()){if(!!n.getKeySchema().getMergedTraits().sensitive||!!n.getValueSchema().getMergedTraits().sensitive)return Qm}else if(n.isStructSchema()&&typeof e=="object"){const r=e,s={};for(const[i,o]of n.structIterator())r[i]!=null&&(s[i]=a0(o,r[i]));return s}return e}class Lv{constructor(){j(this,"middlewareStack",cf());j(this,"schema")}static classBuilder(){return new t$}resolveMiddlewareWithContext(e,n,r,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:l,outputFilterSensitiveLog:a,smithyContext:u,additionalContext:d,CommandCtor:h}){for(const E of s.bind(this)(h,e,n,r))this.middlewareStack.use(E);const p=e.concat(this.middlewareStack),{logger:g}=n,w={logger:g,clientName:i,commandName:o,inputFilterSensitiveLog:l,outputFilterSensitiveLog:a,[e0]:{commandInstance:this,...u},...d},{requestHandler:x}=n;return p.resolve(E=>x.handle(E.request,r||{}),w)}}class t${constructor(){j(this,"_init",()=>{});j(this,"_ep",{});j(this,"_middlewareFn",()=>[]);j(this,"_commandName","");j(this,"_clientName","");j(this,"_additionalContext",{});j(this,"_smithyContext",{});j(this,"_inputFilterSensitiveLog");j(this,"_outputFilterSensitiveLog");j(this,"_serializer",null);j(this,"_deserializer",null);j(this,"_operationSchema")}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,n,r={}){return this._smithyContext={service:e,operation:n,...r},this}c(e={}){return this._additionalContext=e,this}n(e,n){return this._clientName=e,this._commandName=n,this}f(e=r=>r,n=r=>r){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=n,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let n;return n=class extends Lv{constructor(...[s]){super();j(this,"input");j(this,"serialize",e._serializer);j(this,"deserialize",e._deserializer);this.input=s??{},e._init(this),this.schema=e._operationSchema}static getEndpointParameterInstructions(){return e._ep}resolveMiddleware(s,i,o){const l=e._operationSchema,a=(l==null?void 0:l[4])??(l==null?void 0:l.input),u=(l==null?void 0:l[5])??(l==null?void 0:l.output);return this.resolveMiddlewareWithContext(s,i,o,{CommandCtor:n,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(l?a0.bind(null,a):d=>d),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(l?a0.bind(null,u):d=>d),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}class ja extends Error{constructor(n){super(n.message);j(this,"$fault");j(this,"$response");j(this,"$retryable");j(this,"$metadata");Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=n.name,this.$fault=n.$fault,this.$metadata=n.$metadata}static isInstance(n){if(!n)return!1;const r=n;return ja.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](n){if(!n)return!1;const r=n;return this===ja?ja.isInstance(n):ja.isInstance(n)?r.name&&this.name?this.prototype.isPrototypeOf(n)||r.name===this.name:this.prototype.isPrototypeOf(n):!1}}const TS=(t,e={})=>{Object.entries(e).filter(([,r])=>r!==void 0).forEach(([r,s])=>{(t[r]==null||t[r]==="")&&(t[r]=s)});const n=t.message||t.Message||"UnknownError";return t.message=n,delete t.Message,t},n$=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},r$=t=>{const e=[];for(const n in uf){const r=uf[n];t[r]!==void 0&&e.push({algorithmId:()=>r,checksumConstructor:()=>t[r]})}return{addChecksumAlgorithm(n){e.push(n)},checksumAlgorithms(){return e}}},s$=t=>{const e={};return t.checksumAlgorithms().forEach(n=>{e[n.algorithmId()]=n.checksumConstructor()}),e},i$=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),o$=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},a$=t=>Object.assign(r$(t),i$(t)),l$=t=>Object.assign(s$(t),o$(t)),I2=t=>{const e="#text";for(const n in t)t.hasOwnProperty(n)&&t[n][e]!==void 0?t[n]=t[n][e]:typeof t[n]=="object"&&t[n]!==null&&(t[n]=I2(t[n]));return t};class Uv{trace(){}debug(){}info(){}warn(){}error(){}}class u${constructor(e=!1){j(this,"queryCompat");this.queryCompat=e}resolveRestContentType(e,n){const r=n.getMemberSchemas(),s=Object.values(r).find(i=>!!i.getMergedTraits().httpPayload);if(s){const i=s.getMergedTraits().mediaType;return i||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!n.isUnitSchema()&&Object.values(r).find(o=>{const{httpQuery:l,httpQueryParams:a,httpHeader:u,httpLabel:d,httpPrefixHeaders:h}=o.getMergedTraits();return!l&&!a&&!u&&!d&&h===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,n,r,s,i,o){let l=n,a=e;e.includes("#")&&([l,a]=e.split("#"));const u={$metadata:i,$fault:r.statusCode<500?"client":"server"},d=Yt.for(l);try{return{errorSchema:(o==null?void 0:o(d,a))??d.getSchema(e),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";const p=Yt.for("smithy.ts.sdk.synthetic."+l),g=p.getBaseException();if(g){const w=p.getErrorCtor(g)??Error;throw this.decorateServiceException(Object.assign(new w({name:a}),u),s)}throw this.decorateServiceException(Object.assign(new Error(a),u),s)}}decorateServiceException(e,n={}){if(this.queryCompat){const r=e.Message??n.Message,s=TS(e,n);r&&(s.message=r),s.Error={...s.Error,Type:s.Error.Type,Code:s.Error.Code,Message:s.Error.message??s.Error.Message??r};const i=s.$metadata.requestId;return i&&(s.RequestId=i),s}return TS(e,n)}setQueryCompatError(e,n){var s;const r=(s=n.headers)==null?void 0:s["x-amzn-query-error"];if(e!==void 0&&r!=null){const[i,o]=r.split(";"),l=Object.entries(e),a={Code:i,Type:o};Object.assign(e,a);for(const[u,d]of l)a[u==="message"?"Message":u]=d;delete a.__type,e.Error=a}}queryCompatOutput(e,n){e.Error&&(n.Error=e.Error),e.Type&&(n.Type=e.Type),e.Code&&(n.Code=e.Code)}findQueryCompatibleError(e,n){try{return e.getSchema(n)}catch{return e.find(s=>{var i;return((i=Nt.of(s).getMergedTraits().awsQueryError)==null?void 0:i[0])===n})}}}class Fv{constructor(){j(this,"serdeContext")}setSerdeContext(e){this.serdeContext=e}}function*c$(t,e){if(t.isUnitSchema())return;const n=t.getSchema();for(let r=0;r<n[4].length;++r){const s=n[4][r],i=n[5][r],o=new Nt([i,0],s);!(s in e)&&!o.isIdempotencyToken()||(yield[s,o])}}function d$(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function h$(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}class R2{constructor(e){j(this,"value");this.value=e}toString(){return h$(""+this.value)}}class dr{constructor(e,n=[]){j(this,"name");j(this,"children");j(this,"attributes",{});this.name=e,this.children=n}static of(e,n,r){const s=new dr(e);return n!==void 0&&s.addChildNode(new R2(n)),r!==void 0&&s.withName(r),s}withName(e){return this.name=e,this}addAttribute(e,n){return this.attributes[e]=n,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,n){return n!=null&&(this.attributes[e]=n),this}cc(e,n,r=n){if(e[n]!=null){const s=dr.of(n,e[n]).withName(r);this.c(s)}}l(e,n,r,s){e[n]!=null&&s().map(o=>{o.withName(r),this.c(o)})}lc(e,n,r,s){if(e[n]!=null){const i=s(),o=new dr(r);i.map(l=>{o.c(l)}),this.c(o)}}toString(){const e=!!this.children.length;let n=`<${this.name}`;const r=this.attributes;for(const s of Object.keys(r)){const i=r[s];i!=null&&(n+=` ${s}="${d$(""+i)}"`)}return n+=e?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}}let Xm;function f$(t){Xm||(Xm=new DOMParser);const e=Xm.parseFromString(t,"application/xml");if(e.getElementsByTagName("parsererror").length>0)throw new Error("DOMParser XML parsing error.");const n=r=>{var s;if(r.nodeType===Node.TEXT_NODE&&(s=r.textContent)!=null&&s.trim())return r.textContent;if(r.nodeType===Node.ELEMENT_NODE){const i=r;if(i.attributes.length===0&&i.childNodes.length===0)return"";const o={},l=Array.from(i.attributes);for(const u of l)o[`${u.name}`]=u.value;const a=Array.from(i.childNodes);for(const u of a){const d=n(u);if(d!=null){const h=u.nodeName;if(a.length===1&&l.length===0&&h==="#text")return d;o[h]?Array.isArray(o[h])?o[h].push(d):o[h]=[o[h],d]:o[h]=d}else if(a.length===1&&l.length===0)return i.textContent}return o}return null};return{[e.documentElement.nodeName]:n(e.documentElement)}}class p$ extends Fv{constructor(n){super();j(this,"settings");j(this,"stringDeserializer");this.settings=n,this.stringDeserializer=new v2(n)}setSerdeContext(n){this.serdeContext=n,this.stringDeserializer.setSerdeContext(n)}read(n,r,s){var d;const i=Nt.of(n),o=i.getMemberSchemas();if(i.isStructSchema()&&i.isMemberSchema()&&!!Object.values(o).find(h=>!!h.getMemberTraits().eventPayload)){const h={},p=Object.keys(o)[0];return o[p].isBlobSchema()?h[p]=r:h[p]=this.read(o[p],r),h}const a=(((d=this.serdeContext)==null?void 0:d.utf8Encoder)??Ol)(r),u=this.parseXml(a);return this.readSchema(n,s?u[s]:u)}readSchema(n,r){const s=Nt.of(n);if(s.isUnitSchema())return;const i=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(r))return this.readSchema(s,[r]);if(r==null)return r;if(typeof r=="object"){const o=!!i.sparse,l=!!i.xmlFlattened;if(s.isListSchema()){const u=s.getValueSchema(),d=[],h=u.getMergedTraits().xmlName??"member",p=l?r:(r[0]??r)[h],g=Array.isArray(p)?p:[p];for(const w of g)(w!=null||o)&&d.push(this.readSchema(u,w));return d}const a={};if(s.isMapSchema()){const u=s.getKeySchema(),d=s.getValueSchema();let h;l?h=Array.isArray(r)?r:[r]:h=Array.isArray(r.entry)?r.entry:[r.entry];const p=u.getMergedTraits().xmlName??"key",g=d.getMergedTraits().xmlName??"value";for(const w of h){const x=w[p],E=w[g];(E!=null||o)&&(a[x]=this.readSchema(d,E))}return a}if(s.isStructSchema()){for(const[u,d]of s.structIterator()){const h=d.getMergedTraits(),p=h.httpPayload?h.xmlName??d.getName():d.getMemberTraits().xmlName??u;r[p]!=null&&(a[u]=this.readSchema(d,r[p]))}return a}if(s.isDocumentSchema())return r;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,r)}parseXml(n){if(n.length){let r;try{r=f$(n)}catch(l){throw l&&typeof l=="object"&&Object.defineProperty(l,"$responseBodyText",{value:n}),l}const s="#text",i=Object.keys(r)[0],o=r[i];return o[s]&&(o[i]=o[s],delete o[s]),I2(o)}return{}}}const m$=(t,e)=>{var n;if(((n=e==null?void 0:e.Error)==null?void 0:n.Code)!==void 0)return e.Error.Code;if((e==null?void 0:e.Code)!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"};class g$ extends Fv{constructor(n){super();j(this,"settings");j(this,"stringBuffer");j(this,"byteBuffer");j(this,"buffer");this.settings=n}write(n,r){var i;const s=Nt.of(n);if(s.isStringSchema()&&typeof r=="string")this.stringBuffer=r;else if(s.isBlobSchema())this.byteBuffer="byteLength"in r?r:(((i=this.serdeContext)==null?void 0:i.base64Decoder)??wl)(r);else{this.buffer=this.writeStruct(s,r,void 0);const o=s.getMergedTraits();o.httpPayload&&!o.xmlName&&this.buffer.withName(s.getName())}}flush(){var r;if(this.byteBuffer!==void 0){const s=this.byteBuffer;return delete this.byteBuffer,s}if(this.stringBuffer!==void 0){const s=this.stringBuffer;return delete this.stringBuffer,s}const n=this.buffer;return this.settings.xmlNamespace&&((r=n==null?void 0:n.attributes)!=null&&r.xmlns||n.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,n.toString()}writeStruct(n,r,s){const i=n.getMergedTraits(),o=n.isMemberSchema()&&!i.httpPayload?n.getMemberTraits().xmlName??n.getMemberName():i.xmlName??n.getName();if(!o||!n.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${n.getName(!0)}.`);const l=dr.of(o),[a,u]=this.getXmlnsAttribute(n,s);for(const[d,h]of c$(n,r)){const p=r[d];if(p!=null||h.isIdempotencyToken()){if(h.getMergedTraits().xmlAttribute){l.addAttribute(h.getMergedTraits().xmlName??d,this.writeSimple(h,p));continue}if(h.isListSchema())this.writeList(h,p,l,u);else if(h.isMapSchema())this.writeMap(h,p,l,u);else if(h.isStructSchema())l.addChildNode(this.writeStruct(h,p,u));else{const g=dr.of(h.getMergedTraits().xmlName??h.getMemberName());this.writeSimpleInto(h,p,g,u),l.addChildNode(g)}}}return u&&l.addAttribute(a,u),l}writeList(n,r,s,i){if(!n.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${n.getName(!0)}`);const o=n.getMergedTraits(),l=n.getValueSchema(),a=l.getMergedTraits(),u=!!a.sparse,d=!!o.xmlFlattened,[h,p]=this.getXmlnsAttribute(n,i),g=(w,x)=>{if(l.isListSchema())this.writeList(l,Array.isArray(x)?x:[x],w,p);else if(l.isMapSchema())this.writeMap(l,x,w,p);else if(l.isStructSchema()){const E=this.writeStruct(l,x,p);w.addChildNode(E.withName(d?o.xmlName??n.getMemberName():a.xmlName??"member"))}else{const E=dr.of(d?o.xmlName??n.getMemberName():a.xmlName??"member");this.writeSimpleInto(l,x,E,p),w.addChildNode(E)}};if(d)for(const w of r)(u||w!=null)&&g(s,w);else{const w=dr.of(o.xmlName??n.getMemberName());p&&w.addAttribute(h,p);for(const x of r)(u||x!=null)&&g(w,x);s.addChildNode(w)}}writeMap(n,r,s,i,o=!1){if(!n.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${n.getName(!0)}`);const l=n.getMergedTraits(),a=n.getKeySchema(),d=a.getMergedTraits().xmlName??"key",h=n.getValueSchema(),p=h.getMergedTraits(),g=p.xmlName??"value",w=!!p.sparse,x=!!l.xmlFlattened,[E,v]=this.getXmlnsAttribute(n,i),_=(b,O,V)=>{const $=dr.of(d,O),[C,T]=this.getXmlnsAttribute(a,v);T&&$.addAttribute(C,T),b.addChildNode($);let R=dr.of(g);h.isListSchema()?this.writeList(h,V,R,v):h.isMapSchema()?this.writeMap(h,V,R,v,!0):h.isStructSchema()?R=this.writeStruct(h,V,v):this.writeSimpleInto(h,V,R,v),b.addChildNode(R)};if(x){for(const[b,O]of Object.entries(r))if(w||O!=null){const V=dr.of(l.xmlName??n.getMemberName());_(V,b,O),s.addChildNode(V)}}else{let b;o||(b=dr.of(l.xmlName??n.getMemberName()),v&&b.addAttribute(E,v),s.addChildNode(b));for(const[O,V]of Object.entries(r))if(w||V!=null){const $=dr.of("entry");_($,O,V),(o?s:b).addChildNode($)}}}writeSimple(n,r){var o;if(r===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");const s=Nt.of(n);let i=null;if(r&&typeof r=="object")if(s.isBlobSchema())i=(((o=this.serdeContext)==null?void 0:o.base64Encoder)??Yo)(r);else if(s.isTimestampSchema()&&r instanceof Date)switch(jv(s,this.settings)){case 5:i=r.toISOString().replace(".000Z","Z");break;case 6:i=s0(r);break;case 7:i=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",r),i=s0(r);break}else{if(s.isBigDecimalSchema()&&r)return r instanceof Ep?r.string:String(r);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(i=String(r)),s.isStringSchema()&&(r===void 0&&s.isIdempotencyToken()?i=Nv():i=String(r)),i===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${r}`);return i}writeSimpleInto(n,r,s,i){const o=this.writeSimple(n,r),l=Nt.of(n),a=new R2(o),[u,d]=this.getXmlnsAttribute(l,i);d&&s.addAttribute(u,d),s.addChildNode(a)}getXmlnsAttribute(n,r){const s=n.getMergedTraits(),[i,o]=s.xmlNamespace??[];return o&&o!==r?[i?`xmlns:${i}`:"xmlns",o]:[void 0,void 0]}}class y$ extends Fv{constructor(n){super();j(this,"settings");this.settings=n}createSerializer(){const n=new g$(this.settings);return n.setSerdeContext(this.serdeContext),n}createDeserializer(){const n=new p$(this.settings);return n.setSerdeContext(this.serdeContext),n}}class w$ extends f9{constructor(n){super(n);j(this,"codec");j(this,"serializer");j(this,"deserializer");j(this,"mixin",new u$);const r={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:n.xmlNamespace,serviceNamespace:n.defaultNamespace};this.codec=new y$(r),this.serializer=new g9(this.codec.createSerializer(),r),this.deserializer=new p9(this.codec.createDeserializer(),r)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(n,r,s){const i=await super.serializeRequest(n,r,s),o=Nt.of(n.input);if(!i.headers["content-type"]){const l=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);l&&(i.headers["content-type"]=l)}return typeof i.body=="string"&&i.headers["content-type"]===this.getDefaultContentType()&&!i.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(o)&&(i.body='<?xml version="1.0" encoding="UTF-8"?>'+i.body),i}async deserializeResponse(n,r,s){return super.deserializeResponse(n,r,s)}async handleError(n,r,s,i,o){var x,E,v;const l=m$(s,i)??"Unknown",{errorSchema:a,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(l,this.options.defaultNamespace,s,i,o),d=Nt.of(a),h=((x=i.Error)==null?void 0:x.message)??((E=i.Error)==null?void 0:E.Message)??i.message??i.Message??"Unknown",p=Yt.for(a[1]).getErrorCtor(a)??Error,g=new p(h);await this.deserializeHttpMessage(a,r,s,i);const w={};for(const[_,b]of d.structIterator()){const O=b.getMergedTraits().xmlName??_,V=((v=i.Error)==null?void 0:v[O])??i[O];w[_]=this.codec.createDeserializer().readSchema(b,V)}throw this.mixin.decorateServiceException(Object.assign(g,u,{$fault:d.getMergedTraits().error,message:h},w),i)}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(n){for(const[,r]of n.structIterator())if(r.getMergedTraits().httpPayload)return!(r.isStructSchema()||r.isMapSchema()||r.isListSchema());return!1}}const l0=[ot.CRC32,ot.CRC32C,ot.CRC64NVME,ot.SHA1,ot.SHA256],v$=[ot.SHA256,ot.SHA1,ot.CRC32,ot.CRC32C,ot.CRC64NVME],_$=(t,{requestChecksumRequired:e,requestAlgorithmMember:n,requestChecksumCalculation:r})=>{if(!n)return r===yl.WHEN_SUPPORTED||e?t0:void 0;if(!t[n])return;const s=t[n];if(!l0.includes(s))throw new Error(`The checksum algorithm "${s}" is not supported by the client. Select one of ${l0}.`);return s},Bv=t=>t===ot.MD5?"content-md5":`x-amz-checksum-${t.toLowerCase()}`,x$=(t,e)=>{const n=t.toLowerCase();for(const r of Object.keys(e))if(n===r.toLowerCase())return!0;return!1},E$=(t,e)=>{const n=t.toLowerCase();for(const r of Object.keys(e))if(r.toLowerCase().startsWith(n))return!0;return!1},P2=t=>t!==void 0&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!C2(t);function Vv(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function a(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,a)}u((r=r.apply(t,e||[])).next())})}function $v(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return a([u,d])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function N2(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}const b$=t=>new TextEncoder().encode(t);var S$=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:b$;function io(t){return t instanceof Uint8Array?t:typeof t=="string"?S$(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function Ac(t){return typeof t=="string"?t.length===0:t.byteLength===0}function D2(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}function M2(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),n=0;n<t.length;)e[n]=t[n],n+=1;return e}return Uint32Array.from(t)}var T$=function(){function t(){this.crc32c=new AS}return t.prototype.update=function(e){Ac(e)||this.crc32c.update(io(e))},t.prototype.digest=function(){return Vv(this,void 0,void 0,function(){return $v(this,function(e){return[2,D2(this.crc32c.digest())]})})},t.prototype.reset=function(){this.crc32c=new AS},t}(),AS=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var n,r;try{for(var s=N2(e),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^C$[(this.checksum^o)&255]}}catch(l){n={error:l}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}(),A$=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],C$=M2(A$),k$=function(){function t(){this.crc32=new df}return t.prototype.update=function(e){Ac(e)||this.crc32.update(io(e))},t.prototype.digest=function(){return Vv(this,void 0,void 0,function(){return $v(this,function(e){return[2,D2(this.crc32.digest())]})})},t.prototype.reset=function(){this.crc32=new df},t}(),df=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var n,r;try{for(var s=N2(e),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^R$[(this.checksum^o)&255]}}catch(l){n={error:l}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}(),I$=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],R$=M2(I$);const P$=()=>k$,O2=(t,e)=>{switch(t){case ot.MD5:return e.md5;case ot.CRC32:return P$();case ot.CRC32C:return T$;case ot.CRC64NVME:throw new Error(`Please check whether you have installed the "@aws-sdk/crc64-nvme-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/crc64-nvme-crt");] or an ESM equivalent such as [import "@aws-sdk/crc64-nvme-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);case ot.SHA1:return e.sha1;case ot.SHA256:return e.sha256;default:throw new Error(`Unsupported checksum algorithm: ${t}`)}},j2=(t,e)=>{const n=new t;return n.update(vl(e||"")),n.digest()},N$={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},D$=(t,e)=>(n,r)=>async s=>{if(!Xt.isInstance(s.request)||E$("x-amz-checksum-",s.request.headers))return n(s);const{request:i,input:o}=s,{body:l,headers:a}=i,{base64Encoder:u,streamHasher:d}=t,{requestChecksumRequired:h,requestAlgorithmMember:p}=e,g=await t.requestChecksumCalculation(),w=p==null?void 0:p.name,x=p==null?void 0:p.httpHeader;w&&!o[w]&&(g===yl.WHEN_SUPPORTED||h)&&(o[w]=t0,x&&(a[x]=t0));const E=_$(o,{requestChecksumRequired:h,requestAlgorithmMember:p==null?void 0:p.name,requestChecksumCalculation:g});let v=l,_=a;if(E){switch(E){case ot.CRC32:zt(r,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case ot.CRC32C:zt(r,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case ot.CRC64NVME:zt(r,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case ot.SHA1:zt(r,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case ot.SHA256:zt(r,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}const O=Bv(E),V=O2(E,t);if(P2(l)){const{getAwsChunkedEncodingStream:$,bodyLengthChecker:C}=t;v=$(typeof t.requestStreamBufferSize=="number"&&t.requestStreamBufferSize>=8*1024?D8(l,t.requestStreamBufferSize,r.logger):l,{base64Encoder:u,bodyLengthChecker:C,checksumLocationName:O,checksumAlgorithmFn:V,streamHasher:d}),_={...a,"content-encoding":a["content-encoding"]?`${a["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":a["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":O},delete _["content-length"]}else if(!x$(O,a)){const $=await j2(V,l);_={...a,[O]:u($)}}}return await n({...s,request:{...i,headers:_,body:v}})},M$={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},O$=(t,e)=>(n,r)=>async s=>{const i=s.input,{requestValidationModeMember:o}=e,l=await t.requestChecksumCalculation(),a=await t.responseChecksumValidation();switch(l){case yl.WHEN_REQUIRED:zt(r,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case yl.WHEN_SUPPORTED:zt(r,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(a){case Bm.WHEN_REQUIRED:zt(r,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case Bm.WHEN_SUPPORTED:zt(r,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return o&&!i[o]&&a===Bm.WHEN_SUPPORTED&&(i[o]="ENABLED"),n(s)},L2=(t=[])=>{const e=[];for(const n of v$)!t.includes(n)||!l0.includes(n)||e.push(n);return e},j$=t=>{const e=t.lastIndexOf("-");if(e!==-1){const n=t.slice(e+1);if(!n.startsWith("0")){const r=parseInt(n,10);if(!isNaN(r)&&r>=1&&r<=1e4)return!0}}return!1},L$=async(t,{checksumAlgorithmFn:e,base64Encoder:n})=>n(await j2(e,t)),U$=async(t,{config:e,responseAlgorithms:n,logger:r})=>{const s=L2(n),{body:i,headers:o}=t;for(const l of s){const a=Bv(l),u=o[a];if(u){let d;try{d=O2(l,e)}catch(g){if(l===ot.CRC64NVME){r==null||r.warn(`Skipping ${ot.CRC64NVME} checksum validation: ${g.message}`);continue}throw g}const{base64Encoder:h}=e;if(P2(i)){t.body=R8({expectedChecksum:u,checksumSourceLocation:a,checksum:new d,source:i,base64Encoder:h});return}const p=await L$(i,{checksumAlgorithmFn:d,base64Encoder:h});if(p===u)break;throw new Error(`Checksum mismatch: expected "${p}" but received "${u}" in response header "${a}".`)}}},F$={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},B$=(t,e)=>(n,r)=>async s=>{if(!Xt.isInstance(s.request))return n(s);const i=s.input,o=await n(s),l=o.response,{requestValidationModeMember:a,responseAlgorithms:u}=e;if(a&&i[a]==="ENABLED"){const{clientName:d,commandName:h}=r;if(d==="S3Client"&&h==="GetObjectCommand"&&L2(u).every(g=>{const w=Bv(g),x=l.headers[w];return!x||j$(x)}))return o;await U$(l,{config:t,responseAlgorithms:u,logger:r.logger})}return o},V$=(t,e)=>({applyToStack:n=>{n.add(D$(t,e),N$),n.addRelativeTo(O$(t,e),M$),n.addRelativeTo(B$(t,e),F$)}}),$$=t=>{const{requestChecksumCalculation:e,responseChecksumValidation:n,requestStreamBufferSize:r}=t;return Object.assign(t,{requestChecksumCalculation:Jr(e??d8),responseChecksumValidation:Jr(n??h8),requestStreamBufferSize:Number(r??0)})};const z$=t=>e=>async n=>{if(!Xt.isInstance(n.request))return e(n);const{request:r}=n,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]=r.hostname+(r.port?":"+r.port:"");else if(!r.headers.host){let i=r.hostname;r.port!=null&&(i+=`:${r.port}`),r.headers.host=i}return e(n)},q$={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},H$=t=>({applyToStack:e=>{e.add(z$(t),q$)}}),W$=()=>(t,e)=>async n=>{var r,s;try{const i=await t(n),{clientName:o,commandName:l,logger:a,dynamoDbDocumentClientOptions:u={}}=e,{overrideInputFilterSensitiveLog:d,overrideOutputFilterSensitiveLog:h}=u,p=d??e.inputFilterSensitiveLog,g=h??e.outputFilterSensitiveLog,{$metadata:w,...x}=i.output;return(r=a==null?void 0:a.info)==null||r.call(a,{clientName:o,commandName:l,input:p(n.input),output:g(x),metadata:w}),i}catch(i){const{clientName:o,commandName:l,logger:a,dynamoDbDocumentClientOptions:u={}}=e,{overrideInputFilterSensitiveLog:d}=u,h=d??e.inputFilterSensitiveLog;throw(s=a==null?void 0:a.error)==null||s.call(a,{clientName:o,commandName:l,input:h(n.input),error:i,metadata:i.$metadata}),i}},G$={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},K$=t=>({applyToStack:e=>{e.add(W$(),G$)}}),J$={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Q$=()=>t=>async e=>t(e),X$=t=>({applyToStack:e=>{e.add(Q$(),J$)}}),Y$="content-length",Z$="x-amz-decoded-content-length";function ez(){return(t,e)=>async n=>{var s;const{request:r}=n;if(Xt.isInstance(r)&&!(Y$ in r.headers)&&!(Z$ in r.headers)){const i="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof((s=e==null?void 0:e.logger)==null?void 0:s.warn)=="function"&&!(e.logger instanceof Uv)?e.logger.warn(i):console.warn(i)}return t({...n})}}const tz={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},nz=t=>({applyToStack:e=>{e.add(ez(),tz)}}),rz=t=>(e,n)=>async r=>{const s=await t.region(),i=t.region;let o=()=>{};n.__s3RegionRedirect&&(Object.defineProperty(t,"region",{writable:!1,value:async()=>n.__s3RegionRedirect}),o=()=>Object.defineProperty(t,"region",{writable:!0,value:i}));try{const l=await e(r);if(n.__s3RegionRedirect){o();const a=await t.region();if(s!==a)throw new Error("Region was not restored following S3 region redirect.")}return l}catch(l){throw o(),l}},sz={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function iz(t){return(e,n)=>async r=>{var s,i,o,l;try{return await e(r)}catch(a){if(t.followRegionRedirects){const u=(s=a==null?void 0:a.$metadata)==null?void 0:s.httpStatusCode,d=n.commandName==="HeadBucketCommand",h=(o=(i=a==null?void 0:a.$response)==null?void 0:i.headers)==null?void 0:o["x-amz-bucket-region"];if(h&&(u===301||u===400&&((a==null?void 0:a.name)==="IllegalLocationConstraintException"||d))){try{const p=h;(l=n.logger)==null||l.debug(`Redirecting from ${await t.region()} to ${p}`),n.__s3RegionRedirect=p}catch(p){throw new Error("Region redirect failed: "+p)}return e(r)}}throw a}}}const oz={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},az=t=>({applyToStack:e=>{e.add(iz(t),oz),e.addRelativeTo(rz(t),sz)}}),bf=class bf{constructor(e={}){j(this,"data");j(this,"lastPurgeTime",Date.now());this.data=e}get(e){const n=this.data[e];if(n)return n}set(e,n){return this.data[e]=n,n}delete(e){delete this.data[e]}async purgeExpired(){const e=Date.now();if(!(this.lastPurgeTime+bf.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>e))for(const n in this.data){const r=this.data[n];if(!r.isRefreshing){const s=await r.identity;s.expiration&&s.expiration.getTime()<e&&delete this.data[n]}}}};j(bf,"EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS",3e4);let u0=bf;class Ym{constructor(e,n=!1,r=Date.now()){j(this,"_identity");j(this,"isRefreshing");j(this,"accessed");this._identity=e,this.isRefreshing=n,this.accessed=r}get identity(){return this.accessed=Date.now(),this._identity}}const Sf=class Sf{constructor(e,n=new u0){j(this,"createSessionFn");j(this,"cache");this.createSessionFn=e,this.cache=n}async getS3ExpressIdentity(e,n){const r=n.Bucket,{cache:s}=this,i=s.get(r);return i?i.identity.then(o=>{var u,d;return(((u=o.expiration)==null?void 0:u.getTime())??0)<Date.now()?s.set(r,new Ym(this.getIdentity(r))).identity:((((d=o.expiration)==null?void 0:d.getTime())??0)<Date.now()+Sf.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(r).then(h=>{s.set(r,new Ym(Promise.resolve(h)))})),o)}):s.set(r,new Ym(this.getIdentity(r))).identity}async getIdentity(e){var s,i;await this.cache.purgeExpired().catch(o=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+o)});const n=await this.createSessionFn(e);if(!((s=n.Credentials)!=null&&s.AccessKeyId)||!((i=n.Credentials)!=null&&i.SecretAccessKey))throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:n.Credentials.AccessKeyId,secretAccessKey:n.Credentials.SecretAccessKey,sessionToken:n.Credentials.SessionToken,expiration:n.Credentials.Expiration?new Date(n.Credentials.Expiration):void 0}}};j(Sf,"REFRESH_WINDOW_MS",6e4);let c0=Sf;const lz="Directory",uz="S3Express",cz="sigv4-s3express",d0="X-Amz-S3session-Token",h0=d0.toLowerCase();class dz extends o0{async signWithCredentials(e,n,r){const s=CS(n);e.headers[h0]=n.sessionToken;const i=this;return kS(i,s),i.signRequest(e,r??{})}async presignWithCredentials(e,n,r){const s=CS(n);return delete e.headers[h0],e.headers[d0]=n.sessionToken,e.query=e.query??{},e.query[d0]=n.sessionToken,kS(this,s),this.presign(e,r)}}function CS(t){return{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,expiration:t.expiration}}function kS(t,e){const n=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),r=t.credentialProvider,s=()=>(clearTimeout(n),t.credentialProvider=r,Promise.resolve(e));t.credentialProvider=s}const hz=t=>(e,n)=>async r=>{var s,i,o,l,a;if(n.endpointV2){const u=n.endpointV2,d=((o=(i=(s=u.properties)==null?void 0:s.authSchemes)==null?void 0:i[0])==null?void 0:o.name)===cz;if((((l=u.properties)==null?void 0:l.backend)===uz||((a=u.properties)==null?void 0:a.bucketType)===lz)&&(zt(n,"S3_EXPRESS_BUCKET","J"),n.isS3ExpressBucket=!0),d){const p=r.input.Bucket;if(p){const g=await t.s3ExpressIdentityProvider.getS3ExpressIdentity(await t.credentials(),{Bucket:p});n.s3ExpressIdentity=g,Xt.isInstance(r.request)&&g.sessionToken&&(r.request.headers[h0]=g.sessionToken)}}}return e(r)},fz={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},pz=t=>({applyToStack:e=>{e.add(hz(t),fz)}}),mz=async(t,e,n,r)=>{const s=await r.signWithCredentials(n,t,{});if(s.headers["X-Amz-Security-Token"]||s.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return s},gz=t=>e=>{throw e},yz=(t,e)=>{},wz=t=>(e,n)=>async r=>{if(!Xt.isInstance(r.request))return e(r);const i=mo(n).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:l,signer:a}=i;let u;n.s3ExpressIdentity?u=await mz(n.s3ExpressIdentity,o,r.request,await t.signer()):u=await a.sign(r.request,l,o);const d=await e({...r,request:u}).catch((a.errorHandler||gz)(o));return(a.successHandler||yz)(d.response,o),d},vz=t=>({applyToStack:e=>{e.addRelativeTo(wz(t),u2)}}),_z=(t,{session:e})=>{const[n,r]=e,{forcePathStyle:s,useAccelerateEndpoint:i,disableMultiregionAccessPoints:o,followRegionRedirects:l,s3ExpressIdentityProvider:a,bucketEndpoint:u,expectContinueHeader:d}=t;return Object.assign(t,{forcePathStyle:s??!1,useAccelerateEndpoint:i??!1,disableMultiregionAccessPoints:o??!1,followRegionRedirects:l??!1,s3ExpressIdentityProvider:a??new c0(async h=>n().send(new r({Bucket:h}))),bucketEndpoint:u??!1,expectContinueHeader:d??2097152})},xz={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},Ez=3e3,bz=t=>(e,n)=>async r=>{const s=await e(r),{response:i}=s;if(!Xo.isInstance(i))return s;const{statusCode:o,body:l}=i;if(o<200||o>=300||!(typeof(l==null?void 0:l.stream)=="function"||typeof(l==null?void 0:l.pipe)=="function"||typeof(l==null?void 0:l.tee)=="function"))return s;let u=l,d=l;l&&typeof l=="object"&&!(l instanceof Uint8Array)&&([u,d]=await q8(l)),i.body=d;const h=await Sz(u,{streamCollector:async g=>L8(g,Ez)});typeof(u==null?void 0:u.destroy)=="function"&&u.destroy();const p=t.utf8Encoder(h.subarray(h.length-16));if(h.length===0&&xz[n.commandName]){const g=new Error("S3 aborted request");throw g.name="InternalError",g}return p&&p.endsWith("</Error>")&&(i.statusCode=400),s},Sz=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),Tz={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},U2=t=>({applyToStack:e=>{e.addRelativeTo(bz(t),Tz)}}),Az=t=>typeof t=="string"&&t.indexOf("arn:")===0&&t.split(":").length>=6;function Cz(t){return(e,n)=>async r=>{var s,i,o,l;if(t.bucketEndpoint){const a=n.endpointV2;if(a){const u=r.input.Bucket;if(typeof u=="string")try{const d=new URL(u);n.endpointV2={...a,url:d}}catch(d){const h=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${u} could not be parsed as URL.`;throw((i=(s=n.logger)==null?void 0:s.constructor)==null?void 0:i.name)==="NoOpLogger"?console.warn(h):(l=(o=n.logger)==null?void 0:o.warn)==null||l.call(o,h),d}}}return e(r)}}const kz={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function Iz({bucketEndpoint:t}){return e=>async n=>{const{input:{Bucket:r}}=n;if(!t&&typeof r=="string"&&!Az(r)&&r.indexOf("/")>=0){const s=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw s.name="InvalidBucketName",s}return e({...n})}}const Rz={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Pz=t=>({applyToStack:e=>{e.add(Iz(t),Rz),e.addRelativeTo(Cz(t),kz)}}),Nz=void 0;function Dz(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function Mz(t){const e=Xa(t.userAgentAppId??Nz),{customUserAgent:n}=t;return Object.assign(t,{customUserAgent:typeof n=="string"?[[n]]:n,userAgentAppId:async()=>{var s,i;const r=await e();if(!Dz(r)){const o=((i=(s=t.logger)==null?void 0:s.constructor)==null?void 0:i.name)==="NoOpLogger"||!t.logger?console:t.logger;typeof r!="string"?o==null||o.warn("userAgentAppId must be a string or undefined."):r.length>50&&(o==null||o.warn("The provided userAgentAppId exceeds the maximum length of 50 characters."))}return r}})}class Oz{constructor({size:e,params:n}){j(this,"capacity");j(this,"data",new Map);j(this,"parameters",[]);this.capacity=e??50,n&&(this.parameters=n)}get(e,n){const r=this.hash(e);if(r===!1)return n();if(!this.data.has(r)){if(this.data.size>this.capacity+10){const s=this.data.keys();let i=0;for(;;){const{value:o,done:l}=s.next();if(this.data.delete(o),l||++i>10)break}}this.data.set(r,n())}return this.data.get(r)}size(){return this.data.size}hash(e){let n="";const{parameters:r}=this;if(r.length===0)return!1;for(const s of r){const i=String(e[s]??"");if(i.includes("|;"))return!1;n+=i+"|;"}return n}}const jz=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),F2=t=>jz.test(t)||t.startsWith("[")&&t.endsWith("]"),Lz=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Sp=(t,e=!1)=>{if(!e)return Lz.test(t);const n=t.split(".");for(const r of n)if(!Sp(r))return!1;return!0},hf={},Cc="endpoints";function oo(t){return typeof t!="object"||t==null?t:"ref"in t?`$${oo(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(oo).join(", ")})`:JSON.stringify(t,null,2)}class _r extends Error{constructor(e){super(e),this.name="EndpointError"}}const Uz=(t,e)=>t===e,Fz=t=>{const e=t.split("."),n=[];for(const r of e){const s=r.indexOf("[");if(s!==-1){if(r.indexOf("]")!==r.length-1)throw new _r(`Path: '${t}' does not end with ']'`);const i=r.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new _r(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&n.push(r.slice(0,s)),n.push(i)}else n.push(r)}return n},B2=(t,e)=>Fz(e).reduce((n,r)=>{if(typeof n!="object")throw new _r(`Index '${r}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},t),Bz=t=>t!=null,Vz=t=>!t,Zm={[Tc.HTTP]:80,[Tc.HTTPS]:443},$z=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:p,port:g,protocol:w="",path:x="",query:E={}}=t,v=new URL(`${w}//${p}${g?`:${g}`:""}${x}`);return v.search=Object.entries(E).map(([_,b])=>`${_}=${b}`).join("&"),v}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const n=e.href,{host:r,hostname:s,pathname:i,protocol:o,search:l}=e;if(l)return null;const a=o.slice(0,-1);if(!Object.values(Tc).includes(a))return null;const u=F2(s),d=n.includes(`${r}:${Zm[a]}`)||typeof t=="string"&&t.includes(`${r}:${Zm[a]}`),h=`${r}${d?`:${Zm[a]}`:""}`;return{scheme:a,authority:h,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},zz=(t,e)=>t===e,qz=(t,e,n,r)=>e>=n||t.length<n?null:r?t.substring(t.length-n,t.length-e):t.substring(e,n),Hz=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Wz={booleanEquals:Uz,getAttr:B2,isSet:Bz,isValidHostLabel:Sp,not:Vz,parseURL:$z,stringEquals:zz,substring:qz,uriEncode:Hz},V2=(t,e)=>{const n=[],r={...e.endpointParams,...e.referenceRecord};let s=0;for(;s<t.length;){const i=t.indexOf("{",s);if(i===-1){n.push(t.slice(s));break}n.push(t.slice(s,i));const o=t.indexOf("}",i);if(o===-1){n.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(n.push(t.slice(i+1,o)),s=o+2);const l=t.substring(i+1,o);if(l.includes("#")){const[a,u]=l.split("#");n.push(B2(r[a],u))}else n.push(r[l]);s=o+1}return n.join("")},Gz=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],Tp=(t,e,n)=>{if(typeof t=="string")return V2(t,n);if(t.fn)return z2.callFunction(t,n);if(t.ref)return Gz(t,n);throw new _r(`'${e}': ${String(t)} is not a string, function or reference.`)},$2=({fn:t,argv:e},n)=>{const r=e.map(i=>["boolean","number"].includes(typeof i)?i:z2.evaluateExpression(i,"arg",n)),s=t.split(".");return s[0]in hf&&s[1]!=null?hf[s[0]][s[1]](...r):Wz[t](...r)},z2={evaluateExpression:Tp,callFunction:$2},Kz=({assign:t,...e},n)=>{var s,i;if(t&&t in n.referenceRecord)throw new _r(`'${t}' is already defined in Reference Record.`);const r=$2(e,n);return(i=(s=n.logger)==null?void 0:s.debug)==null||i.call(s,`${Cc} evaluateCondition: ${oo(e)} = ${oo(r)}`),{result:r===""?!0:!!r,...t!=null&&{toAssign:{name:t,value:r}}}},zv=(t=[],e)=>{var r,s;const n={};for(const i of t){const{result:o,toAssign:l}=Kz(i,{...e,referenceRecord:{...e.referenceRecord,...n}});if(!o)return{result:o};l&&(n[l.name]=l.value,(s=(r=e.logger)==null?void 0:r.debug)==null||s.call(r,`${Cc} assign: ${l.name} := ${oo(l.value)}`))}return{result:!0,referenceRecord:n}},Jz=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:s.map(i=>{const o=Tp(i,"Header value entry",e);if(typeof o!="string")throw new _r(`Header '${r}' value '${o}' is not a string`);return o})}),{}),q2=(t,e)=>Object.entries(t).reduce((n,[r,s])=>({...n,[r]:W2.getEndpointProperty(s,e)}),{}),H2=(t,e)=>{if(Array.isArray(t))return t.map(n=>H2(n,e));switch(typeof t){case"string":return V2(t,e);case"object":if(t===null)throw new _r(`Unexpected endpoint property: ${t}`);return W2.getEndpointProperties(t,e);case"boolean":return t;default:throw new _r(`Unexpected endpoint property type: ${typeof t}`)}},W2={getEndpointProperty:H2,getEndpointProperties:q2},Qz=(t,e)=>{const n=Tp(t,"Endpoint URL",e);if(typeof n=="string")try{return new URL(n)}catch(r){throw console.error(`Failed to construct URL with ${n}`,r),r}throw new _r(`Endpoint URL must be a string, got ${typeof n}`)},Xz=(t,e)=>{var d,h;const{conditions:n,endpoint:r}=t,{result:s,referenceRecord:i}=zv(n,e);if(!s)return;const o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:l,properties:a,headers:u}=r;return(h=(d=e.logger)==null?void 0:d.debug)==null||h.call(d,`${Cc} Resolving endpoint from template: ${oo(r)}`),{...u!=null&&{headers:Jz(u,o)},...a!=null&&{properties:q2(a,o)},url:Qz(l,o)}},Yz=(t,e)=>{const{conditions:n,error:r}=t,{result:s,referenceRecord:i}=zv(n,e);if(s)throw new _r(Tp(r,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},G2=(t,e)=>{for(const n of t)if(n.type==="endpoint"){const r=Xz(n,e);if(r)return r}else if(n.type==="error")Yz(n,e);else if(n.type==="tree"){const r=K2.evaluateTreeRule(n,e);if(r)return r}else throw new _r(`Unknown endpoint rule: ${n}`);throw new _r("Rules evaluation failed")},Zz=(t,e)=>{const{conditions:n,rules:r}=t,{result:s,referenceRecord:i}=zv(n,e);if(s)return K2.evaluateRules(r,{...e,referenceRecord:{...e.referenceRecord,...i}})},K2={evaluateRules:G2,evaluateTreeRule:Zz},e7=(t,e)=>{var u,d,h,p;const{endpointParams:n,logger:r}=e,{parameters:s,rules:i}=t;(d=(u=e.logger)==null?void 0:u.debug)==null||d.call(u,`${Cc} Initial EndpointParams: ${oo(n)}`);const o=Object.entries(s).filter(([,g])=>g.default!=null).map(([g,w])=>[g,w.default]);if(o.length>0)for(const[g,w]of o)n[g]=n[g]??w;const l=Object.entries(s).filter(([,g])=>g.required).map(([g])=>g);for(const g of l)if(n[g]==null)throw new _r(`Missing required parameter: '${g}'`);const a=G2(i,{endpointParams:n,logger:r,referenceRecord:{}});return(p=(h=e.logger)==null?void 0:h.debug)==null||p.call(h,`${Cc} Resolved endpoint: ${oo(a)}`),a},J2=(t,e=!1)=>{if(e){for(const n of t.split("."))if(!J2(n))return!1;return!0}return!(!Sp(t)||t.length<3||t.length>63||t!==t.toLowerCase()||F2(t))},IS=":",t7="/",n7=t=>{const e=t.split(IS);if(e.length<6)return null;const[n,r,s,i,o,...l]=e;if(n!=="arn"||r===""||s===""||l.join(IS)==="")return null;const a=l.map(u=>u.split(t7)).flat();return{partition:r,service:s,region:i,accountId:o,resourceId:a}},r7=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],s7={partitions:r7};let i7=s7;const o7=t=>{const{partitions:e}=i7;for(const r of e){const{regions:s,outputs:i}=r;for(const[o,l]of Object.entries(s))if(o===t)return{...i,...l}}for(const r of e){const{regionRegex:s,outputs:i}=r;if(new RegExp(s).test(t))return{...i}}const n=e.find(r=>r.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},Q2={isVirtualHostableS3Bucket:J2,parseArn:n7,partition:o7};hf.aws=Q2;function a7(t){const e={};if(t=t.replace(/^\?/,""),t)for(const n of t.split("&")){let[r,s=null]=n.split("=");r=decodeURIComponent(r),s&&(s=decodeURIComponent(s)),r in e?Array.isArray(e[r])?e[r].push(s):e[r]=[e[r],s]:e[r]=s}return e}const ff=t=>{if(typeof t=="string")return ff(new URL(t));const{hostname:e,pathname:n,port:r,protocol:s,search:i}=t;let o;return i&&(o=a7(i)),{hostname:e,port:r?parseInt(r):void 0,protocol:s,path:n,query:o}},l7=/\d{12}\.ddb/;async function u7(t,e,n){var i,o,l,a,u,d,h;const r=n.request;if(((i=r==null?void 0:r.headers)==null?void 0:i["smithy-protocol"])==="rpc-v2-cbor"&&zt(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const p=await e.retryStrategy();typeof p.acquireInitialRetryToken=="function"?(l=(o=p.constructor)==null?void 0:o.name)!=null&&l.includes("Adaptive")?zt(t,"RETRY_MODE_ADAPTIVE","F"):zt(t,"RETRY_MODE_STANDARD","E"):zt(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const p=t.endpointV2;switch(String((a=p==null?void 0:p.url)==null?void 0:a.hostname).match(l7)&&zt(t,"ACCOUNT_ID_ENDPOINT","O"),await((u=e.accountIdEndpointMode)==null?void 0:u.call(e))){case"disabled":zt(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":zt(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":zt(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=(h=(d=t.__smithy_context)==null?void 0:d.selectedHttpAuthScheme)==null?void 0:h.identity;if(s!=null&&s.$source){const p=s;p.accountId&&zt(t,"RESOLVED_ACCOUNT_ID","T");for(const[g,w]of Object.entries(p.$source??{}))zt(t,g,w)}}const RS="user-agent",eg="x-amz-user-agent",PS=" ",tg="/",c7=/[^!$%&'*+\-.^_`|~\w]/g,d7=/[^!$%&'*+\-.^_`|~\w#]/g,NS="-",h7=1024;function f7(t){let e="";for(const n in t){const r=t[n];if(e.length+r.length+1<=h7){e.length?e+=","+r:e+=r;continue}break}return e}const p7=t=>(e,n)=>async r=>{var g,w,x,E;const{request:s}=r;if(!Xt.isInstance(s))return e(r);const{headers:i}=s,o=((g=n==null?void 0:n.userAgent)==null?void 0:g.map(Ld))||[],l=(await t.defaultUserAgentProvider()).map(Ld);await u7(n,t,r);const a=n;l.push(`m/${f7(Object.assign({},(w=n.__smithy_context)==null?void 0:w.features,(x=a.__aws_sdk_context)==null?void 0:x.features))}`);const u=((E=t==null?void 0:t.customUserAgent)==null?void 0:E.map(Ld))||[],d=await t.userAgentAppId();d&&l.push(Ld(["app",`${d}`]));const h=[].concat([...l,...o,...u]).join(PS),p=[...l.filter(v=>v.startsWith("aws-sdk-")),...u].join(PS);return t.runtime!=="browser"?(p&&(i[eg]=i[eg]?`${i[RS]} ${p}`:p),i[RS]=h):i[eg]=h,e({...r,request:s})},Ld=t=>{var o;const e=t[0].split(tg).map(l=>l.replace(c7,NS)).join(tg),n=(o=t[1])==null?void 0:o.replace(d7,NS),r=e.indexOf(tg),s=e.substring(0,r);let i=e.substring(r+1);return s==="api"&&(i=i.toLowerCase()),[s,i,n].filter(l=>l&&l.length>0).reduce((l,a,u)=>{switch(u){case 0:return a;case 1:return`${l}/${a}`;default:return`${l}#${a}`}},"")},m7={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},g7=t=>({applyToStack:e=>{e.add(p7(t),m7)}}),y7=!1,w7=!1,DS=new Set,v7=(t,e=Sp)=>{if(!DS.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else DS.add(t)},X2=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),_7=t=>X2(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,x7=t=>{const{region:e,useFipsEndpoint:n}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{const r=typeof e=="function"?await e():e,s=_7(r);return v7(s),s},useFipsEndpoint:async()=>{const r=typeof e=="string"?e:await e();return X2(r)?!0:typeof n!="function"?Promise.resolve(!!n):n()}})},E7=t=>Object.assign(t,{eventStreamMarshaller:t.eventStreamSerdeProvider(t)}),MS="content-length";function b7(t){return e=>async n=>{const r=n.request;if(Xt.isInstance(r)){const{body:s,headers:i}=r;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(MS)===-1)try{const o=t(s);r.headers={...r.headers,[MS]:String(o)}}catch{}}return e({...n,request:r})}}const S7={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},T7=t=>({applyToStack:e=>{e.add(b7(t.bodyLengthChecker),S7)}}),A7=async t=>{const e=(t==null?void 0:t.Bucket)||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),P7(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!R7(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},C7=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,k7=/(\d+\.){3}\d+/,I7=/\.\./,R7=t=>C7.test(t)&&!k7.test(t)&&!I7.test(t),P7=t=>{const[e,n,r,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&n&&r&&s);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},N7=(t,e,n)=>{const r=async()=>{const s=n[t]??n[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return(s==null?void 0:s.credentialScope)??(s==null?void 0:s.CredentialScope)}:t==="accountId"||e==="AccountId"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return(s==null?void 0:s.accountId)??(s==null?void 0:s.AccountId)}:t==="endpoint"||e==="endpoint"?async()=>{if(n.isCustomEndpoint===!1)return;const s=await r();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:o,port:l,path:a}=s;return`${i}//${o}${l?":"+l:""}${a}`}}return s}:r},Y2=async t=>{},Z2=t=>typeof t=="object"?"url"in t?ff(t.url):t:ff(t),D7=async(t,e,n,r)=>{if(!n.isCustomEndpoint){let o;n.serviceConfiguredEndpoint?o=await n.serviceConfiguredEndpoint():o=await Y2(n.serviceId),o&&(n.endpoint=()=>Promise.resolve(Z2(o)),n.isCustomEndpoint=!0)}const s=await eP(t,e,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)},eP=async(t,e,n)=>{var i;const r={},s=((i=e==null?void 0:e.getEndpointParameterInstructions)==null?void 0:i.call(e))||{};for(const[o,l]of Object.entries(s))switch(l.type){case"staticContextParams":r[o]=l.value;break;case"contextParams":r[o]=t[l.name];break;case"clientContextParams":case"builtInParams":r[o]=await N7(l.name,o,n)();break;case"operationContextParams":r[o]=l.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(l))}return Object.keys(s).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()==="s3"&&await A7(r),r},M7=({config:t,instructions:e})=>(n,r)=>async s=>{var l,a,u;t.isCustomEndpoint&&y9(r,"ENDPOINT_OVERRIDE","N");const i=await D7(s.input,{getEndpointParameterInstructions(){return e}},{...t},r);r.endpointV2=i,r.authSchemes=(l=i.properties)==null?void 0:l.authSchemes;const o=(a=r.authSchemes)==null?void 0:a[0];if(o){r.signing_region=o.signingRegion,r.signing_service=o.signingName;const d=mo(r),h=(u=d==null?void 0:d.selectedHttpAuthScheme)==null?void 0:u.httpAuthOption;h&&(h.signingProperties=Object.assign(h.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return n({...s})},O7={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:x8.name},tP=(t,e)=>({applyToStack:n=>{n.addRelativeTo(M7({config:t,instructions:e}),O7)}}),j7=t=>{const e=t.tls??!0,{endpoint:n,useDualstackEndpoint:r,useFipsEndpoint:s}=t,i=n!=null?async()=>Z2(await Jr(n)()):void 0,l=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!n,useDualstackEndpoint:Jr(r??!1),useFipsEndpoint:Jr(s??!1)});let a;return l.serviceConfiguredEndpoint=async()=>(t.serviceId&&!a&&(a=Y2(t.serviceId)),a),l};var _l;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(_l||(_l={}));const pf=3,L7=_l.STANDARD,U7=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],F7=["TimeoutError","RequestTimeout","RequestTimeoutException"],B7=[500,502,503,504],V7=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],$7=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],z7=t=>(t==null?void 0:t.$retryable)!==void 0,q7=t=>{var e;return(e=t.$metadata)==null?void 0:e.clockSkewCorrected},H7=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},nP=t=>{var e,n;return((e=t.$metadata)==null?void 0:e.httpStatusCode)===429||U7.includes(t.name)||((n=t.$retryable)==null?void 0:n.throttling)==!0},qv=(t,e=0)=>{var n;return z7(t)||q7(t)||F7.includes(t.name)||V7.includes((t==null?void 0:t.code)||"")||$7.includes((t==null?void 0:t.code)||"")||B7.includes(((n=t.$metadata)==null?void 0:n.httpStatusCode)||0)||H7(t)||t.cause!==void 0&&e<=10&&qv(t.cause,e+1)},W7=t=>{var e;if(((e=t.$metadata)==null?void 0:e.httpStatusCode)!==void 0){const n=t.$metadata.httpStatusCode;return 500<=n&&n<=599&&!qv(t)}return!1},Tf=class Tf{constructor(e){j(this,"beta");j(this,"minCapacity");j(this,"minFillRate");j(this,"scaleConstant");j(this,"smooth");j(this,"currentCapacity",0);j(this,"enabled",!1);j(this,"lastMaxRate",0);j(this,"measuredTxRate",0);j(this,"requestCount",0);j(this,"fillRate");j(this,"lastThrottleTime");j(this,"lastTimestamp",0);j(this,"lastTxRateBucket");j(this,"maxCapacity");j(this,"timeWindow",0);this.beta=(e==null?void 0:e.beta)??.7,this.minCapacity=(e==null?void 0:e.minCapacity)??1,this.minFillRate=(e==null?void 0:e.minFillRate)??.5,this.scaleConstant=(e==null?void 0:e.scaleConstant)??.4,this.smooth=(e==null?void 0:e.smooth)??.8;const n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const n=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(r=>Tf.setTimeoutFn(r,n))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const n=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=e}updateClientSendingRate(e){let n;if(this.updateMeasuredRate(),nP(e)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),n=Math.floor(e*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){const r=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(e){return parseFloat(e.toFixed(8))}};j(Tf,"setTimeoutFn",setTimeout);let f0=Tf;const p0=100,rP=20*1e3,G7=500,OS=500,K7=5,J7=10,Q7=1,X7="amz-sdk-invocation-id",Y7="amz-sdk-request",Z7=()=>{let t=p0;return{computeNextBackoffDelay:r=>Math.floor(Math.min(rP,Math.random()*2**r*t)),setDelayBase:r=>{t=r}}},jS=({retryDelay:t,retryCount:e,retryCost:n})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(rP,t),getRetryCost:()=>n});class sP{constructor(e){j(this,"maxAttempts");j(this,"mode",_l.STANDARD);j(this,"capacity",OS);j(this,"retryBackoffStrategy",Z7());j(this,"maxAttemptsProvider");this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return jS({retryDelay:p0,retryCount:0})}async refreshRetryTokenForRetry(e,n){const r=await this.getMaxAttempts();if(this.shouldRetry(e,n,r)){const s=n.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?G7:p0);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,i):i,l=this.getCapacityCost(s);return this.capacity-=l,jS({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:l})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(OS,this.capacity+(e.getRetryCost()??Q7))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${pf}`),pf}}shouldRetry(e,n,r){return e.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(e){return e==="TRANSIENT"?J7:K7}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class eq{constructor(e,n){j(this,"maxAttemptsProvider");j(this,"rateLimiter");j(this,"standardRetryStrategy");j(this,"mode",_l.ADAPTIVE);this.maxAttemptsProvider=e;const{rateLimiter:r}=n??{};this.rateLimiter=r??new f0,this.standardRetryStrategy=new sP(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(e,n)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const tq=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),nq=t=>{const{retryStrategy:e,retryMode:n,maxAttempts:r}=t,s=Jr(r??pf);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await Jr(n)()===_l.ADAPTIVE?new eq(s):new sP(s))})},rq=t=>(t==null?void 0:t.body)instanceof ReadableStream,sq=t=>(e,n)=>async r=>{var o;let s=await t.retryStrategy();const i=await t.maxAttempts();if(iq(s)){s=s;let l=await s.acquireInitialRetryToken(n.partition_id),a=new Error,u=0,d=0;const{request:h}=r,p=Xt.isInstance(h);for(p&&(h.headers[X7]=Nv());;)try{p&&(h.headers[Y7]=`attempt=${u+1}; max=${i}`);const{response:g,output:w}=await e(r);return s.recordSuccess(l),w.$metadata.attempts=u+1,w.$metadata.totalRetryDelay=d,{response:g,output:w}}catch(g){const w=oq(g);if(a=tq(g),p&&rq(h))throw(o=n.logger instanceof Uv?console:n.logger)==null||o.warn("An error was encountered in a non-retryable streaming request."),a;try{l=await s.refreshRetryTokenForRetry(l,w)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=u+1,a.$metadata.totalRetryDelay=d,a}u=l.getRetryCount();const x=l.getRetryDelay();d+=x,await new Promise(E=>setTimeout(E,x))}}else return s=s,s!=null&&s.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,r)},iq=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",oq=t=>{const e={error:t,errorType:aq(t)},n=cq(t.$response);return n&&(e.retryAfterHint=n),e},aq=t=>nP(t)?"THROTTLING":qv(t)?"TRANSIENT":W7(t)?"SERVER_ERROR":"CLIENT_ERROR",lq={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},uq=t=>({applyToStack:e=>{e.add(sq(t),lq)}}),cq=t=>{if(!Xo.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const n=t.headers[e],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(r*1e3)};class iP{constructor(e){j(this,"sigv4aSigner");j(this,"sigv4Signer");j(this,"signerOptions");this.sigv4Signer=new dz(e),this.signerOptions=e}static sigv4aDependency(){return"none"}async sign(e,n={}){return n.signingRegion==="*"?this.getSigv4aSigner().sign(e,n):this.sigv4Signer.sign(e,n)}async signWithCredentials(e,n,r={}){if(r.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.signWithCredentials(e,n,r)}async presign(e,n={}){if(n.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.presign(e,n)}async presignWithCredentials(e,n,r={}){if(r.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(e,n,r)}getSigv4aSigner(){if(!this.sigv4aSigner)throw this.signerOptions.runtime==="node"?new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt"):new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");return this.sigv4aSigner}}const Hv="required",k="type",W="rules",D="conditions",U="fn",F="argv",_e="ref",Me="assign",ae="url",le="properties",Us="backend",fn="authSchemes",Gt="disableDoubleEncoding",Kt="signingName",vn="signingRegion",ue="headers",Wv="signingRegionSet",dq=6,hq=!1,as=!0,pr="isSet",Ft="booleanEquals",pe="error",mf="aws.partition",Ke="stringEquals",wt="getAttr",vt="name",it="substring",LS="bucketSuffix",Gv="parseURL",X="endpoint",G="tree",gf="aws.isVirtualHostableS3Bucket",yf="{url#scheme}://{Bucket}.{url#authority}{url#path}",Ss="not",US="accessPointSuffix",dh="{url#scheme}://{url#authority}{url#path}",oP="hardwareType",aP="regionPrefix",FS="bucketAliasSuffix",m0="outpostId",la="isValidHostLabel",Kv="sigv4a",kc="s3-outposts",xl="s3",lP="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",uP="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",BS="https://{Bucket}.s3.{partitionResult#dnsSuffix}",cP="aws.parseArn",dP="bucketArn",hP="arnType",wf="",Jv="s3-object-lambda",fP="accesspoint",Qv="accessPointName",VS="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",$S="mrapPartition",zS="outpostType",qS="arnPrefix",pP="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",HS="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",WS="https://s3.{partitionResult#dnsSuffix}",ga={[Hv]:!1,[k]:"string"},ya={[Hv]:!0,default:!1,[k]:"boolean"},ou={[Hv]:!1,[k]:"boolean"},Ar={[U]:Ft,[F]:[{[_e]:"Accelerate"},!0]},lt={[U]:Ft,[F]:[{[_e]:"UseFIPS"},!0]},rt={[U]:Ft,[F]:[{[_e]:"UseDualStack"},!0]},Ot={[U]:pr,[F]:[{[_e]:"Endpoint"}]},mP={[U]:mf,[F]:[{[_e]:"Region"}],[Me]:"partitionResult"},GS={[U]:Ke,[F]:[{[U]:wt,[F]:[{[_e]:"partitionResult"},vt]},"aws-cn"]},Bu={[U]:pr,[F]:[{[_e]:"Bucket"}]},We={[_e]:"Bucket"},KS={[D]:[Ar],[pe]:"S3Express does not support S3 Accelerate.",[k]:pe},JS={[D]:[Ot,{[U]:Gv,[F]:[{[_e]:"Endpoint"}],[Me]:"url"}],[W]:[{[D]:[{[U]:pr,[F]:[{[_e]:"DisableS3ExpressSessionAuth"}]},{[U]:Ft,[F]:[{[_e]:"DisableS3ExpressSessionAuth"},!0]}],[W]:[{[D]:[{[U]:Ft,[F]:[{[U]:wt,[F]:[{[_e]:"url"},"isIp"]},!0]}],[W]:[{[D]:[{[U]:"uriEncode",[F]:[We],[Me]:"uri_encoded_bucket"}],[W]:[{[X]:{[ae]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[le]:{[Us]:"S3Express",[fn]:[{[Gt]:!0,[vt]:"sigv4",[Kt]:"s3express",[vn]:"{Region}"}]},[ue]:{}},[k]:X}],[k]:G}],[k]:G},{[D]:[{[U]:gf,[F]:[We,!1]}],[W]:[{[X]:{[ae]:yf,[le]:{[Us]:"S3Express",[fn]:[{[Gt]:!0,[vt]:"sigv4",[Kt]:"s3express",[vn]:"{Region}"}]},[ue]:{}},[k]:X}],[k]:G},{[pe]:"S3Express bucket name is not a valid virtual hostable name.",[k]:pe}],[k]:G},{[D]:[{[U]:Ft,[F]:[{[U]:wt,[F]:[{[_e]:"url"},"isIp"]},!0]}],[W]:[{[D]:[{[U]:"uriEncode",[F]:[We],[Me]:"uri_encoded_bucket"}],[W]:[{[X]:{[ae]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[le]:{[Us]:"S3Express",[fn]:[{[Gt]:!0,[vt]:"sigv4-s3express",[Kt]:"s3express",[vn]:"{Region}"}]},[ue]:{}},[k]:X}],[k]:G}],[k]:G},{[D]:[{[U]:gf,[F]:[We,!1]}],[W]:[{[X]:{[ae]:yf,[le]:{[Us]:"S3Express",[fn]:[{[Gt]:!0,[vt]:"sigv4-s3express",[Kt]:"s3express",[vn]:"{Region}"}]},[ue]:{}},[k]:X}],[k]:G},{[pe]:"S3Express bucket name is not a valid virtual hostable name.",[k]:pe}],[k]:G},Bn={[U]:Gv,[F]:[{[_e]:"Endpoint"}],[Me]:"url"},ng={[U]:Ft,[F]:[{[U]:wt,[F]:[{[_e]:"url"},"isIp"]},!0]},gP={[_e]:"url"},yP={[U]:"uriEncode",[F]:[We],[Me]:"uri_encoded_bucket"},hr={[Us]:"S3Express",[fn]:[{[Gt]:!0,[vt]:"sigv4",[Kt]:"s3express",[vn]:"{Region}"}]},ke={},wP={[U]:gf,[F]:[We,!1]},QS={[pe]:"S3Express bucket name is not a valid virtual hostable name.",[k]:pe},XS={[U]:pr,[F]:[{[_e]:"UseS3ExpressControlEndpoint"}]},YS={[U]:Ft,[F]:[{[_e]:"UseS3ExpressControlEndpoint"},!0]},Ne={[U]:Ss,[F]:[Ot]},Be={[U]:Ft,[F]:[{[_e]:"UseDualStack"},!1]},je={[U]:Ft,[F]:[{[_e]:"UseFIPS"},!1]},Ud={[pe]:"Unrecognized S3Express bucket name format.",[k]:pe},ZS={[U]:Ss,[F]:[Bu]},e1={[_e]:oP},t1={[D]:[Ne],[pe]:"Expected a endpoint to be specified but no endpoint was found",[k]:pe},Fd={[fn]:[{[Gt]:!0,[vt]:Kv,[Kt]:kc,[Wv]:["*"]},{[Gt]:!0,[vt]:"sigv4",[Kt]:kc,[vn]:"{Region}"}]},rg={[U]:Ft,[F]:[{[_e]:"ForcePathStyle"},!1]},fq={[_e]:"ForcePathStyle"},Vt={[U]:Ft,[F]:[{[_e]:"Accelerate"},!1]},en={[U]:Ke,[F]:[{[_e]:"Region"},"aws-global"]},ln={[fn]:[{[Gt]:!0,[vt]:"sigv4",[Kt]:xl,[vn]:"us-east-1"}]},$e={[U]:Ss,[F]:[en]},un={[U]:Ft,[F]:[{[_e]:"UseGlobalEndpoint"},!0]},n1={[ae]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[le]:{[fn]:[{[Gt]:!0,[vt]:"sigv4",[Kt]:xl,[vn]:"{Region}"}]},[ue]:{}},Qt={[fn]:[{[Gt]:!0,[vt]:"sigv4",[Kt]:xl,[vn]:"{Region}"}]},cn={[U]:Ft,[F]:[{[_e]:"UseGlobalEndpoint"},!1]},r1={[ae]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[le]:Qt,[ue]:{}},s1={[ae]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[le]:Qt,[ue]:{}},i1={[ae]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[le]:Qt,[ue]:{}},sg={[U]:Ft,[F]:[{[U]:wt,[F]:[gP,"isIp"]},!1]},ig={[ae]:lP,[le]:Qt,[ue]:{}},g0={[ae]:yf,[le]:Qt,[ue]:{}},o1={[X]:g0,[k]:X},og={[ae]:uP,[le]:Qt,[ue]:{}},a1={[ae]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[le]:Qt,[ue]:{}},Bd={[pe]:"Invalid region: region was not a valid DNS name.",[k]:pe},tr={[_e]:dP},vP={[_e]:hP},ag={[U]:wt,[F]:[tr,"service"]},Xv={[_e]:Qv},l1={[D]:[rt],[pe]:"S3 Object Lambda does not support Dual-stack",[k]:pe},u1={[D]:[Ar],[pe]:"S3 Object Lambda does not support S3 Accelerate",[k]:pe},c1={[D]:[{[U]:pr,[F]:[{[_e]:"DisableAccessPoints"}]},{[U]:Ft,[F]:[{[_e]:"DisableAccessPoints"},!0]}],[pe]:"Access points are not supported for this operation",[k]:pe},lg={[D]:[{[U]:pr,[F]:[{[_e]:"UseArnRegion"}]},{[U]:Ft,[F]:[{[_e]:"UseArnRegion"},!1]},{[U]:Ss,[F]:[{[U]:Ke,[F]:[{[U]:wt,[F]:[tr,"region"]},"{Region}"]}]}],[pe]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[k]:pe},_P={[U]:wt,[F]:[{[_e]:"bucketPartition"},vt]},xP={[U]:wt,[F]:[tr,"accountId"]},ug={[fn]:[{[Gt]:!0,[vt]:"sigv4",[Kt]:Jv,[vn]:"{bucketArn#region}"}]},d1={[pe]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[k]:pe},cg={[pe]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[k]:pe},dg={[pe]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[k]:pe},hg={[pe]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[k]:pe},h1={[pe]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[k]:pe},f1={[pe]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[k]:pe},au={[fn]:[{[Gt]:!0,[vt]:"sigv4",[Kt]:xl,[vn]:"{bucketArn#region}"}]},p1={[fn]:[{[Gt]:!0,[vt]:Kv,[Kt]:kc,[Wv]:["*"]},{[Gt]:!0,[vt]:"sigv4",[Kt]:kc,[vn]:"{bucketArn#region}"}]},m1={[U]:cP,[F]:[We]},g1={[ae]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[le]:Qt,[ue]:{}},y1={[ae]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[le]:Qt,[ue]:{}},w1={[ae]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[le]:Qt,[ue]:{}},fg={[ae]:pP,[le]:Qt,[ue]:{}},v1={[ae]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[le]:Qt,[ue]:{}},_1={[_e]:"UseObjectLambdaEndpoint"},pg={[fn]:[{[Gt]:!0,[vt]:"sigv4",[Kt]:Jv,[vn]:"{Region}"}]},x1={[ae]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[le]:Qt,[ue]:{}},E1={[ae]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[le]:Qt,[ue]:{}},b1={[ae]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[le]:Qt,[ue]:{}},mg={[ae]:dh,[le]:Qt,[ue]:{}},S1={[ae]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[le]:Qt,[ue]:{}},gg=[{[_e]:"Region"}],pq=[{[_e]:"Endpoint"}],mq=[We],yg=[Ar],wa=[Ot,Bn],T1=[{[U]:pr,[F]:[{[_e]:"DisableS3ExpressSessionAuth"}]},{[U]:Ft,[F]:[{[_e]:"DisableS3ExpressSessionAuth"},!0]}],gq=[yP],A1=[wP],Tr=[mP],wg=[lt,rt],Vu=[lt,Be],$u=[je,rt],zu=[je,Be],C1=[{[U]:it,[F]:[We,6,14,!0],[Me]:"s3expressAvailabilityZoneId"},{[U]:it,[F]:[We,14,16,!0],[Me]:"s3expressAvailabilityZoneDelim"},{[U]:Ke,[F]:[{[_e]:"s3expressAvailabilityZoneDelim"},"--"]}],ls=[{[D]:[lt,rt],[X]:{[ae]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[le]:hr,[ue]:{}},[k]:X},{[D]:Vu,[X]:{[ae]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[le]:hr,[ue]:{}},[k]:X},{[D]:$u,[X]:{[ae]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[le]:hr,[ue]:{}},[k]:X},{[D]:zu,[X]:{[ae]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[le]:hr,[ue]:{}},[k]:X}],k1=[{[U]:it,[F]:[We,6,15,!0],[Me]:"s3expressAvailabilityZoneId"},{[U]:it,[F]:[We,15,17,!0],[Me]:"s3expressAvailabilityZoneDelim"},{[U]:Ke,[F]:[{[_e]:"s3expressAvailabilityZoneDelim"},"--"]}],I1=[{[U]:it,[F]:[We,6,19,!0],[Me]:"s3expressAvailabilityZoneId"},{[U]:it,[F]:[We,19,21,!0],[Me]:"s3expressAvailabilityZoneDelim"},{[U]:Ke,[F]:[{[_e]:"s3expressAvailabilityZoneDelim"},"--"]}],R1=[{[U]:it,[F]:[We,6,20,!0],[Me]:"s3expressAvailabilityZoneId"},{[U]:it,[F]:[We,20,22,!0],[Me]:"s3expressAvailabilityZoneDelim"},{[U]:Ke,[F]:[{[_e]:"s3expressAvailabilityZoneDelim"},"--"]}],P1=[{[U]:it,[F]:[We,6,26,!0],[Me]:"s3expressAvailabilityZoneId"},{[U]:it,[F]:[We,26,28,!0],[Me]:"s3expressAvailabilityZoneDelim"},{[U]:Ke,[F]:[{[_e]:"s3expressAvailabilityZoneDelim"},"--"]}],us=[{[D]:[lt,rt],[X]:{[ae]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[le]:{[Us]:"S3Express",[fn]:[{[Gt]:!0,[vt]:"sigv4-s3express",[Kt]:"s3express",[vn]:"{Region}"}]},[ue]:{}},[k]:X},{[D]:Vu,[X]:{[ae]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[le]:{[Us]:"S3Express",[fn]:[{[Gt]:!0,[vt]:"sigv4-s3express",[Kt]:"s3express",[vn]:"{Region}"}]},[ue]:{}},[k]:X},{[D]:$u,[X]:{[ae]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[le]:{[Us]:"S3Express",[fn]:[{[Gt]:!0,[vt]:"sigv4-s3express",[Kt]:"s3express",[vn]:"{Region}"}]},[ue]:{}},[k]:X},{[D]:zu,[X]:{[ae]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[le]:{[Us]:"S3Express",[fn]:[{[Gt]:!0,[vt]:"sigv4-s3express",[Kt]:"s3express",[vn]:"{Region}"}]},[ue]:{}},[k]:X}],N1=[We,0,7,!0],D1=[{[U]:it,[F]:[We,7,15,!0],[Me]:"s3expressAvailabilityZoneId"},{[U]:it,[F]:[We,15,17,!0],[Me]:"s3expressAvailabilityZoneDelim"},{[U]:Ke,[F]:[{[_e]:"s3expressAvailabilityZoneDelim"},"--"]}],M1=[{[U]:it,[F]:[We,7,16,!0],[Me]:"s3expressAvailabilityZoneId"},{[U]:it,[F]:[We,16,18,!0],[Me]:"s3expressAvailabilityZoneDelim"},{[U]:Ke,[F]:[{[_e]:"s3expressAvailabilityZoneDelim"},"--"]}],O1=[{[U]:it,[F]:[We,7,20,!0],[Me]:"s3expressAvailabilityZoneId"},{[U]:it,[F]:[We,20,22,!0],[Me]:"s3expressAvailabilityZoneDelim"},{[U]:Ke,[F]:[{[_e]:"s3expressAvailabilityZoneDelim"},"--"]}],j1=[{[U]:it,[F]:[We,7,21,!0],[Me]:"s3expressAvailabilityZoneId"},{[U]:it,[F]:[We,21,23,!0],[Me]:"s3expressAvailabilityZoneDelim"},{[U]:Ke,[F]:[{[_e]:"s3expressAvailabilityZoneDelim"},"--"]}],L1=[{[U]:it,[F]:[We,7,27,!0],[Me]:"s3expressAvailabilityZoneId"},{[U]:it,[F]:[We,27,29,!0],[Me]:"s3expressAvailabilityZoneDelim"},{[U]:Ke,[F]:[{[_e]:"s3expressAvailabilityZoneDelim"},"--"]}],yq=[Bu],U1=[{[U]:la,[F]:[{[_e]:m0},!1]}],F1=[{[U]:Ke,[F]:[{[_e]:aP},"beta"]}],wq=["*"],B1=[{[U]:la,[F]:[{[_e]:"Region"},!1]}],mi=[{[U]:Ke,[F]:[{[_e]:"Region"},"us-east-1"]}],vg=[{[U]:Ke,[F]:[vP,fP]}],V1=[{[U]:wt,[F]:[tr,"resourceId[1]"],[Me]:Qv},{[U]:Ss,[F]:[{[U]:Ke,[F]:[Xv,wf]}]}],vq=[tr,"resourceId[1]"],$1=[rt],_g=[{[U]:Ss,[F]:[{[U]:Ke,[F]:[{[U]:wt,[F]:[tr,"region"]},wf]}]}],z1=[{[U]:Ss,[F]:[{[U]:pr,[F]:[{[U]:wt,[F]:[tr,"resourceId[2]"]}]}]}],_q=[tr,"resourceId[2]"],xg=[{[U]:mf,[F]:[{[U]:wt,[F]:[tr,"region"]}],[Me]:"bucketPartition"}],q1=[{[U]:Ke,[F]:[_P,{[U]:wt,[F]:[{[_e]:"partitionResult"},vt]}]}],Eg=[{[U]:la,[F]:[{[U]:wt,[F]:[tr,"region"]},!0]}],bg=[{[U]:la,[F]:[xP,!1]}],H1=[{[U]:la,[F]:[Xv,!1]}],Vd=[lt],W1=[{[U]:la,[F]:[{[_e]:"Region"},!0]}],xq={parameters:{Bucket:ga,Region:ga,UseFIPS:ya,UseDualStack:ya,Endpoint:ga,ForcePathStyle:ya,Accelerate:ya,UseGlobalEndpoint:ya,UseObjectLambdaEndpoint:ou,Key:ga,Prefix:ga,CopySource:ga,DisableAccessPoints:ou,DisableMultiRegionAccessPoints:ya,UseArnRegion:ou,UseS3ExpressControlEndpoint:ou,DisableS3ExpressSessionAuth:ou},[W]:[{[D]:[{[U]:pr,[F]:gg}],[W]:[{[D]:[Ar,lt],error:"Accelerate cannot be used with FIPS",[k]:pe},{[D]:[rt,Ot],error:"Cannot set dual-stack in combination with a custom endpoint.",[k]:pe},{[D]:[Ot,lt],error:"A custom endpoint cannot be combined with FIPS",[k]:pe},{[D]:[Ot,Ar],error:"A custom endpoint cannot be combined with S3 Accelerate",[k]:pe},{[D]:[lt,mP,GS],error:"Partition does not support FIPS",[k]:pe},{[D]:[Bu,{[U]:it,[F]:[We,0,dq,as],[Me]:LS},{[U]:Ke,[F]:[{[_e]:LS},"--x-s3"]}],[W]:[KS,JS,{[D]:[XS,YS],[W]:[{[D]:Tr,[W]:[{[D]:[yP,Ne],[W]:[{[D]:wg,endpoint:{[ae]:"https://s3express-control-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[le]:hr,[ue]:ke},[k]:X},{[D]:Vu,endpoint:{[ae]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[le]:hr,[ue]:ke},[k]:X},{[D]:$u,endpoint:{[ae]:"https://s3express-control.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[le]:hr,[ue]:ke},[k]:X},{[D]:zu,endpoint:{[ae]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[le]:hr,[ue]:ke},[k]:X}],[k]:G}],[k]:G}],[k]:G},{[D]:A1,[W]:[{[D]:Tr,[W]:[{[D]:T1,[W]:[{[D]:C1,[W]:ls,[k]:G},{[D]:k1,[W]:ls,[k]:G},{[D]:I1,[W]:ls,[k]:G},{[D]:R1,[W]:ls,[k]:G},{[D]:P1,[W]:ls,[k]:G},Ud],[k]:G},{[D]:C1,[W]:us,[k]:G},{[D]:k1,[W]:us,[k]:G},{[D]:I1,[W]:us,[k]:G},{[D]:R1,[W]:us,[k]:G},{[D]:P1,[W]:us,[k]:G},Ud],[k]:G}],[k]:G},QS],[k]:G},{[D]:[Bu,{[U]:it,[F]:N1,[Me]:US},{[U]:Ke,[F]:[{[_e]:US},"--xa-s3"]}],[W]:[KS,JS,{[D]:A1,[W]:[{[D]:Tr,[W]:[{[D]:T1,[W]:[{[D]:D1,[W]:ls,[k]:G},{[D]:M1,[W]:ls,[k]:G},{[D]:O1,[W]:ls,[k]:G},{[D]:j1,[W]:ls,[k]:G},{[D]:L1,[W]:ls,[k]:G},Ud],[k]:G},{[D]:D1,[W]:us,[k]:G},{[D]:M1,[W]:us,[k]:G},{[D]:O1,[W]:us,[k]:G},{[D]:j1,[W]:us,[k]:G},{[D]:L1,[W]:us,[k]:G},Ud],[k]:G}],[k]:G},QS],[k]:G},{[D]:[ZS,XS,YS],[W]:[{[D]:Tr,[W]:[{[D]:wa,endpoint:{[ae]:dh,[le]:hr,[ue]:ke},[k]:X},{[D]:wg,endpoint:{[ae]:"https://s3express-control-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[le]:hr,[ue]:ke},[k]:X},{[D]:Vu,endpoint:{[ae]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}",[le]:hr,[ue]:ke},[k]:X},{[D]:$u,endpoint:{[ae]:"https://s3express-control.dualstack.{Region}.{partitionResult#dnsSuffix}",[le]:hr,[ue]:ke},[k]:X},{[D]:zu,endpoint:{[ae]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}",[le]:hr,[ue]:ke},[k]:X}],[k]:G}],[k]:G},{[D]:[Bu,{[U]:it,[F]:[We,49,50,as],[Me]:oP},{[U]:it,[F]:[We,8,12,as],[Me]:aP},{[U]:it,[F]:N1,[Me]:FS},{[U]:it,[F]:[We,32,49,as],[Me]:m0},{[U]:mf,[F]:gg,[Me]:"regionPartition"},{[U]:Ke,[F]:[{[_e]:FS},"--op-s3"]}],[W]:[{[D]:U1,[W]:[{[D]:[{[U]:Ke,[F]:[e1,"e"]}],[W]:[{[D]:F1,[W]:[t1,{[D]:wa,endpoint:{[ae]:"https://{Bucket}.ec2.{url#authority}",[le]:Fd,[ue]:ke},[k]:X}],[k]:G},{endpoint:{[ae]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[le]:Fd,[ue]:ke},[k]:X}],[k]:G},{[D]:[{[U]:Ke,[F]:[e1,"o"]}],[W]:[{[D]:F1,[W]:[t1,{[D]:wa,endpoint:{[ae]:"https://{Bucket}.op-{outpostId}.{url#authority}",[le]:Fd,[ue]:ke},[k]:X}],[k]:G},{endpoint:{[ae]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[le]:Fd,[ue]:ke},[k]:X}],[k]:G},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[k]:pe}],[k]:G},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[k]:pe}],[k]:G},{[D]:yq,[W]:[{[D]:[Ot,{[U]:Ss,[F]:[{[U]:pr,[F]:[{[U]:Gv,[F]:pq}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[k]:pe},{[D]:[rg,wP],[W]:[{[D]:Tr,[W]:[{[D]:B1,[W]:[{[D]:[Ar,GS],error:"S3 Accelerate cannot be used in this region",[k]:pe},{[D]:[rt,lt,Vt,Ne,en],endpoint:{[ae]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[le]:ln,[ue]:ke},[k]:X},{[D]:[rt,lt,Vt,Ne,$e,un],[W]:[{endpoint:n1,[k]:X}],[k]:G},{[D]:[rt,lt,Vt,Ne,$e,cn],endpoint:n1,[k]:X},{[D]:[Be,lt,Vt,Ne,en],endpoint:{[ae]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[le]:ln,[ue]:ke},[k]:X},{[D]:[Be,lt,Vt,Ne,$e,un],[W]:[{endpoint:r1,[k]:X}],[k]:G},{[D]:[Be,lt,Vt,Ne,$e,cn],endpoint:r1,[k]:X},{[D]:[rt,je,Ar,Ne,en],endpoint:{[ae]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[le]:ln,[ue]:ke},[k]:X},{[D]:[rt,je,Ar,Ne,$e,un],[W]:[{endpoint:s1,[k]:X}],[k]:G},{[D]:[rt,je,Ar,Ne,$e,cn],endpoint:s1,[k]:X},{[D]:[rt,je,Vt,Ne,en],endpoint:{[ae]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[le]:ln,[ue]:ke},[k]:X},{[D]:[rt,je,Vt,Ne,$e,un],[W]:[{endpoint:i1,[k]:X}],[k]:G},{[D]:[rt,je,Vt,Ne,$e,cn],endpoint:i1,[k]:X},{[D]:[Be,je,Vt,Ot,Bn,ng,en],endpoint:{[ae]:lP,[le]:ln,[ue]:ke},[k]:X},{[D]:[Be,je,Vt,Ot,Bn,sg,en],endpoint:{[ae]:yf,[le]:ln,[ue]:ke},[k]:X},{[D]:[Be,je,Vt,Ot,Bn,ng,$e,un],[W]:[{[D]:mi,endpoint:ig,[k]:X},{endpoint:ig,[k]:X}],[k]:G},{[D]:[Be,je,Vt,Ot,Bn,sg,$e,un],[W]:[{[D]:mi,endpoint:g0,[k]:X},o1],[k]:G},{[D]:[Be,je,Vt,Ot,Bn,ng,$e,cn],endpoint:ig,[k]:X},{[D]:[Be,je,Vt,Ot,Bn,sg,$e,cn],endpoint:g0,[k]:X},{[D]:[Be,je,Ar,Ne,en],endpoint:{[ae]:uP,[le]:ln,[ue]:ke},[k]:X},{[D]:[Be,je,Ar,Ne,$e,un],[W]:[{[D]:mi,endpoint:og,[k]:X},{endpoint:og,[k]:X}],[k]:G},{[D]:[Be,je,Ar,Ne,$e,cn],endpoint:og,[k]:X},{[D]:[Be,je,Vt,Ne,en],endpoint:{[ae]:BS,[le]:ln,[ue]:ke},[k]:X},{[D]:[Be,je,Vt,Ne,$e,un],[W]:[{[D]:mi,endpoint:{[ae]:BS,[le]:Qt,[ue]:ke},[k]:X},{endpoint:a1,[k]:X}],[k]:G},{[D]:[Be,je,Vt,Ne,$e,cn],endpoint:a1,[k]:X}],[k]:G},Bd],[k]:G}],[k]:G},{[D]:[Ot,Bn,{[U]:Ke,[F]:[{[U]:wt,[F]:[gP,"scheme"]},"http"]},{[U]:gf,[F]:[We,as]},rg,je,Be,Vt],[W]:[{[D]:Tr,[W]:[{[D]:B1,[W]:[o1],[k]:G},Bd],[k]:G}],[k]:G},{[D]:[rg,{[U]:cP,[F]:mq,[Me]:dP}],[W]:[{[D]:[{[U]:wt,[F]:[tr,"resourceId[0]"],[Me]:hP},{[U]:Ss,[F]:[{[U]:Ke,[F]:[vP,wf]}]}],[W]:[{[D]:[{[U]:Ke,[F]:[ag,Jv]}],[W]:[{[D]:vg,[W]:[{[D]:V1,[W]:[l1,u1,{[D]:_g,[W]:[c1,{[D]:z1,[W]:[lg,{[D]:xg,[W]:[{[D]:Tr,[W]:[{[D]:q1,[W]:[{[D]:Eg,[W]:[{[D]:[{[U]:Ke,[F]:[xP,wf]}],error:"Invalid ARN: Missing account id",[k]:pe},{[D]:bg,[W]:[{[D]:H1,[W]:[{[D]:wa,endpoint:{[ae]:VS,[le]:ug,[ue]:ke},[k]:X},{[D]:Vd,endpoint:{[ae]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[le]:ug,[ue]:ke},[k]:X},{endpoint:{[ae]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[le]:ug,[ue]:ke},[k]:X}],[k]:G},d1],[k]:G},cg],[k]:G},dg],[k]:G},hg],[k]:G}],[k]:G}],[k]:G},h1],[k]:G},{error:"Invalid ARN: bucket ARN is missing a region",[k]:pe}],[k]:G},f1],[k]:G},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[k]:pe}],[k]:G},{[D]:vg,[W]:[{[D]:V1,[W]:[{[D]:_g,[W]:[{[D]:vg,[W]:[{[D]:_g,[W]:[c1,{[D]:z1,[W]:[lg,{[D]:xg,[W]:[{[D]:Tr,[W]:[{[D]:[{[U]:Ke,[F]:[_P,"{partitionResult#name}"]}],[W]:[{[D]:Eg,[W]:[{[D]:[{[U]:Ke,[F]:[ag,xl]}],[W]:[{[D]:bg,[W]:[{[D]:H1,[W]:[{[D]:yg,error:"Access Points do not support S3 Accelerate",[k]:pe},{[D]:wg,endpoint:{[ae]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[le]:au,[ue]:ke},[k]:X},{[D]:Vu,endpoint:{[ae]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[le]:au,[ue]:ke},[k]:X},{[D]:$u,endpoint:{[ae]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[le]:au,[ue]:ke},[k]:X},{[D]:[je,Be,Ot,Bn],endpoint:{[ae]:VS,[le]:au,[ue]:ke},[k]:X},{[D]:zu,endpoint:{[ae]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[le]:au,[ue]:ke},[k]:X}],[k]:G},d1],[k]:G},cg],[k]:G},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[k]:pe}],[k]:G},dg],[k]:G},hg],[k]:G}],[k]:G}],[k]:G},h1],[k]:G}],[k]:G}],[k]:G},{[D]:[{[U]:la,[F]:[Xv,as]}],[W]:[{[D]:$1,error:"S3 MRAP does not support dual-stack",[k]:pe},{[D]:Vd,error:"S3 MRAP does not support FIPS",[k]:pe},{[D]:yg,error:"S3 MRAP does not support S3 Accelerate",[k]:pe},{[D]:[{[U]:Ft,[F]:[{[_e]:"DisableMultiRegionAccessPoints"},as]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[k]:pe},{[D]:[{[U]:mf,[F]:gg,[Me]:$S}],[W]:[{[D]:[{[U]:Ke,[F]:[{[U]:wt,[F]:[{[_e]:$S},vt]},{[U]:wt,[F]:[tr,"partition"]}]}],[W]:[{endpoint:{[ae]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[le]:{[fn]:[{[Gt]:as,name:Kv,[Kt]:xl,[Wv]:wq}]},[ue]:ke},[k]:X}],[k]:G},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[k]:pe}],[k]:G}],[k]:G},{error:"Invalid Access Point Name",[k]:pe}],[k]:G},f1],[k]:G},{[D]:[{[U]:Ke,[F]:[ag,kc]}],[W]:[{[D]:$1,error:"S3 Outposts does not support Dual-stack",[k]:pe},{[D]:Vd,error:"S3 Outposts does not support FIPS",[k]:pe},{[D]:yg,error:"S3 Outposts does not support S3 Accelerate",[k]:pe},{[D]:[{[U]:pr,[F]:[{[U]:wt,[F]:[tr,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[k]:pe},{[D]:[{[U]:wt,[F]:vq,[Me]:m0}],[W]:[{[D]:U1,[W]:[lg,{[D]:xg,[W]:[{[D]:Tr,[W]:[{[D]:q1,[W]:[{[D]:Eg,[W]:[{[D]:bg,[W]:[{[D]:[{[U]:wt,[F]:_q,[Me]:zS}],[W]:[{[D]:[{[U]:wt,[F]:[tr,"resourceId[3]"],[Me]:Qv}],[W]:[{[D]:[{[U]:Ke,[F]:[{[_e]:zS},fP]}],[W]:[{[D]:wa,endpoint:{[ae]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[le]:p1,[ue]:ke},[k]:X},{endpoint:{[ae]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[le]:p1,[ue]:ke},[k]:X}],[k]:G},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[k]:pe}],[k]:G},{error:"Invalid ARN: expected an access point name",[k]:pe}],[k]:G},{error:"Invalid ARN: Expected a 4-component resource",[k]:pe}],[k]:G},cg],[k]:G},dg],[k]:G},hg],[k]:G}],[k]:G}],[k]:G},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[k]:pe}],[k]:G},{error:"Invalid ARN: The Outpost Id was not set",[k]:pe}],[k]:G},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[k]:pe}],[k]:G},{error:"Invalid ARN: No ARN type specified",[k]:pe}],[k]:G},{[D]:[{[U]:it,[F]:[We,0,4,hq],[Me]:qS},{[U]:Ke,[F]:[{[_e]:qS},"arn:"]},{[U]:Ss,[F]:[{[U]:pr,[F]:[m1]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[k]:pe},{[D]:[{[U]:Ft,[F]:[fq,as]},m1],error:"Path-style addressing cannot be used with ARN buckets",[k]:pe},{[D]:gq,[W]:[{[D]:Tr,[W]:[{[D]:[Vt],[W]:[{[D]:[rt,Ne,lt,en],endpoint:{[ae]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[le]:ln,[ue]:ke},[k]:X},{[D]:[rt,Ne,lt,$e,un],[W]:[{endpoint:g1,[k]:X}],[k]:G},{[D]:[rt,Ne,lt,$e,cn],endpoint:g1,[k]:X},{[D]:[Be,Ne,lt,en],endpoint:{[ae]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[le]:ln,[ue]:ke},[k]:X},{[D]:[Be,Ne,lt,$e,un],[W]:[{endpoint:y1,[k]:X}],[k]:G},{[D]:[Be,Ne,lt,$e,cn],endpoint:y1,[k]:X},{[D]:[rt,Ne,je,en],endpoint:{[ae]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[le]:ln,[ue]:ke},[k]:X},{[D]:[rt,Ne,je,$e,un],[W]:[{endpoint:w1,[k]:X}],[k]:G},{[D]:[rt,Ne,je,$e,cn],endpoint:w1,[k]:X},{[D]:[Be,Ot,Bn,je,en],endpoint:{[ae]:pP,[le]:ln,[ue]:ke},[k]:X},{[D]:[Be,Ot,Bn,je,$e,un],[W]:[{[D]:mi,endpoint:fg,[k]:X},{endpoint:fg,[k]:X}],[k]:G},{[D]:[Be,Ot,Bn,je,$e,cn],endpoint:fg,[k]:X},{[D]:[Be,Ne,je,en],endpoint:{[ae]:HS,[le]:ln,[ue]:ke},[k]:X},{[D]:[Be,Ne,je,$e,un],[W]:[{[D]:mi,endpoint:{[ae]:HS,[le]:Qt,[ue]:ke},[k]:X},{endpoint:v1,[k]:X}],[k]:G},{[D]:[Be,Ne,je,$e,cn],endpoint:v1,[k]:X}],[k]:G},{error:"Path-style addressing cannot be used with S3 Accelerate",[k]:pe}],[k]:G}],[k]:G}],[k]:G},{[D]:[{[U]:pr,[F]:[_1]},{[U]:Ft,[F]:[_1,as]}],[W]:[{[D]:Tr,[W]:[{[D]:W1,[W]:[l1,u1,{[D]:wa,endpoint:{[ae]:dh,[le]:pg,[ue]:ke},[k]:X},{[D]:Vd,endpoint:{[ae]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[le]:pg,[ue]:ke},[k]:X},{endpoint:{[ae]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[le]:pg,[ue]:ke},[k]:X}],[k]:G},Bd],[k]:G}],[k]:G},{[D]:[ZS],[W]:[{[D]:Tr,[W]:[{[D]:W1,[W]:[{[D]:[lt,rt,Ne,en],endpoint:{[ae]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[le]:ln,[ue]:ke},[k]:X},{[D]:[lt,rt,Ne,$e,un],[W]:[{endpoint:x1,[k]:X}],[k]:G},{[D]:[lt,rt,Ne,$e,cn],endpoint:x1,[k]:X},{[D]:[lt,Be,Ne,en],endpoint:{[ae]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[le]:ln,[ue]:ke},[k]:X},{[D]:[lt,Be,Ne,$e,un],[W]:[{endpoint:E1,[k]:X}],[k]:G},{[D]:[lt,Be,Ne,$e,cn],endpoint:E1,[k]:X},{[D]:[je,rt,Ne,en],endpoint:{[ae]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[le]:ln,[ue]:ke},[k]:X},{[D]:[je,rt,Ne,$e,un],[W]:[{endpoint:b1,[k]:X}],[k]:G},{[D]:[je,rt,Ne,$e,cn],endpoint:b1,[k]:X},{[D]:[je,Be,Ot,Bn,en],endpoint:{[ae]:dh,[le]:ln,[ue]:ke},[k]:X},{[D]:[je,Be,Ot,Bn,$e,un],[W]:[{[D]:mi,endpoint:mg,[k]:X},{endpoint:mg,[k]:X}],[k]:G},{[D]:[je,Be,Ot,Bn,$e,cn],endpoint:mg,[k]:X},{[D]:[je,Be,Ne,en],endpoint:{[ae]:WS,[le]:ln,[ue]:ke},[k]:X},{[D]:[je,Be,Ne,$e,un],[W]:[{[D]:mi,endpoint:{[ae]:WS,[le]:Qt,[ue]:ke},[k]:X},{endpoint:S1,[k]:X}],[k]:G},{[D]:[je,Be,Ne,$e,cn],endpoint:S1,[k]:X}],[k]:G},Bd],[k]:G}],[k]:G}],[k]:G},{error:"A region must be set when sending requests to S3.",[k]:pe}]},Eq=xq,bq=new Oz({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),EP=(t,e={})=>bq.get(t,()=>e7(Eq,{endpointParams:t,logger:e.logger}));hf.aws=Q2;const Sq=t=>async(e,n,r)=>{var l,a,u;if(!r)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");const s=await t(e,n,r),i=(u=(a=(l=mo(n))==null?void 0:l.commandInstance)==null?void 0:a.constructor)==null?void 0:u.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${n.commandName}\``);const o=await eP(r,{getEndpointParameterInstructions:i},e);return Object.assign(s,o)},Tq=async(t,e,n)=>({operation:mo(e).operation,region:await Jr(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),Aq=Sq(Tq);function bP(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,n)=>({signingProperties:{config:e,context:n}})}}function SP(t){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,n)=>({signingProperties:{config:e,context:n}})}}const Cq=(t,e,n)=>s=>{var a;const o=(a=t(s).properties)==null?void 0:a.authSchemes;if(!o)return e(s);const l=[];for(const u of o){const{name:d,properties:h={},...p}=u,g=d.toLowerCase();d!==g&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${d}\` to \`${g}\``);let w;if(g==="sigv4a"){w="aws.auth#sigv4a";const v=o.find(_=>{const b=_.name.toLowerCase();return b!=="sigv4a"&&b.startsWith("sigv4")});if(iP.sigv4aDependency()==="none"&&v)continue}else if(g.startsWith("sigv4"))w="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${g}\``);const x=n[w];if(!x)throw new Error(`Could not find HttpAuthOption create function for \`${w}\``);const E=x(s);E.schemeId=w,E.signingProperties={...E.signingProperties||{},...p,...h},l.push(E)}return l},kq=t=>{const e=[];switch(t.operation){default:e.push(bP(t)),e.push(SP(t))}return e},Iq=Cq(EP,kq,{"aws.auth#sigv4":bP,"aws.auth#sigv4a":SP}),Rq=t=>{const e=Q9(t),n=S9(e);return Object.assign(n,{authSchemePreference:Jr(t.authSchemePreference??[])})},Pq=t=>Object.assign(t,{useFipsEndpoint:t.useFipsEndpoint??!1,useDualstackEndpoint:t.useDualstackEndpoint??!1,forcePathStyle:t.forcePathStyle??!1,useAccelerateEndpoint:t.useAccelerateEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,disableMultiregionAccessPoints:t.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),TP={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};let Wn=class AP extends ja{constructor(e){super(e),Object.setPrototypeOf(this,AP.prototype)}},Nq=class CP extends Wn{constructor(n){super({name:"NoSuchUpload",$fault:"client",...n});j(this,"name","NoSuchUpload");j(this,"$fault","client");Object.setPrototypeOf(this,CP.prototype)}},Dq=class kP extends Wn{constructor(n){super({name:"ObjectNotInActiveTierError",$fault:"client",...n});j(this,"name","ObjectNotInActiveTierError");j(this,"$fault","client");Object.setPrototypeOf(this,kP.prototype)}},Mq=class IP extends Wn{constructor(n){super({name:"BucketAlreadyExists",$fault:"client",...n});j(this,"name","BucketAlreadyExists");j(this,"$fault","client");Object.setPrototypeOf(this,IP.prototype)}},Oq=class RP extends Wn{constructor(n){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...n});j(this,"name","BucketAlreadyOwnedByYou");j(this,"$fault","client");Object.setPrototypeOf(this,RP.prototype)}},jq=class PP extends Wn{constructor(n){super({name:"NoSuchBucket",$fault:"client",...n});j(this,"name","NoSuchBucket");j(this,"$fault","client");Object.setPrototypeOf(this,PP.prototype)}},Lq=class NP extends Wn{constructor(n){super({name:"InvalidObjectState",$fault:"client",...n});j(this,"name","InvalidObjectState");j(this,"$fault","client");j(this,"StorageClass");j(this,"AccessTier");Object.setPrototypeOf(this,NP.prototype),this.StorageClass=n.StorageClass,this.AccessTier=n.AccessTier}},Uq=class DP extends Wn{constructor(n){super({name:"NoSuchKey",$fault:"client",...n});j(this,"name","NoSuchKey");j(this,"$fault","client");Object.setPrototypeOf(this,DP.prototype)}},Fq=class MP extends Wn{constructor(n){super({name:"NotFound",$fault:"client",...n});j(this,"name","NotFound");j(this,"$fault","client");Object.setPrototypeOf(this,MP.prototype)}},Bq=class OP extends Wn{constructor(n){super({name:"EncryptionTypeMismatch",$fault:"client",...n});j(this,"name","EncryptionTypeMismatch");j(this,"$fault","client");Object.setPrototypeOf(this,OP.prototype)}},Vq=class jP extends Wn{constructor(n){super({name:"InvalidRequest",$fault:"client",...n});j(this,"name","InvalidRequest");j(this,"$fault","client");Object.setPrototypeOf(this,jP.prototype)}},$q=class LP extends Wn{constructor(n){super({name:"InvalidWriteOffset",$fault:"client",...n});j(this,"name","InvalidWriteOffset");j(this,"$fault","client");Object.setPrototypeOf(this,LP.prototype)}},zq=class UP extends Wn{constructor(n){super({name:"TooManyParts",$fault:"client",...n});j(this,"name","TooManyParts");j(this,"$fault","client");Object.setPrototypeOf(this,UP.prototype)}},qq=class FP extends Wn{constructor(n){super({name:"IdempotencyParameterMismatch",$fault:"client",...n});j(this,"name","IdempotencyParameterMismatch");j(this,"$fault","client");Object.setPrototypeOf(this,FP.prototype)}},Hq=class BP extends Wn{constructor(n){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...n});j(this,"name","ObjectAlreadyInActiveTierError");j(this,"$fault","client");Object.setPrototypeOf(this,BP.prototype)}};const Wq="ACL",G1="AccessKeyId",Gq="AccessTier",VP="Bucket",Kq="BucketAlreadyExists",Jq="BucketAlreadyOwnedByYou",Ap="BucketKeyEnabled",Qq="Body",Xq="ChecksumAlgorithm",Yq="CacheControl",$P="ChecksumCRC32",zP="ChecksumCRC32C",qP="ChecksumCRC64NVME",Zq="Cache-Control",eH="Content-Disposition",tH="ContentDisposition",nH="Content-Encoding",rH="ContentEncoding",sH="ContentLanguage",iH="Content-Language",oH="Content-Length",aH="ContentLength",lH="Content-MD5",uH="ContentMD5",HP="ChecksumSHA1",WP="ChecksumSHA256",cH="CreateSessionOutput",dH="CreateSessionResult",hH="CreateSessionRequest",fH="CreateSession",pH="ChecksumType",mH="Content-Type",gH="ContentType",K1="Credentials",y0="Expiration",yH="ExpectedBucketOwner",wH="EncryptionTypeMismatch",J1="ETag",Q1="Expires",vH="GrantFullControl",_H="GrantRead",xH="GrantReadACP",EH="GrantWriteACP",bH="IfMatch",SH="If-Match",TH="IfNoneMatch",AH="If-None-Match",CH="InvalidObjectState",kH="IdempotencyParameterMismatch",IH="InvalidRequest",RH="InvalidWriteOffset",PH="Key",NH="Metadata",DH="NotFound",MH="NoSuchBucket",OH="NoSuchKey",jH="NoSuchUpload",LH="ObjectAlreadyInActiveTierError",UH="ObjectLockLegalHoldStatus",FH="ObjectLockMode",BH="ObjectLockRetainUntilDate",VH="ObjectNotInActiveTierError",$H="PutObject",zH="PutObjectOutput",qH="PutObjectRequest",HH="RequestCharged",WH="RequestPayer",X1="SecretAccessKey",GH="StreamingBlob",GP="StorageClass",KH="SessionCredentialValue",JH="SessionCredentials",QH="SessionMode",Cp="ServerSideEncryption",KP="SSECustomerAlgorithm",JP="SSECustomerKey",QP="SSECustomerKeyMD5",Xc="SSEKMSEncryptionContext",Yc="SSEKMSKeyId",Y1="SessionToken",XH="Size",YH="TooManyParts",ZH="Tagging",eW="VersionId",tW="WriteOffsetBytes",nW="WebsiteRedirectLocation",or="client",ar="error",XP="http",br="httpError",ve="httpHeader",rW="httpPrefixHeaders",sW="streaming",YP="smithy.ts.sdk.synthetic.com.amazonaws.s3",La="xmlName",iW="x-amz-acl",ZP="x-amz-checksum-crc32",eN="x-amz-checksum-crc32c",tN="x-amz-checksum-crc64nvme",nN="x-amz-checksum-sha1",rN="x-amz-checksum-sha256",oW="x-amz-create-session-mode",aW="x-amz-checksum-type",lW="x-amz-expiration",uW="x-amz-expected-bucket-owner",cW="x-amz-grant-full-control",dW="x-amz-grant-read",hW="x-amz-grant-read-acp",fW="x-amz-grant-write-acp",pW="x-amz-meta-",mW="x-amz-object-lock-legal-hold",gW="x-amz-object-lock-mode",yW="x-amz-object-lock-retain-until-date",wW="x-amz-object-size",vW="x-amz-request-charged",_W="x-amz-request-payer",xW="x-amz-storage-class",EW="x-amz-sdk-checksum-algorithm",kp="x-amz-server-side-encryption",Ip="x-amz-server-side-encryption-aws-kms-key-id",Rp="x-amz-server-side-encryption-bucket-key-enabled",Pp="x-amz-server-side-encryption-context",sN="x-amz-server-side-encryption-customer-algorithm",bW="x-amz-server-side-encryption-customer-key",iN="x-amz-server-side-encryption-customer-key-MD5",SW="x-amz-tagging",TW="x-amz-version-id",AW="x-amz-write-offset-bytes",CW="x-amz-website-redirect-location",Le="com.amazonaws.s3";var Z1=[0,Le,KH,8,0],kW=[0,Le,JP,8,0],Np=[0,Le,Xc,8,0],Dp=[0,Le,Yc,8,0],IW=[0,Le,GH,{[sW]:1},42],RW=[-3,Le,Kq,{[ar]:or,[br]:409},[],[]];Yt.for(Le).registerError(RW,Mq);var PW=[-3,Le,Jq,{[ar]:or,[br]:409},[],[]];Yt.for(Le).registerError(PW,Oq);var NW=[3,Le,cH,{[La]:dH},[Cp,Yc,Xc,Ap,K1],[[0,{[ve]:kp}],[()=>Dp,{[ve]:Ip}],[()=>Np,{[ve]:Pp}],[2,{[ve]:Rp}],[()=>GW,{[La]:K1}]]],DW=[3,Le,hH,0,[QH,VP,Cp,Yc,Xc,Ap],[[0,{[ve]:oW}],[0,1],[0,{[ve]:kp}],[()=>Dp,{[ve]:Ip}],[()=>Np,{[ve]:Pp}],[2,{[ve]:Rp}]]],MW=[-3,Le,wH,{[ar]:or,[br]:400},[],[]];Yt.for(Le).registerError(MW,Bq);var OW=[-3,Le,kH,{[ar]:or,[br]:400},[],[]];Yt.for(Le).registerError(OW,qq);var jW=[-3,Le,CH,{[ar]:or,[br]:403},[GP,Gq],[0,0]];Yt.for(Le).registerError(jW,Lq);var LW=[-3,Le,IH,{[ar]:or,[br]:400},[],[]];Yt.for(Le).registerError(LW,Vq);var UW=[-3,Le,RH,{[ar]:or,[br]:400},[],[]];Yt.for(Le).registerError(UW,$q);var FW=[-3,Le,MH,{[ar]:or,[br]:404},[],[]];Yt.for(Le).registerError(FW,jq);var BW=[-3,Le,OH,{[ar]:or,[br]:404},[],[]];Yt.for(Le).registerError(BW,Uq);var VW=[-3,Le,jH,{[ar]:or,[br]:404},[],[]];Yt.for(Le).registerError(VW,Nq);var $W=[-3,Le,DH,{[ar]:or},[],[]];Yt.for(Le).registerError($W,Fq);var zW=[-3,Le,LH,{[ar]:or,[br]:403},[],[]];Yt.for(Le).registerError(zW,Hq);var qW=[-3,Le,VH,{[ar]:or,[br]:403},[],[]];Yt.for(Le).registerError(qW,Dq);var HW=[3,Le,zH,0,[y0,J1,$P,zP,qP,HP,WP,pH,Cp,eW,KP,QP,Yc,Xc,Ap,XH,HH],[[0,{[ve]:lW}],[0,{[ve]:J1}],[0,{[ve]:ZP}],[0,{[ve]:eN}],[0,{[ve]:tN}],[0,{[ve]:nN}],[0,{[ve]:rN}],[0,{[ve]:aW}],[0,{[ve]:kp}],[0,{[ve]:TW}],[0,{[ve]:sN}],[0,{[ve]:iN}],[()=>Dp,{[ve]:Ip}],[()=>Np,{[ve]:Pp}],[2,{[ve]:Rp}],[1,{[ve]:wW}],[0,{[ve]:vW}]]],WW=[3,Le,qH,0,[Wq,Qq,VP,Yq,tH,rH,sH,aH,uH,gH,Xq,$P,zP,qP,HP,WP,Q1,bH,TH,vH,_H,xH,EH,PH,tW,NH,Cp,GP,nW,KP,JP,QP,Yc,Xc,Ap,WH,ZH,FH,BH,UH,yH],[[0,{[ve]:iW}],[()=>IW,16],[0,1],[0,{[ve]:Zq}],[0,{[ve]:eH}],[0,{[ve]:nH}],[0,{[ve]:iH}],[1,{[ve]:oH}],[0,{[ve]:lH}],[0,{[ve]:mH}],[0,{[ve]:EW}],[0,{[ve]:ZP}],[0,{[ve]:eN}],[0,{[ve]:tN}],[0,{[ve]:nN}],[0,{[ve]:rN}],[4,{[ve]:Q1}],[0,{[ve]:SH}],[0,{[ve]:AH}],[0,{[ve]:cW}],[0,{[ve]:dW}],[0,{[ve]:hW}],[0,{[ve]:fW}],[0,1],[1,{[ve]:AW}],[128,{[rW]:pW}],[0,{[ve]:kp}],[0,{[ve]:xW}],[0,{[ve]:CW}],[0,{[ve]:sN}],[()=>kW,{[ve]:bW}],[0,{[ve]:iN}],[()=>Dp,{[ve]:Ip}],[()=>Np,{[ve]:Pp}],[2,{[ve]:Rp}],[0,{[ve]:_W}],[0,{[ve]:SW}],[0,{[ve]:gW}],[5,{[ve]:yW}],[0,{[ve]:mW}],[0,{[ve]:uW}]]],GW=[3,Le,JH,0,[G1,X1,Y1,y0],[[0,{[La]:G1}],[()=>Z1,{[La]:X1}],[()=>Z1,{[La]:Y1}],[4,{[La]:y0}]]],KW=[-3,Le,YH,{[ar]:or,[br]:400},[],[]];Yt.for(Le).registerError(KW,zq);var JW=[-3,YP,"S3ServiceException",0,[],[]];Yt.for(YP).registerError(JW,Wn);var QW=[9,Le,fH,{[XP]:["GET","/?session",200]},()=>DW,()=>NW],XW=[9,Le,$H,{[XP]:["PUT","/{Key+}?x-id=PutObject",200]},()=>WW,()=>HW];class YW extends Lv.classBuilder().ep({...TP,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(e,n,r,s){return[tP(r,e.getEndpointParameterInstructions()),U2(r)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").sc(QW).build(){}const ZW="3.948.0",eG={version:ZW},tG=t=>new TextEncoder().encode(t);function eT(t){return typeof t=="string"?t.length===0:t.byteLength===0}var oN={name:"SHA-1"},tT={name:"HMAC",hash:oN},nG=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]);const rG={};function Gi(){return typeof window<"u"?window:typeof self<"u"?self:rG}var sG=function(){function t(e){this.toHash=new Uint8Array(0),e!==void 0&&(this.key=new Promise(function(n,r){Gi().crypto.subtle.importKey("raw",nT(e),tT,!1,["sign"]).then(n,r)}),this.key.catch(function(){}))}return t.prototype.update=function(e){if(!eT(e)){var n=nT(e),r=new Uint8Array(this.toHash.byteLength+n.byteLength);r.set(this.toHash,0),r.set(n,this.toHash.byteLength),this.toHash=r}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(n){return Gi().crypto.subtle.sign(tT,n,e.toHash).then(function(r){return new Uint8Array(r)})}):eT(this.toHash)?Promise.resolve(nG):Promise.resolve().then(function(){return Gi().crypto.subtle.digest(oN,e.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},t.prototype.reset=function(){this.toHash=new Uint8Array(0)},t}();function nT(t){return typeof t=="string"?tG(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}var iG=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function aN(t){if(oG(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return aG(e)}return!1}function oG(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function aG(t){return t&&iG.every(function(e){return typeof t[e]=="function"})}var lG=function(){function t(e){if(aN(Gi()))this.hash=new sG(e);else throw new Error("SHA1 not supported")}return t.prototype.update=function(e,n){this.hash.update(io(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}(),lN={name:"SHA-256"},rT={name:"HMAC",hash:lN},uG=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]),cG=function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!Ac(e)){var n=io(e),r=new Uint8Array(this.toHash.byteLength+n.byteLength);r.set(this.toHash,0),r.set(n,this.toHash.byteLength),this.toHash=r}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(n){return Gi().crypto.subtle.sign(rT,n,e.toHash).then(function(r){return new Uint8Array(r)})}):Ac(this.toHash)?Promise.resolve(uG):Promise.resolve().then(function(){return Gi().crypto.subtle.digest(lN,e.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(n,r){Gi().crypto.subtle.importKey("raw",io(e.secret),rT,!1,["sign"]).then(n,r)}),this.key.catch(function(){}))},t}(),Cr=64,dG=32,hG=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),fG=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],pG=Math.pow(2,53)-1,hh=function(){function t(){this.state=Int32Array.from(fG),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,r=e.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>pG)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=e[n++],r--,this.bufferLength===Cr&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(n.setUint8(this.bufferLength++,128),r%Cr>=Cr-8){for(var s=this.bufferLength;s<Cr;s++)n.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<Cr-8;s++)n.setUint8(s,0);n.setUint32(Cr-8,Math.floor(e/4294967296),!0),n.setUint32(Cr-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(dG),s=0;s<8;s++)i[s*4]=this.state[s]>>>24&255,i[s*4+1]=this.state[s]>>>16&255,i[s*4+2]=this.state[s]>>>8&255,i[s*4+3]=this.state[s]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,n=e.buffer,r=e.state,s=r[0],i=r[1],o=r[2],l=r[3],a=r[4],u=r[5],d=r[6],h=r[7],p=0;p<Cr;p++){if(p<16)this.temp[p]=(n[p*4]&255)<<24|(n[p*4+1]&255)<<16|(n[p*4+2]&255)<<8|n[p*4+3]&255;else{var g=this.temp[p-2],w=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10;g=this.temp[p-15];var x=(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3;this.temp[p]=(w+this.temp[p-7]|0)+(x+this.temp[p-16]|0)}var E=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&u^~a&d)|0)+(h+(hG[p]+this.temp[p]|0)|0)|0,v=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&i^s&o^i&o)|0;h=d,d=u,u=a,a=l+E|0,l=o,o=i,i=s,s=E+v|0}r[0]+=s,r[1]+=i,r[2]+=o,r[3]+=l,r[4]+=a,r[5]+=u,r[6]+=d,r[7]+=h},t}(),mG=function(){function t(e){this.secret=e,this.hash=new hh,this.reset()}return t.prototype.update=function(e){if(!(Ac(e)||this.error))try{this.hash.update(io(e))}catch(n){this.error=n}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return Vv(this,void 0,void 0,function(){return $v(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new hh,this.secret){this.outer=new hh;var e=gG(this.secret),n=new Uint8Array(Cr);n.set(e);for(var r=0;r<Cr;r++)e[r]^=54,n[r]^=92;this.hash.update(e),this.outer.update(n);for(var r=0;r<e.byteLength;r++)e[r]=0}},t}();function gG(t){var e=io(t);if(e.byteLength>Cr){var n=new hh;n.update(e),e=n.digest()}var r=new Uint8Array(Cr);return r.set(e),r}var yG=function(){function t(e){aN(Gi())?this.hash=new cG(e):this.hash=new mG(e)}return t.prototype.update=function(e,n){this.hash.update(io(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();const wG=({serviceId:t,clientVersion:e})=>async n=>{var g,w,x;const r=typeof window<"u"?window.navigator:void 0,s=(r==null?void 0:r.userAgent)??"",i=((g=r==null?void 0:r.userAgentData)==null?void 0:g.platform)??sT.os(s)??"other",o=void 0,l=((w=r==null?void 0:r.userAgentData)==null?void 0:w.brands)??[],a=l[l.length-1],u=(a==null?void 0:a.brand)??sT.browser(s)??"unknown",d=(a==null?void 0:a.version)??"unknown",h=[["aws-sdk-js",e],["ua","2.1"],[`os/${i}`,o],["lang/js"],["md/browser",`${u}_${d}`]];t&&h.push([`api/${t}`,e]);const p=await((x=n==null?void 0:n.userAgentAppId)==null?void 0:x.call(n));return p&&h.push([`app/${p}`]),h},sT={os(t){if(/iPhone|iPad|iPod/.test(t))return"iOS";if(/Macintosh|Mac OS X/.test(t))return"macOS";if(/Windows NT/.test(t))return"Windows";if(/Android/.test(t))return"Android";if(/Linux/.test(t))return"Linux"},browser(t){if(/EdgiOS|EdgA|Edg\//.test(t))return"Microsoft Edge";if(/Firefox\//.test(t))return"Firefox";if(/Chrome\//.test(t))return"Chrome";if(/Safari\//.test(t))return"Safari"}};class qu{constructor(e){j(this,"bytes");if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(e));r>-1&&s>0;r--,s/=256)n[r]=s;return e<0&&iT(n),new qu(n)}valueOf(){const e=this.bytes.slice(0),n=e[0]&128;return n&&iT(e),parseInt(Zn(e),16)*(n?-1:1)}toString(){return String(this.valueOf())}}function iT(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}class vG{constructor(e,n){j(this,"toUtf8");j(this,"fromUtf8");this.toUtf8=e,this.fromUtf8=n}format(e){const n=[];for(const i of Object.keys(e)){const o=this.fromUtf8(i);n.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const r=new Uint8Array(n.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of n)r.set(i,s),s+=i.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,e.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const l=this.fromUtf8(e.value),a=new DataView(new ArrayBuffer(3+l.byteLength));a.setUint8(0,7),a.setUint16(1,l.byteLength,!1);const u=new Uint8Array(a.buffer);return u.set(l,3),u;case"timestamp":const d=new Uint8Array(9);return d[0]=8,d.set(qu.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!kG.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const h=new Uint8Array(17);return h[0]=9,h.set(f2(e.value.replace(/\-/g,"")),1),h}}parse(e){const n={};let r=0;for(;r<e.byteLength;){const s=e.getUint8(r++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,s));switch(r+=s,e.getUint8(r++)){case 0:n[i]={type:aT,value:!0};break;case 1:n[i]={type:aT,value:!1};break;case 2:n[i]={type:_G,value:e.getInt8(r++)};break;case 3:n[i]={type:xG,value:e.getInt16(r,!1)},r+=2;break;case 4:n[i]={type:EG,value:e.getInt32(r,!1)},r+=4;break;case 5:n[i]={type:bG,value:new qu(new Uint8Array(e.buffer,e.byteOffset+r,8))},r+=8;break;case 6:const o=e.getUint16(r,!1);r+=2,n[i]={type:SG,value:new Uint8Array(e.buffer,e.byteOffset+r,o)},r+=o;break;case 7:const l=e.getUint16(r,!1);r+=2,n[i]={type:TG,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+r,l))},r+=l;break;case 8:n[i]={type:AG,value:new Date(new qu(new Uint8Array(e.buffer,e.byteOffset+r,8)).valueOf())},r+=8;break;case 9:const a=new Uint8Array(e.buffer,e.byteOffset+r,16);r+=16,n[i]={type:CG,value:`${Zn(a.subarray(0,4))}-${Zn(a.subarray(4,6))}-${Zn(a.subarray(6,8))}-${Zn(a.subarray(8,10))}-${Zn(a.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return n}}var oT;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(oT||(oT={}));const aT="boolean",_G="byte",xG="short",EG="integer",bG="long",SG="binary",TG="string",AG="timestamp",CG="uuid",kG=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,uN=4,wi=uN*2,To=4,IG=wi+To*2;function RG({byteLength:t,byteOffset:e,buffer:n}){if(t<IG)throw new Error("Provided message too short to accommodate event stream message overhead");const r=new DataView(n,e,t),s=r.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");const i=r.getUint32(uN,!1),o=r.getUint32(wi,!1),l=r.getUint32(t-To,!1),a=new df().update(new Uint8Array(n,e,wi));if(o!==a.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${a.digest()})`);if(a.update(new Uint8Array(n,e+wi,t-(wi+To))),l!==a.digest())throw new Error(`The message checksum (${a.digest()}) did not match the expected value of ${l}`);return{headers:new DataView(n,e+wi+To,i),body:new Uint8Array(n,e+wi+To+i,s-i-(wi+To+To))}}class PG{constructor(e,n){j(this,"headerMarshaller");j(this,"messageBuffer");j(this,"isEndOfStream");this.headerMarshaller=new vG(e,n),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){const e=this.messageBuffer.pop(),n=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return n}}}getAvailableMessages(){const e=this.messageBuffer;this.messageBuffer=[];const n=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return n}}}encode({headers:e,body:n}){const r=this.headerMarshaller.format(e),s=r.byteLength+n.byteLength+16,i=new Uint8Array(s),o=new DataView(i.buffer,i.byteOffset,i.byteLength),l=new df;return o.setUint32(0,s,!1),o.setUint32(4,r.byteLength,!1),o.setUint32(8,l.update(i.subarray(0,8)).digest(),!1),i.set(r,12),i.set(n,r.byteLength+12),o.setUint32(s-4,l.update(i.subarray(8,s-4)).digest(),!1),i}decode(e){const{headers:n,body:r}=RG(e);return{headers:this.headerMarshaller.parse(n),body:r}}formatHeaders(e){return this.headerMarshaller.format(e)}}class NG{constructor(e){j(this,"options");this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.decoder.decode(e)}}class DG{constructor(e){j(this,"options");this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class MG{constructor(e){j(this,"options");this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream){const n=await this.options.deserializer(e);n!==void 0&&(yield n)}}}class OG{constructor(e){j(this,"options");this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.serializer(e)}}function jG(t){let e=0,n=0,r=null,s=null;const i=l=>{if(typeof l!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+l);e=l,n=4,r=new Uint8Array(l),new DataView(r.buffer).setUint32(0,l,!1)},o=async function*(){const l=t[Symbol.asyncIterator]();for(;;){const{value:a,done:u}=await l.next();if(u){if(e)if(e===n)yield r;else throw new Error("Truncated event message received.");else return;return}const d=a.length;let h=0;for(;h<d;){if(!r){const g=d-h;s||(s=new Uint8Array(4));const w=Math.min(4-n,g);if(s.set(a.slice(h,h+w),n),n+=w,h+=w,n<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}const p=Math.min(e-n,d-h);r.set(a.slice(h,h+p),n),n+=p,h+=p,e&&e===n&&(yield r,r=null,e=0,n=0)}}};return{[Symbol.asyncIterator]:o}}function LG(t,e){return async function(n){const{value:r}=n.headers[":message-type"];if(r==="error"){const s=new Error(n.headers[":error-message"].value||"UnknownError");throw s.name=n.headers[":error-code"].value,s}else if(r==="exception"){const s=n.headers[":exception-type"].value,i={[s]:n},o=await t(i);if(o.$unknown){const l=new Error(e(n.body));throw l.name=s,l}throw o[s]}else if(r==="event"){const s={[n.headers[":event-type"].value]:n},i=await t(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${n.headers[":event-type"].value}`)}}let UG=class{constructor({utf8Encoder:e,utf8Decoder:n}){j(this,"eventStreamCodec");j(this,"utfEncoder");this.eventStreamCodec=new PG(e,n),this.utfEncoder=e}deserialize(e,n){const r=jG(e);return new MG({messageStream:new NG({inputStream:r,decoder:this.eventStreamCodec}),deserializer:LG(n,this.utfEncoder)})}serialize(e,n){return new DG({messageStream:new OG({inputStream:e,serializer:n}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const FG=t=>({[Symbol.asyncIterator]:async function*(){const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)return;yield r}}finally{e.releaseLock()}}}),BG=t=>{const e=t[Symbol.asyncIterator]();return new ReadableStream({async pull(n){const{done:r,value:s}=await e.next();if(r)return n.close();n.enqueue(s)}})};class VG{constructor({utf8Encoder:e,utf8Decoder:n}){j(this,"universalMarshaller");this.universalMarshaller=new UG({utf8Decoder:n,utf8Encoder:e})}deserialize(e,n){const r=$G(e)?FG(e):e;return this.universalMarshaller.deserialize(r,n)}serialize(e,n){const r=this.universalMarshaller.serialize(e,n);return typeof ReadableStream=="function"?BG(r):r}}const $G=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,zG=t=>new VG(t);async function qG(t,e,n=1024*1024){const r=t.size;let s=0;for(;s<r;){const i=t.slice(s,Math.min(r,s+n));e(new Uint8Array(await i.arrayBuffer())),s+=i.size}}const HG=async function(e,n){const r=new e;return await qG(n,s=>{r.update(s)}),r.digest()},WG=t=>()=>Promise.reject(t),gi=64,GG=16,KG=[1732584193,4023233417,2562383102,271733878];class JG{constructor(){j(this,"state");j(this,"buffer");j(this,"bufferLength");j(this,"bytesHashed");j(this,"finished");this.reset()}update(e){if(QG(e))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const n=XG(e);let r=0,{byteLength:s}=n;for(this.bytesHashed+=s;s>0;)this.buffer.setUint8(this.bufferLength++,n[r++]),s--,this.bufferLength===gi&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:n,bufferLength:r,bytesHashed:s}=this,i=s*8;if(n.setUint8(this.bufferLength++,128),r%gi>=gi-8){for(let o=this.bufferLength;o<gi;o++)n.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(let o=this.bufferLength;o<gi-8;o++)n.setUint8(o,0);n.setUint32(gi-8,i>>>0,!0),n.setUint32(gi-4,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}const e=new DataView(new ArrayBuffer(GG));for(let n=0;n<4;n++)e.setUint32(n*4,this.state[n],!0);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}hashBuffer(){const{buffer:e,state:n}=this;let r=n[0],s=n[1],i=n[2],o=n[3];r=In(r,s,i,o,e.getUint32(0,!0),7,3614090360),o=In(o,r,s,i,e.getUint32(4,!0),12,3905402710),i=In(i,o,r,s,e.getUint32(8,!0),17,606105819),s=In(s,i,o,r,e.getUint32(12,!0),22,3250441966),r=In(r,s,i,o,e.getUint32(16,!0),7,4118548399),o=In(o,r,s,i,e.getUint32(20,!0),12,1200080426),i=In(i,o,r,s,e.getUint32(24,!0),17,2821735955),s=In(s,i,o,r,e.getUint32(28,!0),22,4249261313),r=In(r,s,i,o,e.getUint32(32,!0),7,1770035416),o=In(o,r,s,i,e.getUint32(36,!0),12,2336552879),i=In(i,o,r,s,e.getUint32(40,!0),17,4294925233),s=In(s,i,o,r,e.getUint32(44,!0),22,2304563134),r=In(r,s,i,o,e.getUint32(48,!0),7,1804603682),o=In(o,r,s,i,e.getUint32(52,!0),12,4254626195),i=In(i,o,r,s,e.getUint32(56,!0),17,2792965006),s=In(s,i,o,r,e.getUint32(60,!0),22,1236535329),r=Rn(r,s,i,o,e.getUint32(4,!0),5,4129170786),o=Rn(o,r,s,i,e.getUint32(24,!0),9,3225465664),i=Rn(i,o,r,s,e.getUint32(44,!0),14,643717713),s=Rn(s,i,o,r,e.getUint32(0,!0),20,3921069994),r=Rn(r,s,i,o,e.getUint32(20,!0),5,3593408605),o=Rn(o,r,s,i,e.getUint32(40,!0),9,38016083),i=Rn(i,o,r,s,e.getUint32(60,!0),14,3634488961),s=Rn(s,i,o,r,e.getUint32(16,!0),20,3889429448),r=Rn(r,s,i,o,e.getUint32(36,!0),5,568446438),o=Rn(o,r,s,i,e.getUint32(56,!0),9,3275163606),i=Rn(i,o,r,s,e.getUint32(12,!0),14,4107603335),s=Rn(s,i,o,r,e.getUint32(32,!0),20,1163531501),r=Rn(r,s,i,o,e.getUint32(52,!0),5,2850285829),o=Rn(o,r,s,i,e.getUint32(8,!0),9,4243563512),i=Rn(i,o,r,s,e.getUint32(28,!0),14,1735328473),s=Rn(s,i,o,r,e.getUint32(48,!0),20,2368359562),r=Pn(r,s,i,o,e.getUint32(20,!0),4,4294588738),o=Pn(o,r,s,i,e.getUint32(32,!0),11,2272392833),i=Pn(i,o,r,s,e.getUint32(44,!0),16,1839030562),s=Pn(s,i,o,r,e.getUint32(56,!0),23,4259657740),r=Pn(r,s,i,o,e.getUint32(4,!0),4,2763975236),o=Pn(o,r,s,i,e.getUint32(16,!0),11,1272893353),i=Pn(i,o,r,s,e.getUint32(28,!0),16,4139469664),s=Pn(s,i,o,r,e.getUint32(40,!0),23,3200236656),r=Pn(r,s,i,o,e.getUint32(52,!0),4,681279174),o=Pn(o,r,s,i,e.getUint32(0,!0),11,3936430074),i=Pn(i,o,r,s,e.getUint32(12,!0),16,3572445317),s=Pn(s,i,o,r,e.getUint32(24,!0),23,76029189),r=Pn(r,s,i,o,e.getUint32(36,!0),4,3654602809),o=Pn(o,r,s,i,e.getUint32(48,!0),11,3873151461),i=Pn(i,o,r,s,e.getUint32(60,!0),16,530742520),s=Pn(s,i,o,r,e.getUint32(8,!0),23,3299628645),r=Nn(r,s,i,o,e.getUint32(0,!0),6,4096336452),o=Nn(o,r,s,i,e.getUint32(28,!0),10,1126891415),i=Nn(i,o,r,s,e.getUint32(56,!0),15,2878612391),s=Nn(s,i,o,r,e.getUint32(20,!0),21,4237533241),r=Nn(r,s,i,o,e.getUint32(48,!0),6,1700485571),o=Nn(o,r,s,i,e.getUint32(12,!0),10,2399980690),i=Nn(i,o,r,s,e.getUint32(40,!0),15,4293915773),s=Nn(s,i,o,r,e.getUint32(4,!0),21,2240044497),r=Nn(r,s,i,o,e.getUint32(32,!0),6,1873313359),o=Nn(o,r,s,i,e.getUint32(60,!0),10,4264355552),i=Nn(i,o,r,s,e.getUint32(24,!0),15,2734768916),s=Nn(s,i,o,r,e.getUint32(52,!0),21,1309151649),r=Nn(r,s,i,o,e.getUint32(16,!0),6,4149444226),o=Nn(o,r,s,i,e.getUint32(44,!0),10,3174756917),i=Nn(i,o,r,s,e.getUint32(8,!0),15,718787259),s=Nn(s,i,o,r,e.getUint32(36,!0),21,3951481745),n[0]=r+n[0]&4294967295,n[1]=s+n[1]&4294967295,n[2]=i+n[2]&4294967295,n[3]=o+n[3]&4294967295}reset(){this.state=Uint32Array.from(KG),this.buffer=new DataView(new ArrayBuffer(gi)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function Mp(t,e,n,r,s,i){return e=(e+t&4294967295)+(r+i&4294967295)&4294967295,(e<<s|e>>>32-s)+n&4294967295}function In(t,e,n,r,s,i,o){return Mp(e&n|~e&r,t,e,s,i,o)}function Rn(t,e,n,r,s,i,o){return Mp(e&r|n&~r,t,e,s,i,o)}function Pn(t,e,n,r,s,i,o){return Mp(e^n^r,t,e,s,i,o)}function Nn(t,e,n,r,s,i,o){return Mp(n^(e|~r),t,e,s,i,o)}function QG(t){return typeof t=="string"?t.length===0:t.byteLength===0}function XG(t){return typeof t=="string"?so(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}const YG=["in-region","cross-region","mobile","standard","legacy"],ZG=({defaultsMode:t}={})=>b9(async()=>{const e=typeof t=="function"?await t():t;switch(e==null?void 0:e.toLowerCase()){case"auto":return Promise.resolve(eK()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e==null?void 0:e.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${YG.join(", ")}, got ${e}`)}}),eK=()=>{var e;const t=window==null?void 0:window.navigator;if(t!=null&&t.connection){const{effectiveType:n,rtt:r,downlink:s}=t==null?void 0:t.connection;if(typeof n=="string"&&n!=="4g"||Number(r)>100||Number(s)<10)return!0}return((e=t==null?void 0:t.userAgentData)==null?void 0:e.mobile)||typeof(t==null?void 0:t.maxTouchPoints)=="number"&&(t==null?void 0:t.maxTouchPoints)>1},tK=t=>({apiVersion:"2006-03-01",base64Decoder:(t==null?void 0:t.base64Decoder)??wl,base64Encoder:(t==null?void 0:t.base64Encoder)??Yo,disableHostPrefix:(t==null?void 0:t.disableHostPrefix)??!1,endpointProvider:(t==null?void 0:t.endpointProvider)??EP,extensions:(t==null?void 0:t.extensions)??[],getAwsChunkedEncodingStream:(t==null?void 0:t.getAwsChunkedEncodingStream)??j8,httpAuthSchemeProvider:(t==null?void 0:t.httpAuthSchemeProvider)??Iq,httpAuthSchemes:(t==null?void 0:t.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new l2},{schemeId:"aws.auth#sigv4a",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4a"),signer:new m8}],logger:(t==null?void 0:t.logger)??new Uv,protocol:(t==null?void 0:t.protocol)??new w$({defaultNamespace:"com.amazonaws.s3",xmlNamespace:"http://s3.amazonaws.com/doc/2006-03-01/"}),sdkStreamMixin:(t==null?void 0:t.sdkStreamMixin)??p2,serviceId:(t==null?void 0:t.serviceId)??"S3",signerConstructor:(t==null?void 0:t.signerConstructor)??iP,signingEscapePath:(t==null?void 0:t.signingEscapePath)??!1,urlParser:(t==null?void 0:t.urlParser)??ff,useArnRegion:(t==null?void 0:t.useArnRegion)??void 0,utf8Decoder:(t==null?void 0:t.utf8Decoder)??so,utf8Encoder:(t==null?void 0:t.utf8Encoder)??Ol}),nK=t=>{const e=ZG(t),n=()=>e().then(n$),r=tK(t);return{...r,...t,runtime:"browser",defaultsMode:e,bodyLengthChecker:(t==null?void 0:t.bodyLengthChecker)??Z9,credentialDefaultProvider:(t==null?void 0:t.credentialDefaultProvider)??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(t==null?void 0:t.defaultUserAgentProvider)??wG({serviceId:r.serviceId,clientVersion:eG.version}),eventStreamSerdeProvider:(t==null?void 0:t.eventStreamSerdeProvider)??zG,maxAttempts:(t==null?void 0:t.maxAttempts)??pf,md5:(t==null?void 0:t.md5)??JG,region:(t==null?void 0:t.region)??WG("Region is missing"),requestHandler:Pv.create((t==null?void 0:t.requestHandler)??n),retryMode:(t==null?void 0:t.retryMode)??(async()=>(await n()).retryMode||L7),sha1:(t==null?void 0:t.sha1)??lG,sha256:(t==null?void 0:t.sha256)??yG,streamCollector:(t==null?void 0:t.streamCollector)??d2,streamHasher:(t==null?void 0:t.streamHasher)??HG,useDualstackEndpoint:(t==null?void 0:t.useDualstackEndpoint)??(()=>Promise.resolve(y7)),useFipsEndpoint:(t==null?void 0:t.useFipsEndpoint)??(()=>Promise.resolve(w7))}},rK=t=>({setRegion(e){t.region=e},region(){return t.region}}),sK=t=>({region:t.region()}),iK=t=>{const e=t.httpAuthSchemes;let n=t.httpAuthSchemeProvider,r=t.credentials;return{setHttpAuthScheme(s){const i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){r=s},credentials(){return r}}},oK=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),aK=(t,e)=>{const n=Object.assign(rK(t),a$(t),i8(t),iK(t));return e.forEach(r=>r.configure(n)),Object.assign(t,sK(n),l$(n),o8(n),oK(n))};class lK extends e${constructor(...[n]){const r=nK(n||{});super(r);j(this,"config");this.initConfig=r;const s=Pq(r),i=Mz(s),o=$$(i),l=nq(o),a=x7(l),u=a,d=j7(u),h=E7(d),p=Rq(h),g=_z(p,{session:[()=>this,YW]}),w=aK(g,(n==null?void 0:n.extensions)||[]);this.config=w,this.middlewareStack.use(J8(this.config)),this.middlewareStack.use(g7(this.config)),this.middlewareStack.use(uq(this.config)),this.middlewareStack.use(T7(this.config)),this.middlewareStack.use(H$(this.config)),this.middlewareStack.use(K$(this.config)),this.middlewareStack.use(X$(this.config)),this.middlewareStack.use(_8(this.config,{httpAuthSchemeParametersProvider:Aq,identityProviderConfigProvider:async x=>new w9({"aws.auth#sigv4":x.credentials,"aws.auth#sigv4a":x.credentials})})),this.middlewareStack.use(T8(this.config)),this.middlewareStack.use(Pz(this.config)),this.middlewareStack.use(c8(this.config)),this.middlewareStack.use(az(this.config)),this.middlewareStack.use(pz(this.config)),this.middlewareStack.use(vz(this.config))}destroy(){super.destroy()}}function uK(t){return e=>async n=>{const r={...n.input},s=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const i of s){const o=r[i.target];if(o){let l;typeof o=="string"?hK(o,t)?l=t.base64Decoder(o):(l=t.utf8Decoder(o),r[i.target]=t.base64Encoder(l)):(l=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o),r[i.target]=t.base64Encoder(l));const a=new t.md5;a.update(l),r[i.hash]=t.base64Encoder(await a.digest())}}return e({...n,input:r})}}const cK={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},dK=t=>({applyToStack:e=>{e.add(uK(t),cK)}});function hK(t,e){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t))return!1;try{return e.base64Decoder(t).length===32}catch{return!1}}class fK extends Lv.classBuilder().ep({...TP,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,n,r,s){return[tP(r,e.getEndpointParameterInstructions()),V$(r,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),nz(),U2(r),dK(r)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").sc(XW).build(){}const cN="https://files.devdlfjstizlzl.xyz",pK="dlfjstizlzl",mK="@@zlzl1234",dN="pandora-assets",gK=new lK({region:"us-east-1",endpoint:cN,credentials:{accessKeyId:pK,secretAccessKey:mK},forcePathStyle:!0});function yK(t,e){const n=t.name.split(".").pop()||"bin",r=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID().replace(/-/g,"").slice(0,12):Math.random().toString(36).slice(2,10);return`${e.replace(/^\/+|\/+$/g,"")}/${Date.now()}_${r}.${n}`}function wK(t){return`${cN.replace(/\/+$/,"")}/${dN}/${t}`}async function Sg(t,e){if(!t)throw new Error("No file provided for upload.");try{const n=yK(t,e),r=await t.arrayBuffer(),s=new fK({Bucket:dN,Key:n,Body:new Uint8Array(r),ContentType:t.type||"application/octet-stream",ContentLength:t.size});return await gK.send(s),wK(n)}catch(n){throw console.error("File upload failed",n),new Error("Upload failed. Please try again.")}}async function vK(){return Ns.currentUser||await YL(Ns),Ns.currentUser}async function _K(t){var r;await vK();const e=Object.fromEntries(Object.entries(t).filter(([,s])=>s!==void 0));return(await bc(Ut(Ue,"transmissions"),{...e,uid:((r=Ns.currentUser)==null?void 0:r.uid)??null,createdAt:Zr()})).id}const w0="pandora-locale",fh=["ko","en","ja","zh","ru","es"],xK=()=>{if(typeof window>"u")return"ko";const t=window.localStorage.getItem(w0);if(t&&fh.includes(t))return t;const e=navigator.language.toLowerCase();return e.startsWith("ko")?"ko":e.startsWith("ja")?"ja":e.startsWith("zh")?"zh":e.startsWith("ru")?"ru":e.startsWith("es")?"es":"en"},Yv=Al((t,e)=>({locale:xK(),setLocale:n=>{t({locale:n}),typeof window<"u"&&window.localStorage.setItem(w0,n)},toggleLocale:()=>{const n=e().locale,r=fh.indexOf(n),s=fh[(r+1)%fh.length];t({locale:s}),typeof window<"u"&&window.localStorage.setItem(w0,s)}})),lT={en:{"auth.title":"Authenticate","auth.login":"Login","auth.signup":"Sign Up","auth.email":"Email","auth.password":"Password","auth.loginEmail":"Login with Email","auth.createAccount":"Create Account","auth.or":"or","auth.google":"Continue with Google","auth.signOut":"Sign out","auth.accessRequired":"Access Required","auth.enter":"Authenticate to enter PANDORA","auth.nickname":"Nickname","auth.nicknameSkip":"Skip","auth.nicknameHint":"Skip to join with a random anonymous ID.","nav.home":"Home","nav.sectors":"Sectors","nav.samples":"Samples","nav.messages":"Messages","nav.search":"Search","nav.settings":"Settings","nav.admin":"Admin","banner.default":"[SYSTEM: Experimental overlay active]","banner.feedLive":"[FEED LIVE]","banner.authRequired":"[AUTH REQUIRED]","banner.transmissions":"[TRANSMISSIONS STREAM]"},ko:{"auth.title":"","auth.login":"","auth.signup":"","auth.email":"","auth.password":"","auth.loginEmail":" ","auth.createAccount":" ","auth.or":"","auth.google":" ","auth.signOut":"","auth.accessRequired":" ","auth.enter":"PANDORA   ","auth.nickname":"","auth.nicknameSkip":"","auth.nicknameHint":"     .","nav.home":"","nav.sectors":"","nav.samples":"","nav.messages":"","nav.search":"","nav.settings":"","nav.admin":"","banner.default":"[:    ]","banner.feedLive":"[ ]","banner.authRequired":"[ ]","banner.transmissions":"[ ]"},ja:{"auth.title":"","auth.login":"","auth.signup":"","auth.email":"","auth.password":"","auth.loginEmail":"","auth.createAccount":"","auth.or":"","auth.google":"Google","auth.signOut":"","auth.accessRequired":"","auth.enter":"PANDORA","auth.nickname":"","auth.nicknameSkip":"","auth.nicknameHint":"ID","nav.home":"","nav.sectors":"","nav.samples":"","nav.messages":"","nav.search":"","nav.settings":"","nav.admin":"","banner.default":"[: ]","banner.feedLive":"[ ]","banner.authRequired":"[]","banner.transmissions":"[]"},zh:{"auth.title":"","auth.login":"","auth.signup":"","auth.email":"","auth.password":"","auth.loginEmail":"","auth.createAccount":"","auth.or":"","auth.google":"","auth.signOut":"","auth.accessRequired":"","auth.enter":" PANDORA ","auth.nickname":"","auth.nicknameSkip":"","auth.nicknameHint":"ID","nav.home":"","nav.sectors":"","nav.samples":"","nav.messages":"","nav.search":"","nav.settings":"","nav.admin":"","banner.default":"[: ]","banner.feedLive":"[]","banner.authRequired":"[]","banner.transmissions":"[]"},ru:{"auth.title":"","auth.login":"","auth.signup":"","auth.email":"","auth.password":"","auth.loginEmail":"  ","auth.createAccount":" ","auth.or":"","auth.google":"  Google","auth.signOut":"","auth.accessRequired":" ","auth.enter":",    PANDORA","auth.nickname":"","auth.nicknameSkip":"","auth.nicknameHint":",     ID.","nav.home":"","nav.sectors":"","nav.samples":"","nav.messages":"","nav.search":"","nav.settings":"","nav.admin":"","banner.default":"[:   ]","banner.feedLive":"[  ]","banner.authRequired":"[ ]","banner.transmissions":"[ ]"},es:{"auth.title":"Autenticacin","auth.login":"Iniciar sesin","auth.signup":"Crear cuenta","auth.email":"Correo","auth.password":"Contrasea","auth.loginEmail":"Entrar con correo","auth.createAccount":"Crear cuenta","auth.or":"o","auth.google":"Continuar con Google","auth.signOut":"Cerrar sesin","auth.accessRequired":"Acceso requerido","auth.enter":"Autentcate para entrar a PANDORA","auth.nickname":"Apodo","auth.nicknameSkip":"Saltar","auth.nicknameHint":"Si saltas, usaremos un ID annimo aleatorio.","nav.home":"Inicio","nav.sectors":"Sectores","nav.samples":"Muestras","nav.messages":"Mensajes","nav.search":"Buscar","nav.settings":"Ajustes","nav.admin":"Admin","banner.default":"[SISTEMA: superposicin experimental activa]","banner.feedLive":"[FEED EN VIVO]","banner.authRequired":"[SE REQUIERE ACCESO]","banner.transmissions":"[CORRIENTE DE DATOS]"}};function EK(t,e){var r;const n=e??Yv.getState().locale;return((r=lT[n])==null?void 0:r[t])||lT.en[t]||t}function Zv(){const t=Yv(e=>e.locale);return e=>EK(e,t)}function hN(){const[t,e]=I.useState("login"),[n,r]=I.useState(""),[s,i]=I.useState(""),[o,l]=I.useState(""),{user:a,loading:u,error:d,signInWithGoogle:h,loginWithEmail:p,registerWithEmail:g,logout:w,setError:x}=Fr(),E=Zv(),v=()=>`${Math.floor(100+Math.random()*900)}`,_=async b=>{if(b.preventDefault(),!n||!s){x("Email and password are required.");return}if(t==="login")await p(n,s);else{const O=o.trim()||v();await g(n,s,O)}};return a?f.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 border border-pandora-border rounded-full flex items-center justify-center",children:f.jsx(mE,{size:18,className:"text-pandora-neon"})}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("p",{className:"text-sm text-pandora-text truncate",children:a.displayName||a.email||"Authenticated"}),f.jsx("p",{className:"text-xs text-pandora-muted font-mono truncate",children:a.email??"Google Account"})]})]}),f.jsxs("button",{onClick:w,disabled:u,className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-xs uppercase border border-pandora-border text-pandora-muted hover:border-pandora-neon hover:text-pandora-neon rounded-sm transition disabled:opacity-60",children:[u?f.jsx(Jt,{size:14,className:"animate-spin"}):f.jsx(jO,{size:14}),E("auth.signOut")]})]}):f.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(OO,{size:16,className:"text-pandora-neon"}),f.jsx("p",{className:"text-sm font-semibold uppercase text-pandora-text",children:E("auth.title")})]}),f.jsx("div",{className:"flex gap-2 text-xs font-semibold uppercase",children:["login","signup"].map(b=>f.jsx("button",{onClick:()=>{e(b),x(null)},className:kt("flex-1 border border-pandora-border py-2 rounded-sm",t===b?"border-pandora-neon text-pandora-neon":"text-pandora-muted hover:border-pandora-neon"),children:E(b==="login"?"auth.login":"auth.signup")},b))}),f.jsxs("form",{onSubmit:_,className:"space-y-3",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:E("auth.email")}),f.jsx("input",{type:"email",value:n,onChange:b=>r(b.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon",placeholder:"you@example.com",autoComplete:"email"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:E("auth.password")}),f.jsx("input",{type:"password",value:s,onChange:b=>i(b.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon",placeholder:"",autoComplete:t==="login"?"current-password":"new-password"})]}),t==="signup"&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:E("auth.nickname")}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:o,onChange:b=>l(b.target.value),className:"flex-1 bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon",placeholder:": NeonFox",maxLength:24}),f.jsx("button",{type:"button",onClick:()=>l(v()),className:"px-3 py-2 text-xs uppercase border border-pandora-border text-pandora-text rounded-sm hover:border-pandora-neon",children:E("auth.nicknameSkip")})]}),f.jsx("p",{className:"text-[11px] text-pandora-muted",children:E("auth.nicknameHint")})]}),d&&f.jsx("p",{className:"text-xs text-pandora-pink",children:d}),f.jsxs("button",{type:"submit",disabled:u,className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-xs uppercase border border-pandora-neon text-pandora-neon rounded-sm hover:bg-pandora-neon hover:text-pandora-bg transition disabled:opacity-60",children:[u?f.jsx(Jt,{size:14,className:"animate-spin"}):f.jsx(LO,{size:14}),E(t==="login"?"auth.loginEmail":"auth.createAccount")]})]}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-pandora-border"})}),f.jsx("div",{className:"relative flex justify-center text-xs uppercase text-pandora-muted",children:f.jsx("span",{className:"bg-pandora-surface px-2",children:E("auth.or")})})]}),f.jsxs("button",{onClick:h,disabled:u,className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-xs uppercase border border-pandora-border text-pandora-text rounded-sm hover:border-pandora-neon hover:text-pandora-neon transition disabled:opacity-60",children:[u?f.jsx(Jt,{size:14,className:"animate-spin"}):f.jsx(mE,{size:14}),E("auth.google")]})]})}const uT={logic:50,altruism:50,aggression:50,credit:50};async function e_(t){const e=sn(Ue,"profiles",t.uid),n=await ro(e),r={uid:t.uid,displayName:t.displayName||t.email||"New Subject",displayNameLower:(t.displayName||t.email||"New Subject").toLowerCase(),email:t.email??null,photoURL:t.photoURL??null,stats:uT,role:"user",createdAt:Zr(),updatedAt:Zr()};if(!n.exists())return await Qc(e,r),r;const s=n.data();return{...r,...s,uid:t.uid,stats:s.stats||uT,displayNameLower:(s.displayName||r.displayName).toLowerCase()}}async function bK(t,e){const n=sn(Ue,"profiles",t),r=e.displayName?{displayNameLower:e.displayName.toLowerCase()}:{};await gl(n,{...e,...r,updatedAt:Zr()})}function SK(t){const e=sn(Ue,"experiments","global");return xn(e,n=>{if(!n.exists()){t(null);return}t(n.data())})}async function TK(t){const e=sn(Ue,"experiments","global");await Qc(e,t,{merge:!0})}function AK(){const t=ra();Nr(re=>re.experimentMode),Nr(re=>re.setExperimentMode);const e=Nr(re=>re.userStats),n=Nr(re=>re.setUserStats),{user:r,loading:s,initialized:i}=Fr(),{profile:o,setProfile:l}=o2(),{locale:a,setLocale:u}=Yv(),d=Zv(),[h,p]=I.useState(!1),[g,w]=I.useState(!1),[x,E]=I.useState(""),[v,_]=I.useState("TEXT"),[b,O]=I.useState(null),[V,$]=I.useState([]),[C,T]=I.useState([]),[R,A]=I.useState(null),[N,M]=I.useState(!1),[P,K]=I.useState(null),[H,de]=I.useState(null),[q,B]=I.useState(null),[Q,Z]=I.useState(!1),[he,Te]=I.useState(!0),[fe,Pe]=I.useState(!1),[Xe,at]=I.useState(!1),et=I.useRef(null),St=I.useRef(null),gt=I.useRef(null),[Br,Fn]=I.useState(!1),[ts,Sn]=I.useState(0),[ee,me]=I.useState(!1),[xe,we]=I.useState(0);I.useEffect(()=>(document.body.classList.add("no-screenshot"),()=>document.body.classList.remove("no-screenshot")),[]),I.useEffect(()=>{const re=x.toLowerCase().includes("#order");w(re)},[x]),I.useEffect(()=>{(async()=>{if(!r){l(null);return}const oe=await e_({uid:r.uid,displayName:r.displayName,email:r.email,photoURL:r.photoURL});n(oe.stats),l({...oe,role:oe.role||"user"})})().catch(()=>{})},[r,n,l]),I.useEffect(()=>{const re=SK(oe=>B(oe));return()=>re()},[]);const Ye=[{code:"ko",label:""},{code:"en",label:"English"},{code:"ja",label:""},{code:"zh",label:""},{code:"ru",label:""},{code:"es",label:"Espaol"}],Se=[{to:"/",label:d("nav.home"),icon:NO},{to:"/search",label:d("nav.search"),icon:nk},{to:"/sectors",label:d("nav.sectors"),icon:Sy},{to:"/samples",label:d("nav.samples"),icon:Hf},{to:"/messages",label:d("nav.messages"),icon:al},{to:"/settings",label:d("nav.settings"),icon:rk},...(o==null?void 0:o.role)==="admin"?[{to:"/admin",label:d("nav.admin"),icon:sk}]:[]],Ee=t.pathname.startsWith("/samples"),tt=t.pathname.startsWith("/t/"),Dt=t.pathname.startsWith("/messages"),ns=!Dt&&he,Tt=t.pathname==="/"||t.pathname.startsWith("/sectors"),Mt=()=>{E(""),O(null),$([]),T([]),A(null),_("TEXT"),w(!1),M(!1),K(null)},At=()=>{p(!1),Mt()},rs=async re=>{const oe=await Sg(re,"samples");return O(oe),A(null),oe},Sr=re=>{const oe=re.type||"";return oe.startsWith("image/")||oe.startsWith("video/")||oe.startsWith("audio/")},ua=async re=>{if(!Sr(re))throw new Error("Only images, videos, or audio files are allowed.");const oe=await Sg(re,"attachments");return $(Ie=>[...Ie,{url:oe,name:re.name,contentType:re.type}]),oe},Ll=async()=>{const re=x.trim();if(!(!(v==="TEXT"?re.length>0||V.length>0||C.length>0:b||R)||N)){M(!0),K(null),de(null);try{let Ie=[...V];if(v==="TEXT"&&C.length){for(const Bt of C){if(!Sr(Bt))throw de("Only images, videos, or audio files are allowed."),new Error("Unsupported attachment type.");const lr=await Sg(Bt,"attachments");Ie.push({url:lr,name:Bt.name,contentType:Bt.type})}$(Ie),T([])}let Je=b;v==="SAMPLES"&&!b&&R&&(Je=await rs(R)),await _K({type:v==="TEXT"?"text":"sample",content:v==="TEXT"&&re||void 0,attachments:v==="TEXT"?Ie:void 0,sampleUrl:v==="SAMPLES"?Je??void 0:void 0}),At()}catch(Ie){const Je=Ie instanceof Error?Ie.message:"Failed to submit. Please try again.";K(Je)}finally{M(!1)}}},si=v==="TEXT"?x.trim().length>0||V.length>0||C.length>0:!!(b||R);if(!i||s)return f.jsx("div",{className:"h-dvh flex items-center justify-center bg-pandora-bg text-pandora-text",children:f.jsxs("div",{className:"flex items-center gap-3 text-sm uppercase font-semibold",children:[f.jsx(Jt,{className:"animate-spin text-pandora-text",size:18}),"Initializing..."]})});if(!r)return f.jsx("div",{className:"min-h-dvh bg-pandora-bg text-pandora-text flex items-center justify-center px-4",children:f.jsxs("div",{className:"w-full max-w-md space-y-4",children:[f.jsxs("div",{className:"text-center space-y-2",children:[f.jsx("p",{className:"text-sm uppercase text-pandora-muted font-semibold",children:d("auth.accessRequired")}),f.jsx("p",{className:"text-lg font-semibold text-pandora-text",children:d("auth.enter")})]}),f.jsx(hN,{})]})});const ca=re=>{var Bt;const oe=((Bt=re.touches[0])==null?void 0:Bt.clientX)??0;if(window.innerWidth>1024)return;const Ie=320;if(fe&&oe<=280+20){et.current=oe,St.current="left",Fn(!0),Sn(1);return}if(Xe&&oe>=window.innerWidth-(Ie+20)){et.current=oe,St.current="right",me(!0),we(1);return}if(!fe&&oe<40){et.current=oe,St.current="left",Fn(!0),Sn(0);return}!Xe&&oe>window.innerWidth-40&&(et.current=oe,St.current="right",me(!0),we(0))},go=re=>{var Je;if(et.current===null)return;const oe=((Je=re.changedTouches[0])==null?void 0:Je.clientX)??0,Ie=oe-et.current;if(St.current==="left"){const Bt=fe?ts>.35:Ie>90||ts>.55;Pe(Bt),Fn(!1),Sn(0)}else if(St.current==="right"){const Bt=et.current-oe,lr=Xe?xe>.35:Bt>80||xe>.55;at(lr),me(!1),we(0)}et.current=null,St.current=null},Ul=re=>{var Bt;if(et.current===null)return;const oe=((Bt=re.touches[0])==null?void 0:Bt.clientX)??0,Ie=320,Je=280;if(St.current==="left"&&Br)if(fe){const lr=Math.max(0,Math.min(Je,et.current-oe));Sn(Math.max(0,1-lr/Je))}else{const lr=Math.max(0,Math.min(Je,oe-et.current));Sn(lr/Je)}if(St.current==="right"&&ee)if(Xe){const lr=Math.max(0,Math.min(Ie,oe-et.current));we(Math.max(0,1-lr/Ie))}else{const lr=Math.max(0,Math.min(Ie,et.current-oe));we(lr/Ie)}},Fl=re=>{if(window.innerWidth>1024)return;const oe=re.clientX;if(Xe&&oe>=window.innerWidth-(320+20)){gt.current=oe,St.current="right",me(!0),we(1);return}!Xe&&oe>window.innerWidth-16&&(gt.current=oe,St.current="right",me(!0),we(0))},ks=re=>{if(gt.current===null||!ee)return;const oe=re.clientX,Ie=320;if(Xe){const Je=Math.max(0,Math.min(Ie,oe-gt.current));we(Math.max(0,1-Je/Ie))}else{const Je=Math.max(0,Math.min(Ie,gt.current-oe));we(Je/Ie)}},ed=re=>{if(gt.current===null||!ee)return;const oe=re.clientX,Ie=gt.current-oe,Je=Xe?xe>.35:Ie>80||xe>.55;at(Je),me(!1),we(0),gt.current=null,St.current=null},da=re=>{if(window.innerWidth>1024)return;const oe=re.clientX;if(fe&&oe<=280+20){gt.current=oe,St.current="left",Fn(!0),Sn(1);return}!fe&&oe<24&&(gt.current=oe,St.current="left",Fn(!0),Sn(0))},td=re=>{if(gt.current===null||!Br)return;const oe=re.clientX,Ie=280;if(fe){const Je=Math.max(0,Math.min(Ie,gt.current-oe));Sn(Math.max(0,1-Je/Ie))}else{const Je=Math.max(0,Math.min(Ie,oe-gt.current));Sn(Je/Ie)}},ii=re=>{if(gt.current===null||!Br)return;const Ie=re.clientX-gt.current,Je=fe?ts>.35:Ie>90||ts>.55;Pe(Je),Fn(!1),Sn(0),gt.current=null,St.current=null};return f.jsxs("div",{className:"h-dvh overflow-hidden bg-pandora-bg text-pandora-text",onTouchStart:ca,onTouchEnd:go,onTouchMove:Ul,onMouseDown:da,onMouseMove:td,onMouseUp:ii,onMouseLeave:ii,onMouseDownCapture:Fl,onMouseMoveCapture:ks,onMouseUpCapture:ed,children:[!fe&&f.jsx("div",{className:"lg:hidden fixed left-1 top-1/2 -translate-y-1/2 z-40 pointer-events-none",children:f.jsx("div",{className:"w-1.5 h-12 rounded-full bg-white/20 shadow-[0_0_18px_rgba(255,255,255,0.15)] animate-pulse"})}),!Xe&&f.jsx("div",{className:"lg:hidden fixed right-1 top-1/2 -translate-y-1/2 z-40 pointer-events-none",children:f.jsx("div",{className:"w-1.5 h-12 rounded-full bg-white/20 shadow-[0_0_18px_rgba(255,255,255,0.15)] animate-pulse"})}),f.jsx("aside",{className:"hidden lg:flex flex-col fixed top-0 left-0 w-[260px] h-screen border-r border-pandora-border/60 bg-pandora-surface/80 backdrop-blur-md px-5 py-6 z-30 rounded-r-3xl",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center justify-between gap-3 relative",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 border border-pandora-border/70 rounded-3xl bg-white/5 flex items-center justify-center",children:f.jsx(pE,{className:"text-pandora-text",size:20})}),f.jsx("div",{className:"text-lg font-semibold tracking-wide text-pandora-text",children:"PANDORA"})]}),f.jsxs("div",{className:"relative",children:[f.jsx("button",{onClick:()=>Z(re=>!re),className:"text-xs font-semibold uppercase px-2 py-1 border border-pandora-border/70 text-pandora-text rounded-full hover:border-pandora-text hover:bg-white/10",title:"Select language",children:a.toUpperCase()}),Q&&f.jsx("div",{className:"absolute right-0 mt-2 w-36 border border-pandora-border/70 bg-pandora-bg/90 rounded-3xl shadow-xl backdrop-blur-md",children:Ye.map(re=>f.jsx("button",{onClick:()=>{u(re.code),Z(!1)},className:kt("w-full text-left px-3 py-2 text-xs rounded-3xl hover:bg-white/5",re.code===a?"text-pandora-text font-semibold":"text-pandora-text"),children:re.label},re.code))})]})]}),f.jsx("nav",{className:"space-y-2",children:Se.map(re=>{const oe=re.icon;return f.jsxs(dE,{to:re.to,className:({isActive:Ie})=>kt("w-full flex items-center gap-3 px-3 py-3 border border-pandora-border/70 text-left text-sm rounded-2xl transition bg-white/0",Ie?"text-pandora-text border-white/30 shadow-[0_12px_32px_-10px_rgba(165,180,252,0.75)]":"text-pandora-muted",!Ie&&"hover:bg-white/5 hover:text-pandora-text hover:border-white/20"),children:[f.jsx(oe,{size:16}),f.jsx("span",{children:re.label})]},re.to)})}),f.jsx("button",{onClick:()=>p(!0),className:"w-full border border-transparent text-pandora-text bg-[#8D7BFF]/85 font-semibold py-3 rounded-2xl uppercase text-sm shadow-[0_10px_24px_-16px_rgba(141,123,255,0.35)] ring-1 ring-white/10 hover:shadow-xl transition backdrop-blur",children:(q==null?void 0:q.primaryButtonLabel)??"[ NEW DATA + ]"})]})}),ns&&f.jsx("aside",{className:"hidden lg:block fixed top-0 right-0 w-[320px] h-screen border-l border-pandora-border/60 bg-pandora-surface/80 backdrop-blur-md overflow-y-auto",children:f.jsx("div",{className:"p-5 space-y-6 sticky top-0 bg-pandora-surface/60 backdrop-blur",children:f.jsxs("div",{className:"border border-pandora-border/70 bg-white/5 p-5 rounded-2xl space-y-4 shadow-[0_20px_50px_-30px_rgba(0,0,0,0.6)]",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold tracking-wide text-pandora-text",children:"My Passport"}),f.jsx("p",{className:"text-xs text-pandora-muted font-semibold",children:(o==null?void 0:o.displayName)||"Subject"})]}),f.jsx("span",{className:"text-xs font-semibold uppercase text-pandora-neon bg-white/10 px-3 py-1 rounded-full",children:"Online"})]}),f.jsx(Qo,{username:(o==null?void 0:o.displayName)||(o==null?void 0:o.email)||"Subject",showName:!0,size:"md"}),f.jsx(Zy,{stats:[e.logic,e.altruism,e.aggression,e.credit,e.logic,e.credit]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm font-semibold",children:[f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[f.jsx("span",{className:"text-pandora-muted",children:"Logic"}),f.jsx("span",{children:e.logic})]}),f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[f.jsx("span",{className:"text-pandora-muted",children:"Altruism"}),f.jsx("span",{children:e.altruism})]}),f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[f.jsx("span",{className:"text-pandora-muted",children:"Aggression"}),f.jsx("span",{children:e.aggression})]}),f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[f.jsx("span",{className:"text-pandora-muted",children:"Credit"}),f.jsxs("span",{children:[e.credit,"%"]})]})]})]})})}),f.jsxs("div",{className:kt("h-full lg:pl-[270px]",Dt?"overflow-hidden":"overflow-y-auto no-scrollbar",ns?"lg:pr-[340px]":"lg:pr-6",Ee?"pt-0 pb-16":Dt?"pt-2 pb-4":"pt-12 pb-16 md:pb-10"),children:[!Dt&&f.jsx("button",{onClick:()=>Te(re=>!re),className:kt("hidden lg:flex fixed top-1/2 -translate-y-1/2 z-40 h-12 w-8 items-center justify-center border border-pandora-border/70 bg-white/10 backdrop-blur-md text-xs font-semibold uppercase hover:border-pandora-text rounded-full",ns?"right-[320px]":"right-0"),"aria-label":he?"Hide profile panel":"Show profile panel",children:he?"":""}),f.jsxs("div",{className:kt(Ee?"w-full h-full":Dt?"w-full max-w-[1200px] mx-auto px-2 lg:px-4":"max-w-[1200px] mx-auto px-4",Ee&&"px-0"),children:[!Ee&&!t.pathname.startsWith("/messages")&&f.jsx("header",{className:"lg:hidden bg-pandora-surface/85 border-b border-pandora-border/70 backdrop-blur-md px-3 py-2 space-y-1",children:f.jsxs("div",{className:"flex items-center gap-3 text-[11px] uppercase",children:[f.jsx("span",{className:"text-[10px] font-bold text-pandora-neon",children:"[FEED LIVE]"}),f.jsx("span",{className:"text-[10px] font-bold text-[#FF6B6B]",children:"[AUTH REQUIRED]"}),f.jsx("span",{className:"text-pandora-text truncate",children:(q==null?void 0:q.tickerMessage)||d("banner.default")})]})}),f.jsx("main",{className:kt("grid grid-cols-1",Ee?"h-full mt-0 gap-8":Dt?"h-full mt-0 gap-3":"mt-4 gap-8"),children:f.jsx("div",{className:kt("mx-auto w-full",Ee||Dt?"max-w-none h-full":tt?"max-w-[1100px]":"max-w-[640px]"),children:f.jsx(uO,{})})})]})]}),(fe||Br)&&f.jsx("div",{className:"lg:hidden fixed top-0 left-0 bottom-0 z-50 pointer-events-none",children:f.jsxs("div",{className:"w-64 h-full bg-pandora-surface/95 backdrop-blur-md border-r border-pandora-border/70 p-4 space-y-4 transform transition-transform duration-300 ease-out pointer-events-auto",style:{transform:`translateX(${(-1+(Br?ts:fe?1:0))*100}%)`,transition:Br?"none":"transform 300ms ease"},children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-9 h-9 rounded-2xl border border-pandora-border/70 bg-white/5 flex items-center justify-center",children:f.jsx(pE,{className:"text-pandora-text",size:18})}),f.jsx("span",{className:"text-sm font-semibold text-pandora-text",children:"PANDORA"})]}),f.jsx("button",{onClick:()=>Pe(!1),className:"text-pandora-muted hover:text-pandora-text text-lg","aria-label":"Close navigation",children:""})]}),f.jsx("nav",{className:"space-y-2",children:Se.map(re=>{const oe=re.icon,Ie=t.pathname===re.to;return f.jsxs(dE,{to:re.to,onClick:()=>Pe(!1),className:({isActive:Je})=>kt("w-full flex items-center gap-3 px-3 py-3 border border-pandora-border/70 text-left text-sm rounded-full transition bg-white/0",Je||Ie?"text-pandora-text border-white/30 shadow-[0_12px_32px_-10px_rgba(165,180,252,0.75)]":"text-pandora-muted"),children:[f.jsx(oe,{size:16}),f.jsx("span",{children:re.label})]},re.to)})}),f.jsxs("div",{className:"pt-4",children:[f.jsx("div",{className:"text-[11px] uppercase text-pandora-muted mb-2",children:"Language"}),f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>Z(re=>!re),className:"w-full flex items-center justify-between px-3 py-2 rounded-full border border-pandora-border/70 text-pandora-text hover:border-pandora-accent-to",children:[f.jsx("span",{className:"font-semibold",children:a.toUpperCase()}),f.jsx("span",{className:"text-xs text-pandora-muted",children:""})]}),Q&&f.jsx("div",{className:"absolute mt-2 w-full border border-pandora-border/70 bg-pandora-bg/95 rounded-3xl shadow-lg z-10",children:Ye.map(re=>f.jsx("button",{onClick:()=>{u(re.code),Z(!1)},className:kt("w-full text-left px-3 py-2 text-xs rounded-3xl hover:bg-white/5",re.code===a?"text-pandora-text font-semibold":"text-pandora-text"),children:re.label},re.code))})]})]})]})}),(Xe||ee)&&f.jsx("div",{className:"lg:hidden fixed top-0 right-0 bottom-0 z-50 pointer-events-none",children:f.jsxs("div",{className:"w-72 h-full bg-pandora-surface/95 backdrop-blur-md border-l border-pandora-border/70 p-4 space-y-4 transform transition-transform duration-300 ease-out pointer-events-auto",style:{transform:`translateX(${(1-(ee?xe:Xe?1:0))*100}%)`,transition:ee?"none":"transform 300ms ease"},children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Qo,{username:(o==null?void 0:o.displayName)||"You",size:"sm"}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-sm font-semibold text-pandora-text truncate",children:(o==null?void 0:o.displayName)||"You"}),(o==null?void 0:o.email)&&f.jsx("span",{className:"text-xs text-pandora-muted truncate",children:o.email})]})]}),f.jsx("button",{onClick:()=>at(!1),className:"text-pandora-muted hover:text-pandora-text text-lg","aria-label":"Close profile",children:""})]}),f.jsxs("div",{className:"border border-pandora-border/70 bg-white/5 p-4 rounded-2xl space-y-3 shadow-[0_20px_50px_-30px_rgba(0,0,0,0.6)]",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs text-pandora-text",children:[f.jsx("span",{className:"font-semibold",children:"My Passport"}),f.jsx("span",{className:"text-[10px] uppercase text-pandora-neon bg-white/10 px-2 py-0.5 rounded-full",children:"Online"})]}),f.jsx(Zy,{stats:[e.logic,e.altruism,e.aggression,e.credit,e.logic,e.credit]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm font-semibold",children:[f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[f.jsx("span",{className:"text-pandora-muted text-xs",children:"Logic"}),f.jsx("span",{children:e.logic})]}),f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[f.jsx("span",{className:"text-pandora-muted text-xs",children:"Altruism"}),f.jsx("span",{children:e.altruism})]}),f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[f.jsx("span",{className:"text-pandora-muted text-xs",children:"Aggression"}),f.jsx("span",{children:e.aggression})]}),f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border/60 px-3 py-2 rounded-2xl text-pandora-text bg-white/5",children:[f.jsx("span",{className:"text-pandora-muted text-xs",children:"Credit"}),f.jsxs("span",{children:[e.credit,"%"]})]})]})]})]})}),Tt&&!Dt&&f.jsx("button",{onClick:()=>{t.pathname.startsWith("/sectors")?window.dispatchEvent(new CustomEvent("open-sector-modal")):p(!0)},className:"lg:hidden fixed bottom-20 right-4 z-50 w-14 h-14 rounded-full text-white shadow-[0_12px_32px_-10px_rgba(165,180,252,0.75)] border border-white/30 flex items-center justify-center hover:scale-105 transition bg-transparent backdrop-blur-md","aria-label":"New Data",children:f.jsx(BO,{size:24,className:"text-white"})}),h&&f.jsx("section",{className:"fixed inset-0 z-40 bg-black/70 backdrop-blur-sm flex items-end lg:items-center lg:justify-center px-4",children:f.jsxs("div",{className:"w-full lg:w-[640px] border border-white/15 bg-pandora-surface/95 shadow-2xl rounded-t-3xl lg:rounded-2xl max-h-[90vh] lg:max-h-[85vh] overflow-hidden flex flex-col",children:[f.jsx("div",{className:"flex items-center justify-center py-3 lg:hidden",children:f.jsx("div",{className:"w-12 h-1.5 rounded-full bg-white/30"})}),f.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 px-6 pb-3",children:[f.jsx("h3",{className:"text-base font-semibold text-pandora-text",children:"Compose"}),f.jsx("button",{onClick:At,className:"text-pandora-muted hover:text-pandora-text text-lg",children:""})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[f.jsx("div",{className:"flex items-center gap-2",children:["TEXT","SAMPLES"].map(re=>f.jsx("button",{onClick:()=>_(re),className:kt("px-3 py-2 text-xs rounded-full font-semibold tracking-wide border border-white/10",v===re?"text-pandora-text bg-gradient-to-r from-pandora-accent-from/40 to-pandora-accent-to/40 border-transparent":"text-pandora-muted hover:border-white/30"),children:re==="TEXT"?"Notes":"Samples"},re))}),v==="TEXT"?f.jsxs(f.Fragment,{children:[f.jsx("textarea",{value:x,onChange:re=>E(re.target.value),placeholder:"Type your field note... try #Order",className:"w-full h-40 bg-pandora-bg/60 border border-white/10 text-pandora-text text-sm p-3 rounded-2xl focus:outline-none focus:border-pandora-accent-to"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-xs text-pandora-muted",children:"Attach photos, videos, or files (optional)."}),f.jsx(iS,{label:"Attach files",description:"Images, videos, or audio only",accept:"image/*,video/*,audio/*",onUpload:ua,deferUpload:!0,multiple:!0,onFilesSelected:re=>{if(!re.length)return;const oe=re.filter(Sr);oe.length!==re.length&&de("Only images, videos, or audio files are allowed."),oe.length&&T(Ie=>[...Ie,...oe])}}),V.length>0&&f.jsxs("div",{className:"border border-white/10 bg-pandora-bg/70 p-3 rounded-2xl space-y-2",children:[f.jsx("p",{className:"text-xs text-pandora-muted",children:"Attached"}),f.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:V.map(re=>f.jsxs("div",{className:"flex items-center justify-between text-xs text-pandora-text border border-white/10 rounded-xl px-3 py-2",children:[f.jsx("span",{className:"truncate",children:re.name}),f.jsx("button",{className:"text-pandora-muted hover:text-pandora-text text-[11px]",onClick:()=>$(oe=>oe.filter(Ie=>Ie.url!==re.url)),children:""})]},re.url))})]}),C.length>0&&f.jsxs("div",{className:"border border-dashed border-white/15 bg-pandora-bg/60 p-3 rounded-2xl space-y-2",children:[f.jsx("p",{className:"text-xs text-pandora-muted",children:"Pending upload"}),f.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:C.map((re,oe)=>f.jsxs("div",{className:"flex items-center justify-between text-xs text-pandora-text border border-white/10 rounded-xl px-3 py-2",children:[f.jsx("span",{className:"truncate",children:re.name}),f.jsx("span",{className:"text-[11px] text-pandora-muted",children:"will upload on post"})]},`${re.name}-${oe}`))})]}),H&&f.jsx("p",{className:"text-xs text-pandora-pink",children:H})]}),f.jsx("div",{className:kt("transform transition-all duration-200 origin-bottom",g?"translate-y-0 opacity-100":"translate-y-4 opacity-0"),children:f.jsxs("div",{className:"border border-dashed border-white/20 bg-pandora-bg/70 p-4 rounded-2xl space-y-3",children:[f.jsx("div",{className:"text-xs text-pandora-muted font-semibold",children:"#Order Details"}),f.jsx("input",{type:"text",placeholder:"Price",className:"w-full bg-pandora-surface/70 border border-white/10 text-pandora-text text-sm p-3 rounded-2xl placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to"}),f.jsx("input",{type:"text",placeholder:"Qty",className:"w-full bg-pandora-surface/70 border border-white/10 text-pandora-text text-sm p-3 rounded-2xl placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to"}),f.jsx("input",{type:"text",placeholder:"Account",className:"w-full bg-pandora-surface/70 border border-white/10 text-pandora-text text-sm p-3 rounded-2xl placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon"})]})})]}):f.jsxs("div",{className:"space-y-3",children:[f.jsx("p",{className:"text-xs text-pandora-muted",children:"Upload a sample video to share to SAMPLES."}),f.jsx(iS,{label:"Drop Sample Video Here",description:"MP4, MOV, WEBM  keep it concise",accept:"video/*",onUpload:rs,deferUpload:!0,onFileSelected:re=>{A(re??null),O(null)}}),b&&f.jsxs("div",{className:"border border-white/10 bg-pandora-bg/70 p-3 rounded-2xl flex items-center justify-between gap-3",children:[f.jsxs("div",{className:"min-w-0",children:[f.jsx("p",{className:"text-xs text-pandora-muted",children:"Linked Sample"}),f.jsx("p",{className:"text-sm text-pandora-text truncate",children:b})]}),f.jsxs("span",{className:"flex items-center gap-2 text-xs text-pandora-text",children:[f.jsx(ek,{size:14})," Ready to submit"]})]})]}),P&&f.jsx("p",{className:"text-xs text-pandora-pink",children:P})]}),f.jsxs("div",{className:"flex items-center justify-end gap-2 px-6 py-4 border-t border-white/10 bg-pandora-surface/95",children:[f.jsx("button",{onClick:At,className:"px-4 py-2 text-sm rounded-full border border-white/20 text-pandora-text hover:border-white/40",children:"Cancel"}),f.jsx("button",{onClick:Ll,disabled:!si||N,className:"px-5 py-2 text-xs font-semibold rounded-full bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg shadow-lg hover:shadow-xl transition disabled:opacity-50 disabled:cursor-not-allowed disabled:grayscale",children:N?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(Jt,{size:14,className:"animate-spin"})," Saving..."]}):v==="SAMPLES"?b?"Submit Sample":"Upload Sample":"Transmit"})]})]})})]})}async function t_(t,e){const n=sn(Ue,"transmissions",t,"likes",e),r=sn(Ue,"transmissions",t);return(await ro(n)).exists()?(await kv(n),await gl(r,{likes:Sc(-1)}),{liked:!1}):(await Qc(n,{uid:e,createdAt:Zr()}),await gl(r,{likes:Sc(1)}),{liked:!0})}async function n_(t,e,n){const r=Ut(Ue,"transmissions",t,"comments"),s=sn(Ue,"transmissions",t);await bc(r,{uid:e,text:n,likes:0,createdAt:Zr()}),await gl(s,{comments:Sc(1)})}async function r_(t,e,n){const r=sn(Ue,"transmissions",t,"comments",e,"likes",n),s=sn(Ue,"transmissions",t,"comments",e);return(await ro(r)).exists()?(await kv(r),await gl(s,{likes:Sc(-1)}),{liked:!1}):(await Qc(r,{uid:n,createdAt:Zr()}),await gl(s,{likes:Sc(1)}),{liked:!0})}function cT(){const t=Nr(q=>q.isBlind()),{user:e}=Fr(),[n,r]=I.useState([]),[s,i]=I.useState({}),[o,l]=I.useState({}),[a,u]=I.useState({}),[d,h]=I.useState(!0),[p,g]=I.useState(!0),[w,x]=I.useState(null),[E,v]=I.useState({}),[_,b]=I.useState({}),[O,V]=I.useState({}),[$,C]=I.useState(null),[T,R]=I.useState(1),A=Zv();I.useEffect(()=>{const q=Xs(Ut(Ue,"transmissions"),Ys("createdAt","desc")),B=xn(q,Q=>{const Z=Q.docs.map(he=>({id:he.id,...he.data()}));r(Z),i(he=>{const Te={...he};return Z.forEach(fe=>{var Pe;Te[fe.id]||(Te[fe.id]={count:fe.likes||0,liked:((Pe=he[fe.id])==null?void 0:Pe.liked)||!1})}),Te}),l(he=>{const Te={...he};return Z.forEach(fe=>{Te[fe.id]===void 0&&(Te[fe.id]=fe.comments||0)}),Te}),h(!1)},()=>h(!1));return()=>B()},[]),I.useEffect(()=>{const q=xn(Ut(Ue,"profiles"),B=>{const Q={};B.docs.forEach(Z=>{const he=Z.data();Q[he.uid]=he}),u(Q)});return()=>q()},[]);const N=q=>q?t?q.slice(0,2)+"****":q:"Subject",M=q=>{if(!q||!("seconds"in q))return"Just now";const B=Date.now()-q.seconds*1e3,Q=Math.floor(B/6e4);if(Q<1)return"Just now";if(Q<60)return`${Q}m ago`;const Z=Math.floor(Q/60);return Z<24?`${Z}h ago`:`${Math.floor(Z/24)}d ago`},P=q=>{if(!q)return"User";const B=a[q];return(B==null?void 0:B.displayName)||(B==null?void 0:B.email)||"User"},K=async q=>{if(!e)return;const B=s[q]||{count:0,liked:!1};i(Q=>({...Q,[q]:{count:B.count+(B.liked?-1:1),liked:!B.liked}}));try{await t_(q,e.uid)}catch{i(Q=>({...Q,[q]:B}))}};I.useEffect(()=>{if(!w)return;const q=Xs(Ut(Ue,"transmissions",w,"comments"),Ys("createdAt","desc")),B=xn(q,Q=>{b(Z=>({...Z,[w]:Q.docs.map(he=>({id:he.id,...he.data()}))})),V(Z=>{const he={...Z};return Q.docs.forEach(Te=>{const fe=Te.data(),Pe=Z[Te.id];if(he[Te.id]={count:fe.likes||0,liked:(Pe==null?void 0:Pe.liked)||!1},e&&(Pe==null?void 0:Pe.liked)===void 0){const Xe=sn(Ue,"transmissions",w,"comments",Te.id,"likes",e.uid);ro(Xe).then(at=>{V(et=>({...et,[Te.id]:{count:fe.likes||0,liked:at.exists()}}))}).catch(()=>{})}}),he})});return()=>B()},[w,e]);const H=async q=>{if(!e)return;const B=(E[q]||"").trim();if(!B)return;const Q=`temp-${Date.now()}`;v(Z=>({...Z,[q]:""})),b(Z=>({...Z,[q]:[{id:Q,uid:e.uid,text:B,createdAt:{seconds:Date.now()/1e3,nanoseconds:0}},...Z[q]||[]]})),V(Z=>({...Z,[Q]:{count:0,liked:!1}})),l(Z=>({...Z,[q]:(Z[q]||0)+1}));try{await n_(q,e.uid,B)}catch{l(Z=>({...Z,[q]:Math.max(0,(Z[q]||1)-1)}))}},de=async(q,B)=>{if(!e)return;const Q=O[B]||{count:0,liked:!1};V(Z=>({...Z,[B]:{count:Q.count+(Q.liked?-1:1),liked:!Q.liked}}));try{await r_(q,B,e.uid)}catch{V(Z=>({...Z,[B]:Q}))}};return f.jsxs("div",{className:"space-y-6",children:[$&&f.jsxs("div",{className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex flex-col items-center justify-center p-4",children:[f.jsxs("div",{className:"flex items-center gap-2 self-end mb-2",children:[f.jsx("button",{onClick:()=>R(q=>Math.max(.5,q-.25)),className:"px-3 py-1 text-xs rounded-full border border-white/20 text-white hover:border-white/60",children:"-"}),f.jsxs("span",{className:"text-white text-xs px-2",children:[Math.round(T*100),"%"]}),f.jsx("button",{onClick:()=>R(q=>Math.min(3,q+.25)),className:"px-3 py-1 text-xs rounded-full border border-white/20 text-white hover:border-white/60",children:"+"}),f.jsx("button",{onClick:()=>{R(1),C(null)},className:"px-3 py-1 text-xs rounded-full border border-white/30 text-white hover:border-white/60",children:"Close"})]}),f.jsx("div",{className:"max-w-6xl w-full flex-1 flex items-center justify-center",children:f.jsx("img",{src:$,alt:"zoomed",className:"max-h-[90vh] max-w-full object-contain transition-transform duration-150",style:{transform:`scale(${T})`},onDoubleClick:()=>R(1)})})]}),f.jsx("header",{className:"sticky top-0 z-10 h-12 bg-pandora-surface/85 border-b border-pandora-border/70 overflow-hidden hidden lg:block backdrop-blur-md px-4",children:f.jsxs("div",{className:"flex items-center gap-4 text-[11px] uppercase h-full",children:[f.jsx("span",{className:"text-[10px] font-bold text-pandora-neon",children:A("banner.feedLive")}),f.jsx("span",{className:"text-[10px] font-bold text-[#FF6B6B]",children:A("banner.authRequired")}),f.jsx("span",{className:"text-pandora-text truncate",children:A("banner.transmissions")})]})}),d&&f.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted text-sm",children:[f.jsx(Jt,{size:16,className:"animate-spin"})," Loading transmissions..."]}),!d&&n.length===0&&f.jsxs("article",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-none font-mono text-sm text-pandora-muted space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-pandora-neon text-xs uppercase",children:[f.jsx(zO,{size:14})," No transmissions yet"]}),f.jsx("p",{children:"Share a note or upload a sample from the Compose modal."})]}),f.jsx("div",{className:"space-y-4",children:n.map(q=>{var Z,he,Te;const B=q.uid?a[q.uid]:void 0,Q=(B==null?void 0:B.displayName)||(B==null?void 0:B.email)||"User";return f.jsxs("article",{className:"space-y-3 border border-pandora-border p-4 bg-pandora-surface rounded-none",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("a",{href:q.uid?`/u/${q.uid}`:"#",className:"flex items-center gap-3 min-w-0",children:[f.jsx(Qo,{username:N(Q??"Subject"),size:"sm"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"text-sm font-semibold text-pandora-text truncate",children:N(Q??"Subject")}),f.jsx("div",{className:"text-[11px] text-pandora-muted",children:M(q.createdAt)})]})]}),q.type==="sample"&&f.jsxs("span",{className:"text-[11px] uppercase font-semibold flex items-center gap-1 px-2 py-1 rounded-full bg-[#8D7BFF]/85 text-white shadow-[0_10px_24px_-16px_rgba(141,123,255,0.35)] border border-transparent ring-1 ring-white/10 backdrop-blur",children:[f.jsx(Hf,{size:14})," Sample"]})]}),q.type==="text"&&q.content&&f.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:q.content}),q.type==="text"&&q.attachments&&q.attachments.length>0&&f.jsxs("div",{className:"space-y-3",children:[f.jsx("div",{className:"flex gap-3 overflow-x-auto snap-x snap-mandatory pb-2 -mx-1 px-1",children:q.attachments.map(fe=>{var at,et;const Pe=(at=fe.contentType)==null?void 0:at.startsWith("image"),Xe=(et=fe.contentType)==null?void 0:et.startsWith("video");return Pe?f.jsx("button",{type:"button",onClick:()=>{C(fe.url),R(1)},className:"min-w-[220px] max-w-[80vw] h-[260px] snap-center border border-pandora-border rounded-2xl overflow-hidden bg-black/60 flex items-center justify-center hover:border-pandora-accent-to transition shrink-0",children:f.jsx("img",{src:fe.url,alt:fe.name,className:"w-full h-full object-contain transition-transform duration-200 hover:scale-105"})},fe.url):Xe?f.jsx("div",{className:"min-w-[240px] max-w-[80vw] h-[260px] snap-center border border-pandora-border rounded-2xl overflow-hidden bg-black/60 flex items-center justify-center shrink-0",children:f.jsx("video",{src:fe.url,controls:!0,className:"w-full h-full object-contain bg-black"})},fe.url):null})}),f.jsx("div",{className:"space-y-1",children:q.attachments.filter(fe=>{var Pe,Xe;return!((Pe=fe.contentType)!=null&&Pe.startsWith("image"))&&!((Xe=fe.contentType)!=null&&Xe.startsWith("video"))}).map(fe=>f.jsxs("a",{href:fe.url,target:"_blank",rel:"noreferrer",className:"flex items-center justify-between text-xs text-pandora-text border border-pandora-border px-3 py-2 rounded-2xl hover:border-pandora-accent-to hover:text-pandora-text",children:[f.jsx("span",{className:"truncate",children:fe.name}),f.jsx("span",{className:"text-pandora-muted text-[11px]",children:"Open"})]},fe.url))})]}),q.type==="sample"&&q.sampleUrl&&f.jsx("div",{className:"relative border border-pandora-border rounded-sm overflow-hidden bg-pandora-bg",children:f.jsxs("div",{className:"relative w-full aspect-[9/16] max-h-[480px] bg-black",children:[f.jsx("video",{src:q.sampleUrl,className:"w-full h-full object-contain bg-black",controls:!0,muted:p,playsInline:!0},q.sampleUrl),f.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/35 to-transparent"}),f.jsxs("div",{className:"absolute top-2 left-2 z-10 flex items-center gap-2",children:[f.jsx("button",{onClick:()=>g(fe=>!fe),className:"w-9 h-9 flex items-center justify-center border border-pandora-border bg-pandora-bg/80 text-pandora-text hover:border-pandora-neon rounded-sm",title:p?"Unmute":"Mute",children:p?f.jsx(xw,{size:16}):f.jsx(_w,{size:16})}),f.jsx(ww,{to:`/t/${q.id}`,className:"text-[11px] uppercase px-2.5 py-1.5 rounded-full bg-[#8D7BFF]/85 text-white shadow-[0_10px_24px_-16px_rgba(141,123,255,0.35)] border border-transparent ring-1 ring-white/10 hover:shadow-lg backdrop-blur",children:"View sample"})]})]})}),f.jsxs("div",{className:"flex items-center gap-4 text-xs uppercase font-semibold tracking-wide",children:[f.jsxs("button",{onClick:()=>K(q.id),className:kt("flex items-center gap-2",(Z=s[q.id])!=null&&Z.liked?"text-pandora-neon":"text-pandora-muted hover:text-pandora-text"),children:[f.jsx(Pi,{size:14}),f.jsxs("span",{children:[((he=s[q.id])==null?void 0:he.count)??0," Likes"]})]}),f.jsxs("button",{className:"flex items-center gap-2 text-pandora-muted hover:text-pandora-text",onClick:()=>x(fe=>fe===q.id?null:q.id),children:[f.jsx(al,{size:14}),f.jsxs("span",{children:[o[q.id]??0," Comments"]})]})]}),w===q.id&&f.jsxs("div",{className:"mt-3 space-y-3 border border-pandora-border/70 bg-pandora-surface/70 rounded-2xl p-3",children:[f.jsxs("div",{className:"flex items-end gap-2",children:[f.jsx("textarea",{value:E[q.id]||"",onChange:fe=>v(Pe=>({...Pe,[q.id]:fe.target.value})),placeholder:"Write a comment...",className:"flex-1 h-16 bg-pandora-bg/70 border border-white/10 text-pandora-text text-sm p-2 rounded-2xl focus:outline-none focus:border-pandora-neon"}),f.jsx("button",{onClick:()=>H(q.id),disabled:!((Te=E[q.id])!=null&&Te.trim()),className:"px-4 py-2 text-xs font-semibold rounded-full bg-white/10 text-pandora-text border border-white/25 transition hover:bg-gradient-to-r hover:from-pandora-accent-from hover:to-pandora-accent-to hover:text-pandora-text hover:shadow-[0_12px_32px_-8px_rgba(125,140,255,0.9)] disabled:opacity-60",children:"Post"})]}),f.jsxs("div",{className:"space-y-2 max-h-56 overflow-y-auto",children:[(_[q.id]||[]).map(fe=>{const Pe=t?"Subject-****":P(fe.uid),Xe=fe.createdAt&&"seconds"in fe.createdAt?new Date(fe.createdAt.seconds*1e3).toLocaleTimeString():"Just now",at=O[fe.id]||{count:fe.likes||0,liked:!1};return f.jsxs("div",{className:"border border-pandora-border/60 bg-pandora-bg/60 rounded-2xl p-2",children:[f.jsxs("div",{className:"flex items-center justify-between text-[11px] text-pandora-muted",children:[f.jsx("span",{className:"truncate",children:Pe}),f.jsx("span",{children:Xe})]}),f.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:fe.text}),f.jsxs("button",{onClick:()=>de(q.id,fe.id),className:kt("mt-2 text-[11px] uppercase flex items-center gap-1",at.liked?"text-pandora-neon":"text-pandora-muted hover:text-pandora-text"),children:[f.jsx(Pi,{size:12})," ",at.count," Likes"]})]},fe.id)}),(_[q.id]||[]).length===0&&f.jsx("p",{className:"text-xs text-pandora-muted",children:"No comments yet."})]})]})]},q.id)})})]})}var CK=Object.defineProperty,dT=Object.getOwnPropertySymbols,kK=Object.prototype.hasOwnProperty,IK=Object.prototype.propertyIsEnumerable,hT=(t,e,n)=>e in t?CK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ph=(t,e)=>{for(var n in e||(e={}))kK.call(e,n)&&hT(t,n,e[n]);if(dT)for(var n of dT(e))IK.call(e,n)&&hT(t,n,e[n]);return t},te=(t,e,n)=>new Promise((r,s)=>{var i=a=>{try{l(n.next(a))}catch(u){s(u)}},o=a=>{try{l(n.throw(a))}catch(u){s(u)}},l=a=>a.done?r(a.value):Promise.resolve(a.value).then(i,o);l((n=n.apply(t,e)).next())}),jn=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof jn<"u"&&jn,Kn={searchParams:"URLSearchParams"in jn,iterable:"Symbol"in jn&&"iterator"in Symbol,blob:"FileReader"in jn&&"Blob"in jn&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in jn,arrayBuffer:"ArrayBuffer"in jn};function RK(t){return t&&DataView.prototype.isPrototypeOf(t)}Kn.arrayBuffer&&(fT=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],fN=ArrayBuffer.isView||function(t){return t&&fT.indexOf(Object.prototype.toString.call(t))>-1});var fT,fN;function Zc(t){if(typeof t!="string"&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||t==="")throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function s_(t){return typeof t!="string"&&(t=String(t)),t}function i_(t){var e={next:function(){var n=t.shift();return{done:n===void 0,value:n}}};return Kn.iterable&&(e[Symbol.iterator]=function(){return e}),e}function on(t){this.map={},t instanceof on?t.forEach(function(e,n){this.append(n,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}on.prototype.append=function(t,e){t=Zc(t),e=s_(e);var n=this.map[t];this.map[t]=n?n+", "+e:e};on.prototype.delete=function(t){delete this.map[Zc(t)]};on.prototype.get=function(t){return t=Zc(t),this.has(t)?this.map[t]:null};on.prototype.has=function(t){return this.map.hasOwnProperty(Zc(t))};on.prototype.set=function(t,e){this.map[Zc(t)]=s_(e)};on.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)};on.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),i_(t)};on.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i_(t)};on.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),i_(t)};Kn.iterable&&(on.prototype[Symbol.iterator]=on.prototype.entries);function Tg(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function pN(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function PK(t){var e=new FileReader,n=pN(e);return e.readAsArrayBuffer(t),n}function NK(t){var e=new FileReader,n=pN(e);return e.readAsText(t),n}function DK(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function pT(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function mN(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?typeof t=="string"?this._bodyText=t:Kn.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:Kn.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:Kn.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():Kn.arrayBuffer&&Kn.blob&&RK(t)?(this._bodyArrayBuffer=pT(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Kn.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||fN(t))?this._bodyArrayBuffer=pT(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||(typeof t=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Kn.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Kn.blob&&(this.blob=function(){var t=Tg(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=Tg(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(PK)}),this.text=function(){var t=Tg(this);if(t)return t;if(this._bodyBlob)return NK(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(DK(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Kn.formData&&(this.formData=function(){return this.text().then(jK)}),this.json=function(){return this.text().then(JSON.parse)},this}var MK=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function OK(t){var e=t.toUpperCase();return MK.indexOf(e)>-1?e:t}function Zo(t,e){if(!(this instanceof Zo))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var n=e.body;if(t instanceof Zo){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new on(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,!n&&t._bodyInit!=null&&(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new on(e.headers)),this.method=OK(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+new Date().getTime());else{var s=/\?/;this.url+=(s.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Zo.prototype.clone=function(){return new Zo(this,{body:this._bodyInit})};function jK(t){var e=new FormData;return t.trim().split("&").forEach(function(n){if(n){var r=n.split("="),s=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(s),decodeURIComponent(i))}}),e}function LK(t){var e=new on,n=t.replace(/\r?\n[\t ]+/g," ");return n.split("\r").map(function(r){return r.indexOf(`
`)===0?r.substr(1,r.length):r}).forEach(function(r){var s=r.split(":"),i=s.shift().trim();if(i){var o=s.join(":").trim();e.append(i,o)}}),e}mN.call(Zo.prototype);function Cs(t,e){if(!(this instanceof Cs))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new on(e.headers),this.url=e.url||"",this._initBody(t)}mN.call(Cs.prototype);Cs.prototype.clone=function(){return new Cs(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new on(this.headers),url:this.url})};Cs.error=function(){var t=new Cs(null,{status:0,statusText:""});return t.type="error",t};var UK=[301,302,303,307,308];Cs.redirect=function(t,e){if(UK.indexOf(e)===-1)throw new RangeError("Invalid status code");return new Cs(null,{status:e,headers:{location:t}})};var Ao=jn.DOMException;try{new Ao}catch{Ao=function(e,n){this.message=e,this.name=n;var r=Error(e);this.stack=r.stack},Ao.prototype=Object.create(Error.prototype),Ao.prototype.constructor=Ao}function gN(t,e){return new Promise(function(n,r){var s=new Zo(t,e);if(s.signal&&s.signal.aborted)return r(new Ao("Aborted","AbortError"));var i=new XMLHttpRequest;function o(){i.abort()}i.onload=function(){var a={status:i.status,statusText:i.statusText,headers:LK(i.getAllResponseHeaders()||"")};a.url="responseURL"in i?i.responseURL:a.headers.get("X-Request-URL");var u="response"in i?i.response:i.responseText;setTimeout(function(){n(new Cs(u,a))},0)},i.onerror=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},i.ontimeout=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},i.onabort=function(){setTimeout(function(){r(new Ao("Aborted","AbortError"))},0)};function l(a){try{return a===""&&jn.location.href?jn.location.href:a}catch{return a}}i.open(s.method,l(s.url),!0),s.credentials==="include"?i.withCredentials=!0:s.credentials==="omit"&&(i.withCredentials=!1),"responseType"in i&&(Kn.blob?i.responseType="blob":Kn.arrayBuffer&&s.headers.get("Content-Type")&&s.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(i.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof on)?Object.getOwnPropertyNames(e.headers).forEach(function(a){i.setRequestHeader(a,s_(e.headers[a]))}):s.headers.forEach(function(a,u){i.setRequestHeader(u,a)}),s.signal&&(s.signal.addEventListener("abort",o),i.onreadystatechange=function(){i.readyState===4&&s.signal.removeEventListener("abort",o)}),i.send(typeof s._bodyInit>"u"?null:s._bodyInit)})}gN.polyfill=!0;jn.fetch||(jn.fetch=gN,jn.Headers=on,jn.Request=Zo,jn.Response=Cs);var FK=typeof atob=="function",BK=typeof btoa=="function",jl=typeof Buffer=="function",mT=typeof TextDecoder=="function"?new TextDecoder:void 0,gT=typeof TextEncoder=="function"?new TextEncoder:void 0,VK="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",vu=Array.prototype.slice.call(VK),$d=(t=>{let e={};return t.forEach((n,r)=>e[n]=r),e})(vu),$K=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,gn=String.fromCharCode.bind(String),yT=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),zK=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),yN=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),qK=t=>{let e,n,r,s,i="";const o=t.length%3;for(let l=0;l<t.length;){if((n=t.charCodeAt(l++))>255||(r=t.charCodeAt(l++))>255||(s=t.charCodeAt(l++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|s,i+=vu[e>>18&63]+vu[e>>12&63]+vu[e>>6&63]+vu[e&63]}return o?i.slice(0,o-3)+"===".substring(o):i},vf=BK?t=>btoa(t):jl?t=>Buffer.from(t,"binary").toString("base64"):qK,HK=jl?t=>Buffer.from(t).toString("base64"):t=>{let n=[];for(let r=0,s=t.length;r<s;r+=4096)n.push(gn.apply(null,t.subarray(r,r+4096)));return vf(n.join(""))},WK=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?gn(192|e>>>6)+gn(128|e&63):gn(224|e>>>12&15)+gn(128|e>>>6&63)+gn(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return gn(240|e>>>18&7)+gn(128|e>>>12&63)+gn(128|e>>>6&63)+gn(128|e&63)}},GK=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,KK=t=>t.replace(GK,WK),wT=jl?t=>Buffer.from(t,"utf8").toString("base64"):gT?t=>HK(gT.encode(t)):t=>vf(KK(t)),cs=(t,e=!1)=>e?zK(wT(t)):wT(t),JK=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,QK=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return gn((n>>>10)+55296)+gn((n&1023)+56320);case 3:return gn((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return gn((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},XK=t=>t.replace(JK,QK),YK=t=>{if(t=t.replace(/\s+/g,""),!$K.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",r,s;for(let i=0;i<t.length;)e=$d[t.charAt(i++)]<<18|$d[t.charAt(i++)]<<12|(r=$d[t.charAt(i++)])<<6|(s=$d[t.charAt(i++)]),n+=r===64?gn(e>>16&255):s===64?gn(e>>16&255,e>>8&255):gn(e>>16&255,e>>8&255,e&255);return n},_f=FK?t=>atob(yN(t)):jl?t=>Buffer.from(t,"base64").toString("binary"):YK,ZK=jl?t=>yT(Buffer.from(t,"base64")):t=>yT(_f(t).split("").map(e=>e.charCodeAt(0))),eJ=jl?t=>Buffer.from(t,"base64").toString("utf8"):mT?t=>mT.decode(ZK(t)):t=>XK(_f(t)),tJ=t=>yN(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),vT=t=>eJ(tJ(t));function se(t,e,n){const r=ph(ph({},{method:t}),e);if(r.headers=ph({},e.headers),typeof XMLHttpRequest<"u"){const s=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"withCredentials");s!=null&&s.set||(r.credentials="cocos-ignore")}return Object.keys(r.headers).includes("Accept")||(r.headers.Accept="application/json"),Object.keys(r.headers).includes("Content-Type")||(r.headers["Content-Type"]="application/json"),Object.keys(r.headers).forEach(s=>{r.headers[s]||delete r.headers[s]}),n&&(r.body=n),r}var nJ=class{constructor(t,e,n){this.serverKey=t,this.basePath=e,this.timeoutMs=n}healthcheck(t,e={}){const n="/healthcheck",r=new Map;let s="";const i=this.buildFullUrl(this.basePath,n,r),o=se("GET",e,s);return t&&(o.headers.Authorization="Bearer "+t),Promise.race([fetch(i,o).then(l=>{if(l.status==204)return l;if(l.status>=200&&l.status<300)return l.json();throw l}),new Promise((l,a)=>setTimeout(a,this.timeoutMs,"Request timed out."))])}deleteAccount(t,e={}){const n="/v2/account",r=new Map;let s="";const i=this.buildFullUrl(this.basePath,n,r),o=se("DELETE",e,s);return t&&(o.headers.Authorization="Bearer "+t),Promise.race([fetch(i,o).then(l=>{if(l.status==204)return l;if(l.status>=200&&l.status<300)return l.json();throw l}),new Promise((l,a)=>setTimeout(a,this.timeoutMs,"Request timed out."))])}getAccount(t,e={}){const n="/v2/account",r=new Map;let s="";const i=this.buildFullUrl(this.basePath,n,r),o=se("GET",e,s);return t&&(o.headers.Authorization="Bearer "+t),Promise.race([fetch(i,o).then(l=>{if(l.status==204)return l;if(l.status>=200&&l.status<300)return l.json();throw l}),new Promise((l,a)=>setTimeout(a,this.timeoutMs,"Request timed out."))])}updateAccount(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("PUT",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}authenticateApple(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/apple",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=se("POST",i,a);return t&&(d.headers.Authorization="Basic "+cs(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,p)=>setTimeout(p,this.timeoutMs,"Request timed out."))])}authenticateCustom(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/custom",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=se("POST",i,a);return t&&(d.headers.Authorization="Basic "+cs(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,p)=>setTimeout(p,this.timeoutMs,"Request timed out."))])}authenticateDevice(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/device",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=se("POST",i,a);return t&&(d.headers.Authorization="Basic "+cs(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,p)=>setTimeout(p,this.timeoutMs,"Request timed out."))])}authenticateEmail(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/email",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=se("POST",i,a);return t&&(d.headers.Authorization="Basic "+cs(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,p)=>setTimeout(p,this.timeoutMs,"Request timed out."))])}authenticateFacebook(t,e,n,r,s,i,o={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const l="/v2/account/authenticate/facebook",a=new Map;a.set("create",r),a.set("username",s),a.set("sync",i);let u="";u=JSON.stringify(n||{});const d=this.buildFullUrl(this.basePath,l,a),h=se("POST",o,u);return t&&(h.headers.Authorization="Basic "+cs(t+":"+e)),Promise.race([fetch(d,h).then(p=>{if(p.status==204)return p;if(p.status>=200&&p.status<300)return p.json();throw p}),new Promise((p,g)=>setTimeout(g,this.timeoutMs,"Request timed out."))])}authenticateFacebookInstantGame(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/facebookinstantgame",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=se("POST",i,a);return t&&(d.headers.Authorization="Basic "+cs(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,p)=>setTimeout(p,this.timeoutMs,"Request timed out."))])}authenticateGameCenter(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/gamecenter",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=se("POST",i,a);return t&&(d.headers.Authorization="Basic "+cs(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,p)=>setTimeout(p,this.timeoutMs,"Request timed out."))])}authenticateGoogle(t,e,n,r,s,i={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const o="/v2/account/authenticate/google",l=new Map;l.set("create",r),l.set("username",s);let a="";a=JSON.stringify(n||{});const u=this.buildFullUrl(this.basePath,o,l),d=se("POST",i,a);return t&&(d.headers.Authorization="Basic "+cs(t+":"+e)),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,p)=>setTimeout(p,this.timeoutMs,"Request timed out."))])}authenticateSteam(t,e,n,r,s,i,o={}){if(n==null)throw new Error("'account' is a required parameter but is null or undefined.");const l="/v2/account/authenticate/steam",a=new Map;a.set("create",r),a.set("username",s),a.set("sync",i);let u="";u=JSON.stringify(n||{});const d=this.buildFullUrl(this.basePath,l,a),h=se("POST",o,u);return t&&(h.headers.Authorization="Basic "+cs(t+":"+e)),Promise.race([fetch(d,h).then(p=>{if(p.status==204)return p;if(p.status>=200&&p.status<300)return p.json();throw p}),new Promise((p,g)=>setTimeout(g,this.timeoutMs,"Request timed out."))])}linkApple(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/apple",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkCustom(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/custom",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkDevice(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/device",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkEmail(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/email",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkFacebook(t,e,n,r={}){if(e==null)throw new Error("'account' is a required parameter but is null or undefined.");const s="/v2/account/link/facebook",i=new Map;i.set("sync",n);let o="";o=JSON.stringify(e||{});const l=this.buildFullUrl(this.basePath,s,i),a=se("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}linkFacebookInstantGame(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/facebookinstantgame",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkGameCenter(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/gamecenter",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkGoogle(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/google",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}linkSteam(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/link/steam",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}sessionRefresh(t,e,n,r={}){if(n==null)throw new Error("'body' is a required parameter but is null or undefined.");const s="/v2/account/session/refresh",i=new Map;let o="";o=JSON.stringify(n||{});const l=this.buildFullUrl(this.basePath,s,i),a=se("POST",r,o);return t&&(a.headers.Authorization="Basic "+cs(t+":"+e)),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}unlinkApple(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/apple",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkCustom(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/custom",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkDevice(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/device",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkEmail(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/email",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkFacebook(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/facebook",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkFacebookInstantGame(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/facebookinstantgame",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkGameCenter(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/gamecenter",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkGoogle(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/google",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}unlinkSteam(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/account/unlink/steam",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listChannelMessages(t,e,n,r,s,i={}){if(e==null)throw new Error("'channelId' is a required parameter but is null or undefined.");const o="/v2/channel/{channelId}".replace("{channelId}",encodeURIComponent(String(e))),l=new Map;l.set("limit",n),l.set("forward",r),l.set("cursor",s);let a="";const u=this.buildFullUrl(this.basePath,o,l),d=se("GET",i,a);return t&&(d.headers.Authorization="Bearer "+t),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,p)=>setTimeout(p,this.timeoutMs,"Request timed out."))])}event(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/event",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}deleteFriends(t,e,n,r={}){const s="/v2/friend",i=new Map;i.set("ids",e),i.set("usernames",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=se("DELETE",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}listFriends(t,e,n,r,s={}){const i="/v2/friend",o=new Map;o.set("limit",e),o.set("state",n),o.set("cursor",r);let l="";const a=this.buildFullUrl(this.basePath,i,o),u=se("GET",s,l);return t&&(u.headers.Authorization="Bearer "+t),Promise.race([fetch(a,u).then(d=>{if(d.status==204)return d;if(d.status>=200&&d.status<300)return d.json();throw d}),new Promise((d,h)=>setTimeout(h,this.timeoutMs,"Request timed out."))])}addFriends(t,e,n,r={}){const s="/v2/friend",i=new Map;i.set("ids",e),i.set("usernames",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=se("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}blockFriends(t,e,n,r={}){const s="/v2/friend/block",i=new Map;i.set("ids",e),i.set("usernames",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=se("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}importFacebookFriends(t,e,n,r={}){if(e==null)throw new Error("'account' is a required parameter but is null or undefined.");const s="/v2/friend/facebook",i=new Map;i.set("reset",n);let o="";o=JSON.stringify(e||{});const l=this.buildFullUrl(this.basePath,s,i),a=se("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}listFriendsOfFriends(t,e,n,r={}){const s="/v2/friend/friends",i=new Map;i.set("limit",e),i.set("cursor",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=se("GET",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}importSteamFriends(t,e,n,r={}){if(e==null)throw new Error("'account' is a required parameter but is null or undefined.");const s="/v2/friend/steam",i=new Map;i.set("reset",n);let o="";o=JSON.stringify(e||{});const l=this.buildFullUrl(this.basePath,s,i),a=se("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}listGroups(t,e,n,r,s,i,o,l={}){const a="/v2/group",u=new Map;u.set("name",e),u.set("cursor",n),u.set("limit",r),u.set("lang_tag",s),u.set("members",i),u.set("open",o);let d="";const h=this.buildFullUrl(this.basePath,a,u),p=se("GET",l,d);return t&&(p.headers.Authorization="Bearer "+t),Promise.race([fetch(h,p).then(g=>{if(g.status==204)return g;if(g.status>=200&&g.status<300)return g.json();throw g}),new Promise((g,w)=>setTimeout(w,this.timeoutMs,"Request timed out."))])}createGroup(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/group",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}deleteGroup(t,e,n={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const r="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=se("DELETE",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}updateGroup(t,e,n,r={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");if(n==null)throw new Error("'body' is a required parameter but is null or undefined.");const s="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(e))),i=new Map;let o="";o=JSON.stringify(n||{});const l=this.buildFullUrl(this.basePath,s,i),a=se("PUT",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}addGroupUsers(t,e,n,r={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const s="/v2/group/{groupId}/add".replace("{groupId}",encodeURIComponent(String(e))),i=new Map;i.set("user_ids",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=se("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}banGroupUsers(t,e,n,r={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const s="/v2/group/{groupId}/ban".replace("{groupId}",encodeURIComponent(String(e))),i=new Map;i.set("user_ids",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=se("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}demoteGroupUsers(t,e,n,r={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const s="/v2/group/{groupId}/demote".replace("{groupId}",encodeURIComponent(String(e))),i=new Map;i.set("user_ids",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=se("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}joinGroup(t,e,n={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const r="/v2/group/{groupId}/join".replace("{groupId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}kickGroupUsers(t,e,n,r={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const s="/v2/group/{groupId}/kick".replace("{groupId}",encodeURIComponent(String(e))),i=new Map;i.set("user_ids",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=se("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}leaveGroup(t,e,n={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const r="/v2/group/{groupId}/leave".replace("{groupId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}promoteGroupUsers(t,e,n,r={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const s="/v2/group/{groupId}/promote".replace("{groupId}",encodeURIComponent(String(e))),i=new Map;i.set("user_ids",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=se("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}listGroupUsers(t,e,n,r,s,i={}){if(e==null)throw new Error("'groupId' is a required parameter but is null or undefined.");const o="/v2/group/{groupId}/user".replace("{groupId}",encodeURIComponent(String(e))),l=new Map;l.set("limit",n),l.set("state",r),l.set("cursor",s);let a="";const u=this.buildFullUrl(this.basePath,o,l),d=se("GET",i,a);return t&&(d.headers.Authorization="Bearer "+t),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,p)=>setTimeout(p,this.timeoutMs,"Request timed out."))])}validatePurchaseApple(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/purchase/apple",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}validatePurchaseFacebookInstant(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/purchase/facebookinstant",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}validatePurchaseGoogle(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/purchase/google",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}validatePurchaseHuawei(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/purchase/huawei",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listSubscriptions(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/subscription",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}validateSubscriptionApple(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/subscription/apple",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}validateSubscriptionGoogle(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/iap/subscription/google",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}getSubscription(t,e,n={}){if(e==null)throw new Error("'productId' is a required parameter but is null or undefined.");const r="/v2/iap/subscription/{productId}".replace("{productId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=se("GET",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}deleteLeaderboardRecord(t,e,n={}){if(e==null)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const r="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=se("DELETE",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listLeaderboardRecords(t,e,n,r,s,i,o={}){if(e==null)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const l="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(e))),a=new Map;a.set("owner_ids",n),a.set("limit",r),a.set("cursor",s),a.set("expiry",i);let u="";const d=this.buildFullUrl(this.basePath,l,a),h=se("GET",o,u);return t&&(h.headers.Authorization="Bearer "+t),Promise.race([fetch(d,h).then(p=>{if(p.status==204)return p;if(p.status>=200&&p.status<300)return p.json();throw p}),new Promise((p,g)=>setTimeout(g,this.timeoutMs,"Request timed out."))])}writeLeaderboardRecord(t,e,n,r={}){if(e==null)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(n==null)throw new Error("'record' is a required parameter but is null or undefined.");const s="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(e))),i=new Map;let o="";o=JSON.stringify(n||{});const l=this.buildFullUrl(this.basePath,s,i),a=se("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}listLeaderboardRecordsAroundOwner(t,e,n,r,s,i,o={}){if(e==null)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(n==null)throw new Error("'ownerId' is a required parameter but is null or undefined.");const l="/v2/leaderboard/{leaderboardId}/owner/{ownerId}".replace("{leaderboardId}",encodeURIComponent(String(e))).replace("{ownerId}",encodeURIComponent(String(n))),a=new Map;a.set("limit",r),a.set("expiry",s),a.set("cursor",i);let u="";const d=this.buildFullUrl(this.basePath,l,a),h=se("GET",o,u);return t&&(h.headers.Authorization="Bearer "+t),Promise.race([fetch(d,h).then(p=>{if(p.status==204)return p;if(p.status>=200&&p.status<300)return p.json();throw p}),new Promise((p,g)=>setTimeout(g,this.timeoutMs,"Request timed out."))])}listMatches(t,e,n,r,s,i,o,l={}){const a="/v2/match",u=new Map;u.set("limit",e),u.set("authoritative",n),u.set("label",r),u.set("min_size",s),u.set("max_size",i),u.set("query",o);let d="";const h=this.buildFullUrl(this.basePath,a,u),p=se("GET",l,d);return t&&(p.headers.Authorization="Bearer "+t),Promise.race([fetch(h,p).then(g=>{if(g.status==204)return g;if(g.status>=200&&g.status<300)return g.json();throw g}),new Promise((g,w)=>setTimeout(w,this.timeoutMs,"Request timed out."))])}deleteNotifications(t,e,n={}){const r="/v2/notification",s=new Map;s.set("ids",e);let i="";const o=this.buildFullUrl(this.basePath,r,s),l=se("DELETE",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listNotifications(t,e,n,r={}){const s="/v2/notification",i=new Map;i.set("limit",e),i.set("cacheable_cursor",n);let o="";const l=this.buildFullUrl(this.basePath,s,i),a=se("GET",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}rpcFunc2(t,e,n,r,s={}){if(e==null)throw new Error("'id' is a required parameter but is null or undefined.");const i="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(e))),o=new Map;o.set("payload",n),o.set("http_key",r);let l="";const a=this.buildFullUrl(this.basePath,i,o),u=se("GET",s,l);return t&&(u.headers.Authorization="Bearer "+t),Promise.race([fetch(a,u).then(d=>{if(d.status==204)return d;if(d.status>=200&&d.status<300)return d.json();throw d}),new Promise((d,h)=>setTimeout(h,this.timeoutMs,"Request timed out."))])}rpcFunc(t,e,n,r,s={}){if(e==null)throw new Error("'id' is a required parameter but is null or undefined.");if(n==null)throw new Error("'body' is a required parameter but is null or undefined.");const i="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(e))),o=new Map;o.set("http_key",r);let l="";l=JSON.stringify(n||{});const a=this.buildFullUrl(this.basePath,i,o),u=se("POST",s,l);return t&&(u.headers.Authorization="Bearer "+t),Promise.race([fetch(a,u).then(d=>{if(d.status==204)return d;if(d.status>=200&&d.status<300)return d.json();throw d}),new Promise((d,h)=>setTimeout(h,this.timeoutMs,"Request timed out."))])}sessionLogout(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/session/logout",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}readStorageObjects(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/storage",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}writeStorageObjects(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/storage",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("PUT",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}deleteStorageObjects(t,e,n={}){if(e==null)throw new Error("'body' is a required parameter but is null or undefined.");const r="/v2/storage/delete",s=new Map;let i="";i=JSON.stringify(e||{});const o=this.buildFullUrl(this.basePath,r,s),l=se("PUT",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listStorageObjects(t,e,n,r,s,i={}){if(e==null)throw new Error("'collection' is a required parameter but is null or undefined.");const o="/v2/storage/{collection}".replace("{collection}",encodeURIComponent(String(e))),l=new Map;l.set("user_id",n),l.set("limit",r),l.set("cursor",s);let a="";const u=this.buildFullUrl(this.basePath,o,l),d=se("GET",i,a);return t&&(d.headers.Authorization="Bearer "+t),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,p)=>setTimeout(p,this.timeoutMs,"Request timed out."))])}listStorageObjects2(t,e,n,r,s,i={}){if(e==null)throw new Error("'collection' is a required parameter but is null or undefined.");if(n==null)throw new Error("'userId' is a required parameter but is null or undefined.");const o="/v2/storage/{collection}/{userId}".replace("{collection}",encodeURIComponent(String(e))).replace("{userId}",encodeURIComponent(String(n))),l=new Map;l.set("limit",r),l.set("cursor",s);let a="";const u=this.buildFullUrl(this.basePath,o,l),d=se("GET",i,a);return t&&(d.headers.Authorization="Bearer "+t),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,p)=>setTimeout(p,this.timeoutMs,"Request timed out."))])}listTournaments(t,e,n,r,s,i,o,l={}){const a="/v2/tournament",u=new Map;u.set("category_start",e),u.set("category_end",n),u.set("start_time",r),u.set("end_time",s),u.set("limit",i),u.set("cursor",o);let d="";const h=this.buildFullUrl(this.basePath,a,u),p=se("GET",l,d);return t&&(p.headers.Authorization="Bearer "+t),Promise.race([fetch(h,p).then(g=>{if(g.status==204)return g;if(g.status>=200&&g.status<300)return g.json();throw g}),new Promise((g,w)=>setTimeout(w,this.timeoutMs,"Request timed out."))])}deleteTournamentRecord(t,e,n={}){if(e==null)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const r="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=se("DELETE",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listTournamentRecords(t,e,n,r,s,i,o={}){if(e==null)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const l="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(e))),a=new Map;a.set("owner_ids",n),a.set("limit",r),a.set("cursor",s),a.set("expiry",i);let u="";const d=this.buildFullUrl(this.basePath,l,a),h=se("GET",o,u);return t&&(h.headers.Authorization="Bearer "+t),Promise.race([fetch(d,h).then(p=>{if(p.status==204)return p;if(p.status>=200&&p.status<300)return p.json();throw p}),new Promise((p,g)=>setTimeout(g,this.timeoutMs,"Request timed out."))])}writeTournamentRecord2(t,e,n,r={}){if(e==null)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(n==null)throw new Error("'record' is a required parameter but is null or undefined.");const s="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(e))),i=new Map;let o="";o=JSON.stringify(n||{});const l=this.buildFullUrl(this.basePath,s,i),a=se("POST",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}writeTournamentRecord(t,e,n,r={}){if(e==null)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(n==null)throw new Error("'record' is a required parameter but is null or undefined.");const s="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(e))),i=new Map;let o="";o=JSON.stringify(n||{});const l=this.buildFullUrl(this.basePath,s,i),a=se("PUT",r,o);return t&&(a.headers.Authorization="Bearer "+t),Promise.race([fetch(l,a).then(u=>{if(u.status==204)return u;if(u.status>=200&&u.status<300)return u.json();throw u}),new Promise((u,d)=>setTimeout(d,this.timeoutMs,"Request timed out."))])}joinTournament(t,e,n={}){if(e==null)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const r="/v2/tournament/{tournamentId}/join".replace("{tournamentId}",encodeURIComponent(String(e))),s=new Map;let i="";const o=this.buildFullUrl(this.basePath,r,s),l=se("POST",n,i);return t&&(l.headers.Authorization="Bearer "+t),Promise.race([fetch(o,l).then(a=>{if(a.status==204)return a;if(a.status>=200&&a.status<300)return a.json();throw a}),new Promise((a,u)=>setTimeout(u,this.timeoutMs,"Request timed out."))])}listTournamentRecordsAroundOwner(t,e,n,r,s,i,o={}){if(e==null)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(n==null)throw new Error("'ownerId' is a required parameter but is null or undefined.");const l="/v2/tournament/{tournamentId}/owner/{ownerId}".replace("{tournamentId}",encodeURIComponent(String(e))).replace("{ownerId}",encodeURIComponent(String(n))),a=new Map;a.set("limit",r),a.set("expiry",s),a.set("cursor",i);let u="";const d=this.buildFullUrl(this.basePath,l,a),h=se("GET",o,u);return t&&(h.headers.Authorization="Bearer "+t),Promise.race([fetch(d,h).then(p=>{if(p.status==204)return p;if(p.status>=200&&p.status<300)return p.json();throw p}),new Promise((p,g)=>setTimeout(g,this.timeoutMs,"Request timed out."))])}getUsers(t,e,n,r,s={}){const i="/v2/user",o=new Map;o.set("ids",e),o.set("usernames",n),o.set("facebook_ids",r);let l="";const a=this.buildFullUrl(this.basePath,i,o),u=se("GET",s,l);return t&&(u.headers.Authorization="Bearer "+t),Promise.race([fetch(a,u).then(d=>{if(d.status==204)return d;if(d.status>=200&&d.status<300)return d.json();throw d}),new Promise((d,h)=>setTimeout(h,this.timeoutMs,"Request timed out."))])}listUserGroups(t,e,n,r,s,i={}){if(e==null)throw new Error("'userId' is a required parameter but is null or undefined.");const o="/v2/user/{userId}/group".replace("{userId}",encodeURIComponent(String(e))),l=new Map;l.set("limit",n),l.set("state",r),l.set("cursor",s);let a="";const u=this.buildFullUrl(this.basePath,o,l),d=se("GET",i,a);return t&&(d.headers.Authorization="Bearer "+t),Promise.race([fetch(u,d).then(h=>{if(h.status==204)return h;if(h.status>=200&&h.status<300)return h.json();throw h}),new Promise((h,p)=>setTimeout(p,this.timeoutMs,"Request timed out."))])}buildFullUrl(t,e,n){let r=t+e+"?";for(let[s,i]of n)i instanceof Array?r+=i.reduce((o,l)=>o+encodeURIComponent(s)+"="+encodeURIComponent(l)+"&",""):i!=null&&(r+=encodeURIComponent(s)+"="+encodeURIComponent(i)+"&");return r}},ds=class{constructor(t,e,n){this.created=n,this.token=t,this.refresh_token=e,this.created_at=Math.floor(new Date().getTime()/1e3),this.update(t,e)}isexpired(t){return this.expires_at-t<0}isrefreshexpired(t){return this.refresh_expires_at-t<0}update(t,e){const n=t.split(".");if(n.length!=3)throw"jwt is not valid.";const r=JSON.parse(_f(n[1])),s=Math.floor(parseInt(r.exp));if(e){const i=e.split(".");if(i.length!=3)throw"refresh jwt is not valid.";const o=JSON.parse(_f(i[1])),l=Math.floor(parseInt(o.exp));this.refresh_expires_at=l,this.refresh_token=e}this.token=t,this.expires_at=s,this.username=r.usn,this.user_id=r.uid,this.vars=r.vrs}static restore(t,e){return new ds(t,e,!1)}},Ua="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_u=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(lu=0;lu<Ua.length;lu++)_u[Ua.charCodeAt(lu)]=lu;var lu,_T=function(t){var e=new Uint8Array(t),n,r=e.length,s="";for(n=0;n<r;n+=3)s+=Ua[e[n]>>2],s+=Ua[(e[n]&3)<<4|e[n+1]>>4],s+=Ua[(e[n+1]&15)<<2|e[n+2]>>6],s+=Ua[e[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s},xT=function(t){var e=t.length*.75,n=t.length,r,s=0,i,o,l,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=new ArrayBuffer(e),d=new Uint8Array(u);for(r=0;r<n;r+=4)i=_u[t.charCodeAt(r)],o=_u[t.charCodeAt(r+1)],l=_u[t.charCodeAt(r+2)],a=_u[t.charCodeAt(r+3)],d[s++]=i<<2|o>>4,d[s++]=(o&15)<<4|l>>2,d[s++]=(l&3)<<6|a&63;return u},wN=class{get onClose(){return this._socket.onclose}set onClose(t){this._socket.onclose=t}get onError(){return this._socket.onerror}set onError(t){this._socket.onerror=t}get onMessage(){return this._socket.onmessage}set onMessage(t){t?this._socket.onmessage=e=>{const n=JSON.parse(e.data);n.match_data&&n.match_data.data?n.match_data.data=new Uint8Array(xT(n.match_data.data)):n.party_data&&n.party_data.data&&(n.party_data.data=new Uint8Array(xT(n.party_data.data))),t(n)}:t=null}get onOpen(){return this._socket.onopen}set onOpen(t){this._socket.onopen=t}isOpen(){var t;return((t=this._socket)==null?void 0:t.readyState)==WebSocket.OPEN}connect(t,e,n,r,s){const i=`${t}${e}:${n}/ws?lang=en&status=${encodeURIComponent(r.toString())}&token=${encodeURIComponent(s)}`;this._socket=new WebSocket(i)}close(){this._socket.close(),this._socket=void 0}send(t){if(t.match_data_send){t.match_data_send.op_code=t.match_data_send.op_code.toString();let e=t.match_data_send.data;e&&e instanceof Uint8Array?t.match_data_send.data=_T(e.buffer):e&&(t.match_data_send.data=vf(e))}else if(t.party_data_send){t.party_data_send.op_code=t.party_data_send.op_code.toString();let e=t.party_data_send.data;e&&e instanceof Uint8Array?t.party_data_send.data=_T(e.buffer):e&&(t.party_data_send.data=vf(e))}this._socket.send(JSON.stringify(t))}},xu=class{constructor(t,e,n=!1,r=!1,s=new wN,i=xu.DefaultSendTimeoutMs){this.host=t,this.port=e,this.useSSL=n,this.verbose=r,this.adapter=s,this.sendTimeoutMs=i,this.cIds={},this.nextCid=1,this._heartbeatTimeoutMs=xu.DefaultHeartbeatTimeoutMs}generatecid(){const t=this.nextCid.toString();return++this.nextCid,t}connect(t,e=!1,n=xu.DefaultConnectTimeoutMs){if(this.adapter.isOpen())return Promise.resolve(t);const r=this.useSSL?"wss://":"ws://";return this.adapter.connect(r,this.host,this.port,e,t.token),this.adapter.onClose=s=>{this.ondisconnect(s)},this.adapter.onError=s=>{this.onerror(s)},this.adapter.onMessage=s=>{if(this.verbose&&window&&window.console&&console.log("Response: %o",JSON.stringify(s)),!s.cid)s.notifications?s.notifications.notifications.forEach(i=>{i.content=i.content?JSON.parse(i.content):void 0,this.onnotification(i)}):s.match_data?(s.match_data.op_code=parseInt(s.match_data.op_code),this.onmatchdata(s.match_data)):s.match_presence_event?this.onmatchpresence(s.match_presence_event):s.matchmaker_ticket?this.onmatchmakerticket(s.matchmaker_ticket):s.matchmaker_matched?this.onmatchmakermatched(s.matchmaker_matched):s.status_presence_event?this.onstatuspresence(s.status_presence_event):s.stream_presence_event?this.onstreampresence(s.stream_presence_event):s.stream_data?this.onstreamdata(s.stream_data):s.channel_message?(s.channel_message.content=JSON.parse(s.channel_message.content),this.onchannelmessage(s.channel_message)):s.channel_presence_event?this.onchannelpresence(s.channel_presence_event):s.party_data?(s.party_data.op_code=parseInt(s.party_data.op_code),this.onpartydata(s.party_data)):s.party_close?this.onpartyclose(s.party_close):s.party_join_request?this.onpartyjoinrequest(s.party_join_request):s.party_leader?this.onpartyleader(s.party_leader):s.party_matchmaker_ticket?this.onpartymatchmakerticket(s.party_matchmaker_ticket):s.party_presence_event?this.onpartypresence(s.party_presence_event):s.party?this.onparty(s.party):this.verbose&&window&&window.console&&console.log("Unrecognized message received: %o",s);else{const i=this.cIds[s.cid];if(!i){this.verbose&&window&&window.console&&console.error("No promise executor for message: %o",s);return}delete this.cIds[s.cid],s.error?i.reject(s.error):i.resolve(s)}},new Promise((s,i)=>{this.adapter.onOpen=o=>{this.verbose&&window&&window.console&&console.log(o),this.pingPong(),s(t)},this.adapter.onError=o=>{i(o),this.adapter.close()},setTimeout(()=>{i("The socket timed out when trying to connect.")},n)})}disconnect(t=!0){this.adapter.isOpen()&&this.adapter.close(),t&&this.ondisconnect({})}setHeartbeatTimeoutMs(t){this._heartbeatTimeoutMs=t}getHeartbeatTimeoutMs(){return this._heartbeatTimeoutMs}ondisconnect(t){this.verbose&&window&&window.console&&console.log(t)}onerror(t){this.verbose&&window&&window.console&&console.log(t)}onchannelmessage(t){this.verbose&&window&&window.console&&console.log(t)}onchannelpresence(t){this.verbose&&window&&window.console&&console.log(t)}onnotification(t){this.verbose&&window&&window.console&&console.log(t)}onmatchdata(t){this.verbose&&window&&window.console&&console.log(t)}onmatchpresence(t){this.verbose&&window&&window.console&&console.log(t)}onmatchmakerticket(t){this.verbose&&window&&window.console&&console.log(t)}onmatchmakermatched(t){this.verbose&&window&&window.console&&console.log(t)}onparty(t){this.verbose&&window&&window.console&&console.log(t)}onpartyclose(t){this.verbose&&window&&window.console&&console.log("Party closed: "+t)}onpartyjoinrequest(t){this.verbose&&window&&window.console&&console.log(t)}onpartydata(t){this.verbose&&window&&window.console&&console.log(t)}onpartyleader(t){this.verbose&&window&&window.console&&console.log(t)}onpartymatchmakerticket(t){this.verbose&&window&&window.console&&console.log(t)}onpartypresence(t){this.verbose&&window&&window.console&&console.log(t)}onstatuspresence(t){this.verbose&&window&&window.console&&console.log(t)}onstreampresence(t){this.verbose&&window&&window.console&&console.log(t)}onstreamdata(t){this.verbose&&window&&window.console&&console.log(t)}onheartbeattimeout(){this.verbose&&window&&window.console&&console.log("Heartbeat timeout.")}send(t,e=xu.DefaultSendTimeoutMs){const n=t;return new Promise((r,s)=>{if(!this.adapter.isOpen())s("Socket connection has not been established yet.");else if(n.match_data_send)this.adapter.send(n),r();else if(n.party_data_send)this.adapter.send(n),r();else{n.channel_message_send?n.channel_message_send.content=JSON.stringify(n.channel_message_send.content):n.channel_message_update&&(n.channel_message_update.content=JSON.stringify(n.channel_message_update.content));const i=this.generatecid();this.cIds[i]={resolve:r,reject:s},setTimeout(()=>{s("The socket timed out while waiting for a response.")},e),n.cid=i,this.adapter.send(n)}if(this.verbose&&window&&window.console){const i=ph({},n);i.match_data_send&&i.match_data_send.data?i.match_data_send.data=vT(i.match_data_send.data):i.party_data_send&&i.party_data_send.data&&(i.party_data_send.data=vT(i.party_data_send.data)),console.log("Sent message: %o",JSON.stringify(i))}})}acceptPartyMember(t,e){return this.send({party_accept:{party_id:t,presence:e}})}addMatchmaker(t,e,n,r,s){return te(this,null,function*(){return(yield this.send({matchmaker_add:{min_count:e,max_count:n,query:t,string_properties:r,numeric_properties:s}})).matchmaker_ticket})}addMatchmakerParty(t,e,n,r,s,i){return te(this,null,function*(){return(yield this.send({party_matchmaker_add:{party_id:t,min_count:n,max_count:r,query:e,string_properties:s,numeric_properties:i}})).party_matchmaker_ticket})}closeParty(t){return te(this,null,function*(){return yield this.send({party_close:{party_id:t}})})}createMatch(t){return te(this,null,function*(){return(yield this.send({match_create:{name:t}})).match})}createParty(t,e){return te(this,null,function*(){return(yield this.send({party_create:{open:t,max_size:e}})).party})}followUsers(t){return te(this,null,function*(){return(yield this.send({status_follow:{user_ids:t}})).status})}joinChat(t,e,n,r){return te(this,null,function*(){return(yield this.send({channel_join:{target:t,type:e,persistence:n,hidden:r}})).channel})}joinMatch(t,e,n){return te(this,null,function*(){const r={match_join:{metadata:n}};return e?r.match_join.token=e:r.match_join.match_id=t,(yield this.send(r)).match})}joinParty(t){return te(this,null,function*(){return yield this.send({party_join:{party_id:t}})})}leaveChat(t){return this.send({channel_leave:{channel_id:t}})}leaveMatch(t){return this.send({match_leave:{match_id:t}})}leaveParty(t){return this.send({party_leave:{party_id:t}})}listPartyJoinRequests(t){return te(this,null,function*(){return(yield this.send({party_join_request_list:{party_id:t}})).party_join_request})}promotePartyMember(t,e){return te(this,null,function*(){return(yield this.send({party_promote:{party_id:t,presence:e}})).party_leader})}removeChatMessage(t,e){return te(this,null,function*(){return(yield this.send({channel_message_remove:{channel_id:t,message_id:e}})).channel_message_ack})}removeMatchmaker(t){return this.send({matchmaker_remove:{ticket:t}})}removeMatchmakerParty(t,e){return this.send({party_matchmaker_remove:{party_id:t,ticket:e}})}removePartyMember(t,e){return te(this,null,function*(){return this.send({party_remove:{party_id:t,presence:e}})})}rpc(t,e,n){return te(this,null,function*(){return(yield this.send({rpc:{id:t,payload:e,http_key:n}})).rpc})}sendMatchState(t,e,n,r,s){return te(this,null,function*(){return this.send({match_data_send:{match_id:t,op_code:e,data:n,presences:r??[],reliable:s}})})}sendPartyData(t,e,n){return this.send({party_data_send:{party_id:t,op_code:e,data:n}})}unfollowUsers(t){return this.send({status_unfollow:{user_ids:t}})}updateChatMessage(t,e,n){return te(this,null,function*(){return(yield this.send({channel_message_update:{channel_id:t,message_id:e,content:n}})).channel_message_ack})}updateStatus(t){return this.send({status_update:{status:t}})}writeChatMessage(t,e){return te(this,null,function*(){return(yield this.send({channel_message_send:{channel_id:t,content:e}})).channel_message_ack})}pingPong(){return te(this,null,function*(){if(this.adapter.isOpen()){try{yield this.send({ping:{}},this._heartbeatTimeoutMs)}catch{this.adapter.isOpen()&&(window&&window.console&&console.error("Server unreachable from heartbeat."),this.onheartbeattimeout(),this.adapter.close());return}setTimeout(()=>this.pingPong(),this._heartbeatTimeoutMs)}})}},Ic=xu;Ic.DefaultHeartbeatTimeoutMs=1e4;Ic.DefaultSendTimeoutMs=1e4;Ic.DefaultConnectTimeoutMs=3e4;var rJ="127.0.0.1",sJ="7350",iJ="defaultkey",oJ=7e3,aJ=5*60*1e3,lJ=class{constructor(t=iJ,e=rJ,n=sJ,r=!1,s=oJ,i=!0){this.serverkey=t,this.host=e,this.port=n,this.useSSL=r,this.timeout=s,this.autoRefreshSession=i,this.expiredTimespanMs=aJ;const l=`${r?"https://":"http://"}${e}:${n}`;this.apiClient=new nJ(t,l,s)}addGroupUsers(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.addGroupUsers(t.token,e,n).then(r=>r!==void 0)})}addFriends(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.addFriends(t.token,e,n).then(r=>r!==void 0)})}authenticateApple(t,e,n){return te(this,arguments,function*(r,s,i,o={},l={}){const a={token:r,vars:o};return this.apiClient.authenticateApple(this.serverkey,"",a,s,i,l).then(u=>new ds(u.token||"",u.refresh_token||"",u.created||!1))})}authenticateCustom(t,e,n,r={},s={}){const i={id:t,vars:r};return this.apiClient.authenticateCustom(this.serverkey,"",i,e,n,s).then(o=>new ds(o.token||"",o.refresh_token||"",o.created||!1))}authenticateDevice(t,e,n,r){const s={id:t,vars:r};return this.apiClient.authenticateDevice(this.serverkey,"",s,e,n).then(i=>new ds(i.token||"",i.refresh_token||"",i.created||!1))}authenticateEmail(t,e,n,r,s){const i={email:t,password:e,vars:s};return this.apiClient.authenticateEmail(this.serverkey,"",i,n,r).then(o=>new ds(o.token||"",o.refresh_token||"",o.created||!1))}authenticateFacebookInstantGame(t,e,n,r,s={}){const i={signed_player_info:t,vars:r};return this.apiClient.authenticateFacebookInstantGame(this.serverkey,"",{signed_player_info:i.signed_player_info,vars:i.vars},e,n,s).then(o=>new ds(o.token||"",o.refresh_token||"",o.created||!1))}authenticateFacebook(t,e,n,r,s,i={}){const o={token:t,vars:s};return this.apiClient.authenticateFacebook(this.serverkey,"",o,e,n,r,i).then(l=>new ds(l.token||"",l.refresh_token||"",l.created||!1))}authenticateGoogle(t,e,n,r){return te(this,arguments,function*(s,i,o,l,a={}){const u={token:s,vars:l},d=yield this.apiClient.authenticateGoogle(this.serverkey,"",u,i,o,a);return new ds(d.token||"",d.refresh_token||"",d.created||!1)})}authenticateGameCenter(t,e,n,r,s,i,o,l,a){return te(this,arguments,function*(u,d,h,p,g,w,x,E,v,_={}){const b={bundle_id:u,player_id:d,public_key_url:h,salt:p,signature:g,timestamp_seconds:w,vars:v},O=yield this.apiClient.authenticateGameCenter(this.serverkey,"",b,E,x,_);return new ds(O.token||"",O.refresh_token||"",O.created||!1)})}authenticateSteam(t,e,n,r,s){return te(this,null,function*(){const i={token:t,vars:s,sync:r};return this.apiClient.authenticateSteam(this.serverkey,"",i,e,n).then(o=>new ds(o.token||"",o.refresh_token||"",o.created||!1))})}banGroupUsers(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.banGroupUsers(t.token,e,n).then(r=>r!==void 0)})}blockFriends(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.blockFriends(t.token,e,n).then(r=>Promise.resolve(r!=null))})}createGroup(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.createGroup(t.token,e).then(n=>Promise.resolve({avatar_url:n.avatar_url,create_time:n.create_time,creator_id:n.creator_id,description:n.description,edge_count:n.edge_count?Number(n.edge_count):0,id:n.id,lang_tag:n.lang_tag,max_count:n.max_count?Number(n.max_count):0,metadata:n.metadata?JSON.parse(n.metadata):void 0,name:n.name,open:n.open,update_time:n.update_time}))})}createSocket(t=!1,e=!1,n=new wN,r=Ic.DefaultSendTimeoutMs){return new Ic(this.host,this.port,t,e,n,r)}deleteAccount(t){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.deleteAccount(t.token).then(e=>e!==void 0)})}deleteFriends(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.deleteFriends(t.token,e,n).then(r=>r!==void 0)})}deleteGroup(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.deleteGroup(t.token,e).then(n=>n!==void 0)})}deleteNotifications(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.deleteNotifications(t.token,e).then(n=>Promise.resolve(n!=null))})}deleteStorageObjects(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.deleteStorageObjects(t.token,e).then(n=>Promise.resolve(n!=null))})}deleteTournamentRecord(t,e){return te(this,null,function*(){return this.apiClient.deleteTournamentRecord(t.token,e)})}demoteGroupUsers(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.demoteGroupUsers(t.token,e,n).then(r=>Promise.resolve(r!=null))})}emitEvent(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.event(t.token,e).then(n=>Promise.resolve(n!=null))})}getAccount(t){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.getAccount(t.token)})}getSubscription(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.getSubscription(t.token,e)})}importFacebookFriends(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.importFacebookFriends(t.token,e).then(n=>n!==void 0)})}importSteamFriends(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.importSteamFriends(t.token,e,n).then(r=>r!==void 0)})}getUsers(t,e,n,r){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.getUsers(t.token,e,n,r).then(s=>{var i={users:[]};return s.users==null||s.users.forEach(o=>{i.users.push({avatar_url:o.avatar_url,create_time:o.create_time,display_name:o.display_name,edge_count:o.edge_count?Number(o.edge_count):0,facebook_id:o.facebook_id,gamecenter_id:o.gamecenter_id,google_id:o.google_id,id:o.id,lang_tag:o.lang_tag,location:o.location,online:o.online,steam_id:o.steam_id,timezone:o.timezone,update_time:o.update_time,username:o.username,metadata:o.metadata?JSON.parse(o.metadata):void 0})}),Promise.resolve(i)})})}joinGroup(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.joinGroup(t.token,e,{}).then(n=>n!==void 0)})}joinTournament(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.joinTournament(t.token,e,{}).then(n=>n!==void 0)})}kickGroupUsers(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.kickGroupUsers(t.token,e,n).then(r=>Promise.resolve(r!=null))})}leaveGroup(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.leaveGroup(t.token,e,{}).then(n=>n!==void 0)})}listChannelMessages(t,e,n,r,s){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listChannelMessages(t.token,e,n,r,s).then(i=>{var o={messages:[],next_cursor:i.next_cursor,prev_cursor:i.prev_cursor,cacheable_cursor:i.cacheable_cursor};return i.messages==null||i.messages.forEach(l=>{o.messages.push({channel_id:l.channel_id,code:l.code?Number(l.code):0,create_time:l.create_time,message_id:l.message_id,persistent:l.persistent,sender_id:l.sender_id,update_time:l.update_time,username:l.username,content:l.content?JSON.parse(l.content):void 0,group_id:l.group_id,room_name:l.room_name,user_id_one:l.user_id_one,user_id_two:l.user_id_two})}),Promise.resolve(o)})})}listGroupUsers(t,e,n,r,s){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listGroupUsers(t.token,e,r,n,s).then(i=>{var o={group_users:[],cursor:i.cursor};return i.group_users==null||i.group_users.forEach(l=>{o.group_users.push({user:{avatar_url:l.user.avatar_url,create_time:l.user.create_time,display_name:l.user.display_name,edge_count:l.user.edge_count?Number(l.user.edge_count):0,facebook_id:l.user.facebook_id,gamecenter_id:l.user.gamecenter_id,google_id:l.user.google_id,id:l.user.id,lang_tag:l.user.lang_tag,location:l.user.location,online:l.user.online,steam_id:l.user.steam_id,timezone:l.user.timezone,update_time:l.user.update_time,username:l.user.username,metadata:l.user.metadata?JSON.parse(l.user.metadata):void 0},state:l.state?Number(l.state):0})}),Promise.resolve(o)})})}listUserGroups(t,e,n,r,s){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listUserGroups(t.token,e,n,r,s).then(i=>{var o={user_groups:[],cursor:i.cursor};return i.user_groups==null||i.user_groups.forEach(l=>{o.user_groups.push({group:{avatar_url:l.group.avatar_url,create_time:l.group.create_time,creator_id:l.group.creator_id,description:l.group.description,edge_count:l.group.edge_count?Number(l.group.edge_count):0,id:l.group.id,lang_tag:l.group.lang_tag,max_count:l.group.max_count,metadata:l.group.metadata?JSON.parse(l.group.metadata):void 0,name:l.group.name,open:l.group.open,update_time:l.group.update_time},state:l.state?Number(l.state):0})}),Promise.resolve(o)})})}listGroups(t,e,n,r){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listGroups(t.token,e,n,r).then(s=>{var i={groups:[]};return s.groups==null||(i.cursor=s.cursor,s.groups.forEach(o=>{i.groups.push({avatar_url:o.avatar_url,create_time:o.create_time,creator_id:o.creator_id,description:o.description,edge_count:o.edge_count?Number(o.edge_count):0,id:o.id,lang_tag:o.lang_tag,max_count:o.max_count,metadata:o.metadata?JSON.parse(o.metadata):void 0,name:o.name,open:o.open,update_time:o.update_time})})),Promise.resolve(i)})})}linkApple(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkApple(t.token,e).then(n=>n!==void 0)})}linkCustom(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkCustom(t.token,e).then(n=>n!==void 0)})}linkDevice(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkDevice(t.token,e).then(n=>n!==void 0)})}linkEmail(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkEmail(t.token,e).then(n=>n!==void 0)})}linkFacebook(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkFacebook(t.token,e).then(n=>n!==void 0)})}linkFacebookInstantGame(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkFacebookInstantGame(t.token,e).then(n=>n!==void 0)})}linkGoogle(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkGoogle(t.token,e).then(n=>n!==void 0)})}linkGameCenter(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkGameCenter(t.token,e).then(n=>n!==void 0)})}linkSteam(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.linkSteam(t.token,e).then(n=>n!==void 0)})}listFriends(t,e,n,r){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listFriends(t.token,n,e,r).then(s=>{var i={friends:[],cursor:s.cursor};return s.friends==null||s.friends.forEach(o=>{i.friends.push({user:{avatar_url:o.user.avatar_url,create_time:o.user.create_time,display_name:o.user.display_name,edge_count:o.user.edge_count?Number(o.user.edge_count):0,facebook_id:o.user.facebook_id,gamecenter_id:o.user.gamecenter_id,google_id:o.user.google_id,id:o.user.id,lang_tag:o.user.lang_tag,location:o.user.location,online:o.user.online,steam_id:o.user.steam_id,timezone:o.user.timezone,update_time:o.user.update_time,username:o.user.username,metadata:o.user.metadata?JSON.parse(o.user.metadata):void 0,facebook_instant_game_id:o.user.facebook_instant_game_id},state:o.state})}),Promise.resolve(i)})})}listFriendsOfFriends(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listFriendsOfFriends(t.token,e,n).then(r=>{var s={friends_of_friends:[],cursor:r.cursor};return r.friends_of_friends==null||r.friends_of_friends.forEach(i=>{s.friends_of_friends.push({referrer:i.referrer,user:{avatar_url:i.user.avatar_url,create_time:i.user.create_time,display_name:i.user.display_name,edge_count:i.user.edge_count?Number(i.user.edge_count):0,facebook_id:i.user.facebook_id,gamecenter_id:i.user.gamecenter_id,google_id:i.user.google_id,id:i.user.id,lang_tag:i.user.lang_tag,location:i.user.location,online:i.user.online,steam_id:i.user.steam_id,timezone:i.user.timezone,update_time:i.user.update_time,username:i.user.username,metadata:i.user.metadata?JSON.parse(i.user.metadata):void 0,facebook_instant_game_id:i.user.facebook_instant_game_id}})}),Promise.resolve(s)})})}listLeaderboardRecords(t,e,n,r,s,i){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listLeaderboardRecords(t.token,e,n,r,s,i).then(o=>{var l={next_cursor:o.next_cursor,prev_cursor:o.prev_cursor,rank_count:o.rank_count?Number(o.rank_count):0,owner_records:[],records:[]};return o.owner_records!=null&&o.owner_records.forEach(a=>{l.owner_records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),o.records!=null&&o.records.forEach(a=>{l.records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),Promise.resolve(l)})})}listLeaderboardRecordsAroundOwner(t,e,n,r,s,i){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listLeaderboardRecordsAroundOwner(t.token,e,n,r,s,i).then(o=>{var l={next_cursor:o.next_cursor,prev_cursor:o.prev_cursor,rank_count:o.rank_count?Number(o.rank_count):0,owner_records:[],records:[]};return o.owner_records!=null&&o.owner_records.forEach(a=>{l.owner_records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),o.records!=null&&o.records.forEach(a=>{l.records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),Promise.resolve(l)})})}listMatches(t,e,n,r,s,i,o){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listMatches(t.token,e,n,r,s,i,o)})}listNotifications(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listNotifications(t.token,e,n).then(r=>{var s={cacheable_cursor:r.cacheable_cursor,notifications:[]};return r.notifications==null||r.notifications.forEach(i=>{s.notifications.push({code:i.code?Number(i.code):0,create_time:i.create_time,id:i.id,persistent:i.persistent,sender_id:i.sender_id,subject:i.subject,content:i.content?JSON.parse(i.content):void 0})}),Promise.resolve(s)})})}listStorageObjects(t,e,n,r,s){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listStorageObjects(t.token,e,n,r,s).then(i=>{var o={objects:[],cursor:i.cursor};return i.objects==null||i.objects.forEach(l=>{o.objects.push({collection:l.collection,key:l.key,permission_read:l.permission_read?Number(l.permission_read):0,permission_write:l.permission_write?Number(l.permission_write):0,value:l.value?JSON.parse(l.value):void 0,version:l.version,user_id:l.user_id,create_time:l.create_time,update_time:l.update_time})}),Promise.resolve(o)})})}listTournaments(t,e,n,r,s,i,o){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listTournaments(t.token,e,n,r,s,i,o).then(l=>{var a={cursor:l.cursor,tournaments:[]};return l.tournaments!=null&&l.tournaments.forEach(u=>{a.tournaments.push({id:u.id,title:u.title,description:u.description,duration:u.duration?Number(u.duration):0,category:u.category?Number(u.category):0,sort_order:u.sort_order?Number(u.sort_order):0,size:u.size?Number(u.size):0,max_size:u.max_size?Number(u.max_size):0,max_num_score:u.max_num_score?Number(u.max_num_score):0,can_enter:u.can_enter,end_active:u.end_active?Number(u.end_active):0,next_reset:u.next_reset?Number(u.next_reset):0,metadata:u.metadata?JSON.parse(u.metadata):void 0,create_time:u.create_time,start_time:u.start_time,end_time:u.end_time,start_active:u.start_active,authoritative:u.authoritative})}),Promise.resolve(a)})})}listSubscriptions(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listSubscriptions(t.token,{cursor:e,limit:n})})}listTournamentRecords(t,e,n,r,s,i){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listTournamentRecords(t.token,e,n,r,s,i).then(o=>{var l={next_cursor:o.next_cursor,prev_cursor:o.prev_cursor,owner_records:[],records:[]};return o.owner_records!=null&&o.owner_records.forEach(a=>{l.owner_records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),o.records!=null&&o.records.forEach(a=>{l.records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),Promise.resolve(l)})})}listTournamentRecordsAroundOwner(t,e,n,r,s,i){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.listTournamentRecordsAroundOwner(t.token,e,n,r,s,i).then(o=>{var l={next_cursor:o.next_cursor,prev_cursor:o.prev_cursor,owner_records:[],records:[]};return o.owner_records!=null&&o.owner_records.forEach(a=>{l.owner_records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),o.records!=null&&o.records.forEach(a=>{l.records.push({expiry_time:a.expiry_time,leaderboard_id:a.leaderboard_id,metadata:a.metadata?JSON.parse(a.metadata):void 0,num_score:a.num_score?Number(a.num_score):0,owner_id:a.owner_id,rank:a.rank?Number(a.rank):0,score:a.score?Number(a.score):0,subscore:a.subscore?Number(a.subscore):0,update_time:a.update_time,username:a.username,max_num_score:a.max_num_score?Number(a.max_num_score):0})}),Promise.resolve(l)})})}promoteGroupUsers(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.promoteGroupUsers(t.token,e,n)})}readStorageObjects(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.readStorageObjects(t.token,e).then(n=>{var r={objects:[]};return n.objects==null||n.objects.forEach(s=>{r.objects.push({collection:s.collection,key:s.key,permission_read:s.permission_read?Number(s.permission_read):0,permission_write:s.permission_write?Number(s.permission_write):0,value:s.value?JSON.parse(s.value):void 0,version:s.version,user_id:s.user_id,create_time:s.create_time,update_time:s.update_time})}),Promise.resolve(r)})})}rpc(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.rpcFunc(t.token,e,JSON.stringify(n)).then(r=>Promise.resolve({id:r.id,payload:r.payload?JSON.parse(r.payload):void 0}))})}rpcHttpKey(t,e,n){return te(this,null,function*(){return this.apiClient.rpcFunc2("",e,n&&JSON.stringify(n)||"",t).then(r=>Promise.resolve({id:r.id,payload:r.payload?JSON.parse(r.payload):void 0})).catch(r=>{throw r})})}sessionLogout(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.sessionLogout(t.token,{refresh_token:n,token:e}).then(r=>r!==void 0)})}sessionRefresh(t){return te(this,arguments,function*(e,n={}){if(!e)return console.error("Cannot refresh a null session."),e;e.created&&e.expires_at-e.created_at<70&&console.warn("Session lifetime too short, please set '--session.token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session"),e.created&&e.refresh_expires_at-e.created_at<3700&&console.warn("Session refresh lifetime too short, please set '--session.refresh_token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session");const r=yield this.apiClient.sessionRefresh(this.serverkey,"",{token:e.refresh_token,vars:n});return e.update(r.token,r.refresh_token),e})}unlinkApple(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkApple(t.token,e).then(n=>n!==void 0)})}unlinkCustom(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkCustom(t.token,e).then(n=>n!==void 0)})}unlinkDevice(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkDevice(t.token,e).then(n=>n!==void 0)})}unlinkEmail(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkEmail(t.token,e).then(n=>n!==void 0)})}unlinkFacebook(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkFacebook(t.token,e).then(n=>n!==void 0)})}unlinkFacebookInstantGame(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkFacebookInstantGame(t.token,e).then(n=>n!==void 0)})}unlinkGoogle(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkGoogle(t.token,e).then(n=>n!==void 0)})}unlinkGameCenter(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkGameCenter(t.token,e).then(n=>n!==void 0)})}unlinkSteam(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.unlinkSteam(t.token,e).then(n=>n!==void 0)})}updateAccount(t,e){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.updateAccount(t.token,e).then(n=>n!==void 0)})}updateGroup(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.updateGroup(t.token,e,n).then(r=>r!==void 0)})}validatePurchaseApple(t,e,n=!0){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.validatePurchaseApple(t.token,{receipt:e,persist:n})})}validatePurchaseFacebookInstant(t,e,n=!0){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.validatePurchaseFacebookInstant(t.token,{signed_request:e,persist:n})})}validatePurchaseGoogle(t,e,n=!0){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.validatePurchaseGoogle(t.token,{purchase:e,persist:n})})}validatePurchaseHuawei(t,e,n,r=!0){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.validatePurchaseHuawei(t.token,{purchase:e,signature:n,persist:r})})}validateSubscriptionApple(t,e,n=!0){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.validateSubscriptionApple(t.token,{receipt:e,persist:n})})}validateSubscriptionGoogle(t,e,n=!0){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.validateSubscriptionGoogle(t.token,{receipt:e,persist:n})})}writeLeaderboardRecord(t,e,n){return te(this,null,function*(){return this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t)),this.apiClient.writeLeaderboardRecord(t.token,e,{metadata:n.metadata?JSON.stringify(n.metadata):void 0,score:n.score,subscore:n.subscore}).then(r=>Promise.resolve({expiry_time:r.expiry_time,leaderboard_id:r.leaderboard_id,metadata:r.metadata?JSON.parse(r.metadata):void 0,num_score:r.num_score?Number(r.num_score):0,owner_id:r.owner_id,score:r.score?Number(r.score):0,subscore:r.subscore?Number(r.subscore):0,update_time:r.update_time,username:r.username,max_num_score:r.max_num_score?Number(r.max_num_score):0,rank:r.rank?Number(r.rank):0}))})}writeStorageObjects(t,e){return te(this,null,function*(){this.autoRefreshSession&&t.refresh_token&&t.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(t));var n={objects:[]};return e.forEach(r=>{n.objects.push({collection:r.collection,key:r.key,permission_read:r.permission_read,permission_write:r.permission_write,value:JSON.stringify(r.value),version:r.version})}),this.apiClient.writeStorageObjects(t.token,n)})}writeTournamentRecord(t,e,n){return te(this,null,function*(){return this.apiClient.writeTournamentRecord(t.token,e,{metadata:n.metadata?JSON.stringify(n.metadata):void 0,score:n.score,subscore:n.subscore}).then(r=>Promise.resolve({expiry_time:r.expiry_time,leaderboard_id:r.leaderboard_id,metadata:r.metadata?JSON.parse(r.metadata):void 0,num_score:r.num_score?Number(r.num_score):0,owner_id:r.owner_id,score:r.score?Number(r.score):0,subscore:r.subscore?Number(r.subscore):0,update_time:r.update_time,username:r.username,max_num_score:r.max_num_score?Number(r.max_num_score):0,rank:r.rank?Number(r.rank):0}))})}};const Ci={};let o_=null,Fo=null,Fa=null,ea=null,v0=null;const Hu=new Set,_0=new Set,ET=t=>{if(!t)return!1;const e=t.adapter;if(e&&typeof e.isOpen=="function")try{return!!e.isOpen()}catch{return!1}return!1},xf=t=>{t&&Ci[t]&&delete Ci[t],o_=null,Fo=null,Fa=null,ea=null,v0=null},uJ="chat.devdlfjstizlzl.xyz",bT=uJ.replace(/^https?:\/\//,"").replace(/\/+$/,""),Ag="true".toLowerCase()==="true",ST="443",cJ="defaultkey";function Rc(t){if(!t)return"";if(typeof t=="string")return t.trim();if(typeof t=="object"){const e=t,n=e.uid||e.id;if(typeof n=="string")return n.trim()}return String(t).trim()}function vN(t){const e=Rc(t);if(!e)return console.error(" Nakama Error: deviceId is empty or invalid.",t),Promise.reject(new Error("Missing device id for Nakama authentication"));const n=e;return Ci[n]||(Ci[n]=(async()=>{try{const r=new lJ(cJ,bT,ST,Ag);console.log(" [Nakama] Connecting...",{host:bT,port:ST,useSSL:Ag,deviceIdType:typeof e,deviceId:e});const s=await r.authenticateDevice(e,!0);console.log(" [Nakama] Auth Success:",s.user_id);const i=r.createSocket(Ag,!1);return await i.connect(s,!0),console.log(" [Nakama] Socket Connected"),{client:r,socket:i,session:s}}catch(r){throw console.error(" [Nakama] Connection Failed:",r),delete Ci[n],r}})()),Ci[n]}function dJ(t){v0!==t&&(v0=t,console.log("[Nakama] Installing socket dispatchers..."),t.onchannelmessage=e=>{console.log(`[Nakama] onchannelmessage received. Channel: ${e.channel_id}, Code: ${e.code}, Content:`,e.content),console.log(`[Nakama] Dispatching to ${Hu.size} handlers.`),Hu.size===0&&console.warn("[Nakama] No handlers registered! Message dropped."),Hu.forEach(n=>{try{n(e)}catch(r){console.error("[Nakama] onchannelmessage handler error",r)}})},t.onchannelpresence=e=>{console.log("[Nakama] onchannelpresence received:",e),_0.forEach(n=>{try{n(e)}catch(r){console.error("[Nakama] onchannelpresence handler error",r)}})},t.ondisconnect=e=>{console.warn("[Nakama] Socket Disconnected:",e),xf(ea)},t.onerror=e=>{console.error("[Nakama] Socket Error:",e),xf(ea)})}async function Op(t){const e=Rc(t);if(!e)throw new Error("Missing device id for Nakama socket");if(Fa&&ea===e&&ET(Fa))return Fa;const{client:n,socket:r,session:s}=await vN(e);try{ET(r)||await r.connect(s,!0)}catch(i){throw xf(e),i}return o_=n,Fo=s,Fa=r,ea=e,dJ(r),r}function hJ(){return Fa}function fJ(){return(Fo==null?void 0:Fo.user_id)||null}function pJ(t){const e=Rc(t);if(!e)return;const n=Ci[e];n&&n.then(({socket:r})=>{try{typeof r.close=="function"?r.close():r.disconnect(!1)}catch{}}).catch(()=>{}),xf(e),console.log("[Nakama] Connection reset.")}async function mh(t,e){const n=Rc(t),r=Rc(e);if(!n||!r)throw new Error("Missing user id for chat channel");const s=await Op(n),{client:i,session:o}=await vN(n),l=["dm",n,r].sort().join("_"),a=await s.joinChat(l,1,!0,!1),u=await i.listChannelMessages(o,a.id,50,!1);return{channelId:a.id,messages:u.messages||[],socket:s}}async function mJ(t,e){if(!Fo||!ea)throw new Error("Socket not connected. Call connectSocket after login.");const n=await Op(ea),r=o_,s=Fo,i=await n.joinChat(t,e,!0,!1),o=await r.listChannelMessages(s,i.id,50,!1);return{channel:i,messages:o.messages||[],socket:n}}function Ef(t){return Hu.add(t),()=>Hu.delete(t)}function gJ(t){return _0.add(t),()=>_0.delete(t)}const _N=Al(t=>({isConnected:!1,activeChannelId:null,setSocketStatus:e=>t({isConnected:e}),setActiveChannel:e=>t({activeChannelId:e})}));function yJ(t,e=1){const[n,r]=I.useState([]),[s,i]=I.useState(0),[o,l]=I.useState(!1),[a,u]=I.useState(null),d=I.useRef(null),{isConnected:h}=_N();I.useEffect(()=>{if(!h||!t)return;let g=!0;l(!0),u(null),mJ(t,e).then(({channel:E,messages:v})=>{g&&(d.current=E.id,i(E.presences?E.presences.length:1),r(v),l(!1))}).catch(E=>{g&&(console.error("Failed to join chat:",E),u("Failed to join chat channel."),l(!1))});const w=Ef(E=>{const v=d.current;!v||E.channel_id!==v||(console.log("[useChat] Message received for current channel:",{messageId:E.message_id,channelId:E.channel_id,senderId:E.sender_id}),r(_=>_.some(b=>b.message_id===E.message_id)?(console.log("[useChat] Duplicate message ignored:",E.message_id),_):[..._,E]))}),x=gJ(E=>{const v=d.current;(v&&E.channel_id===v||E.channel_id===t)&&i(b=>{const O=E.joins?E.joins.length:0,V=E.leaves?E.leaves.length:0;return Math.max(0,b+O-V)})});return()=>{g=!1,w(),x()}},[t,e,h]);const p=I.useCallback(async g=>{if(!d.current||!g.trim())return;const w=hJ();if(!w){u("Socket disconnected");return}try{const x=await w.writeChatMessage(d.current,{content:g})}catch(x){console.error("Failed to send message:",x),u("Failed to send message")}},[]);return{messages:n,sendMessage:p,onlineCount:s,isLoading:o,error:a}}function wJ({channelId:t,type:e=1,title:n,subtitle:r,className:s=""}){const{messages:i,sendMessage:o,onlineCount:l,isLoading:a}=yJ(t,e),[u,d]=I.useState(""),h=I.useRef(null),p=fJ();I.useEffect(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[i]);const g=async()=>{u.trim()&&(await o(u),d(""))},w=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),g())},x=v=>{try{return JSON.parse(v).content||v}catch{return v}},E=v=>v?new Date(v).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"";return f.jsxs("div",{className:`flex flex-col h-[600px] border border-pandora-border bg-pandora-bg rounded-2xl overflow-hidden ${s}`,children:[f.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-pandora-border bg-pandora-surface/50 backdrop-blur-sm",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-pandora-text",children:n||"Chat Room"}),r&&f.jsx("p",{className:"text-xs text-pandora-muted",children:r})]}),f.jsxs("div",{className:"flex items-center gap-2 text-xs text-pandora-muted bg-black/20 px-2 py-1 rounded-full",children:[f.jsx(ik,{size:12}),f.jsxs("span",{children:[l," Online"]})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-black/5",ref:h,children:[a&&i.length===0?f.jsxs("div",{className:"flex items-center justify-center h-full text-pandora-muted",children:[f.jsx(Jt,{className:"animate-spin mr-2",size:16}),"Loading messages..."]}):i.map(v=>{const _=v.sender_id===p,b=x(v.content);return f.jsx("div",{className:`flex flex-col ${_?"items-end":"items-start"}`,children:f.jsxs("div",{className:`flex flex-col max-w-[80%] ${_?"items-end":"items-start"}`,children:[!_&&f.jsx("span",{className:"text-[10px] text-pandora-muted mb-1 ml-1",children:v.username||"Unknown"}),f.jsx("div",{className:`px-4 py-2 rounded-2xl text-sm ${_?"bg-blue-600 text-white rounded-tr-none":"bg-gray-800 text-gray-100 rounded-tl-none"}`,children:b}),f.jsx("span",{className:"text-[10px] text-pandora-muted mt-1 px-1 opacity-70",children:E(v.create_time)})]})},v.message_id)}),i.length===0&&!a&&f.jsx("div",{className:"text-center text-xs text-pandora-muted mt-10",children:"No messages yet. Say hello!"})]}),f.jsx("div",{className:"p-3 border-t border-pandora-border bg-pandora-surface",children:f.jsxs("div",{className:"flex items-center gap-2 bg-pandora-bg border border-pandora-border rounded-full px-4 py-2 focus-within:border-pandora-accent-to transition",children:[f.jsx("input",{className:"flex-1 bg-transparent text-sm text-pandora-text placeholder:text-pandora-muted focus:outline-none",placeholder:"Type a message...",value:u,onChange:v=>d(v.target.value),onKeyDown:w}),f.jsx("button",{onClick:g,disabled:!u.trim(),className:"text-pandora-muted hover:text-pandora-accent-to disabled:opacity-50 transition",children:f.jsx(vw,{size:18})})]})})]})}function vJ(){const t=Nr(H=>H.userStats),{user:e}=Fr(),[n,r]=I.useState([]),[s,i]=I.useState(null),[o,l]=I.useState([]),[a,u]=I.useState(!1),[d,h]=I.useState(""),[p,g]=I.useState(""),[w,x]=I.useState("PUBLIC"),[E,v]=I.useState("logic"),[_,b]=I.useState(50),[O,V]=I.useState(!1),[$,C]=I.useState(!1),[T,R]=I.useState(""),A=s?`sector-${s.id}`:null;I.useEffect(()=>{const H=()=>u(!0);return window.addEventListener("open-sector-modal",H),()=>window.removeEventListener("open-sector-modal",H)},[]),I.useEffect(()=>{const H=Xs(Ut(Ue,"sectors"),Ys("name","asc")),de=xn(H,q=>{const B=q.docs.map(Q=>({id:Q.id,...Q.data()}));r(B)});return()=>de()},[]),I.useEffect(()=>{if(!s){l([]);return}const H=Xs(Ut(Ue,"sectors",s.id,"posts"),Ys("createdAt","desc")),de=xn(H,q=>{const B=q.docs.map(Q=>({id:Q.id,sectorId:s.id,...Q.data()}));l(B)});return()=>de()},[s]);const N=H=>{if(H.type==="CLASSIFIED"&&H.requirement&&t[H.requirement.stat]<H.requirement.value){window.alert(` : ${H.requirement.stat.toUpperCase()} ${H.requirement.value}+ `);return}i(H)},M=async()=>{if(!(!d.trim()||!e)){V(!0);try{await bc(Ut(Ue,"sectors"),{name:d.trim(),type:w,description:p.trim()||"No description.",requirement:w==="CLASSIFIED"?{stat:E,value:_}:null,createdBy:e.uid,createdAt:Zr()}),h(""),g(""),x("PUBLIC"),v("logic"),b(50),u(!1)}finally{V(!1)}}},P=async()=>{if(!(!s||!e||!T.trim())){C(!0);try{await bc(Ut(Ue,"sectors",s.id,"posts"),{content:T.trim(),createdBy:e.uid,createdAt:Zr()}),R("")}finally{C(!1)}}},K=H=>H.requirement?` : ${H.requirement.stat.toUpperCase()} ${H.requirement.value}+ ( ${t[H.requirement.stat]})`:null;return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2 text-pandora-text",children:[f.jsx(Sy,{size:18,className:"text-pandora-text"}),f.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:"COMMUNITIES"})]}),f.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 text-xs uppercase px-3 py-2 rounded-full bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg shadow hover:shadow-lg transition",children:[f.jsx(FO,{size:14})," New Community"]})]}),f.jsxs("div",{className:"space-y-3",children:[n.map(H=>{const de=H.type==="CLASSIFIED"&&H.requirement&&t[H.requirement.stat]<H.requirement.value;return f.jsxs("button",{onClick:()=>N(H),className:"w-full text-left border border-pandora-border px-4 py-3 bg-pandora-surface rounded-2xl hover:border-pandora-accent-to hover:bg-white/5 transition",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[H.type==="PUBLIC"?f.jsx($O,{size:16,className:"text-pandora-text"}):de?f.jsx(MO,{size:16,className:"text-pandora-pink"}):f.jsx(kO,{size:16,className:"text-pandora-text"}),f.jsx("div",{className:"font-semibold text-pandora-text",children:H.name})]}),f.jsx("span",{className:`text-[11px] font-mono px-2 py-1 rounded-full ${H.type==="PUBLIC"?"bg-gradient-to-r from-pandora-accent-from/70 to-pandora-accent-to/70 text-pandora-bg":"border border-pandora-pink text-pandora-pink"}`,children:H.type==="PUBLIC"?"Public":"Private"})]}),f.jsx("div",{className:"text-xs text-pandora-muted mt-1",children:H.description}),H.requirement&&f.jsx("div",{className:"text-[11px] font-mono text-pandora-muted mt-1",children:K(H)})]},H.id)}),n.length===0&&f.jsx("p",{className:"text-sm text-pandora-muted",children:"No communities yet. Create one to begin."})]}),s&&f.jsxs("div",{className:"border border-pandora-border bg-pandora-bg p-4 rounded-2xl space-y-3",children:[f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-2 text-pandora-text",children:[f.jsx(Sy,{size:16,className:"text-pandora-text"}),f.jsxs("h3",{className:"text-sm font-semibold uppercase",children:[s.name," "]})]})}),f.jsx("p",{className:"text-xs text-pandora-muted",children:s.description}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"text-[11px] uppercase text-pandora-muted font-semibold",children:"  "}),f.jsxs("div",{className:"flex items-end gap-2",children:[f.jsx("textarea",{value:T,onChange:H=>R(H.target.value),placeholder:"   ",className:"flex-1 h-20 bg-pandora-surface/80 border border-pandora-border text-pandora-text text-sm p-3 rounded-2xl font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to"}),f.jsx("button",{onClick:P,disabled:!T.trim()||$,className:"h-20 w-12 rounded-2xl border border-white/15 bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg flex items-center justify-center hover:shadow-lg transition disabled:opacity-50",children:$?f.jsx(Jt,{size:16,className:"animate-spin"}):f.jsx(vw,{size:16})})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"text-[11px] uppercase text-pandora-muted font-semibold",children:" "}),o.map(H=>{const de=H.createdAt&&"seconds"in H.createdAt?new Date(H.createdAt.seconds*1e3).toLocaleString():"Just now";return f.jsxs("div",{className:"border border-pandora-border bg-pandora-surface/80 p-3 rounded-2xl space-y-1",children:[f.jsx("div",{className:"flex items-center justify-between text-[11px] text-pandora-muted",children:f.jsx("span",{children:de})}),f.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:H.content})]},H.id)}),o.length===0&&f.jsx("p",{className:"text-sm text-pandora-muted",children:"  ."})]}),A&&f.jsx("div",{className:"mt-3",children:f.jsx(wJ,{channelId:A,type:1,title:`${s.name} Chat`,subtitle:" "})})]}),a&&f.jsx("div",{className:"fixed inset-0 z-40 bg-black/70 flex items-center justify-center",children:f.jsxs("div",{className:"w-full max-w-md border border-white/15 bg-pandora-surface/95 p-5 rounded-2xl space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"text-sm font-semibold uppercase text-pandora-text",children:"Create Community"}),f.jsx("button",{onClick:()=>u(!1),className:"text-pandora-muted hover:text-pandora-text text-lg",children:""})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Name"}),f.jsx("input",{value:d,onChange:H=>h(H.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-2xl font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to",placeholder:"Community name"})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Description"}),f.jsx("textarea",{value:p,onChange:H=>g(H.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-2xl font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to",placeholder:"What happens here?"})]}),f.jsxs("div",{className:"flex items-center gap-3 text-xs uppercase text-pandora-muted",children:[f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"radio",checked:w==="PUBLIC",onChange:()=>x("PUBLIC")}),"Public"]}),f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"radio",checked:w==="CLASSIFIED",onChange:()=>x("CLASSIFIED")}),"Classified"]})]}),w==="CLASSIFIED"&&f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Stat"}),f.jsx("select",{value:E,onChange:H=>v(H.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-2 rounded-2xl",children:["logic","altruism","aggression","credit"].map(H=>f.jsx("option",{value:H,children:H},H))})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Value"}),f.jsx("input",{type:"number",value:_,onChange:H=>b(Number(H.target.value)),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-2 rounded-2xl",min:0,max:100})]})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{onClick:M,disabled:O,className:"px-4 py-2 border border-transparent bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg font-semibold uppercase text-xs rounded-full hover:shadow-lg transition disabled:opacity-50",children:O?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(Jt,{className:"animate-spin",size:14}),"Creating..."]}):"Create"})})]})]})})]})}function _J(){var M,P;const t=Nr(K=>K.isBlind()),{user:e}=Fr(),[n,r]=I.useState([]),[s,i]=I.useState(0),o=I.useRef([]),[l,a]=I.useState(!0),[u,d]=I.useState({}),[h,p]=I.useState({}),[g,w]=I.useState(null),[x,E]=I.useState({}),[v,_]=I.useState({}),[b,O]=I.useState(!0),[V,$]=I.useState({}),[C,T]=I.useState({});I.useEffect(()=>{const K=new IntersectionObserver(H=>{H.forEach(de=>{if(de.isIntersecting){const q=Number(de.target.getAttribute("data-idx"));i(q)}})},{threshold:.6});return o.current.forEach(H=>H&&K.observe(H)),()=>K.disconnect()},[]),I.useEffect(()=>{if(!g)return;const K=Xs(Ut(Ue,"transmissions",g,"comments"),Ys("createdAt","desc"),t2(50)),H=xn(K,de=>{E(q=>({...q,[g]:de.docs.map(B=>({id:B.id,...B.data()}))})),$(q=>{const B={...q};return de.docs.forEach(Q=>{const Z=Q.data(),he=q[Q.id];if(B[Q.id]={count:Z.likes||0,liked:(he==null?void 0:he.liked)||!1},e&&(he==null?void 0:he.liked)===void 0){const Te=sn(Ue,"transmissions",g,"comments",Q.id,"likes",e.uid);ro(Te).then(fe=>{$(Pe=>({...Pe,[Q.id]:{count:Z.likes||0,liked:fe.exists()}}))}).catch(()=>{})}}),B})});return()=>H()},[g,e]),I.useEffect(()=>{const K=xn(Ut(Ue,"profiles"),H=>{const de={};H.docs.forEach(q=>{const B=q.data();de[B.uid]={displayName:B.displayName,email:B.email}}),T(de)});return()=>K()},[]);const R=async K=>{if(!e)return;const H=(v[K]||"").trim();if(H){_(de=>({...de,[K]:""})),p(de=>({...de,[K]:(de[K]||0)+1}));try{await n_(K,e.uid,H)}catch{p(de=>({...de,[K]:Math.max(0,(de[K]||1)-1)}))}}},A=async(K,H)=>{if(!e)return;const de=V[H]||{count:0,liked:!1};$(q=>({...q,[H]:{count:de.count+(de.liked?-1:1),liked:!de.liked}}));try{await r_(K,H,e.uid)}catch{$(q=>({...q,[H]:de}))}};if(I.useEffect(()=>{const K=Xs(Ut(Ue,"transmissions"),Ys("createdAt","desc")),H=xn(K,de=>{const B=de.docs.map(Q=>({id:Q.id,...Q.data()})).filter(Q=>Q.type==="sample"&&Q.sampleUrl);r(B),d(Q=>{const Z={...Q};return B.forEach(he=>{var Te;Z[he.id]={count:he.likes||0,liked:((Te=Q[he.id])==null?void 0:Te.liked)||!1}}),Z}),p(Q=>{const Z={...Q};return B.forEach(he=>{Z[he.id]=he.comments||0}),Z}),a(!1)},()=>a(!1));return()=>H()},[]),I.useEffect(()=>{if(!e){d(H=>Object.fromEntries(Object.entries(H).map(([de,q])=>[de,{...q,liked:!1}])));return}if(n.length===0)return;let K=!1;return(async()=>{try{const H=await Promise.all(n.map(async de=>{const q=sn(Ue,"transmissions",de.id,"likes",e.uid),B=await ro(q);return{id:de.id,liked:B.exists()}}));if(K)return;d(de=>{const q={...de};return H.forEach(({id:B,liked:Q})=>{var Z;q[B]={count:((Z=de[B])==null?void 0:Z.count)??0,liked:Q}}),q})}catch{}})(),()=>{K=!0}},[e,n]),l)return f.jsx("div",{className:"h-dvh flex items-center justify-center text-pandora-muted",children:f.jsx(Jt,{className:"animate-spin",size:20})});if(!l&&n.length===0)return f.jsx("div",{className:"h-dvh flex items-center justify-center text-pandora-muted px-4 text-center",children:"No samples yet. Upload one from the write modal."});const N=async K=>{if(!e)return;const H=u[K]||{count:0,liked:!1},de={...H};d(q=>({...q,[K]:{count:H.count+(H.liked?-1:1),liked:!H.liked}}));try{const q=await t_(K,e.uid);d(B=>{const Q=de.count+(q.liked?1:-1);return{...B,[K]:{count:Math.max(0,Q),liked:q.liked}}})}catch{d(B=>({...B,[K]:H}))}};return f.jsxs("div",{className:"h-dvh overflow-y-auto snap-y snap-mandatory no-scrollbar pb-16",children:[n.filter(K=>K.sampleUrl).map((K,H)=>{var de,q;return f.jsx("div",{"data-idx":H,ref:B=>o.current[H]=B,className:"snap-start h-dvh flex justify-center items-center",children:f.jsxs("div",{className:"relative h-full w-full max-w-[520px] aspect-[9/16] border border-pandora-border rounded-sm overflow-hidden bg-pandora-bg",children:[f.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[f.jsx("video",{className:"w-full h-full object-cover",autoPlay:!0,muted:b,loop:!0,playsInline:!0,src:K.sampleUrl,poster:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="},K.sampleUrl),f.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(167,199,255,0.12),transparent_40%),radial-gradient(circle_at_80%_30%,rgba(110,200,255,0.12),transparent_35%)]"}),f.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-t from-pandora-bg/55 via-transparent to-transparent"})]}),f.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-3 text-xs font-mono uppercase z-10",children:[f.jsxs("div",{className:"flex items-center gap-1 text-pandora-pink",children:[f.jsx("span",{className:"w-2 h-2 bg-pandora-pink animate-pulseDot inline-block"}),"REC"]}),f.jsx("div",{className:"px-2 py-1 border border-pandora-border rounded-sm bg-pandora-surface text-pandora-text",children:K.uid?t?"Subject-****":K.uid:"Unknown"})]}),f.jsxs("div",{className:"absolute bottom-4 left-4 text-pandora-text space-y-2",children:[f.jsxs("a",{href:K.uid?`/u/${K.uid}`:"#",className:"flex items-center gap-2 text-sm font-semibold",children:[f.jsx("span",{children:t?"Subject-****":K.uid||K.id}),f.jsx(PO,{size:16,className:"text-pandora-neon"})]}),f.jsxs("div",{className:"text-xs font-mono text-pandora-muted uppercase",children:[((de=u[K.id])==null?void 0:de.count)??0," Likes  ",h[K.id]??0," Comments"]})]}),f.jsxs("div",{className:"absolute bottom-10 right-4 flex flex-col items-center gap-4 text-pandora-text z-20",children:[f.jsx("button",{onClick:()=>O(B=>!B),className:"w-11 h-11 border border-pandora-border/70 rounded-xl flex items-center justify-center transition bg-pandora-surface/90 text-white backdrop-blur hover:border-pandora-accent-to hover:shadow-[0_10px_30px_-12px_rgba(165,180,252,0.8)]",title:b?"Unmute":"Mute",children:b?f.jsx(xw,{size:18}):f.jsx(_w,{size:18})}),f.jsx("button",{onClick:()=>N(K.id),className:kt("w-11 h-11 border border-pandora-border/70 rounded-xl flex items-center justify-center transition bg-pandora-surface/90 text-white backdrop-blur hover:border-pandora-accent-to hover:shadow-[0_10px_30px_-12px_rgba(165,180,252,0.8)]",((q=u[K.id])==null?void 0:q.liked)&&"border-green-400 text-green-400 shadow-[0_0_20px_rgba(74,222,128,0.35)]"),children:f.jsx(Pi,{size:18})}),f.jsx("button",{onClick:()=>w(B=>B===K.id?null:K.id),className:"w-11 h-11 border border-pandora-border/70 rounded-xl flex items-center justify-center transition bg-pandora-surface/90 text-white backdrop-blur hover:border-pandora-accent-to hover:shadow-[0_10px_30px_-12px_rgba(165,180,252,0.8)]",children:f.jsx(al,{size:18})}),f.jsx("button",{className:"w-11 h-11 border border-pandora-border/70 rounded-xl flex items-center justify-center transition bg-pandora-surface/90 text-white backdrop-blur hover:border-pandora-accent-to hover:shadow-[0_10px_30px_-12px_rgba(165,180,252,0.8)]",children:f.jsx(VO,{size:18})})]})]})},K.id)}),g&&f.jsxs("div",{className:"fixed top-0 right-0 h-full w-full lg:w-[360px] bg-pandora-bg border-l border-pandora-border z-50 p-4 flex flex-col",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx("div",{className:"text-sm font-semibold uppercase text-pandora-text",children:"Comments"}),f.jsx("button",{onClick:()=>w(null),className:"text-pandora-muted hover:text-pandora-text text-lg",children:""})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1",children:[(M=x[g])==null?void 0:M.map(K=>{var B,Q;const H=K.createdAt&&"seconds"in K.createdAt?new Date(K.createdAt.seconds*1e3).toLocaleTimeString():"Just now",de=t?"Subject-****":((B=C[K.uid||""])==null?void 0:B.displayName)||((Q=C[K.uid||""])==null?void 0:Q.email)||"User",q=V[K.id]||{count:K.likes||0,liked:!1};return f.jsxs("div",{className:"border border-pandora-border rounded-2xl p-2 bg-pandora-bg",children:[f.jsxs("div",{className:"flex items-center justify-between text-[11px] text-pandora-muted",children:[f.jsx("span",{className:"truncate",children:de}),f.jsx("span",{children:H})]}),f.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:K.text}),f.jsxs("button",{onClick:()=>A(g,K.id),className:kt("mt-2 text-[11px] uppercase flex items-center gap-1",q.liked?"text-pandora-neon":"text-pandora-muted hover:text-pandora-text"),children:[f.jsx(Pi,{size:12})," ",q.count," Likes"]})]},K.id)}),(x[g]||[]).length===0&&f.jsx("p",{className:"text-[11px] text-pandora-muted",children:"No comments yet."})]}),f.jsx("div",{className:"pt-3 border-t border-pandora-border/70 mt-3",children:f.jsxs("div",{className:"flex gap-2 items-end",children:[f.jsx("textarea",{value:v[g]||"",onChange:K=>_(H=>({...H,[g]:K.target.value})),placeholder:"Leave a comment...",className:"flex-1 h-16 bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-2 rounded-2xl font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to"}),f.jsx("button",{onClick:()=>R(g),disabled:!((P=v[g])!=null&&P.trim()),className:"px-3.5 py-2 text-[11px] font-semibold uppercase rounded-lg bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-white shadow-[0_12px_30px_-10px_rgba(165,180,252,0.8)] hover:shadow-[0_14px_34px_-8px_rgba(165,180,252,0.95)] transition disabled:opacity-50 self-stretch border border-white/20",children:"Post"})]})})]})]})}async function jp(t){return(await s2(Ut(Ue,"profiles",t,"links"))).docs.map(n=>n.data())}async function a_(t,e){const n=sn(Ue,"profiles",t,"links",e);await Qc(n,{targetUid:e,createdAt:Zr()})}async function l_(t,e){const n=sn(Ue,"profiles",t,"links",e);await kv(n)}async function xJ(t,e){const n=sn(Ue,"profiles",t,"links",e);return(await ro(n)).exists()}const EJ=a_,bJ=l_;function SJ(){const t=Nr(o=>o.userStats),e=Fr(o=>o.user),[n,r]=I.useState([]),[s,i]=I.useState([]);return I.useEffect(()=>{e&&jp(e.uid).then(o=>r(o.map(l=>l.targetUid))).catch(()=>{})},[e]),I.useEffect(()=>{const o=xn(Ut(Ue,"profiles"),l=>{const a=l.docs.map(u=>u.data());i(a)});return()=>o()},[]),f.jsxs("div",{className:"space-y-6",children:[f.jsx(hN,{}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-lg font-semibold text-pandora-text",children:(e==null?void 0:e.displayName)||(e==null?void 0:e.email)||"Subject-9218"}),f.jsx("div",{className:"text-xs text-pandora-neon font-mono uppercase",children:e?"Authenticated":"Guest"})]}),f.jsx(Qo,{username:(e==null?void 0:e.displayName)||(e==null?void 0:e.email)||"Subject-9218",size:"md"})]}),f.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm space-y-3",children:[f.jsx(Zy,{stats:[t.logic,t.altruism,t.aggression,t.credit,54,32]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm font-mono uppercase",children:[f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-sm text-pandora-text",children:[f.jsx("span",{className:"text-pandora-muted",children:"LOGIC"}),f.jsx("span",{children:t.logic})]}),f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-sm text-pandora-text",children:[f.jsx("span",{className:"text-pandora-muted",children:"ALTRUISM"}),f.jsx("span",{children:t.altruism})]}),f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-sm text-pandora-text",children:[f.jsx("span",{className:"text-pandora-muted",children:"AGGRESSION"}),f.jsx("span",{children:t.aggression})]}),f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-sm text-pandora-text",children:[f.jsx("span",{className:"text-pandora-muted",children:"CREDIT"}),f.jsxs("span",{children:[t.credit,"%"]})]})]})]}),f.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm space-y-3",children:[f.jsx("div",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Linked Users"}),f.jsxs("div",{className:"space-y-2",children:[n.length===0&&f.jsx("p",{className:"text-sm text-pandora-muted",children:"No links yet."}),n.map(o=>{const l=s.find(a=>a.uid===o);return f.jsx("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-sm",children:f.jsxs("div",{className:"min-w-0",children:[f.jsx("p",{className:"text-sm text-pandora-text truncate",children:(l==null?void 0:l.displayName)||o}),f.jsx("p",{className:"text-[11px] text-pandora-muted truncate",children:(l==null?void 0:l.email)||o})]})},o)})]})]})]})}const u_=Al(t=>({toasts:[],pushToast:e=>t(n=>({toasts:[...n.toasts,{id:crypto.randomUUID(),timeout:3500,...e}]})),removeToast:e=>t(n=>({toasts:n.toasts.filter(r=>r.id!==e)}))})),TT=(t,e)=>[t,e].sort().join("_"),xN=(t,e)=>`pandora_dm_cache_${t}_${e}`,cr=t=>t?typeof t.createdAtMs=="number"&&!Number.isNaN(t.createdAtMs)?t.createdAtMs:t.createdAt&&typeof t.createdAt.seconds=="number"?t.createdAt.seconds*1e3+(t.createdAt.nanoseconds||0)/1e6:0:0,AT=(t,e)=>{if(!t||!e)return[];try{const n=localStorage.getItem(xN(t,e));if(!n)return[];const r=JSON.parse(n);return Array.isArray(r)?r.map(s=>{const i=cr(s);return{...s,createdAtMs:i}}):[]}catch{return[]}},TJ=(t,e,n=[])=>{if(!t||!e)return;const r=n.slice(-200);localStorage.setItem(xN(t,e),JSON.stringify(r))},CT=t=>{const e=t.content,n=typeof t.create_time=="string"&&Date.parse(t.create_time)||Date.now();return{id:t.message_id,text:typeof(e==null?void 0:e.text)=="string"?e.text:"",fromUid:(e==null?void 0:e.fromUid)||t.sender_id,toUid:(e==null?void 0:e.toUid)||(e==null?void 0:e.targetUid)||null,createdAt:{seconds:Math.floor(n/1e3),nanoseconds:Math.floor(n%1e3*1e6)},createdAtMs:n}};function kT(){const{user:t}=Fr(),{uid:e}=yw(),n=Lc(),r=u_(ee=>ee.pushToast),[s,i]=I.useState([]),[o,l]=I.useState([]),[a,u]=I.useState(null),[d,h]=I.useState([]),[p,g]=I.useState(""),[w,x]=I.useState(!1),[E,v]=I.useState(!0),[_,b]=I.useState(!1),[O,V]=I.useState([]),[$,C]=I.useState(null),[T,R]=I.useState([]);I.useRef([]);const[A,N]=I.useState(null),M=I.useRef(null),[P,K]=I.useState(null),[H,de]=I.useState(0),q=I.useRef(new Set),B=I.useRef(null),Q=I.useRef(null),Z=I.useRef(null),[he,Te]=I.useState({}),fe=I.useRef(new Map),Pe=I.useRef(new Map),Xe=I.useRef(new Map),at=I.useRef(!1),et=ee=>{const me=ee?cr(ee):0;return me?new Date(me).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""},St=()=>{var me;const ee=(me=M.current)==null?void 0:me.adapter;if(ee&&typeof ee.isOpen=="function")try{return!!ee.isOpen()}catch{return!1}return!!M.current};I.useEffect(()=>{if(!t)return;(async()=>{await e_({uid:t.uid,displayName:t.displayName,email:t.email,photoURL:t.photoURL});const me=await jp(t.uid);V(me.map(xe=>xe.targetUid))})().catch(()=>{})},[t]),I.useEffect(()=>{const ee=xn(Ut(Ue,"profiles"),me=>{const xe=me.docs.map(we=>we.data());l(xe)});return()=>ee()},[]),I.useEffect(()=>{const ee=Z.current;ee&&(ee.scrollTop=ee.scrollHeight)},[s,a]),I.useEffect(()=>{if(!t)return;const ee=`pandora_dm_seen_${t.uid}`,me=localStorage.getItem(ee);if(me)try{Te(JSON.parse(me))}catch{Te({})}},[t]);const gt=ee=>{if(!t||!ee)return;const me=`pandora_dm_seen_${t.uid}`;Te(xe=>{const we={...xe,[ee]:Date.now()};return localStorage.setItem(me,JSON.stringify(we)),we})};I.useEffect(()=>{if(!t||!a)return;let ee=null,me=null;v(!0),K(null),N(null);const xe=AT(t.uid,a);return xe.length&&(q.current=new Set(xe.map(we=>we.id)),i(xe)),mh(t.uid,a).then(({channelId:we,messages:Ye,socket:Se})=>{N(we),M.current=Se,fe.current.set(we,a),Pe.current.set(a,we);const Ee=Ye.map(Tt=>CT(Tt)),tt=new Map;[...xe,...Ee].forEach(Tt=>{Tt!=null&&Tt.id&&tt.set(Tt.id,Tt)});const Dt=Array.from(tt.values()).sort((Tt,Mt)=>cr(Tt)-cr(Mt));q.current=new Set(Dt.map(Tt=>Tt.id)),i(Dt),v(!1),gt(a),me=Ef(Tt=>{if(Tt.channel_id!==we)return;const Mt=Tt.message_id;if(q.current.has(Mt))return;const At=CT(Tt),rs=cr(At)||Date.now(),Sr=B.current;Sr&&Sr.fromUid===At.fromUid&&Sr.text===At.text&&Math.abs(rs-Sr.ts)<1e3||(B.current={fromUid:At.fromUid,text:At.text,ts:rs},i(ua=>{const Ll=At.fromUid===(t==null?void 0:t.uid)?ua.filter(si=>!si.id.startsWith("local-")):ua;return q.current.add(Mt),[...Ll,At].sort((si,ca)=>cr(si)-cr(ca))}))}),ee=()=>{me==null||me()}}).catch(we=>{const Ye=we instanceof Error?we.message:"Failed to connect to chat.";K(Ye),v(!1)}),()=>{ee&&ee(),me&&me(),M.current=null}},[t,a,H]),I.useEffect(()=>{g(""),C(null)},[a]),I.useEffect(()=>{if(!t)return;const ee=new Set,me=`pandora_dm_cache_${t.uid}_`;for(let Se=0;Se<localStorage.length;Se+=1){const Ee=localStorage.key(Se);if(Ee&&Ee.startsWith(me)){const tt=Ee.slice(me.length);tt&&ee.add(tt)}}Object.keys(he).forEach(Se=>ee.add(Se)),a&&ee.add(a);const xe=new Map(o.map(Se=>[Se.uid,Se])),we=[];ee.forEach(Se=>{if(Se===t.uid)return;const Ee=xe.get(Se);Ee&&(!_||O.includes(Se))?we.push(Ee):!Ee&&!_&&we.push({uid:Se,displayName:Se})});const Ye=we.map(Se=>{const Ee=AT(t.uid,Se.uid),tt=Ee[Ee.length-1];return{id:TT(t.uid,Se.uid),otherUid:Se.uid,lastText:tt==null?void 0:tt.text,lastAt:cr(tt)}}).sort((Se,Ee)=>(Ee.lastAt||0)-(Se.lastAt||0));h(Ye)},[o,O,_,a,he,t]),I.useEffect(()=>{if(!t)return;const ee=new Set;(async()=>{for(const xe of d.slice(0,10))if(ee.add(xe.otherUid),!Pe.current.has(xe.otherUid))try{const{channelId:we,socket:Ye}=await mh(t.uid,xe.otherUid);fe.current.set(we,xe.otherUid),Pe.current.set(xe.otherUid,we),Xe.current.set(xe.otherUid,{channelId:we,leave:()=>{Ye.leaveChat(we),fe.current.delete(we),Pe.current.delete(xe.otherUid)}})}catch{}Xe.current.forEach((xe,we)=>{ee.has(we)||(xe.leave(),Xe.current.delete(we))})})()},[d,t]),I.useEffect(()=>{if(!t||at.current||d.length===0)return;let ee=!1;return(async()=>{for(const xe of d.slice(0,10))if(!Pe.current.has(xe.otherUid))try{const{channelId:we,messages:Ye,socket:Se}=await mh(t.uid,xe.otherUid);if(ee){Se.leaveChat(we);continue}const Ee=Ye[Ye.length-1];if(Ee){const tt=Ee.content,Dt=typeof(tt==null?void 0:tt.text)=="string"?tt.text:"",ns=Ee.create_time?Date.parse(Ee.create_time):Date.now();h(Tt=>[...Tt.map(At=>At.otherUid===xe.otherUid?{...At,lastText:Dt,lastAt:ns}:At)].sort((At,rs)=>(rs.lastAt||0)-(At.lastAt||0)))}Se.leaveChat(we)}catch{}at.current=!0})(),()=>{ee=!0}},[d,t]),I.useEffect(()=>{t&&Op(t.uid).catch(()=>{})},[t]),I.useEffect(()=>{if(!t||!a)return;const ee=window.setInterval(()=>{St()||de(me=>me+1)},1e4);return()=>window.clearInterval(ee)},[t,a]);const Br=async()=>{if(!p.trim()||!t||!a||w)return;if(!A||!M.current||!St()){C("Chat is reconnecting. Please try again in a moment."),de(Ye=>Ye+1);return}x(!0),C(null);const ee=p.trim(),me=Date.now();if(Q.current&&Q.current.text===ee&&me-Q.current.ts<800){x(!1);return}Q.current={text:ee,ts:me};const xe=`local-${Date.now()}`,we={id:xe,text:ee,fromUid:t.uid,createdAt:{seconds:Math.floor(me/1e3),nanoseconds:Math.floor(me%1e3*1e6)},createdAtMs:me};i(Ye=>{const Se=[...Ye,we].sort((Ee,tt)=>cr(Ee)-cr(tt));return q.current.add(xe),Se});try{if(!A||!M.current)throw new Error("Not connected to chat channel yet.");await M.current.writeChatMessage(A,{text:ee,fromUid:t.uid,toUid:a})}catch(Ye){const Se=Ye instanceof Error?Ye.message:"Failed to send message.";C(Se),de(Ee=>Ee+1),i(Ee=>Ee.filter(tt=>tt.id!==xe)),q.current.delete(xe)}finally{x(!1),g("")}},Fn=I.useMemo(()=>o.find(ee=>ee.uid===a),[o,a]),ts=I.useMemo(()=>{const ee=new Map;return o.forEach(me=>ee.set(me.uid,me)),ee},[o]);I.useEffect(()=>{if(!a||s.length===0)return;const ee=s[s.length-1];h(me=>[...me.map(we=>we.otherUid===a?{...we,lastText:ee.text,lastAt:cr(ee)||Date.now()}:we)].sort((we,Ye)=>(Ye.lastAt||0)-(we.lastAt||0)))},[s,a]),I.useEffect(()=>{if(!t)return;const ee=Ef(me=>{const xe=me.content,we=typeof(xe==null?void 0:xe.text)=="string"?xe.text:"",Ye=(xe==null?void 0:xe.fromUid)||me.sender_id,Se=(xe==null?void 0:xe.toUid)||(xe==null?void 0:xe.targetUid)||"",Ee=fe.current.get(me.channel_id)||(Ye===t.uid?Se:Ye);if(!Ee)return;const tt=me.create_time?Date.parse(me.create_time):Date.now();if(h(Dt=>[...Dt.find(Mt=>Mt.otherUid===Ee)?Dt.map(Mt=>Mt.otherUid===Ee?{...Mt,lastText:we,lastAt:tt}:Mt):[...Dt,{id:TT(t.uid,Ee),otherUid:Ee,lastText:we,lastAt:tt}]].sort((Mt,At)=>(At.lastAt||0)-(Mt.lastAt||0))),a!==Ee){const Dt=me.sender_id===t.uid?"You":Ee;r({title:"New message",description:`${Dt}: ${we.slice(0,80)}`})}});return()=>ee()},[t,a,r]),I.useEffect(()=>{!t||!a||TJ(t.uid,a,s)},[s,a,t]),I.useEffect(()=>{e&&u(e),e&&gt(e)},[e]);const Sn=()=>t?d.length===0?f.jsx("div",{className:"text-sm text-pandora-muted",children:"No conversations yet. Start one from contacts."}):f.jsx("div",{className:"space-y-2 w-full",children:d.map(ee=>{const me=ts.get(ee.otherUid),xe=(me==null?void 0:me.displayName)||(me==null?void 0:me.email)||ee.otherUid.slice(0,8),we=ee.lastAt?new Date(ee.lastAt).toLocaleTimeString():"",Ye=he[ee.otherUid]?(ee.lastAt||0)>he[ee.otherUid]:!!ee.lastAt;return f.jsxs("button",{onClick:()=>{u(ee.otherUid),n(`/messages/${ee.otherUid}`),gt(ee.otherUid)},className:`w-full text-left border px-3 py-3 rounded-2xl flex items-center justify-between transition ${a===ee.otherUid?"text-pandora-text border-white/30 bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to shadow-[0_12px_32px_-10px_rgba(165,180,252,0.75)]":"border-pandora-border text-pandora-text hover:border-pandora-accent-to hover:bg-white/5"}`,children:[f.jsxs("div",{className:"min-w-0",children:[f.jsx("div",{className:"text-sm font-semibold truncate",children:xe}),f.jsxs("div",{className:"text-xs text-pandora-muted truncate flex items-center gap-2",children:[ee.lastText||"No message",Ye&&f.jsx("span",{className:"w-2 h-2 rounded-full bg-pandora-accent-to/80 inline-block"})]})]}),we&&f.jsx("span",{className:"text-[10px] text-pandora-muted",children:we})]},ee.id)})}):null;return f.jsxs("div",{className:"w-full flex-1 min-h-[calc(100vh-60px)] h-[calc(100vh-60px)] flex flex-col gap-0 overscroll-contain overflow-hidden",children:[!a&&f.jsxs("div",{className:"border border-pandora-border bg-pandora-surface/90 rounded-2xl p-4 space-y-3 backdrop-blur flex-1 overflow-y-auto w-full mt-0",children:[f.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase text-pandora-muted",children:[f.jsx(ik,{size:14})," Conversations"]}),f.jsx("div",{className:"flex items-center gap-3 text-xs text-pandora-text",children:f.jsxs("label",{className:"flex items-center gap-2",children:[f.jsx("input",{type:"checkbox",checked:_,onChange:ee=>b(ee.target.checked)}),"Linked only"]})}),Sn()]}),a&&f.jsxs("div",{className:"w-full border border-pandora-border bg-pandora-surface/90 rounded-3xl p-3 lg:p-4 flex flex-col backdrop-blur flex-1 min-h-0 overscroll-contain overflow-hidden",children:[f.jsxs("div",{className:"flex items-center gap-3 text-sm text-pandora-text mb-2 pl-2 md:pl-0 pr-1 justify-start",children:[f.jsx("button",{onClick:()=>{u(null),n("/messages")},className:"p-1.5 border border-pandora-border/60 rounded-full text-pandora-text hover:border-pandora-accent-to hover:bg-white/5",children:f.jsx(IO,{size:16})}),f.jsx(Qo,{username:(Fn==null?void 0:Fn.displayName)||a||"User",size:"sm"}),f.jsx("span",{className:"font-semibold truncate text-base md:text-sm",children:(Fn==null?void 0:Fn.displayName)||a})]}),f.jsxs("div",{className:"flex-1 min-h-0 grid grid-rows-[1fr_auto] gap-2",children:[f.jsxs("div",{ref:Z,className:"overflow-y-auto space-y-3 border border-pandora-border p-3 lg:p-4 bg-pandora-bg/80 rounded-2xl [scrollbar-width:none] [-ms-overflow-style:none] [&::-webkit-scrollbar]:hidden",children:[E&&f.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted text-sm",children:[f.jsx(Jt,{size:16,className:"animate-spin"})," Loading messages..."]}),P&&f.jsxs("div",{className:"text-sm text-pandora-pink flex items-center justify-between gap-3",children:[f.jsxs("span",{children:["Chat  : ",P]}),f.jsx("button",{className:"text-xs px-3 py-1 rounded-full border border-pandora-border hover:border-pandora-accent-to",onClick:()=>{N(null),K(null),v(!0),pJ(t==null?void 0:t.uid),de(ee=>ee+1)},children:"Retry"})]}),!E&&s.length===0&&f.jsx("p",{className:"text-sm text-pandora-muted",children:"No messages here yet."}),s.map(ee=>{const me=ee.fromUid===(t==null?void 0:t.uid),xe=ee.id.startsWith("local-"),we=et(ee),Ye=me&&a&&he[a]&&cr(ee)>0&&he[a]>=cr(ee);return f.jsx("div",{className:`flex ${me?"justify-end":"justify-start"}`,children:f.jsxs("div",{className:`max-w-[80%] px-3 py-2 rounded-2xl text-sm shadow-sm ${me?"bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg":"border border-pandora-border text-pandora-text bg-pandora-surface/80"}`,children:[f.jsx("p",{className:"whitespace-pre-line break-words",children:ee.text}),f.jsxs("div",{className:`flex items-center justify-end gap-1 text-[10px] mt-1 ${me?"text-white/70":"text-pandora-muted"}`,children:[we&&f.jsx("span",{children:we}),me&&(xe?f.jsx(fE,{size:12}):Ye?f.jsx(RO,{size:12}):f.jsx(fE,{size:12}))]})]})},ee.id)})]}),f.jsxs("div",{className:"border border-pandora-border/60 bg-pandora-surface/95 rounded-2xl z-10 shadow-[0_-8px_24px_-18px_rgba(0,0,0,0.6)] p-2 mb-1",children:[f.jsxs("div",{className:"relative flex items-center gap-2",children:[f.jsx("textarea",{value:p,onChange:ee=>g(ee.target.value),onKeyDown:ee=>{ee.key==="Enter"&&!ee.shiftKey&&!/Mobi|Android/i.test(navigator.userAgent)&&(ee.preventDefault(),Br())},className:"flex-1 h-14 bg-pandora-bg/85 border border-pandora-border/80 text-pandora-text text-sm pr-14 pl-3 py-3 rounded-2xl font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to",placeholder:"Type a direct message..."}),f.jsx("button",{onClick:Br,disabled:!p.trim()||w,className:"absolute right-2 top-1/2 -translate-y-1/2 h-10 w-10 border border-white/10 bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg font-semibold rounded-full hover:shadow-lg transition disabled:opacity-50 flex items-center justify-center",children:w?f.jsx(Jt,{className:"animate-spin",size:16}):f.jsx(vw,{size:16})})]}),$&&f.jsx("p",{className:"text-xs text-pandora-pink mt-1",children:$})]})]})]})]})}function AJ(){const{user:t}=Fr(),e=Nr(v=>v.userStats),n=Nr(v=>v.setUserStats),[r,s]=I.useState(""),[i,o]=I.useState(!1),[l,a]=I.useState(!1),[u,d]=I.useState(null),[h,p]=I.useState([]),[g,w]=I.useState([]);I.useEffect(()=>{(async()=>{if(!t)return;const _=await e_({uid:t.uid,displayName:t.displayName,email:t.email,photoURL:t.photoURL});s(_.displayName),n(_.stats),a(!0);const b=await jp(t.uid);p(b.map(O=>O.targetUid))})().catch(()=>a(!0))},[t,n]),I.useEffect(()=>{const v=xn(Ut(Ue,"profiles"),_=>{const b=_.docs.map(O=>O.data());w(b)});return()=>v()},[]);const x=async()=>{if(t){o(!0),d(null);try{await bK(t.uid,{displayName:r}),d("Saved.")}catch(v){const _=v instanceof Error?v.message:"Failed to save profile.";d(_)}finally{o(!1)}}},E=async v=>{!t||v===t.uid||(h.includes(v)?(await l_(t.uid,v),p(_=>_.filter(b=>b!==v))):(await a_(t.uid,v),p(_=>[..._,v])))};return l?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2 text-pandora-text",children:[f.jsx(rk,{size:18,className:"text-pandora-text"}),f.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:"Settings"})]}),f.jsx("span",{className:"text-xs text-pandora-muted font-mono uppercase",children:"Profile"})]}),f.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-2xl space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Display name"}),f.jsx("input",{value:r,onChange:v=>s(v.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-2xl font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to",placeholder:"Your alias"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"Traits"}),f.jsx("p",{className:"text-xs text-pandora-muted",children:"System-assigned from experiments. Read-only."}),f.jsx("div",{className:"grid grid-cols-2 gap-3",children:["logic","altruism","aggression","credit"].map(v=>f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-2xl text-pandora-text text-sm",children:[f.jsx("span",{className:"uppercase text-pandora-muted",children:v}),f.jsx("span",{className:"font-mono",children:e[v]})]},v))})]}),u&&f.jsx("p",{className:"text-xs text-pandora-accent-from",children:u}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{onClick:x,disabled:i,className:"px-4 py-2 border border-transparent bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-white font-semibold uppercase text-xs rounded-full hover:shadow-[0_12px_32px_-8px_rgba(110,200,255,0.8)] transition disabled:opacity-50",children:i?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(Jt,{size:14,className:"animate-spin"})," Saving..."]}):f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(tk,{size:14})," Save"]})})})]}),f.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-2xl space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("div",{className:"flex items-center gap-2 text-pandora-text",children:f.jsx("span",{className:"text-sm font-semibold",children:"Links"})}),f.jsx("span",{className:"text-[11px] text-pandora-muted uppercase",children:"Follow users"})]}),f.jsxs("div",{className:"space-y-2",children:[g.filter(v=>v.uid!==(t==null?void 0:t.uid)).map(v=>{const _=h.includes(v.uid);return f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-pandora-text",children:v.displayName||v.uid.slice(0,6)}),f.jsx("p",{className:"text-[11px] text-pandora-muted",children:v.uid})]}),f.jsx("button",{onClick:()=>E(v.uid),className:`px-3 py-2 text-xs uppercase border rounded-sm ${_?"border-pandora-pink text-pandora-pink":"border-pandora-neon text-pandora-neon"}`,children:_?"Unlink":"Link"})]},v.uid)}),g.filter(v=>v.uid!==(t==null?void 0:t.uid)).length===0&&f.jsx("p",{className:"text-sm text-pandora-muted",children:"No other profiles yet."})]})]})]}):f.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted text-sm",children:[f.jsx(Jt,{size:16,className:"animate-spin"})," Loading profile..."]})}function CJ(){const{user:t}=Fr(),e=Lc(),[n,r]=I.useState(""),[s,i]=I.useState([]),[o,l]=I.useState(!1),[a,u]=I.useState([]);I.useEffect(()=>{(async()=>{if(!t)return;const w=await jp(t.uid);u(w.map(x=>x.targetUid))})().catch(()=>{})},[t]);const d=async()=>{if(!n.trim()){i([]);return}l(!0);const g=n.trim().toLowerCase();try{const w=g,x=g+"",E=Xs(Ut(Ue,"profiles"),Yy("displayNameLower",">=",w),Yy("displayNameLower","<=",x),Ys("displayNameLower","asc"),t2(20)),_=(await s2(E)).docs.map(b=>b.data()).filter(b=>b.uid!==(t==null?void 0:t.uid));i(_)}finally{l(!1)}},h=async g=>{t&&(a.includes(g)?(await l_(t.uid,g),u(w=>w.filter(x=>x!==g))):(await a_(t.uid,g),u(w=>[...w,g])))},p=I.useMemo(()=>!o&&n&&s.length===0,[o,n,s.length]);return f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-2 text-pandora-text",children:[f.jsx(nk,{size:18,className:"text-pandora-text"}),f.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:"Search Users"})]})}),f.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-2xl space-y-3",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{value:n,onChange:g=>r(g.target.value),onKeyDown:g=>g.key==="Enter"&&d(),className:"flex-1 bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-2xl font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-accent-to",placeholder:"Search by display name"}),f.jsx("button",{onClick:d,className:"px-4 py-2 border border-transparent bg-gradient-to-r from-pandora-accent-from to-pandora-accent-to text-pandora-bg font-semibold uppercase text-xs rounded-full hover:shadow-lg transition",children:"Go"})]}),o&&f.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted text-sm",children:[f.jsx(Jt,{size:16,className:"animate-spin"})," Searching..."]}),p&&f.jsx("p",{className:"text-sm text-pandora-muted",children:"No users found."}),f.jsx("div",{className:"space-y-2",children:s.map(g=>{const w=a.includes(g.uid);return f.jsxs("div",{className:"flex items-center justify-between border border-pandora-border px-3 py-2 rounded-2xl hover:bg-white/5 cursor-pointer transition",onClick:()=>e(`/u/${g.uid}`),children:[f.jsxs("div",{className:"min-w-0",children:[f.jsx("p",{className:"text-sm text-pandora-text truncate",children:g.displayName||g.uid}),f.jsx("p",{className:"text-[11px] text-pandora-muted truncate",children:g.email||g.uid})]}),f.jsxs("button",{onClick:x=>{x.stopPropagation(),h(g.uid)},className:`px-3 py-2 text-xs uppercase border rounded-full flex items-center gap-2 ${w?"border-transparent bg-gradient-to-r from-pandora-accent-from/70 to-pandora-accent-to/70 text-pandora-bg":"border-pandora-border text-pandora-text hover:border-pandora-accent-to hover:text-pandora-text"}`,children:[w?f.jsx(WO,{size:14}):f.jsx(HO,{size:14}),w?"Unlink":"Link"]})]},g.uid)})})]})]})}function kJ(){const t=o2(w=>w.profile),[e,n]=I.useState(""),[r,s]=I.useState(""),[i,o]=I.useState(!1),[l,a]=I.useState(""),[u,d]=I.useState(!1),h=(t==null?void 0:t.role)==="admin";I.useEffect(()=>{n("[ NEW DATA + ]"),s("[SYSTEM: Experimental overlay active]")},[]);const p=async()=>{o(!0);try{await TK({primaryButtonLabel:e.trim()||void 0,tickerMessage:r.trim()||void 0})}finally{o(!1)}},g=async()=>{if(l.trim()){d(!0);try{await bc(Ut(Ue,"events"),{type:"broadcast",message:l.trim(),createdAt:Zr(),createdBy:(t==null?void 0:t.uid)||"admin"}),a("")}finally{d(!1)}}};return h?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2 text-pandora-text",children:[f.jsx(sk,{size:18,className:"text-pandora-neon"}),f.jsx("h2",{className:"text-lg font-semibold tracking-wide",children:"Admin Console"})]}),f.jsx("span",{className:"text-xs text-pandora-muted font-mono uppercase",children:"Experiments"})]}),f.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm space-y-3",children:[f.jsx("div",{className:"text-xs uppercase text-pandora-muted font-semibold",children:"UI Overrides"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-[11px] uppercase text-pandora-muted",children:"Primary Button Label"}),f.jsx("input",{value:e,onChange:w=>n(w.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon",placeholder:"[ NEW DATA + ]"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-[11px] uppercase text-pandora-muted",children:"Ticker Message"}),f.jsx("input",{value:r,onChange:w=>s(w.target.value),className:"w-full bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon",placeholder:"[SYSTEM: Experimental overlay active]"})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{onClick:p,disabled:i,className:"px-4 py-2 border border-pandora-neon text-pandora-neon bg-transparent font-semibold uppercase text-xs rounded-sm hover:bg-pandora-neon hover:text-pandora-bg transition disabled:opacity-50",children:i?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(Jt,{size:14,className:"animate-spin"})," Saving..."]}):f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(tk,{size:14})," Save"]})})})]}),f.jsxs("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-2 text-pandora-text",children:[f.jsx(UO,{size:16,className:"text-pandora-neon"}),f.jsx("div",{className:"text-sm font-semibold",children:"Broadcast Event"})]}),f.jsx("textarea",{value:l,onChange:w=>a(w.target.value),className:"w-full h-24 bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-3 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon",placeholder:"Message to all users"}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{onClick:g,disabled:u||!l.trim(),className:"px-4 py-2 border border-pandora-neon text-pandora-neon bg-transparent font-semibold uppercase text-xs rounded-sm hover:bg-pandora-neon hover:text-pandora-bg transition disabled:opacity-50",children:u?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(Jt,{size:14,className:"animate-spin"})," Sending..."]}):"Broadcast"})})]})]}):f.jsx("div",{className:"border border-pandora-border bg-pandora-surface p-4 rounded-sm text-sm text-pandora-muted",children:"Admin access only."})}function IJ(){const{uid:t}=yw(),e=Lc(),{user:n}=Fr(),[r,s]=I.useState(null),[i,o]=I.useState([]),[l,a]=I.useState(!0),[u,d]=I.useState(!1),[h,p]=I.useState(null);I.useEffect(()=>{if(!t)return;const w=xn(sn(Ue,"profiles",t),x=>{x.exists()?s(x.data()):s(null)});return()=>w()},[t]),I.useEffect(()=>{if(!t)return;const w=Xs(Ut(Ue,"transmissions"),Yy("uid","==",t),Ys("createdAt","desc")),x=xn(w,E=>{o(E.docs.map(v=>({id:v.id,...v.data()}))),a(!1)},()=>a(!1));return()=>x()},[t]),I.useEffect(()=>{(async()=>{if(!n||!t)return;const x=await xJ(n.uid,t);p(x)})().catch(()=>p(null))},[n,t]);const g=async()=>{if(!(!n||!t||u)){d(!0);try{h?(await bJ(n.uid,t),p(!1)):(await EJ(n.uid,t),p(!0))}finally{d(!1)}}};return t?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(Qo,{username:(r==null?void 0:r.displayName)||"Subject",size:"md"}),f.jsxs("div",{className:"flex-1 space-y-2",children:[f.jsx("div",{className:"text-lg font-semibold text-pandora-text",children:(r==null?void 0:r.displayName)||"Subject"}),n&&n.uid!==t&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("button",{onClick:()=>e(`/messages/${t}`),className:"px-3 py-2 border border-pandora-border text-pandora-text text-xs uppercase rounded-sm hover:border-pandora-neon flex items-center gap-2",children:[f.jsx(al,{size:14}),"Message"]}),f.jsxs("button",{onClick:g,disabled:u||h===null,className:`px-3 py-2 text-xs uppercase rounded-sm flex items-center gap-2 ${h?"border border-pandora-neon text-pandora-neon":"border border-pandora-border text-pandora-text hover:border-pandora-neon"} disabled:opacity-50`,children:[f.jsx(DO,{size:14}),h?"Unlink":"Link"]})]})]})]}),l&&f.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted text-sm",children:[f.jsx(Jt,{size:16,className:"animate-spin"})," Loading..."]}),!l&&i.length===0&&f.jsx("div",{className:"text-sm text-pandora-muted",children:"No posts yet."}),f.jsx("div",{className:"space-y-4",children:i.map(w=>f.jsxs("article",{className:"space-y-2 border border-pandora-border p-4 bg-pandora-surface rounded-sm",children:[f.jsx("div",{className:"text-[11px] text-pandora-muted",children:w.createdAt&&"seconds"in w.createdAt?new Date(w.createdAt.seconds*1e3).toLocaleString():"Just now"}),w.type==="text"&&w.content&&f.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:w.content}),w.type==="sample"&&w.sampleUrl&&f.jsx("div",{className:"border border-pandora-border rounded-sm overflow-hidden bg-pandora-bg",children:f.jsx("video",{src:w.sampleUrl,className:"w-full h-64 object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0},w.sampleUrl)}),w.type==="sample"&&f.jsxs("span",{className:"text-[11px] uppercase text-pandora-neon font-semibold flex items-center gap-1",children:[f.jsx(Hf,{size:14})," Sample"]})]},w.id))})]}):f.jsx("div",{className:"text-pandora-muted text-sm",children:"No user specified."})}function RJ(){const{id:t}=yw(),{user:e}=Fr(),n=Nr(A=>A.isBlind()),[r,s]=I.useState(null),[i,o]=I.useState(!0),[l,a]=I.useState({count:0,liked:!1}),[u,d]=I.useState(""),[h,p]=I.useState([]),[g,w]=I.useState(!0),[x,E]=I.useState({}),[v,_]=I.useState({});I.useEffect(()=>{if(!t)return;const A=xn(sn(Ue,"transmissions",t),N=>{if(N.exists()){const M=N.data();s({id:t,...M}),a(P=>({count:M.likes||0,liked:P.liked}))}else s(null);o(!1)});return()=>A()},[t]),I.useEffect(()=>{if(!t)return;const A=Xs(Ut(Ue,"transmissions",t,"comments"),Ys("createdAt","desc")),N=xn(A,M=>{p(M.docs.map(P=>({id:P.id,...P.data()}))),E(P=>{const K={...P};return M.docs.forEach(H=>{const de=H.data(),q=P[H.id];if(K[H.id]={count:de.likes||0,liked:(q==null?void 0:q.liked)||!1},e&&(q==null?void 0:q.liked)===void 0){const B=sn(Ue,"transmissions",t,"comments",H.id,"likes",e.uid);ro(B).then(Q=>{E(Z=>({...Z,[H.id]:{count:de.likes||0,liked:Q.exists()}}))}).catch(()=>{})}}),K})});return()=>N()},[t,e]),I.useEffect(()=>{const A=xn(Ut(Ue,"profiles"),N=>{const M={};N.docs.forEach(P=>{const K=P.data();M[K.uid]={displayName:K.displayName,email:K.email}}),_(M)});return()=>A()},[]);const b=async()=>{if(!e||!t)return;const A=l;a({count:A.count+(A.liked?-1:1),liked:!A.liked});try{await t_(t,e.uid)}catch{a(A)}},O=async()=>{if(!e||!t)return;const A=u.trim();if(!A)return;const N=`temp-${Date.now()}`;d(""),p(M=>[{id:N,uid:e.uid,text:A,createdAt:{seconds:Date.now()/1e3,nanoseconds:0}},...M]),E(M=>({...M,[N]:{count:0,liked:!1}}));try{await n_(t,e.uid,A)}catch{}},V=async A=>{if(!e||!t)return;const N=x[A]||{count:0,liked:!1};E(M=>({...M,[A]:{count:N.count+(N.liked?-1:1),liked:!N.liked}}));try{await r_(t,A,e.uid)}catch{E(M=>({...M,[A]:N}))}},$=A=>{if(!A||!("seconds"in A))return"Just now";const N=Date.now()-A.seconds*1e3,M=Math.floor(N/6e4);if(M<1)return"Just now";if(M<60)return`${M}m ago`;const P=Math.floor(M/60);return P<24?`${P}h ago`:`${Math.floor(P/24)}d ago`},C=A=>{if(!A)return"User";const N=v[A];return(N==null?void 0:N.displayName)||(N==null?void 0:N.email)||"User"};if(i)return f.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted text-sm",children:[f.jsx(Jt,{size:16,className:"animate-spin"})," Loading..."]});if(!r)return f.jsx("div",{className:"text-sm text-pandora-muted",children:"Transmission not found."});const T=r.uid?n?"Subject-****":C(r.uid):"Unknown",R=r.type==="sample";return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs(ww,{to:r.uid?`/u/${r.uid}`:"#",className:"flex items-center gap-3",children:[f.jsx(Qo,{username:T,size:"sm"}),f.jsxs("div",{className:"min-w-0",children:[f.jsx("div",{className:"text-sm font-semibold text-pandora-text truncate",children:T}),f.jsx("div",{className:"text-[11px] text-pandora-muted",children:$(r.createdAt)})]})]}),r.type==="sample"&&f.jsxs("span",{className:"text-[11px] uppercase text-pandora-neon font-semibold flex items-center gap-1",children:[f.jsx(Hf,{size:14})," Sample"]})]}),R?f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-4",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-4 text-xs uppercase font-semibold tracking-wide",children:[f.jsxs("button",{onClick:b,className:kt("flex items-center gap-2",l.liked?"text-pandora-neon":"text-pandora-muted hover:text-pandora-text"),children:[f.jsx(Pi,{size:14}),f.jsxs("span",{children:[l.count," Likes"]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted",children:[f.jsx(al,{size:14}),f.jsxs("span",{children:[r.comments??h.length," Comments"]})]})]}),f.jsx("div",{className:"border border-pandora-border rounded-sm overflow-hidden bg-black relative",children:f.jsxs("div",{className:"relative w-full max-h-[80vh] aspect-[9/16]",children:[f.jsx("video",{src:r.sampleUrl,className:"w-full h-full object-contain bg-black",autoPlay:!0,muted:g,loop:!0,playsInline:!0,controls:!0},r.sampleUrl),f.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/35 to-transparent"}),f.jsx("button",{onClick:()=>w(A=>!A),className:"absolute top-3 left-3 z-10 w-10 h-10 flex items-center justify-center border border-pandora-border bg-pandora-bg/80 text-pandora-text hover:border-pandora-neon rounded-sm",title:g?"Unmute":"Mute",children:g?f.jsx(xw,{size:18}):f.jsx(_w,{size:18})})]})})]}),f.jsxs("div",{className:"space-y-3 border border-pandora-border rounded-sm p-3 bg-pandora-bg/60",children:[f.jsxs("div",{className:"flex gap-2 items-end",children:[f.jsx("textarea",{value:u,onChange:A=>d(A.target.value),placeholder:"Leave a comment...",className:"flex-1 h-20 bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-2 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon"}),f.jsx("button",{onClick:O,disabled:!u.trim(),className:"px-4 py-2 border border-pandora-neon text-pandora-neon text-[11px] uppercase rounded-sm hover:bg-pandora-neon hover:text-pandora-bg transition disabled:opacity-50 self-stretch",children:"Post"})]}),f.jsxs("div",{className:"space-y-2 max-h-[520px] overflow-y-auto",children:[h.map(A=>{const N=n?"Subject-****":C(A.uid),M=A.createdAt&&"seconds"in A.createdAt?new Date(A.createdAt.seconds*1e3).toLocaleTimeString():"Just now",P=x[A.id]||{count:A.likes||0,liked:!1};return f.jsxs("div",{className:"border border-pandora-border rounded-sm p-2 bg-pandora-bg",children:[f.jsxs("div",{className:"flex items-center justify-between text-[11px] text-pandora-muted",children:[f.jsx("span",{className:"truncate",children:N}),f.jsx("span",{children:M})]}),f.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:A.text}),f.jsxs("button",{onClick:()=>V(A.id),className:kt("mt-2 text-[11px] uppercase flex items-center gap-1",P.liked?"text-pandora-neon":"text-pandora-muted hover:text-pandora-text"),children:[f.jsx(Pi,{size:12})," ",P.count," Likes"]})]},A.id)}),h.length===0&&f.jsx("p",{className:"text-[11px] text-pandora-muted",children:"No comments yet."})]})]})]}):f.jsxs(f.Fragment,{children:[r.content&&f.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:r.content}),f.jsxs("div",{className:"flex items-center gap-4 text-xs uppercase font-semibold tracking-wide",children:[f.jsxs("button",{onClick:b,className:kt("flex items-center gap-2",l.liked?"text-pandora-neon":"text-pandora-muted hover:text-pandora-text"),children:[f.jsx(Pi,{size:14}),f.jsxs("span",{children:[l.count," Likes"]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-pandora-muted",children:[f.jsx(al,{size:14}),f.jsxs("span",{children:[r.comments??h.length," Comments"]})]})]}),f.jsxs("div",{className:"space-y-2 border border-pandora-border rounded-sm p-3 bg-pandora-bg/60",children:[f.jsxs("div",{className:"flex gap-2 items-end",children:[f.jsx("textarea",{value:u,onChange:A=>d(A.target.value),placeholder:"Leave a comment...",className:"flex-1 h-16 bg-pandora-bg border border-pandora-border text-pandora-text text-sm p-2 rounded-sm font-mono placeholder:text-pandora-muted focus:outline-none focus:border-pandora-neon"}),f.jsx("button",{onClick:O,disabled:!u.trim(),className:"px-4 py-2 border border-pandora-neon text-pandora-neon text-[11px] uppercase rounded-sm hover:bg-pandora-neon hover:text-pandora-bg transition disabled:opacity-50 self-stretch",children:"Post"})]}),f.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[h.map(A=>{const N=n?"Subject-****":C(A.uid),M=A.createdAt&&"seconds"in A.createdAt?new Date(A.createdAt.seconds*1e3).toLocaleTimeString():"Just now",P=x[A.id]||{count:A.likes||0,liked:!1};return f.jsxs("div",{className:"border border-pandora-border rounded-sm p-2 bg-pandora-bg",children:[f.jsxs("div",{className:"flex items-center justify-between text-[11px] text-pandora-muted",children:[f.jsx("span",{className:"truncate",children:N}),f.jsx("span",{children:M})]}),f.jsx("p",{className:"text-sm text-pandora-text whitespace-pre-line",children:A.text}),f.jsxs("button",{onClick:()=>V(A.id),className:kt("mt-2 text-[11px] uppercase flex items-center gap-1",P.liked?"text-pandora-neon":"text-pandora-muted hover:text-pandora-text"),children:[f.jsx(Pi,{size:12})," ",P.count," Likes"]})]},A.id)}),h.length===0&&f.jsx("p",{className:"text-[11px] text-pandora-muted",children:"No comments yet."})]})]})]})]})}function PJ(){const{toasts:t,removeToast:e}=u_(),n=Lc();return I.useEffect(()=>{t.forEach(r=>{if(!r.timeout)return;const s=window.setTimeout(()=>e(r.id),r.timeout);return()=>window.clearTimeout(s)})},[t,e]),t.length?f.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-3 w-[280px]",children:t.map(r=>f.jsx("div",{onClick:()=>{r.href&&n(r.href)},className:`border border-white/15 bg-pandora-surface/90 backdrop-blur-md rounded-2xl shadow-lg p-3 text-pandora-text animate-slideDown ${r.href?"cursor-pointer hover:border-white/30":""}`,children:f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsxs("div",{className:"flex-1",children:[r.title&&f.jsx("div",{className:"text-sm font-semibold",children:r.title}),r.description&&f.jsx("div",{className:"text-xs text-pandora-muted mt-1",children:r.description})]}),f.jsx("button",{onClick:()=>e(r.id),className:"text-pandora-muted hover:text-pandora-text","aria-label":"Dismiss",children:f.jsx(GO,{size:14})})]})},r.id))}):null}function NJ(){const{user:t}=Fr(),{setSocketStatus:e}=_N(),n=ra(),r=u_(i=>i.pushToast),s=I.useRef(new Set);return I.useEffect(()=>{t&&Op(t.uid).then(()=>e(!0)).catch(()=>e(!1))},[t,e]),I.useEffect(()=>{if(!t)return;const i=Ef(o=>{if(n.pathname.startsWith("/messages"))return;const l=o.content,a=typeof(l==null?void 0:l.text)=="string"?l.text:"",u=(l==null?void 0:l.fromUid)||o.sender_id,d=(l==null?void 0:l.toUid)||(l==null?void 0:l.targetUid)||"",h=u===t.uid,p=h?d:u;if(!p)return;const g=(l==null?void 0:l.displayName)||(l==null?void 0:l.nickname)||(l==null?void 0:l.username)||(h?"You":p)||"Someone",w=`/messages/${p}`;r({title:"New message",description:`${g}: ${a.slice(0,80)||"Sent a message"}`,href:w})});return()=>i()},[n.pathname,r,t]),I.useEffect(()=>{if(!t)return;const i=`pandora_dm_cache_${t.uid}_`,o=[];for(let u=0;u<localStorage.length;u+=1){const d=localStorage.key(u);if(d&&d.startsWith(i)){const h=d.slice(i.length);h&&o.push(h)}}const l=o.slice(0,10);(async()=>{for(const u of l)if(!s.current.has(u))try{await mh(t.uid,u),s.current.add(u)}catch{}})()},[t,n.pathname]),f.jsxs(f.Fragment,{children:[f.jsx(dO,{children:f.jsxs(Gn,{element:f.jsx(AK,{}),children:[f.jsx(Gn,{path:"/",element:f.jsx(cT,{})}),f.jsx(Gn,{path:"/sectors",element:f.jsx(vJ,{})}),f.jsx(Gn,{path:"/samples",element:f.jsx(_J,{})}),f.jsx(Gn,{path:"/profile",element:f.jsx(SJ,{})}),f.jsx(Gn,{path:"/u/:uid",element:f.jsx(IJ,{})}),f.jsx(Gn,{path:"/messages",element:f.jsx(kT,{})}),f.jsx(Gn,{path:"/messages/:uid",element:f.jsx(kT,{})}),f.jsx(Gn,{path:"/t/:id",element:f.jsx(RJ,{})}),f.jsx(Gn,{path:"/settings",element:f.jsx(AJ,{})}),f.jsx(Gn,{path:"/search",element:f.jsx(CJ,{})}),f.jsx(Gn,{path:"/admin",element:f.jsx(kJ,{})}),f.jsx(Gn,{path:"*",element:f.jsx(cT,{})})]})}),f.jsx(PJ,{})]})}Cg.createRoot(document.getElementById("root")).render(f.jsx(T0.StrictMode,{children:f.jsx(vO,{children:f.jsx(NJ,{})})}));export{so as f,Ol as t};
